_jsload_('mouse', 'f.Pb.ob({ZF:"_docMsMov",e1:function(){var a=this.Oa.Kc;f.C.g(a,"mousedown",this.BV,this);this.hK||(this.hK=function(){this.wA=!1},this.aE=function(a){var c=this.vg(a,!0);this.r(this.ZF,{event:a,HW:c})});f.C.g(document,"mousedown",this.hK,this);f.C.g(document,"mouseout",this.aE,this);f.C.g(document,"mousemove",this.aE,this);f.C.g(a,"mousemove",this.CV,this);f.C.g(a,"mouseover",this.rca,this);f.C.g(a,"mouseup",this.DV,this);f.C.g(a,"contextmenu",this.Gz,this);f.C.g(a,"rightclick",this.Gz,this);this.g(this.ZF, this.SW,this)},rca:function(){this.wA=!0},o5:function(){var a=this.Oa.Kc;f.C.I(a,"mousedown",this.BV,this);f.C.I(document,"mousedown",this.hK,this);f.C.I(document,"mouseout",this.aE,this);this.I(this.ZF,this.SW,this);f.C.I(document,"mousemove",this.aE,this);f.C.I(a,"mousemove",this.CV,this);f.C.I(a,"mouseup",this.DV,this);f.C.I(a,"contextmenu",this.Gz,this);f.C.I(a,"rightclick",this.Gz,this)},g1:function(){f.C.g(this.Oa.Kc,"mousewheel",this.AV,this)},r5:function(){f.C.I(this.Oa.Kc,"mousewheel",this.AV, this)},f1:function(){this.g("mousemove",this.tR);this.g("mouseout",this.uR);this.g("mouseover",this.vR);this.g("mouseup",this.wR);this.g("mousedown",this.sR);this.g("rightclick",this.yR);this.g("contextmenu",this.kR);this.g("rdblclick",this.zR)},q5:function(){this.I("mousemove",this.tR);this.I("mouseout",this.uR);this.I("mouseover",this.vR);this.I("mouseup",this.wR);this.I("mousedown",this.sR);this.I("rightclick",this.yR);this.I("contextmenu",this.kR);this.I("rdblclick",this.zR)},keyboardEnableChanged:function(){this.get("keyboardEnable")? this.c1():this.gH()},scrollWheelChanged:function(){this.get("scrollWheel")?this.g("mousewheel",this.xR):this.I("mousewheel",this.xR)},Gz:function(a){f.C.preventDefault(a)},g5:function(a){var b=this.vg(a,!1,!0),c=0;"3D"==this.J.view.type?(this.ha("mousewheel",b),a.wheelDelta?(c=a.wheelDelta,window.opera&&9.5>parseFloat(window.opera.version())&&(c=-c)):a.detail&&(c=-a.detail,120!==c&&-120!==c&&(c*=20)),a=c/800,a=this.get("zoom")+a,this.OT(a,b.Ad,!0)):(a.wheelDelta?(c=a.wheelDelta/120,window.opera&& 9.5>parseFloat(window.opera.version())&&(c=-c)):a.detail&&(c=-a.detail),this.R.wx=(this.R.wx||0)+c,this.r("mousewheel",b))},AV:function(a){this.get("scrollWheel")&&this.g5(a)},iK:function(a,b){f.C.preventDefault(a);b=this.vg(a);var c=this.R;if(!this.vr(b.ub,c.Vp)){c.Vp=b.ub;if(c.Tn){if(!c.Hc&&(b.ub.x!==this.R.rm.x||b.ub.y!==this.R.rm.y)){var d;this.DG(c.Up)&&c.Up.get("draggable")&&(d=c.Up);!d&&this.get("dragEnable")&&(d=this);d&&(c.Hc=!0,c.Qm=d,c.Ff=c.rm,c.Om=c.JL)}c.Hc&&(c.Pm=b,b.button=a.buttons|| a.button||0,this.xH())}if(a.preventDefault)a.preventDefault();else return!1}},PC:function(a){f.j.Ma(this.K,"amap-drag");a=this.vg(a);f.j.cba();f.j.wU();this.R&&(this.R.Hc=!1);this.hg&&!this.Ng&&this.r("moveend");this.R.om&&(this.R.om=!1,this.R.Hc=!1,this.R.Qm.r("dragend",a));this.R.Tn=!1;this.R.Vp=null;this.R.Ff=null;f.C.I(document,"mousemove",this.iK,this);f.C.I(document,"mouseup",this.PC,this);try{f.C.I(window.parent.document,"mouseup",this.PC,this)}catch(b){}f.C.kia(this.Oa.Kc)},sca:function(a, b){b=b||this.vg(a);var c=this.get("size"),d;0<=b.ub.x&&b.ub.x<=c.width&&0<=b.ub.y&&b.ub.y<=c.height&&(d=!0);this.cW&&!d?this.r("mouseout",b):!this.cW&&d&&this.r("mouseover",b);this.cW=d},CV:function(a){f.C.preventDefault(a);f.l.Lo&&(a=window.event);if(a){a=this.vg(a);var b=this.R,c=a.jd,d;this.R.Tn||(c instanceof f.D.Hg?d=c.Oc.get("cursor"):c instanceof f.w.oc?d=c.get("cursor"):c===this&&(d=c.J.Nh.defaultCursor),d=this.J.get("optimalCursor")||d,this.K.style.cursor=d||"");d=b.K4;var e=a.kq;d!==e&& (d&&b.FQ&&b.FQ.r("mouseout",a),e&&c&&(c.r("mouseover",a),c.get("topWhenMouseOver")&&c.Oc.setTop(!0)));a.jd.r("mousemove",a);a.jd!==this&&this.r("mousemove",a);b.K4=a.kq||null;b.FQ=a.jd||null}},R:{Hc:!1},BV:function(a){this.wA=!0;f.j.Aaa();f.j.nU();this.R.Vp=null;this.R.Ff=null;var b=this.vg(a,!0);this.R.qU=new Date;this.R.Up=b.jd;this.R.rm=b.ub;this.R.I4=b.button;this.R.Tn=!0;this.R.J4=b;this.R.Hc||(this.R.JL=b);this.Qd&&this.Qd.stop();var c=b.jd;!c.Oc&&c.get("dragEnable")&&(this.R.Tn=!0);f.j.Ga(this.K, "amap-drag");b.jd.r("mousedown",b);b.jd!==this&&this.r("mousedown",b);f.C.Hga(this.Oa.Kc);f.C.g(document,"mousemove",this.iK,this);f.C.g(document,"mouseup",this.PC,this);try{window.parent.document&&f.l.Lo&&f.C.g(window.parent.document,"mouseup",this.PC,this)}catch(d){}f.C.stopPropagation(a)},SW:function(a){this.sca(a.event,a.HW)},Ska:function(a){this.iK(a.event,a.HW)},DV:function(a){a=this.vg(a);var b=a.jd,c=this.J.get("allBubble")||b.get("bubble");b!==document&&(b.r("mouseup",a),a.jd!==this&&c&& this.r("mouseup",a));this.vr(a.ub,this.R.rm)&&(this.Ue&&this.vr(this.R.Rs,a.ub)&&a.button===this.R.I4?(clearTimeout(this.Ue),this.Ue=null,f.C.hW(a)?c?(b.r("dblclick",a),b!==this&&this.r("dblclick",a)):b.r("dblclick",a):b.r("rdblclick",a),this.R.Rs=null):(f.C.hW(a)?(this.r("clickstart",a),c?(b.r("click",a),b!==this&&this.r("click",a)):(b.r("click",a),this.r("closeOverlays",a)),b.get("topWhenClick")&&b.Oc.setTop(!0),this.r("clickend",a)):c?(b.r("rightclick",a),b!==this&&this.r("rightclick",a),this.r("contextmenu", a)):(b.r("rightclick",a),b.r("contextmenu",a)),this.R.Rs=a.ub,this.Ue&&clearTimeout(this.Ue),this.Ue=setTimeout(f.a.bind(function(){clearTimeout(this.Ue);this.Ue=null;this.R.Rs=null},this),260)))}});f.Pb.ob({xR:function(a){this.ha("mousewheel",a);var b=this;if(1<=Math.abs(this.R.wx)&&!this.WZ){var c=this.R.wx;if(1<=c)c=1;else if(-1>=c)c=-1;else return;b.$A(a.Ad,c);this.R.wx=0;this.WZ=!0;setTimeout(function(){b.WZ=!1;b.R.wx=0},f.l.ky?50:40)}},tR:function(a){this.ha("mousemove",a)},uR:function(a){this.ha("mouseout",a)},vR:function(a){this.ha("mouseover",a)},wR:function(a){this.ha("mouseup",a)},sR:function(a){this.ha("mousedown",a)},yR:function(a){this.ha("rightclick",a)},kR:function(a){this.ha("contextmenu", a)},zR:function(a){this.get("doubleClickZoom")&&this.get("zoomEnable")&&this.$A(a.Ad,-1);this.ha("rdblclick",a)}});f.Pb.ob({q4:function(){this.kw={left:[37],right:[39],rC:[40],Yu:[38],dh:[187,107,61],eh:[189,109,173]};this.Q1={left:this.ot(this.XA(100,0)),right:this.ot(this.XA(-100,0)),rC:this.ot(this.XA(0,-100)),Yu:this.ot(this.XA(0,100)),dh:this.ot(this.hT(1)),eh:this.ot(this.hT(-1))}},c1:function(){this.get("keyboardEnable")&&(this.kw||this.q4(),f.C.g(document,"keydown",this.QA,this),f.C.g(document,"keyup",this.gR,this))},gH:function(){f.C.I(document,"keydown",this.QA,this);f.C.I(document,"keyup",this.gR,this)}, gR:function(a){var b=a.keyCode;!a.ctrlKey||37!==b&&39!==b||this.set("refresh",1)},QA:function(a){var b=a.keyCode,c;for(c in this.kw)if(this.kw.hasOwnProperty(c))for(var d=0;d<this.kw[c].length;d+=1)if(b===this.kw[c][d]){if(!this.wA)return;if(!a.ctrlKey&&!a.shiftKey){this.Q1[c]();f.C.preventDefault(a);return}37===b?(this.N4(),f.C.preventDefault(a)):39===b?(this.E8(),f.C.preventDefault(a)):38===b?(this.H7(),f.C.preventDefault(a)):40===b&&(this.G7(),f.C.preventDefault(a))}},ot:function(a){return function(){a()}}, N4:function(){this.get("rotateEnable")&&(this.r("rotate"),this.set("rotation",-8+parseFloat(this.get("rotation"))%360))},E8:function(){this.get("rotateEnable")&&(this.r("rotate"),this.set("rotation",8+parseFloat(this.get("rotation"))%360))},G7:function(){this.get("rotateEnable")&&this.set("pitch",-4+parseFloat(this.get("pitch")))},H7:function(){this.get("rotateEnable")&&this.set("pitch",4+parseFloat(this.get("pitch")))},hT:function(a){var b=this.J;return function(){1===a?b.zoomIn():b.zoomOut()}}, XA:function(a,b){var c=this.J;return function(){c.panBy(a,b)}}}); ')

_jsload_('vectorlayer', '(function(a){a.aL||(a.aL=function(){function a(b,c,d){for(var e=0,g=d.length;e<g;e++){var h=d.charCodeAt(e);if(128>h)b.setUint8(c++,h>>>0&127|0);else if(2048>h)b.setUint8(c++,h>>>6&31|192),b.setUint8(c++,h>>>0&63|128);else if(65536>h)b.setUint8(c++,h>>>12&15|224),b.setUint8(c++,h>>>6&63|128),b.setUint8(c++,h>>>0&63|128);else if(1114112>h)b.setUint8(c++,h>>>18&7|240),b.setUint8(c++,h>>>12&63|128),b.setUint8(c++,h>>>6&63|128),b.setUint8(c++,h>>>0&63|128);else throw Error("bad codepoint "+h);}}function c(a, b,c){var d="",e=b;for(b+=c;e<b;e++)if(c=a.getUint8(e),0===(c&128))d+=String.fromCharCode(c);else if(192===(c&224))d+=String.fromCharCode((c&15)<<6|a.getUint8(++e)&63);else if(224===(c&240))d+=String.fromCharCode((c&15)<<12|(a.getUint8(++e)&63)<<6|(a.getUint8(++e)&63)<<0);else if(240===(c&248))d+=String.fromCharCode((c&7)<<18|(a.getUint8(++e)&63)<<12|(a.getUint8(++e)&63)<<6|(a.getUint8(++e)&63)<<0);else throw Error("Invalid byte "+c.toString(16));return d}function d(a){for(var b=0,c=0,d=a.length;c< d;c++){var e=a.charCodeAt(c);if(128>e)b+=1;else if(2048>e)b+=2;else if(65536>e)b+=3;else if(1114112>e)b+=4;else throw Error("bad codepoint "+e);}return b}function e(a,b){this.offset=b||0;this.view=a}function g(c,e,h){var k=typeof c;if("string"===k){var q=d(c);if(32>q)return e.setUint8(h,q|160),a(e,h+1,c),1+q;if(256>q)return e.setUint8(h,217),e.setUint8(h+1,q),a(e,h+2,c),2+q;if(65536>q)return e.setUint8(h,218),e.setUint16(h+1,q),a(e,h+3,c),3+q;if(4294967296>q)return e.setUint8(h,219),e.setUint32(h+ 1,q),a(e,h+5,c),5+q}if(c instanceof ArrayBuffer){q=c.byteLength;if(256>q)return e.setUint8(h,196),e.setUint8(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+2),2+q;if(65536>q)return e.setUint8(h,197),e.setUint16(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+3),3+q;if(4294967296>q)return e.setUint8(h,198),e.setUint32(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+5),5+q}if("number"===k){if(c<<0!==c)return e.setUint8(h,203),e.setFloat64(h+1,c),9;if(0<=c){if(128>c)return e.setUint8(h, c),1;if(256>c)return e.setUint8(h,204),e.setUint8(h+1,c),2;if(65536>c)return e.setUint8(h,205),e.setUint16(h+1,c),3;if(4294967296>c)return e.setUint8(h,206),e.setUint32(h+1,c),5;throw Error("Number too big 0x"+c.toString(16));}if(-32<=c)return e.setInt8(h,c),1;if(-128<=c)return e.setUint8(h,208),e.setInt8(h+1,c),2;if(-32768<=c)return e.setUint8(h,209),e.setInt16(h+1,c),3;if(-2147483648<=c)return e.setUint8(h,210),e.setInt32(h+1,c),5;throw Error("Number too small -0x"+(-c).toString(16).substr(1)); }if("undefined"===k)return e.setUint8(h,212),e.setUint8(h+1,0),e.setUint8(h+2,0),3;if(null===c)return e.setUint8(h,192),1;if("boolean"===k)return e.setUint8(h,c?195:194),1;if("object"===k){var k=0,r=Array.isArray(c),s=null;r?q=c.length:(s=Object.keys(c),q=s.length);16>q?(e.setUint8(h,q|(r?144:128)),k=1):65536>q?(e.setUint8(h,r?220:222),e.setUint16(h+1,q),k=3):4294967296>q&&(e.setUint8(h,r?221:223),e.setUint32(h+1,q),k=5);if(r)for(r=0;r<q;r++)k+=g(c[r],e,h+k);else for(r=0;r<q;r++)var u=s[r],k=k+g(u, e,h+k),k=k+g(c[u],e,h+k);return k}throw Error("Unknown type "+k);}function h(a){var b=typeof a;if("string"===b){var c=d(a);if(32>c)return 1+c;if(256>c)return 2+c;if(65536>c)return 3+c;if(4294967296>c)return 5+c}if(a instanceof ArrayBuffer){c=a.byteLength;if(256>c)return 2+c;if(65536>c)return 3+c;if(4294967296>c)return 5+c}if("number"===b){if(a<<0!==a)return 9;if(0<=a){if(128>a)return 1;if(256>a)return 2;if(65536>a)return 3;if(4294967296>a)return 5;if(1.8446744073709552E19>a)return 9;throw Error("Number too big 0x"+ a.toString(16));}if(-32<=a)return 1;if(-128<=a)return 2;if(-32768<=a)return 3;if(-2147483648<=a)return 5;if(-9223372036854775E3<=a)return 9;throw Error("Number too small -0x"+a.toString(16).substr(1));}if("undefined"===b)return 3;if("boolean"===b||null===a)return 1;if("object"===b){b=0;if(Array.isArray(a))for(var c=a.length,e=0;e<c;e++)b+=h(a[e]);else for(var g=Object.keys(a),c=g.length,e=0;e<c;e++)var k=g[e],b=b+(h(k)+h(a[k]));if(16>c)return 1+b;if(65536>c)return 3+b;if(4294967296>c)return 5+b;throw Error("Array or object too long 0x"+ c.toString(16));}throw Error("Unknown type "+b);}var k={};k.Rna=a;k.Qna=c;k.Pna=d;e.prototype.map=function(a){for(var b={},c=0;c<a;c++){var d=this.parse();b[d]=this.parse()}return b};e.prototype.tI=function(a){var b=new ArrayBuffer(a);(new Uint8Array(b)).set(new Uint8Array(this.view.buffer,this.offset,a),0);this.offset+=a;return b};e.prototype.dE=function(a){var b=c(this.view,this.offset,a);this.offset+=a;return b};e.prototype.jI=function(a){for(var b=Array(a),c=0;c<a;c++)b[c]=this.parse();return b}; e.prototype.parse=function(){var a=this.view.getUint8(this.offset);if(160===(a&224))return this.offset++,this.dE(a&31);if(128===(a&240))return this.offset++,this.map(a&15);if(144===(a&240))return this.offset++,this.jI(a&15);if(0===(a&128))return this.offset++,a;if(224===(a&224))return a=this.view.getInt8(this.offset),this.offset++,a;if(212===a&&0===this.view.getUint8(this.offset+1))this.offset+=3;else{switch(a){case 217:return a=this.view.getUint8(this.offset+1),this.offset+=2,this.dE(a);case 218:return a= this.view.getUint16(this.offset+1),this.offset+=3,this.dE(a);case 219:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.dE(a);case 196:return a=this.view.getUint8(this.offset+1),this.offset+=2,this.tI(a);case 197:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.tI(a);case 198:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.tI(a);case 192:return this.offset++,null;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 204:return a=this.view.getUint8(this.offset+ 1),this.offset+=2,a;case 205:return a=this.view.getUint16(this.offset+1),this.offset+=3,a;case 206:return a=this.view.getUint32(this.offset+1),this.offset+=5,a;case 207:var a=this.view.getUint32(this.offset+1),b=this.view.getUint32(this.offset+5);this.offset+=9;return 4294967296*a+b;case 208:return a=this.view.getInt8(this.offset+1),this.offset+=2,a;case 209:return a=this.view.getInt16(this.offset+1),this.offset+=3,a;case 210:return a=this.view.getInt32(this.offset+1),this.offset+=5,a;case 211:return a= this.view.getInt32(this.offset+1),b=this.view.getUint32(this.offset+5),this.offset+=9,4294967296*a+b;case 222:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.map(a);case 223:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.map(a);case 220:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.jI(a);case 221:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.jI(a);case 202:return a=this.view.getFloat32(this.offset+1),this.offset+=5,a;case 203:return a= this.view.getFloat64(this.offset+1),this.offset+=9,a}throw Error("Unknown type 0x"+a.toString(16));}};k.Bj=function(a){var b=new DataView(a),b=new e(b),c=b.parse();if(b.offset!==a.byteLength)throw Error(a.byteLength-b.offset+" trailing bytes");return c};k.qJ=function(a){var b=new ArrayBuffer(h(a)),c=new DataView(b);g(a,c,0);return b};return{yU:function(a,b){b(null,{Zt:a.Zt,dd:a.dd,Ca:k.qJ(a.Ca)})},kU:function(a,b){b(null,{Zt:a.Zt,dd:a.dd,Ca:k.Bj(a.Ca)})}}},a.ju=a.l.en?new a.ts(a.aL,{hostWorker:a.MC, clientId:"msg",lazy:"untilCall"}):new a.ts(function(){},{hostWorker:a.MC,clientId:"msg",lazy:"untilCall"}))})(f);!f.$E&&f.l.en&&(f.$E=function(){function a(a,b){return a.bind?a.bind(b):function(){a.apply(b,arguments)}}function b(){v="unsupport";p.length=0;c();this.r("disable")}function c(){s&&(clearTimeout(s.X$),s.onopen=s.onmessage=s.onerror=null,3!==s.readyState&&s.close(),s=null)}function d(){A=!0;this.flush();this.r("open")}function e(){A?(v="closed",c()):b.call(this)}function g(a,b){if("unsupport"===v)return!1;"connected"===v?h.call(this,a):("closed"===v&&this.W$(),p.push({data:a,Oy:b}));x+=1}function h(a){var c= this;s.readyState===WebSocket.OPEN&&(s.send(a),t&&clearTimeout(t),t=setTimeout(function(){b.call(c);t=null},5E3),y&&clearTimeout(y),y=setTimeout(function(){c.close();y=null},1E4))}var k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,l={},m="undefined"===typeof window||!k,n=null,p=[],q=[],r=+new Date,s=null,u=1,v="closed",x=0,t=null,y=null,A=!1;m||(l.Lda=function(){if(q.length){var a=f.A.Qb+offlineMap.domain+"count?",b=["type=v","k="+f.A.key,"u="+f.A.jo,"m="+(f.l.Z?1:0),"pf="+f.l.wr,"frq="+ q.join(",")];new f.Sa.bb(a+b.join("&"))}},f.extend(l,f.ka),f.event.U(window,"beforeunload",l.Lda,l));l.Bea=function(a){if("encode"===a.dd)g.call(this,a.Ca);else if("decode"===a.dd)if(a=a.Ca,"ack"===a.type)switch(a.command){case "tiles":this.r("ack",a);break;case "retain":v="connected";this.flush();break;case "close":b.call(this)}else 0===a.content.errcode&&("tiles"===a.type?this.r("tiles",a):"traffic"===a.type&&this.r("traffic",a))};l.Lga=function(a){x=a};l.Qq=function(){return x};l.close=function(){s&& (v="closed",s.close())};l.W$=function(){var c=this;"closed"===v&&(null===n&&(n=m?this.A.lN+"://"+this.A.av:f.A.lN+"://"+f.A.av),s=new WebSocket(n),s.binaryType="arraybuffer",v="connecting",s.onopen=a(d,this),s.onclose=a(e,this),s.onerror=a(b,this),s.ontimeout=a(b,this),s.onmessage=a(this.Cea,this),s.X$=setTimeout(function(){s.readyState!==WebSocket.OPEN&&b.call(c)},1200))};l.Zx=function(){return"connected"===v};l.Zca=function(){return"closed"===v};l.flush=function(){if("connected"===v){for(var a= 0,b=p.length;a<b;a++)h.call(this,p[a].data);p.length=0}};l.EK=function(){return"unsupport"!==v};l.send=function(a){var b=this,c=u++;a={dd:"encode",Ca:a,Zt:r};var d=this.yU;m||(d=f.ju.yU);d(a,function(a,d){a||g.call(b,d.Ca,c)});return c};l.vU=function(a){for(var b=0,c=p.length;b<c;b++)if(p[b].Oy===a)return p.splice(b,1),!0;return!1};l.C9=function(a){q.push(a)};l.Cea=function(a){var b=this;t&&(clearTimeout(t),t=null);var c=this.kU,d=self.$w;m||(c=f.ju.kU,d=f.ju.$w);d([a.data]);c({Zt:r,dd:"decode",Ca:a.data}, function(a,c){a||b.Bea(c)})};return l});f.Ch={yZ:function(){0===f.Ba.be&&f.Ch.GV()},Ona:function(a,b){if(!a)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]&&a[c].Cn===b)return!0},E$:function(a,b){var c="limg-"+a.key+"-"+b.q.xc;f.Ba[c]&&delete f.Ba[c]},SU:function(a){return f.Ba[a.Cn?a.Cn:a]},Ok:function(a){var b=null,c=null,d=!1;a.Cn?(b=a,c=b.Cn,(a=b.url)&&(d=!0)):c=a;var e=f.Ba[c];d&&e&&e.src!==a&&(e=f.Ba[c]=null);if(!e&&a){d="data:"===a.substr(0,5);e=document.createElement("img");d||(e.crossOrigin="Anonymous");f.Ba[c]=e;e.loaded=!1;f.Ba.be+= 1;f.C.g(e,"load",this.QC,this);f.C.g(e,"error",this.FV,this);var g=this;e.Ru=setTimeout(function(){e.loaded||g.GV()},300);e.src=a;b&&(e.kka=c,b.url=null)}},GV:function(){for(var a=0;a<f.Ba.zp.length;a+=1)f.Ba.zp[a].set("display")},TT:function(a){f.C.I(a,"load",this.QC,this);f.C.I(a,"error",this.FV,this)},QC:function(a){a=a.target;a.loaded=!0;f.Ba.be-=1;this.TT(a);this.yZ();a.Ru&&(clearTimeout(a.Ru),a.Ru=null)},FV:function(a){a=a.target;a.loaded=!1;f.Ba.be-=1;this.TT(a);this.yZ();a.Ru&&(clearTimeout(a.Ru), a.Ru=null)}};f.w.ik=f.w.oc.extend({B:function(a,b,c){this.KB=c;f.Ba.zp.push(this);this.xc=f.a.$U("layer");this.jb=2;a.get("textRatio");this.yN=25;this.X("tiles",a);this.zia=a.get("vdataUrl")||b.J.get("vdataUrl")||f.A.av;this.bi=!0;this.ia=a;this.ij=f.l.Z?!1:!0;this.h=b;this.Rh=this.Qh=!0;this.he("zoom center centerCoords resolution coordsBound styleID iconsID businessIconsID forceBig mode display".split(" "),b);this.he("zooms detectRetina visible zIndex textIndex watermark opacity".split(" "),a);this.X("lang", b,!0);this.get("watermark")&&(this.dv=new Image,this.dv.src=this.get("watermark"));this.Sna="v4";this.xa={};this.Yh={};this.ee=256;this.or=[];this.Fe=this.af=0;this.ja=f.l.ja&&this.get("detectRetina");this.ee=256*(this.ja?2:1);this.X("mapStyle",b);this.X("style",b);this.Mm=0;this.X("features",b);this.Ce=18;this.X("reload",a)},mapStyleChanged:function(){this.get("mapStyle");this.od=!1;if(this.h.get("styleUrl")||"normal"===this.get("mapStyle"))this.od=!!this.h.get("showBuildingBlock");this.featuresChanged()}, featuresChanged:function(){this.set("reload")},langChanged:function(){this.set("reload");this.ia.hp()},f9:function(){var a=!1,b=this.SP();if(b){if(this.jh){var c="active"===this.jh.dw;b.Kv(this.jh);c&&(b.Qp(this.jh,"active"),a=!0)}f.l.z$&&!a&&b.vB()}},Ev:function(){this.f9()},bz:function(a,b){var c=!0;if("hotspotout"===a)this.h.J.set("optimalCursor",null);else if("hotspotover"===a)this.h.J.set("optimalCursor","pointer");else if("mouseup"===a||"mousedown"===a)c=!1;var d=this.SP();if(d)switch(a){case "hotspotout":d.AB(b); break;case "hotspotover":d.Qp(b,"hover");break;case "mouseup":d.Qp(b,"hoverup");break;case "mousedown":d.Qp(b,"active")}c&&(c=b.Na,c=new f.G(c[0],c[1]),c=this.h.de(c,3),this.h.J.r(a,{name:b.name,lnglat:c,id:b.Vk,isIndoorPOI:b.BK}))},SP:function(){if(!f.l.OV){var a=this.Q||this.$l;if(!a)return null;var b=this.h?this.h.J.get("hotspotOptions"):{},b=f.extend({},b);if(b.disableHighlight)return null;this.Nw||(this.Nw=new f.w.ik.c0(a));return this.Nw}},Vn:function(a){(a=this.iV(a))&&this.bz("hotspotclick", a)},Ys:function(a){var b="mousemove"===a.type;if(!this.h.Ng||!b){var c=this.iV(a);switch(a.type){case "mousemove":case "mouseup":case "mousedown":c&&this.jh!==c&&(this.jh&&this.bz("hotspotout",this.jh),this.bz("hotspotover",c)),!c&&this.jh&&this.bz("hotspotout",this.jh),c&&!b&&this.bz(a.type,c)}this.jh=c}},textIndexChanged:function(){this.set("display")},Gea:function(){this.h.g("click",this.Vn,this);this.h.g("mousemove",this.Ys,this);this.h.g("mousedown",this.Ys,this);this.h.g("mouseup",this.Ys,this)}, LI:function(){this.h.I("click",this.Vn,this);this.h.I("mousemove",this.Ys,this);this.h.I("mousedown",this.Ys,this);this.h.I("mouseup",this.Ys,this)},Dl:function(){return null},Wm:function(){var a=this.au?null:this.h.J.get("forceZooms");return{bi:!0,ee:256,visible:this.get("visible"),ed:a||this.get("zooms"),TB:this.ij&&this.wa,Qh:!this.h.kE,Rh:!this.h.kE,opacity:this.get("opacity"),cd:!1}},vl:function(a){if(f.Q.canvas.ik)return new f.Q.canvas.ik(this,a)},fx:function(a){0===a.indexOf("amap://styles/")&& (a="normal");var b=this.get("forceBig")||f.l.Z&&!this.ja?"6":"5";this.url=f.A.Qb+"://"+this.zia+"/tiles?mapType="+a+"&v="+(f.Nc?3:2)+"&style="+b;this.url+=this.ja?"&rd=2":"&rd=1";this.url+="&flds="+this.ta;this.url+="&t="},styleChanged:function(){this.h.cc||this.featuresChanged()}}); f.w.Vc=f.w.ik.extend({vl:function(a){var b=this;if(!b.dv&&f.l.He&&"vw"===b.h.get("baseRender")){var c=["wgl"];this.h.cc&&c.push("wgl2");if(f.gb.ay(c))return new f.Q.of.Vc(b,a)}else if(c=["cmng","cgl"],this.h.cc&&c.push("cgl2"),f.gb.ay(c))return new f.Q.canvas.Vc(b,a);f.gb.$f(c,function(){b.set("display")})},featuresChanged:function(){var a=this.get("features"),b=[];"all"===a?b=this.KB:a&&(-1!==f.a.indexOf(a,"bg")&&-1!==f.a.indexOf(this.KB,"region")&&b.push("region"),-1!==f.a.indexOf(a,"building")&& -1!==f.a.indexOf(this.KB,"building")&&b.push("building"),-1!==f.a.indexOf(a,"road")&&-1!==f.a.indexOf(this.KB,"road")&&b.push("road"));this.ta=b;this.fx(this.get("mapStyle")||"normal");this.set("reload")}});f.w.n0=f.w.Vc.extend({B:function(){this.Zk(arguments);this.Ce=this.Sl=17;this.ta=["building"];this.od=!0;this.fx(this.get("mapStyle")||"normal");this.au=!0},featuresChanged:function(){},mapStyleChanged:function(){}}); f.w.Lh=f.w.ik.extend({vl:function(a){var b=this;if(this.rK()){if(this.$u=!0,f.Q.canvas.cF)return this.GT(),a=new f.Q.canvas.cF(this,a),a.g("afterLabelRender",this.Ev,this),a}else{b.$u=!1;if(f.Q.canvas.bF)return a=new f.Q.canvas.bF(this,a),a.g("afterLabelRender",this.Ev,this),a;a=["cmng","labelcanvas"];f.l.kJ&&a.push("labelDir");f.gb.$f(a,function(){b.set("display")})}},rK:function(){var a=this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.h.get("nolimg")?!1:f.l.$u?!0:!1},Ica:function(){var a= this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.h.get("nolimg")||f.l.cd||f.l.Z?!1:!0},featuresChanged:function(){var a=this.get("features"),b=this.get("mapStyle"),c=[];"all"===a?c=["roadlabel","poilabel"]:a&&(-1!==f.a.indexOf(a,"road")&&c.push("roadlabel"),-1!==f.a.indexOf(a,"point")&&c.push("poilabel"));a=this.rK();c.length&&(a||this.Ica())&&c.unshift("limg");this.ta=c;this.fx(b);this.set("reload");(b=this.Q||this.$l)&&a^this.$u&&(this.Nw&&(this.Nw=this.Nw.Q=null),b.I("afterLabelRender", this.Ev,this),b.Et(),this.$l=this.Q=null)},GT:function(){this.ir=f.A.Qb+"://"+(this.ia.get("vdataUrl")||this.h.J.get("vdataUrl")||f.A.av)+"/limg?";var a=this.ja?2:1;this.ir+="&font="+(f.l.Z&&!this.ja?"big":"small");this.ir+="&scl="+a;this.ir+="&t="},iV:function(a){return a.nf?(a=this.WU(this.h.Xb(a.nf,20),!0))?a[0]:null:null},WU:function(a,b){var c=this.h.DC();if(c&&(c=c.Vq(this)))return c.Pt(a,b)}});f.w.ik.c0=f.ba.extend({B:function(a){this.L8(a)},L8:function(a){this.Q=a},AB:function(a){if(a.dw){a.dw=!1;var b=this.Q;b&&b.AB.apply(b,arguments)}},Kv:function(a){a.dw=!1;var b=this.Q;b&&b.Kv.apply(b,arguments)},Qp:function(a,b){b||(console.warn("hlStyle is required, e.g. hover, active.."),b="hover");if(a.dw!==b){a.dw=b;var c=this.Q;c&&c.Qp.apply(c,arguments)}},vB:function(){var a=this.Q;a&&a.vB()}});f.ps={cx:function(a,b){this.xf={};this.xf.Zt=f.a.Lb(this.xf);b.Ec||(b.Ec=f.$E());this.Ec=b.Ec;this.Ec.g("tiles",this.wD,this);this.Ec.g("ack",this.vD,this);this.Ec.g("disable",this.uD,this)},fT:function(){if(this.ai&&!this.Oj&&f.qi.Cia||this.Oj&&f.qi.qda||!this.Oj&&!this.ai&&this.bi&&f.sf.Mca)return!0},Fw:function(a){this.zf=f.a.Dt(this.zf,a)},bo:function(){return f.a.keys(this.yf).length?!0:!1},EA:function(a){f.a.Ib(a,function(a){f.Ch.Ok(a)})},Mz:function(){for(var a=this.zf.length-1;0<=a;a--){var b= this.zf[a];b.Kp||b.abort()}this.zf.splice(0,this.zf.length)},ou:function(a){if(this.q&&a.JK===this.q.xc){this.Pe||this.Hf?this.zH([this.q,"groupcomplete",null,null,"allbase"]):(this.Ii(),this.cq.jC(this.q,"groupcomplete",null,null,"allbase"));for(var b=0,c=a.Rc.length;b<c;b+=1)this.uy(a.Rc[b],a.eu,a.Eu,a.Z)}},uy:function(a,b){var c=a.dd,d=this.xa.get(a.$k);if(d){var e=this.q.ta;d.ta||(d.Pa={},d.ta=[]);var g="";(this.h.Xj&&!this.h.cc||this.Vca&&this.h.cc)&&this.AJ(c,a.Ca);"poilabel"===c||"roadlabel"=== c?(a.Rd||(g=a.Ca,a.Rd=null),d.ta.push.apply(d.ta,a.Ca),c===this.q.ta[this.q.ta.length-1]&&(d.Rd=null)):d.Pa[c]=a.Ca;"building"!==c&&"poilabel"!==c||!a.Lk||d.wf||(d.wf={},d.wf.xe=a.Lk,f.Gn&&f.Gn.r("vecTileParsed.buildings",{Mr:d}));if("roadlabel"!==c&&"poilabel"!==c||this.YV||!f.l.kJ&&!this.h.cc)this.Pe||this.Hf?this.zH([this.q,g,d,b,c]):(this.Ii(),this.cq.jC(this.q,g,d,b,c));c===e[e.length-1]&&(c="roadlabel"===c||"poilabel"===c?"labels":"allbase",this.Pe||this.Hf?this.zH([this.q,"tileComplete",d, b,c]):(this.Ii(),this.cq.jC(this.q,"tileComplete",d,b,c)))}},Tz:function(){if(this.h){var a=this.h.J.getMapStyle();this.Wo=a;this.D4(a);this.Ec&&this.Ec.EK()&&(-1!==a.indexOf("amap://styles")&&(a="normal"),a={command:"status",payload:{mapType:a,style:f.l.Z&&!this.q.ja?"6":"5",rd:this.q.ja?2:1}},this.h.J.get("workerMode")&&this.fT()?(f.sf.p$(a,f.a.bp),this.Ec.Zca()||this.Ec.close()):this.Ec.send(a))}},mapStyleChanged:function(){this.Tz()},styleChanged:function(){this.Tz()},uD:function(){for(var a in this.xf)this.xf.hasOwnProperty(a)&& this.xf[a].Bd&&(this.lk(this.xf[a].Bd,this.xf[a].lc),delete this.xf[a],delete this.yf[a]);this.Ec=null;this.cj("mapStyle");this.set("display",1)},vD:function(a){var b=a.reqId;this.xf[b]&&(!a.content.status&&this.xf[b]&&this.lk(this.xf[b].Bd,this.xf[b].lc),delete this.xf[b],delete this.yf[b])},wD:function(a){var b=a.reqId;if((!/-1$/.test(b)||!this.bo())&&this.xf[b]){var c=a.content.opt,d=this.xf[b].Bd[0];c!==this.Ta&&!d.tg||d.tg&&2<(this.bo()||Math.abs(c-this.Ta))?this.lk(this.xf[b].Bd,this.xf[b].lc): this.sr(a.content.data,c)}},gI:function(a,b){var c=a.ye,d=null;(f.l.ef||f.l.Si&&!this.h.J.wa)&&18>=c.lc&&(b?d={Rd:!0,data:a.maa,url:this.Tm(a.lc,[]),w:this.q,"x-vd-v":c.Ed,tv:c.lf,bgc:this.h.qd,vdataVersion:c.Vd,od:this.h.J.get("showBuildingBlock")}:this.sE||(d={Rc:a.data.Rc,"x-vd-v":c.Ed,tv:c.lf,bgc:this.h.qd,vdataVersion:c.Vd,He:!!this.Gh,url:this.Tm(a.lc,[]),w:this.q,od:this.h.J.get("showBuildingBlock")}));d&&f.im.set(d)},QK:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]: !1;if(a.length)if(this.XX)this.WW=!0;else{void 0===this.zf&&(this.zf=[]);c||this.Mz();void 0===this.yf&&(this.yf={});var d=1,e=[],g=this;18<b&&(d=Math.pow(2,b-18));for(var h=Math.pow(2,20-a[0].ma.z),k=0;k<a.length;k+=1){var l=a[k],m=l.ma;l.lc=b;m.S=h;if(18<b&&!this.Gh){for(var n=0;n<d;n+=1)for(var p=0;p<d;p+=1){var q=new f.Wa(new f.hk(b,d*m.x+n,d*m.y+p));this.xa.Bc(q.key)||(this.xa.set(q.key,q),q.status="loading")}this.xa.set(l.key+"/"+b,l)}else this.xa.set(l.key,l),this.Gh&&10>m.z&&this.PU(l)?this.set("display", 0):l.status="loading"}this.R7(a,b,f.a.bind(function(a,d){var g=this;if(d.length){for(var h=0,k=d.length;h<k;h++){var l=d[h].ma,m=l.x,n=l.y,l=l.z;if(10>l){var p=Math.pow(2,l);if(m>=p||0>m)m=(m+p)%p}m=f.a.tC(m,n,l).join(",");f.a.ga(e,m)||e.push(m)}h=this.d3({Hha:d,tg:c,lc:b,MM:e});if(this.h.J.get("workerMode")&&this.fT())if(this.ai)f.qi.Fv&&delete h.Id.Nc,f.qi.Ri(h,function(a,c){null!==c.data&&g.h&&(void 0===f.qi.Fv&&(f.qi.Fv=!0),c.jW?g.lk(c.Bd,b):(c.Pj&&g.mB(),g.Oj?(f.a.Ib(c.Bd,function(a){this.xa.set(a.key, a);a.Rd&&!a.Rd.loaded&&(f.Ch.Ok(a.Rd,!0),a.Rd.loaded=!0);a.M&&a.M.Ba&&this.EA(a.M.Ba)},g),g.set("display"),g.gI(c,!0)):(f.a.Ib(c.Bd,function(a){var b=this.xa.get(a.key);b&&(b.status=a.status,a.M&&a.M.Ba&&this.EA(a.M.Ba))},g),g.gI(c),c.data&&g.ou(c.data))))});else{var q=f.sf.DW;if(!this.h.J.wa||f.sf.Baa)q=f.sf.Ri;f.sf.Fv&&delete h.Id.Nc;this.Tz();q(h,function(a,c){if(g.h){void 0===f.sf.Fv&&(f.sf.Fv=!0);c.jW&&g.lk(c.Bd,b);if(q===f.sf.DW){if(c.disabled){f.sf.Baa=!0;g.set("display");return}if(c.q9)return}c.Pj&& g.mB();c.data&&(g.h.qd!==c.uq&&(g.h.qd=c.uq),f.a.Ib(c.Bd,function(a){var b=this.xa.get(a.key);b&&(b.status=a.status,a.M&&a.M.Ba&&this.EA(a.M.Ba))},g),g.EA(c.icons),g.gI(c),c.data&&g.ou(c.data))}})}else!this.ai&&this.Ec&&this.Ec.EK()?this.h.J.get("workerMode")?this.FA(d,b,e,c):(1>this.Ec.Qq()||3<this.hq?this.FA(d,b,e,c):((2===this.Ec.Qq()||this.Ec.Zx())&&this.Tz(),this.U4(d,b,e,c)),this.Ec.Lga(this.Ec.Qq()+1),this.Ec.wW&&this.Ec.C9(Math.ceil((new Date-this.Ec.wW)/1E3)),this.Ec.wW=new Date):this.FA(d, b,e,c)}},this));window.renderDelay&&(this.XX=setTimeout(function(){g.WW&&g.set("display",!1);g.WW=!1;g.XX=null},window.renderDelay))}},D4:function(a){a&&"normal"!==a&&0!==a.indexOf("amap://styles/")?this.sE=!0:this.sE=!1},R7:function(a,b,c){if((f.l.ef||f.l.Si&&!this.h.J.wa)&&(this.Oj||!this.sE)&&18>=b){var d=f.im,e=this,g=this.h,h=g.J;g.gy||void 0!==g.fD||("dv"===h.get("baseRender")?g.fD=1:g.fD=2);d.get({type:h.wa?"NFS":"FS",od:this.q.au||this.q.od,Eha:a,He:!!this.Gh,w:this.q,url:this.Tm(b,[]),timeout:500}, function(d,h){if(e.q){if(!d&&h.pK.length){h.pK.length===a.length&&(g.gy||g.fD--,e.mB());if(h.Rc){e.Ed=h.ye["x-vd-v"];e.lf=h.ye.tv;var m="#"+h.ye.bgc;e.h.qd!==m&&(e.h.qd=m);h.pK.forEach(function(a){a.status="loaded"});m=e.pG(b,h.Rc);e.ou(m)}else h.rda.forEach(function(a){e.mu(a,b,[],h.ye["x-vd-v"],!0)}),e.set("display");a=h.Wda}c(null,a)}})}else c(null,a)},U4:function(a,b,c,d){if(!d||!this.bo()){var e=[(new Date).getTime(),this.Ec.Qq()+1&65535,d?1:0].join("-");d||(this.yf[e]=1);var g={command:"tiles", reqId:e,payload:{t:c,opt:b,cs:{level:b,flds:this.q.ta.join(","),v:f.Nc?"3":"2"}}},h;if(!this.Ec.Zx()){var k=this;setTimeout(function(){k.Ec&&!k.Ec.Zx()&&(k.hq?k.hq++:k.hq=1,k.Ec.vU(h)&&(delete k.xf[e],delete k.yf[e],k.FA(a,b,c,d)))},300)}h=this.Ec.send(g);this.xf[e]={Bd:a,lc:b}}},mL:function(a){if(!a.wa||a.tg)a.status="",a.wa=void 0,a.qa=null,a.sc=null,a.Fc&&(a.Fc.sc=null,a.Fc.Fc=null,a.Fc=null),this.xa.Bn(a.key)},d3:function(a){var b=a.Hha,c=a.lc,d=a.MM;a=a.tg;var e=+new Date;return{xc:e,uq:this.h.qd, ai:this.ai,Oj:this.Oj,od:this.q.od,Wca:!!f.Nc,He:this.Gh,IK:this.q.xc,ta:this.q.ta,cd:this.q.ja,jb:this.q.jb,gK:Math.ceil(this.Kf.NC),Bd:f.a.filter(b,function(a){return"loaded"!==a.status}),lc:c,MM:d,tg:a,url:this.Tm(c,d,b)+"&_id="+e,Id:this.pG(c,[])}},pG:function(a,b){f.Nc&&1<f.Nc.length&&(f.Nc=f.Nc[this.q.get("forceBig")||f.l.Z&&!this.q.ja?1:0]);var c=f.Nc||null;return{Uca:"3D"===this.q.h.J.view.type,l$:this.q.od,YB:f.A.YB||null,xka:this.q.get("businessIconsID"),Ed:this.Ed,lf:this.lf,Kla:this.q.get("iconsID"), JK:this.q.xc,eu:a,Wt:this.q.Wt,Rc:b,Z:this.q.get("forceBig")||f.l.Z,mode:this.q.get("mode"),Afa:f.A.Qb,lY:this.q.get("forceBig")?1:this.q.jb,Eu:this.q.get("forceBig")?!1:this.q.ja,Nc:c}},Ov:function(a){a=a.split(";");for(var b=0,c=a.length;b<c;b+=1){a[b]=a[b].split(",");for(var d=0,e=a[b].length;d<e;d+=1)a[b][d]=parseInt(a[b][d],36)}return a},sr:function(a,b,c){if(this.q){for(var d=[],e=0,g=a.length;e<g;e+=1){var h=a[e];h&&(c&&(h=JSON.parse(h)),h["x-vd-v"]?(this.Ed=h["x-vd-v"],this.lf=h.tv,this.Vd= [h.tv,h.vdv].join("-"),h.bgc&&(h="#"+h.bgc.substring(2),this.h.qd!==h&&(this.h.qd=h))):this.mu(h,b,d))}if(d.length){var k=this;a=null;var l;this.Gh?(a=f.CE,l=a.rX):(a=f.ju,l=this.ai?a["label:parseLabel"]:a["base:parseDataToVector"]);(function(){l(k.pG(b,d),function(a,c){if(k.q&&!a){var d=c.icons;if(d)for(var e=0;e<d.length;e+=1)f.Ch.Ok(d[e]);(f.l.ef||f.l.Si&&!k.h.J.wa)&&(k.Oj||!k.sE)&&18>=b&&f.im.set({Rc:c.data.Rc,"x-vd-v":k.Ed,tv:k.lf,bgc:k.h.qd,Vd:k.Vd,He:!!k.Gh,url:k.Tm(10,[]),w:k.q,od:k.q.od}, function(){});c.data&&k.ou(c.data)}})})()}}},mu:function(a,b,c){function d(d,e,g){e=[g,d,e].join("/");18<b&&!l.Gh&&(e+="/"+b);if((d=l.xa.get(e))&&"loaded"!==d.status)if(l.pZ(d,p)||d.tg){if(-1!==n.indexOf(m))if("limg"===m){if(e=a[1],d.Rd=e,"string"===typeof e.b&&(e.b=l.Ov(e.b)),g="",g="object"===typeof e.u?e.u.url:e.u)d={url:g,Cn:"limg-"+d.key+"-"+l.q.xc},e.u=d,f.Ch.Ok(d,!0)}else{e={li:d.ma,$k:e,Ca:a,dd:m,Wt:l.q.Wt,sI:l.h.qd,zK:"building"===m,Wg:"poilabel"===m||"roadlabel"===m||"building"===m&&l.q.od}; if("poilabel"===m||"roadlabel"===m)e.Rd=d.Rd;m===n[n.length-1]&&(d.status="loaded");c.push(e)}}else l.lM(b,d,p,f.a.bind(l.mL,l)),18<b&&l.xa.Bn(e)}var e=a[0].split("-"),g=parseInt(e[1]),h=parseInt(e[2]),k=parseInt(e[0]),l=this,m=e[3],n=this.q.ta,p=18<b?Math.pow(2,b-18):1,e=l.Kf.NC,q=Math.pow(2,k);10>k&&(g<=e&&d(g+q,h,k),g>=q-e&&d(g-q,h,k));d(g,h,k)},zH:function(a){this.nq||(this.nq=[]);this.nq.push(a)},Ii:function(){if(this.nq&&this.nq.length){for(var a=0,b=this.nq.length;a<b;a+=1)this.cq.jC.apply(this.cq, this.nq[a]);this.nq=[]}},lk:function(a,b){for(var c=18<b?Math.pow(2,b-18):1,d=0;d<a.length;d+=1){var e=a[d];this.lM(b,e,c,f.a.bind(this.mL,this));18<b&&this.xa.Bn(e.key+"/"+b)}f.l.ef&&f.im.Bn({Bd:a,url:this.Tm(b,[]),w:this.q,He:!!this.Gh,od:this.q.od})},Tm:function(a,b,c){return this.q.url+b.join(";")+"&lv="+a+"&preload="+(c&&c[0]&&c[0].tg?1:0)},E3:function(){var a=this.q.url,b="rb";if(/\\/limg/.test(a)||/flds=[^&]+label/.test(a))b="rl";return b},mB:function(){this.h.gy||f.Zd.te.end({key:this.E3(), index:0,id:this.h.J.id})},FA:function(a,b,c){function d(a,c){var d=a.split("|");d[0]=c+d[0];var e=d,g="";d[d.length-1]&&(g=d[d.length-1],e=d.splice(0,d.length-1));l.sr(e,b,!0);return g}var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,g=new XMLHttpRequest;g.jp=[(new Date).getTime(),e?1:0].join("-");e||(this.yf[g.jp]=1);var h=this.Tm(b,c,a),k=0,l=this;g.pn="";g.onreadystatechange=function(){if(l.q&&!(2>g.readyState)){var c=4===g.readyState&&0===g.status;(b!==l.Ta&&!a[0].tg||a[0].tg&& (b>l.Ta||2<l.Ta-b)||c)&&!g.Kp?(g.Kp=!0,l.lk(a,b),g.onreadystatechange="",c||g.abort(),e?l.Fw(g):delete l.yf[g.jp]):g.Kp||(3===g.readyState?(c=g.responseText.substring(k),g.pn=d(c,g.pn),k=g.responseText.length):4===g.readyState&&(l.mB(),delete l.yf[g.jp],c=g.responseText.substring(k),l.ai&&(c+="|"),d(c,g.pn),g.pn="",l.h.J.wa||f.Zd.te.push({id:l.h.J.id,key:"ds",Dn:g.responseText.length/2}),e&&l.Fw(g)))}};g.onerror=function(){};this.lK||(this.lK=1);g.open("GET",h,!0);g.send();e&&this.zf.push(g)},pZ:function(a, b){var c=this.em||this.Kf,d=a.ma.x,e=a.ma.y;return d>Math.floor(c.Td/b)||d<Math.floor(c.pe/b)||e>Math.floor(c.wd/b)||e<Math.floor(c.xd/b)?!1:!0},lM:function(a,b,c,d){if(18<a){b=b.ma;for(var e=0;e<c;e+=1)for(var g=0;g<c;g+=1){var h=new f.hk(a,c*b.x+e,c*b.y+g)+"";(h=this.xa.get(h))&&d(h)}}else d(b),b.Fc&&d(b.Fc)}};f.Q.canvas.Lh=f.Q.ri.extend({ga:[f.ps],B:function(a,b){arguments.callee.oa.apply(this,arguments);this.xc=f.a.Lb(this);this.mm=300;this.Ce=a.Ce;this.ai=this.bi=!0;this.X("mapStyle",a.h);this.X("style",a.h);this.Oj=!0;this.ht=1;var c=this;this.fQ=function(){c.fea=!0;c.set("display",0)};this.Df();this.OK(a)},OK:function(a){a=f.l.Z||a.ja?"big":"small";var b=f.A.Qb+offlineMap.domain+"style_icon/icon-biz-"+a+".png";f.Ch.Ok(f.A.Qb+offlineMap.domain+"style_icon/icon-normal-"+a+".png",!0);f.Ch.Ok(b,!0)},Pv:function(a){f.Ch.E$(a, this);var b=f.Q.canvas.Lh.qc.Pv;b&&b.apply(this,arguments)},Df:function(){this.pk=document.createElement("canvas");this.pk.className="amap-labels";this.pk.draggable=!1;this.pk.gW=!0;this.nj=this.pk.getContext("2d",{alpha:!0});this.Rx=[];this.fy=[];this.Io=this.q.ja?16:8},Br:function(a){var b=Math.pow(2,a.W.zoom-this.ce),c=this.q.ja?this.q.jb:1,d=a.W.eb.Va(this.Ro).vc(this.Ze);this.transform={translate:this.transform.translate.add(d.Sc(c)),scale:b/c,rotate:0};this.eb=a.W.eb},Cu:function(a,b){if(!this.ra|| 3E4<Math.abs(this.eb.x-this.ra.x)/this.S||3E4<Math.abs(this.eb.y-this.ra.y)/this.S)this.ra=this.eb;this.qe=this.ce;this.ii=this.Ze;this.hi=!1;this.currentTime=+new Date;this.dN=b.dN;this.Cd=[this.Aa.Nb.x,this.Aa.Nb.y];this.ij=b.TB;var c=this.bj;this.Pe=this.zoom<<0!==this.zoom;var d=this.eb.Va(this.ra);d.x<-f.a.fb/2&&(d.x+=f.a.fb);d.x>f.a.fb/2&&(d.x-=f.a.fb);this.GI=d.vc(this.Ze);for(d=c.length-1;0<=d;d-=1){var e=c[d];if(e.length){var g=e[0].ma.z,h=!1;!e.ng||f.Ba.be||!(g<=this.zoom&&"in"===this.pu|| g>=this.zoom&&"out"===this.pu)&&this.pu||this.labels&&this.labels.length&&!a.Qj&&this.FD(this.labels.Qu,this.Kf)||(h=!0,this.labels&&this.labels.Nk?(this.So=this.labels.Nk,this.So.zoom=this.labels.zoom):(this.So=[],this.So.zoom=null),this.labels=[],this.labels.zoom=g,this.labels.Qu=this.Kf);if(h){for(g=e.length-1;0<=g;g-=1){var k=e[g],h=!1,l=k.ta;!l&&k.Fc&&k.Fc.ta&&(l=k.Fc.ta,h=!0);if(l){for(var k=0,m=l.length;k<m;k+=1)l[k].reverse=h;Array.prototype.push.apply(this.labels,l)}}this.labels.sort(function(a, b){return a.Wk>b.Wk?-1:a.ke>=b.ke?-1:1})}}}if(this.t$(a)){this.ld();if(!this.h.J.wa)return;this.WL(a);this.Rm=this.labels}this.fea=!1;this.Ne(a)},ld:function(){if(this.ng&&!this.q.wa){var a=this.q;f.Zd.te.end({id:this.h.J.id,key:"rl",index:2});a.wa=!0;a.$c?a.ha("renderComplete"):(a.$c=!0,a.ha("complete"))}},fc:function(a,b){this.Wo=a.Wo;this.ek=a.ek;this.Xl(a,b);this.Pe||this.Ii();this.Ro&&(a.uZ||a.IM&&f.l.yj||a.Hf&&!a.Pe&&a.Z9)?this.Br(a,b):this.Cu(a,b);this.Ro=this.eb;this.hi&&this.set("display", 0)},Ne:function(a){var b=this.eb.Va(this.ra);b.x<-f.a.fb/2&&(b.x+=f.a.fb);b.x>f.a.fb/2&&(b.x-=f.a.fb);this.transform={translate:new f.G(a.W.Aa.Ub.x*(this.q.ja?this.q.jb:1),a.W.Aa.Ub.y*(this.q.ja?this.q.jb:1)),scale:1/(this.q.ja?this.q.jb:1),rotate:0}},FD:function(a,b){return a.xd===b.xd&&a.pe===b.pe&&a.wd===b.wd&&a.Td===b.Td},Pt:function(a,b){var c;if(this.zoom){var d=a.vc(Math.pow(2,20-this.zoom));this.labels&&(c=this.Pba(d,b))&&(c.BK=!1);!c&&this.Gb&&(c=this.Oba(d))&&(c.BK=!0)}return c?[c]:[]}, Pba:function(a,b){for(var c=a.x,d=a.y,e=this.labels.Nk||this.labels,g=e.length-1;0<=g;g-=1){var h=e[g],k=h.Na[0]/this.S,l=h.Na[1]/this.S;if((h.Vk||!b)&&this.aW(h,c,d,k,l))return h}},Oba:function(a){var b=a.x;a=a.y;for(var c=this.Gb.length-1;0<=c;c-=1){var d=this.Gb[c],e=d.Na[0]/this.S,g=d.Na[1]/this.S;if(d.Vk&&this.aW(d,b,a,e,g))return d}},aW:function(a,b,c,d,e){for(var g=0;g<a.vb.length;g+=1){var h=a.vb[g][2],k=a.vb[g][3],l=a.vb[g][0],m=a.vb[g][1];this.q.ja&&(h/=this.q.jb,k/=this.q.jb,l/=this.q.jb, m/=this.q.jb);if(b>=d+l-1&&b<=d+l+h+1&&c>=e+m-1&&c<=e+m+k+1)return!0}return!1},reloadChanged:function(){this.q&&(this.q.wa=!1);this.xa.clear();this.labels=[];this.Rx=[];this.fy=[];this.xb&&this.xb.parentNode&&this.xb.parentNode.removeChild(this.xb);this.pk&&this.pk.parentNode&&this.pk.parentNode.removeChild(this.pk);this.set("display")},$h:function(){return this.pk},AJ:function(a,b){if("roadlabel"===a||"poilabel"===a)for(var c=0;c<b.length;c+=1){var d=b[c];if(d.Tb){var e="",g="",h="";d.Ud&&(h=d.Ud[0], e=h[3],g=h[4],h=d.Oi?"":h[7]);if(e=this.T.Nt&&this.T.Nt(e,g,h,d.Tb,d.Fq))d.visible=e[4],d.Wj=e[3];if(d.Ud)for(g=0;g<d.Ud.length;g+=1)h=d.Ud[g],h[3]=e[0],h[4]=e[1],d.dn&&(h[7]=e[2])}}}});f.dF={Tm:function(a,b,c){return this.q.ir+b.join(";")+"&lv="+a+"&preload="+(c&&c[0]&&c[0].tg?1:0)},sr:function(a,b){if(this.q){for(var c=[],d=[],e=0,g=a.length;e<g;e+=1){var h=a[e];h&&(h=JSON.parse(h),h["x-vd-v"]?(this.Ed=h["x-vd-v"],this.Vd=[h.tv||"",h.vdv].join("-"),this.lf=h.tv,this.h.qd="#"+h.bgc.substring(2)):(this.mu(h,b,c,this.Ed||"v4"),d.push(h)))}d.length&&(f.l.ef||f.l.Si&&!this.h.J.wa)&&18>=b&&f.im.set({Rd:!0,data:d,url:this.Tm(b,[]),w:this.q,vdataVersion:this.Vd,"x-vd-v":this.Ed,tv:this.lf, bgc:this.h.qd,od:this.h.J.get("showBuildingBlock")});this.set("display")}},wu:function(a,b){var c=0,d=0,e=1,c=256*b.x,d=256*b.y,e=b.S;return[(c+a[0])*e,(d+a[1])*e]},mu:function(a,b,c,d,e){function g(c,g,l){c=[l,c,g].join("/");if(c=p.xa.get(c)){g=c.ma;var m=f.A.Qb+offlineMap.domain+"icons/"+(h||k?"b":"n")+(10>g.z?"39":"18")+"/1/";if(c&&"loaded"!==c.status)if(p.pZ(c,s)||c.tg){if(-1!==r.indexOf(q))if("limg"===q)a[1]&&(c.Rd={url:"data:image/png;base64,"+a[1],Cn:"limg-"+c.key+"-"+p.q.xc},f.Ch.Ok(c.Rd, !0));else{if("roadlabel"===q)for(var n=1;n<a.length;n+=1){var v=a[n];v.Ou=v[0];var I=f.a.Ur(v[1],d);if(!(0>I[0]||256<=I[0]||0>I[1]||256<=I[1])){var C=p.wu(I,g),I={Na:C,name:v[0],Oi:!0,Ad:I,Ba:[],vb:[],visible:!0,Wj:!0},H=I.name;I.Er=15>v[2]%90||75<v[2]%90?90*Math.floor((v[2]+15)/90):v[2];C=v[3];0<=v[8]&&(I.hB={name:v[6],kZ:v[7],dir:v[8]});var F=C[2];l=C[3];var B=-Math.floor(l/2);if(v[4])if("v5"<=d){var D=v[5].split(":"),E=D[1],E=parseInt(E)-1,D=f.A.Qb+offlineMap.domain+"style_icon/icon-normal-"+(h|| k?"big":"small")+".png";I.Ba.push(D);var D=Math.floor(E/10),G=E%10,K=0,J=0,O=0;k?(K=48,O=J=40):h?(K=J=40,O=36):(K=J=24,O=20);var M=K*Math.max(F+2,O)/O,D=[-M/2,-K/2,M,K,J*G,J*D,J,J];I.ke=7;I.vb.push(D)}else{B=!1;E=parseInt(v[5]);153===E&&(0===H.indexOf("G")?(E="153g",B=!0):0===H.indexOf("S")&&(E="153s",B=!0));if(151===E||150===E)B=!1,0===H.indexOf("G")&&(E=150,B=!0),0===H.indexOf("S")&&(E=151,B=!0);152===E&&(E=151);!0===B&&(m=f.A.Qb+offlineMap.domain+"theme/v1.3/icons/"+(h||k?"b/":"n/"));D=m+E+".png"; f.Ch.Ok(D);I.Ba.push(D);M=v[4][0]*u;v=v[4][1]*u;D=[-M/2,-v/2,M,v];I.vb.push(D);F=Math.min(M-3,F);l=Math.min(v,l);B=-Math.floor(l/2)+(k?3:1)}I.Ba.push(c.Rd);I.ke=11;I.vb.push([-Math.floor(F/2),B,F,l,C[0],C[1],C[2],C[3]]);c.ta||(c.ta=[]);c.ta.push(I)}}else if("poilabel"===q){H=[];for(n=1;n<a.length;n+=1)if(v=a[n],v.Ou=v[0],I=f.a.Ur(v[1],d),!(0>I[0]||256<=I[0]||0>I[1]||256<=I[1])){C=p.wu(I,g);I={Na:C,name:v[0].replace("^",""),dn:!0,Ad:I,Ba:[],vb:[],visible:!0,Wj:!0};E=0;I.Wk=v[8];v[6]&&("v5"<=d?(D=v[6].split(":"), E=D[1],B=Math.floor((parseInt(D[0].split("_")[1])-28)/2)):E=v[6]);if(E&&v[3]){if("v5"<=d){D=f.A.Qb+offlineMap.domain+"style_icon/icon-"+(1===B?"biz-":"normal-")+(h||k?"big":"small")+".png";I.Ba.push(D);E=parseInt(E)-1;D=Math.floor(E/10);G=E%10;k?(K=48,J=40,O=28):h?(K=J=40,O=28):(K=J=24,O=20);M=K;if(151===E||152===E||153===E)O-=4,F=v[7][0][2],M=K*Math.max(F+2,O)/O;D=[-M/2,-K/2,M,K,J*G,J*D,J,J]}else D=m+E+".png",f.Ch.Ok(D),I.Ba.push(D),D=[-Math.round(v[3][0]/2),-Math.round(v[3][1]/2),v[3][0],v[3][1]], k&&!e&&(D[0]*=u,D[1]*=u,D[2]*=u,D[3]*=u);I.vb.push(D)}if(v[2]&&v[7])for(F=v[2],D=0;D<v[2].length;D+=1){I.Ba.push(c.Rd);C=v[7][D];k&&!e&&(F[D][0]=Math.round(F[D][0]*u),F[D][1]=Math.round(F[D][1]*u),F[D][2]=Math.round(F[D][2]*u),F[D][3]=Math.round(F[D][3]*u));M=F[D][0];G=F[D][1]-(k?4:2);K=C[3];J=C[2];M<-J&&E&&v[3]&&(M=-J+I.vb[0][0]);if("v5">d){if("375"===E||"3751"===E)J=Math.min(F[D][2],k?24:14),M=-Math.floor(J/2),G=-Math.floor(K/2)}else M-=2;I.ke=K-4;4===l&&"\\u5317\\u4eac"===I.name&&(G=k?-50:-26);I.vb.push([M, G,J,C[3],C[0],C[1],C[2],C[3]])}I.Hl=v[5];I.Hl&&H.push(I.Hl);I.Vk=v[4];I.Tl=v[9];I.XK=v[10];I.Xe=E;I.br=B;c.ta||(c.ta=[]);c.ta.push(I)}c.wf||(c.wf={},c.wf.xe=H)}q===r[r.length-1]&&(c.status="loaded",c.wa=c.qa=!0,c.Fc&&(c.Fc.wa=c.Fc.qa=!0))}}else p.lM(b,c,s,f.a.bind(p.mL,p))}}var h=f.l.Z,k=this.q.ja,l=a[0].split("-");1===l.length&&(l=a[0].split("_"));c=parseInt(l[1]);var m=parseInt(l[2]),n=parseInt(l[0]),p=this,q=l[3],r=this.q.ta,s=18<b?Math.pow(2,b-18):1,l=Math.ceil(p.Kf.NC),u=this.q.ja?this.q.jb: 1,v=Math.pow(2,n);10>n&&(c<=l&&g(c+v,m,n),c>=v-l&&g(c-v,m,n));g(c,m,n)}};f.Q.canvas.cF=f.Q.canvas.Lh.extend({ga:[f.dF]});f.Q.canvas.Lh.ob({WL:function(a){this.ht++;var b=this.pk,c=this.nj;this.Tt={};var d=this.q.ja?this.q.jb:1,e;0!==a.W.rotation?(e=2*Math.floor(a.W.Aa.Ub.x)*d,d*=2*Math.floor(a.W.Aa.Ub.y)):(e=a.size.width*d,d*=a.size.height);f.j.am(b,e,d,!0);f.l.A$&&b.parentNode&&b.parentNode.appendChild(b);c.textBaseline="bottom";this.HV=0;a.Gb&&(this.GX(a.Gb,1,a.Gb),0===a.Gb.length&&this.labels&&this.labels.Nk&&this.labels.zoom===this.zoom&&this.labels.Nk.length!==this.labels.length&&(this.labels.Nk=null));this.labels&& this.GX(this.labels,0,a.Gb);!f.l.Z&&this.So&&this.So.length&&this.Nba(a);this.Rx=this.Rx&&this.ZX(c,this.Rx,480);this.fy=this.fy&&this.ZX(c,this.fy,200);a.Gb&&this.bY(a.Gb,c,f.hh.bV(this.h.J),this.ec,e,d);this.labels&&this.bY(this.labels,c,f.hh.bV(this.h.J),this.ec,e,d);this.So=[];this.labels&&(this.labels.Du=this.zoom,this.labels.Au=this.eb,this.labels.Ky=this.rotation,this.labels.dY=this.q.ja,this.labels.size=a.size);a.Gb&&(this.Gb=a.Gb);this.Gb&&(this.Gb.Du=this.zoom,this.Gb.Au=this.eb,this.Gb.Ky= this.rotation,this.Gb.size=a.size);this.r("afterLabelRender")},$X:function(a,b,c){var d=void 0===b.Wj?!0:b.Wj,e=1,g=void 0===b.visible?!0:b.visible,h=null;if(b.Tb&&this.h.cc){var k=h="",l="";b.Ud&&this.gJ&&(l=b.Ud[0],h=l[3],k=l[4],l=b.Oi?"":l[7]);if(h=this.T.Nt&&this.T.Nt(h,k,l,b.Tb,b.Fq))g=h[4],d=h[3],e=h[5]}if(g){if(this.nj.globalAlpha!==c||e)this.nj.globalAlpha=c||e;g=0;for(k=b.Ba.length;g<k;g+=1)(d||"CANVAS"===b.Ba[g].tagName)&&this.Maa(a,b.Ba[g],b.vb[g],b.Er,c||e);this.nj.globalAlpha!==c&&(this.nj.globalAlpha= c);b.Ud&&this.gJ&&this.gJ(a,b,h)}},Maa:function(a,b,c,d){var e=this.nj;b=this.Vm(b);if(!b)return 1;var g=c[2],h=c[3],k=c[0],l=c[1];d=(d||0)%360*-Math.PI/180;if(0!==d){var m=Math.cos(d),n=Math.sin(d),p=a[0],q=a[1];e.transform(m,n,-n,m,(1-m)*p+n*q,(1-m)*q-n*p)}k=a[0]+k;a=a[1]+l;4===c.length?b.loaded&&e.drawImage(b,k,a,g,h):e.drawImage(b,c[4],c[5],c[6],c[7],k,a,g,h);0!==d&&e.setTransform(1,0,0,1,0,0)},Vm:function(a){if(!a)return null;if("IMG"===a.tagName||"CANVAS"===a.tagName||(a=f.Ch.SU(a))&&a.loaded)return a}, IC:function(a){var b=a.Na,c=b[0];a.reverse&&(c>f.a.fb/2?c-=f.a.fb:c<-f.a.fb/2&&(c+=f.a.fb));return this.vo(c,b[1])},vo:function(a,b){var c=this.q.ja?this.q.jb:1,d=this.S,e=0,g=0,e=(a-this.Cd[0])/d,g=(b-this.Cd[1])/d;return[Math.round(e*c),Math.round(g*c)]},Uba:function(a){var b=a.Na,c=b[0];a.reverse&&(c>f.a.fb/2?c-=f.a.fb:c<f.a.fb/2&&(c+=f.a.fb));return[c/this.S,b[1]/this.S]},lda:function(a,b){var c=a.Na;return c[0]>b.nd.x||c[1]>b.nd.y||c[0]<b.Nb.x||c[1]<b.Nb.y?!1:!0},Nba:function(a){var b=this.So; if(this.So.zoom!==this.labels.zoom)for(var c=0,d=b.length;c<d;c+=1){var e=b[c];e.dn&&this.lda(e,a.W.Aa)&&(this.fy.push(e),e.zoom=b.zoom,e.oK=new Date)}},GX:function(a,b,c){var d=!(!c||!c.length),e=a.zoom-this.zoom,g=a.Nk||a;if(0<e||d){a.Nk=[];for(var h=0,k=g.length;h<k;h+=1){var l=g[h],m=this.Uba(l);l.dn||b?l.Hl&&d&&c.VW&&-1!==f.a.indexOf(c.VW,l.Hl)||(5>e&&this.Gca(m,l,0<e,b,d)?a.Nk.push(l):f.l.Z||0===e&&!b||(this.Rx.push(l),l.zoom=this.labels?this.labels.zoom:this.ce,l.oK=new Date)):l.Oi&&a.Nk.push(l)}}else a.Nk= a;return!1},ZX:function(a,b,c,d,e){a=new Date;for(var g=[],h=0,k=b.length;h<k;h+=1){var l=b[h],m=Math.max(0,Math.abs(l.zoom-this.zoom)),m=Math.max(0,1-(a-l.oK)/(1/Math.pow(1.3,m)*c));if(0<m){g.push(l);var n=this.IC(l);-20>n[0]||n[0]>d+20||-20>n[1]||n[1]>e+20||this.$X(n,l,m)}else l.oK=void 0}g.length&&(this.HV=this.hi=1);return g},bY:function(a,b,c,d,e,g){d=a.zoom!==this.zoom;18===a.zoom&&18<this.zoom&&(d=!1);b.globalAlpha=1;a=a.Nk;b=0;for(var h=a.length;b<h;b+=1){var k=a[b];if(!(d&&k.Oi||k.nm&&c&& 0<=c.indexOf(k.nm))){var l=this.IC(k);-20>l[0]||l[0]>e+20||-20>l[1]||l[1]>g+20||this.$X(l,k)}}},t$:function(a){this.Rm&&this.Rm.dY!==this.q.ja&&this.q.set("reload");if(this.HV)return!0;if(a.Gb&&a.Gb.length)if(this.Gb&&this.Gb.length){if(this.Gb!==a.Gb||this.Gb.Du!==this.zoom||this.Gb.Au!==this.eb||this.Gb.Ky!==this.rotation||!this.Gb.size.rb(a.size))return!0}else return!0;else if(this.Gb&&this.Gb.length)return!0;return!this.labels||!this.h.JU&&this.labels===this.Rm&&this.Rm&&this.Rm.Du===this.zoom&& this.Rm.Au===this.eb&&!a.Qj&&this.Rm.Ky===this.rotation&&this.Rm.dY===this.q.ja&&this.Rm.size.rb(a.size)?!1:!0},Gca:function(a,b,c,d,e){if(!e&&!c&&!d)return!0;var g;e=b.Ba.length;if(b.Tl>this.zoom)g=!0;else if(!c&&d)g=!1;else for(var h=0;h<e;h+=1){var k=b.vb[h],l=k[2],m=k[3],n=k[0],k=k[1],n=a[0]+n,k=a[1]+k;this.Hca(n,k,l,m)||(g=!0)}if(!g&&(c||d))for(h=0;h<e;h+=1)for(k=b.vb[h],l=k[2],m=k[3],n=k[0],k=k[1],n=a[0]+n,k=a[1]+k,l=Math.ceil((n+l)/this.Io),c=Math.ceil((k+m)/this.Io),n=Math.floor(n/this.Io), k=Math.floor(k/this.Io),d=0,m=l-n;d<=m;d+=1)for(var l=0,p=c-k;l<=p;l+=1)this.Tt[n+d]||(this.Tt[n+d]={}),this.Tt[n+d][k+l]=1;return!g},Hca:function(a,b,c,d){var e=Math.ceil((a+c)/this.Io);d=Math.ceil((b+d)/this.Io);a=Math.floor(a/this.Io);b=Math.floor(b/this.Io);c=0;for(e-=a;c<=e;c+=1)if(this.Tt[a+c])for(var g=0,h=d-b;g<=h;g+=1){if(1===this.Tt[a+c][b+g])return!1}else this.Tt[a+c]={};return!0}});f.Q.canvas.Lh.t_=f.ba.extend({B:function(a){this.Q=a},K8:function(a){this.Wo=a;return this.KH([0,0,0])?!0:this.Wo=!1},xQ:function(){return this.Q.Pe?!1:!0},X3:function(a){if(a){var b=Array.prototype.slice.call(arguments,0);switch(a.type){case "icon":return this.a4.apply(this,b);case "label":return this.b4.apply(this,b);default:console.error("Unknown type",a)}}},LP:function(a,b,c){a=null;try{a=b.getImageData.apply(b,c)}catch(d){console.error(d),a=null}return a},e9:function(a){return 0>a?0:255<a?255: Math.round(a)},XS:function(a,b){for(var c=0;4>c;c++)a[b+c]=this.e9(a[b+c]);return a},JH:function(a,b){var c=259*(b+255)/(255*(259-b));return[c*(a[0]-128)+128,c*(a[1]-128)+128,c*(a[2]-128)+128]},C8:function(a){return[255-a[0],255-a[1],255-a[2]]},KH:function(a,b){isNaN(b)&&(b=20);var c=Math.max(0,0.299*a[0]+0.587*a[1]+0.114*a[2]-b);switch(this.Wo){case "amap://styles/normal":case "normal":return[1*c,1.2*c,255];case "amap://styles/light":case "light":return[1*c,1*c,255];case "amap://styles/fresh":case "fresh":return[1* c,1*c,220];case "amap://styles/grey":case "amap://styles/dark":case "insight":case "dark":return[1.5*a[0],1.5*a[1],1*a[2]];case "amap://styles/blue":case "amap://styles/darkblue":case "blue_night":case "mapv":return[2*a[0],1.5*a[1],1*a[2]]}return!1},c4:function(a,b){var c=20,d=10;switch(b.Fl){case "active":c+=20,d+=20}return this.JH(this.KH(a,c),d)},dQ:function(a,b){var c=-110;switch(b.Fl){case "active":c+=30}return this.JH(this.KH(this.C8(a),c),50)},Z3:function(a){return this.JH(a,20)},cQ:function(a, b,c,d,e,g){var h=a[b],k=a[b+1],l=a[b+2];a=a[b+3];0<a?(e=e.call(this,[h,k,l,a],g),c[d]=e[0],c[d+1]=e[1],c[d+2]=e[2]):(c[d]=h,c[d+1]=k,c[d+2]=l);c[d+3]=a;this.XS(c,d)},q3:function(a){var b=a.data,c=a.width;a=a.height;for(var d=0,e=0,g=[Infinity,Infinity],h=[-Infinity,-Infinity],k=0;k<c;k++)for(var l=0;l<a;l++){var m=4*this.lG(k,l,c,a);if(!(76.5>b[m+3])){e++;k<g[0]&&(g[0]=k);l<g[1]&&(g[1]=l);k>h[0]&&(h[0]=k);l>h[1]&&(h[1]=l);for(var n=!0,p=0;4>p;p++)if(220>b[m+p]){n=!1;break}n&&d++}}return{Mia:0<e?d/ e:0,R$:[g[0],g[1],h[0]-g[0]+1,h[1]-g[1]+1]}},lG:function(a,b,c){return b*c+a},tB:function(a,b,c,d,e,g,h){var k=this.lG(b,c,d,e);d=a[4*k+0];e=a[4*k+1];var l=a[4*k+2];a=a[4*k+3];if(a/255<h.PW||h.hZ&&!h.hZ.call(this,d,e,l,a))return!1;g.push([b,c]);return!0},I7:function(a,b){var c=Math.abs(a[0]-b[0]),d=Math.abs(a[1]-b[1]);return Math.sqrt(c*c+d*d)},$s:function(a,b){return 0.1>Math.abs(a[0]-b[0])&&0.1>Math.abs(a[1]-b[1])},U8:function(a,b){for(var c=[a[0]],d=1,e=a.length;d<e;d++){var g=a[d];this.I7(g,c[c.length- 1])<=b&&c.push(g)}return this.$s(c[c.length-1],a[a.length-1])?c:null},eka:function(){},O1:function(a,b,c,d){d=f.extend({PW:0.2,LW:4},d);var e,g,h=[],k=[],l=[],m=[];for(e=0;e<c;e++){for(g=0;g<b&&!this.tB(a,g,e,b,c,h,d);g++);for(g=b-1;0<=g&&!this.tB(a,g,e,b,c,k,d);g--);}if(!h.length||!k.length)return null;for(g=0;g<b;g++){var n;e=h[0][0];n=k[0][0];if(g>=e&&g<=n)for(e=0;e<c&&!this.tB(a,g,e,b,c,l,d);e++);e=h[h.length-1][0];n=k[k.length-1][0];if(g>=e&&g<=n)for(e=c-1;0<=e&&!this.tB(a,g,e,b,c,m,d);e--); }if(!l.length||!m.length)return null;m.reverse();h.reverse();if(this.$s(l[l.length-1],k[0])&&this.$s(k[k.length-1],m[0])&&this.$s(m[m.length-1],h[0])&&this.$s(h[h.length-1],l[0])){b=[m,h,l,k];e=0;for(a=b.length;e<a;e++)if(!(2>b[e].length||(b[e]=this.U8(b[e],d.LW),b[e])))return null;return[].concat(b[0]).concat(b[1].slice(1)).concat(b[2].slice(1)).concat(b[3].slice(1))}return null},Z2:function(a){for(var b=[Infinity,Infinity],c=[-Infinity,-Infinity],d=0,e=a.length;d<e;d++){var g=a[d][0],h=a[d][1]; b[0]>g&&(b[0]=g);b[1]>h&&(b[1]=h);c[0]<g&&(c[0]=g);c[1]<h&&(c[1]=h)}return b.concat([c[0]-b[0]+1,c[1]-b[1]+1])},TP:function(a,b){this.OS||(this.OS=document.createElement("canvas"));var c=this.OS;c.width=a;c.height=b;return c},w3:function(a){switch(a.length){case 2:return"lineTo";case 4:return"quadraticCurveTo"}return null},pP:function(a){switch(a.length){case 2:return[a[0]+0.5,a[1]+0.5];case 4:return[a[0]+0.5,a[1]+0.5,a[2]+0.5,a[3]+0.5]}return a},BO:function(a,b){a.beginPath();for(var c=0,d=b.length;c< d;c++){var e=b[c];0===c?(2<e.length&&(4===e.length?e=e.slice(-2):console.error("Unknown start point: ",b)),a.moveTo.apply(a,this.pP(e))):a[this.w3(e)].apply(a,this.pP(e))}},e3:function(a){a=this.dQ([255,255,255],{Fl:a.Fl});this.XS(a,0);return"rgba("+a.slice(0,3).join(",")+", 0.8)"},Y3:function(a,b,c){function d(a){return[Math.round((a[0]-n)*q+n-m[0]),Math.round((a[1]-p)*r+p-m[1])]}c=f.extend({Fl:"hover",pT:!0,padding:[1.5,1.5]},c);var e=a.width,g=a.height,h=this.TP(2*e+10,g),k=h.getContext("2d"), l=this.Z2(b),m=c.padding;f.l.cd&&(m[0]+=2.5,m[1]+=2.5);for(var n=l[0],p=l[1],q=(l[2]+2*m[0])/l[2],r=(l[3]+2*m[1])/l[3],l=0,s=b.length;l<s;l++)switch(b[l].length){case 2:b[l]=d(b[l]);break;case 4:b[l]=d(b[l]).concat(d(b[l].slice(2)));break;default:console.error("Unknown point: ",b[l])}k.save();this.BO(k,b);k.closePath();k.fillStyle=c.fillStyle||"rgba(255,255,255,0.85)";k.fill();k.putImageData(a,e+6,0);k.drawImage(h,e+6,0,e,g,0,0,e,g);a=c.pT&&10<b.length;var u=c.strokeStyle||this.e3(c);k.strokeStyle= a?"#fff":u;k.lineCap="butt";k.lineJoin="round";k.lineWidth=f.l.cd?2:1.2;k.stroke();k.restore();return{qa:h,Cf:[0,0,e,g],ld:a?function(a,c){this.V8(a,c,b,u)}:null}},V8:function(a,b,c,d){this.S1();var e=this.Q.ht;this.tO(a,c,{duration:200,DL:0,startTime:Date.now(),Jga:function(a){a.strokeStyle=d;a.lineCap="butt";a.lineJoin="round";a.lineWidth=f.l.cd?2:1;a.translate(b[0],b[1])},Nia:function(){return this.Q.ht!==e}})},S1:function(){this.rF&&f.a.Sg(this.rF)},tO:function(a,b,c,d){this.xQ()?this.rF=f.a.nc(function(){this.rF= null;if(c.Nia.call(this))d&&d.call(this);else{var e=(Date.now()-c.startTime)/c.duration;1<e&&(e=1);var g=Math.round(b.length*e);if(c.DL<g){var h=1===e?b:b.slice(c.DL,g+1);h.length&&(a.save(),c.Jga.call(this,a,e),this.BO(a,h),a.stroke(),a.restore());c.DL=g}1>e?this.tO(a,b,c,d):d&&d.call(this)}},this):d&&d.call(this)},a2:function(a,b,c){a=a.createImageData(b.width,b.height);var d=a.data,e=a.width,g=a.height,h=c[0]+c[2],k=c[1],l=c[1]+c[3];for(c=c[0];c<h;c++)for(var m=k;m<l;m++)for(var n=4*this.lG(c, m,e,g),p=0;4>p;p++)d[n+p]=b.data[n+p];return a},O4:function(a,b,c){var d=a[1]+(b[1]-a[1])*c;return[Math.round(a[0]+(b[0]-a[0])*c),Math.round(d)]},v4:function(a,b,c){for(var d=1/c,e=[],g=1;g<c;g++){var h=this.O4(a,b,d*g);e.length&&this.$s(h,e[e.length-1])||e.push(h)}return e},w4:function(a,b){for(var c=1,d=a.length;c<d;c++){var e=a[c-1],g=a[c];2===g.length&&(4===e.length&&(e=e.slice(2)),2===e.length&&(e=this.v4(e,g,b),a.splice.apply(a,[c,0].concat(e)),c+=e.length,d+=e.length))}},z3:function(a,b,c, d,e){e=Math.round(Math.min(c,d)*e);c--;d--;e?a=[[a+c,b+d-e],[a+c,b+d,a+c-e,b+d],[a+e,b+d],[a,b+d,a,b+d-e],[a,b+e],[a,b,a+e,b],[a+c-e,b],[a+c,b,a+c,b+e],[a+c,b+d-e]]:(e=[a+c,b+d],a=[e,[a,b+d],[a,b],[a+c,b],e]);this.w4(a,5);return a},a4:function(a,b,c,d,e,g){b=a.Cf;var h=c?c.tK:this.LP(d,e,b);if(h){var k=c?c.KV:null,l=h,m=a.padding,n=m?m[0]:0,p=m?m[1]:0;(m=0<n*p)&&(l=this.a2(e,l,[n,p,l.width-2*n,l.height-2*p]));d=l.data;b=l.width;var q=l.height;if(b&&q){c=(c=this.Q.h)&&c.J?c.J.get("hotspotOptions"): {};c=f.extend({borderAnimation:!0},c);l=this.q3(l);a=!a.eda&&0.46<=l.Mia;var r=e.createImageData(b,q);e=r.data;for(var s=a?this.dQ:this.Z3,u=0,v=d.length;u<v;u+=4)this.cQ(d,u,e,u,s,{Fl:g});if(m&&(e=a&&!f.l.cd?this.O1(d,b,q,{hZ:a?function(a,b,c){return!(220<a&&220<b&&220<c)}:null,PW:0.2,LW:4}):null,e||(e=l.R$,e=this.z3(e[0],e[1],e[2],e[3],0.2)),e)){var x=this.Y3(r,e,{Fl:g,fillStyle:"active"!==g?null:"#ddd",pD:h,pT:c.borderAnimation&&"hover"===g&&!k,padding:a?[1.5,1.5]:[2.5,2.5]}),r=null;return{pD:h, Bu:function(a,b){k&&h&&a.putImageData(h,b[0],b[1]);a.drawImage(x.qa,x.Cf[0],x.Cf[1],x.Cf[2],x.Cf[3],b[0],b[1],b[2],b[3]);x.ld&&(x.ld.call(this,a,b),x.ld=null)}}}return{pD:h,Bu:function(a,b){if(m){var c=this.TP(r.width,r.height);c.getContext("2d").putImageData(r,0,0);a.clearRect(b[0]+n,b[1]+p,b[2]-2*n,b[3]-2*p);a.drawImage(c,0,0,c.width,c.height,b[0],b[1],b[2],b[3])}else a.putImageData(r,b[0],b[1]);r=null}}}}},b4:function(a,b,c,d,e,g){a=a.Cf;if(c=c?c.tK:this.LP(d,e,a))if(d=c.data,a=c.width,b=c.height, a&&b){var h=e.createImageData(a,b);e=h.data;a=0;for(b=d.length;a<b;a+=4)this.cQ(d,a,e,a,this.c4,{Fl:g});return{pD:c,Bu:function(a,b){a.putImageData(h,b[0],b[1]);h=null}}}},VP:function(a,b,c){var d=c[2],e=c[3],g=a[0]+c[0];a=a[1]+c[1];if(4===c.length||c.rQ){if((b=this.Q.Vm(b))&&b.loaded)return c=[4,4],f.l.cd&&(c[0]*=2,c[1]*=2),{type:"icon",eda:b.src&&b.src.indexOf&&0<=b.src.indexOf("/indoor_icon/"),padding:c,Cf:[g-c[0],a-c[1],d+2*c[0],e+2*c[1]]}}else return{type:"label",Cf:[g,a,d,e]}}}); f.Q.canvas.Lh.ob({JP:function(){this.sG||(this.sG=new f.Q.canvas.Lh.t_(this));return!1===this.sG.K8(this.Wo)?null:this.sG},Qp:function(a,b){var c=this.JP();if(c&&c.xQ()&&a&&a.Ba&&a.vb&&0===this.rotation){var d=this.ht,e=this.IC(a),g=[],h;a.Yn||(a.Yn=[]);var k=a.Yn;for(h=a.vb.length-1;0<=h;h--){if(k[h]){if(k[h].rev!==d)continue;if(k[h].KV===b)continue}var l=c.VP(e,a.Ba[h],a.vb[h]);if(l){var m=c.X3(l,a,k[h],this.pk,this.nj,b);m&&(k[h]={KV:b,rev:d,tK:m.pD},g.push({Bu:m.Bu,Cf:l.Cf,By:"icon"===l.type? 2:1}))}}g.sort(function(a,b){return a.By-b.By});h=0;for(d=g.length;h<d;h++)g[h].Bu.call(c,this.nj,g[h].Cf),g[h].Bu=null}},Kv:function(a){a.Yn&&(a.Yn.length=0,a.Yn=null)},vB:function(){var a=this.nj;a&&a.putImageData&&a.putImageData(a.getImageData(0,0,1,1),0,0)},AB:function(a){if(a&&a.Ba&&a.vb&&a.Yn){var b=this.nj,c=this.JP();if(c){for(var d=this.ht,e=this.IC(a),g=a.Yn,h=0,k=a.vb.length;h<k;h++){var l=g[h];if(l&&(g[h]=null,d===l.rev)){var m=c.VP(e,a.Ba[h],a.vb[h]);m&&m.Cf&&b.putImageData(l.tK,m.Cf[0], m.Cf[1])}}a.Yn=null;this.ht++}}}});f.hs={g:function(a,b,c,d,e){if(this.Od(a,b,c||this))return this;var g=this.ue=this.ue||{};g[a]=g[a]||[];e?g[a].unshift({ib:b,je:c||this,Rj:d}):g[a].push({ib:b,je:c||this,Rj:d});"complete"===a&&this.wa&&this.r(a);return this},Od:function(a,b,c){var d=this.ue;if(b&&c){if(d&&a in d&&d[a])for(var e=0;e<d[a].length;e+=1)if(d[a][e].ib===b&&d[a][e].je===c)return!0;return!1}return d&&a in d&&d[a]&&0<d[a].length},I:function(a,b,c){if(!this.Od(a))return this;var d=this.ue;if(d&&d[a])for(var e=0;e<d[a].length;e+= 1)if(!(d[a][e].ib!==b&&"mv"!==b||c&&d[a][e].je!==c)){d[a].splice(e,1);d[a].length||(d[a]=null);break}return this},oD:function(a,b){if(!this.Od(a))return this;var c=this.ue;if(c&&c[a])for(var d=0;d<c[a].length;d+=1)if(!b||c[a][d].je===b){c[a].splice(d,1);c[a].length||(c[a]=null);break}return this},r:function(a,b){function c(a){var b=Array.prototype.slice.call(arguments,1),c,d,e,g;d=0;for(e=b.length;d<e;d+=1)for(c in g=b[d]||{},g)Object.prototype.hasOwnProperty.call(g,c)&&(a[c]=g[c]);return a}if(!this.Od(a))return this; var d={type:a};b||"string"!==typeof b&&"number"!==typeof b&&"boolean"!==typeof b?("object"===typeof HTMLElement?b instanceof HTMLElement:b&&"object"===typeof b&&1===b.nodeType&&"string"===typeof b.nodeName)?d.value=b:d=c(d,b):d.value=b;for(var e=[].concat(this.ue[a]),g=0;g<e.length;g+=1)e[g].ib&&(e[g].ib.call(e[g].je||this,d),e[g]&&e[g].Rj&&this.ue[a]&&this.ue[a].splice(g,1));return this},Uh:function(a){a?this.ue&&this.ue[a]&&(this.ue[a]=null):this.ue=null;return this}};(function(){if(f.l.hr&&!f.qi){f.qi=f.HE();var a=f.a.SJ({wu:"posToCoord",Ov:"_decodeBoundsList"});f.qi.Mj(null,new Function("\\n    return {\\n      "+a.posToCoord+": "+f.dF.wu.toString()+",\\n      "+a._decodeBoundsList+": "+f.ps.Ov.toString()+"\\n  }"));f.qi.Mj(null,function(){return{sr:function(a,c){a.Oj?this.tea.call(this,a,c):this.uea.call(this,a,c)},uea:function(a,c){for(var d=a.rE,e=a.Pj,g=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.ZV&&(l=JSON.parse(l)),l["x-vd-v"]?(this.Ed=a.Id.Ed=l["x-vd-v"], this.Vd=a.Id.Vd=[l.tv||"",l.vdv].join("-"),this.lf=a.Id.lf=l.tv):this.sea(this.extend({},a,{tx:l,Rc:g})))}g.length?this.parseLabel(this.extend({},a.Id,{Rc:g}),function(d,g){var h=g.data,k=g.Aca;c(d,{xc:a.xc,Bd:a.Bd.filter(function(a){return"loaded"===a.status}),data:h,Aca:k,Pj:e,ye:{Ed:a.Id.Ed,Vd:a.Id.Vd,lf:a.Id.lf,lc:a.lc}},{qr:!e,Sm:e})}):c(null,{xc:a.xc,data:null,Pj:e},{qr:!e,Sm:e})},sea:function(a){function c(a,b,c){var n=[c,a,b].join("/");18<h&&!m&&(n+="/"+h);if((a=d.filter(function(a){return a.key=== n})[0])&&"loaded"!==a.status&&-1!==l.indexOf(v))if("limg"===v)b=g[1],a.Rd=b,"string"===typeof b.b&&(b.b=u.Ov(b.b)),c="",(c="object"===typeof b.u?b.u.url:b.u)&&(b.u={url:c,Cn:"limg-"+a.key+"-"+e});else{b={li:a.ma,$k:n,Ca:g,dd:v,zK:"building"===v,Wg:"poilabel"===v||"roadlabel"===v||"building"===v&&p};if("poilabel"===v||"roadlabel"===v)b.Rd=a.Rd;v===l[l.length-1]&&(a.status="loaded");k.push(b)}}var d=a.Bd,e=a.IK,g=a.tx,h=a.lc,k=a.Rc,l=a.ta,m=a.He,n=a.gK,p=a.od,q=g[0].split("-");a=parseInt(q[1]);var r= parseInt(q[2]),s=parseInt(q[0]),u=this,v=q[3],q=Math.pow(2,s);10>s&&(a<=n&&c(a+q,r,s),a>=q-n&&c(a-q,r,s));c(a,r,s)},tea:function(a,c){for(var d=a.rE,e=a.Pj,g=[],h=[],k=0,l=d.length;k<l;k+=1){var m=d[k];m&&(m=JSON.parse(m),m["x-vd-v"]?(this.Ed=a.Id.Ed=m["x-vd-v"],this.Vd=a.Id.Vd=[m.tv||"",m.vdv].join("-"),this.lf=a.Id.lf=m.tv):(this.rea(this.extend({},a,{tx:m,Rc:g,Ed:this.Ed||"v4"})),h.push(m)))}c(null,{xc:a.xc,maa:h,Bd:a.Bd.filter(function(a){return"loaded"===a.status}),Pj:e,ye:{Ed:a.Id.Ed,Vd:a.Id.Vd, lf:a.Id.lf,lc:a.lc}},{qr:!e,Sm:e})},rea:function(a){function c(a,b,c,e){var k=[e,b,c].join("/");if(a=a.filter(function(a){return a.key===k})[0])if(b=a.ma,c=q.Qb+offlineMap.domain+"icons/"+(r||g?"b":"n")+(10>b.z?"39":"18")+"/1/",a&&"loaded"!==a.status&&-1!==h.indexOf(t))if("limg"===t)n[1]&&(a.Rd={url:"data:image/png;base64,"+n[1],Cn:"limg-"+a.key+"-"+m});else{if("roadlabel"===t)for(var l=1;l<n.length;l+=1){var s=n[l];s.Ou=s[0];var u=d.Ur(s[1],p);if(!(0>u[0]||256<=u[0]||0>u[1]||256<=u[1])){var v=x.wu(u, b),u={Na:v,name:s[0],Oi:!0,Ad:u,Ba:[],vb:[],visible:!0,Wj:!0},E=u.name;u.Er=15>s[2]%90||75<s[2]%90?90*Math.floor((s[2]+15)/90):s[2];v=s[3];0<=s[8]&&(u.hB={name:s[6],kZ:s[7],dir:s[8]});var G=v[2];e=v[3];var K=-Math.floor(e/2);if(s[4])if("v5"<=p){var J=s[5].split(":"),O=J[1],O=parseInt(O)-1,J=q.Qb+offlineMap.domain+"style_icon/icon-normal-"+(r||g?"big":"small")+".png";u.Ba.push(J);var J=Math.floor(O/10),M=O%10,T=0,U=0,Y=0;g?(T=48,Y=U=40):r?(T=U=40,Y=36):(T=U=24,Y=20);var X=T*Math.max(G+2,Y)/Y,J=[-X/ 2,-T/2,X,T,U*M,U*J,U,U];u.ke=7;u.vb.push(J)}else{K=!1;O=parseInt(s[5]);153===O&&(0===E.indexOf("G")?(O="153g",K=!0):0===E.indexOf("S")&&(O="153s",K=!0));if(151===O||150===O)K=!1,0===E.indexOf("G")&&(O=150,K=!0),0===E.indexOf("S")&&(O=151,K=!0);152===O&&(O=151);!0===K&&(c=q.Qb+offlineMap.domain+"theme/v1.3/icons/"+(r||g?"b/":"n/"));J=c+O+".png";u.Ba.push(J);X=s[4][0]*y;s=s[4][1]*y;J=[-X/2,-s/2,X,s];u.vb.push(J);G=Math.min(X-3,G);e=Math.min(s,e);K=-Math.floor(e/2)+(g?3:1)}u.Ba.push(a.Rd);u.ke=11;u.vb.push([-Math.floor(G/ 2),K,G,e,v[0],v[1],v[2],v[3]]);a.ta||(a.ta=[]);a.ta.push(u)}}else if("poilabel"===t){E=[];for(l=1;l<n.length;l+=1)if(s=n[l],s.Ou=s[0],u=d.Ur(s[1],p),!(0>u[0]||256<=u[0]||0>u[1]||256<=u[1])){v=x.wu(u,b);u={Na:v,name:s[0].replace("^",""),dn:!0,Ad:u,Ba:[],vb:[],visible:!0,Wj:!0};O=0;u.Wk=s[8];s[6]&&("v5"<=p?(J=s[6].split(":"),O=J[1],K=Math.floor((parseInt(J[0].split("_")[1])-28)/2)):O=s[6]);if(O&&s[3]){if("v5"<=p){J=q.Qb+offlineMap.domain+"style_icon/icon-"+(1===K?"biz-":"normal-")+(r||g?"big":"small")+ ".png";u.Ba.push(J);O=parseInt(O)-1;J=Math.floor(O/10);M=O%10;Y=U=T=0;g?(T=48,U=40,Y=28):r?(T=U=40,Y=28):(T=U=24,Y=20);X=T;if(151===O||152===O||153===O)Y-=4,G=s[7][0][2],X=T*Math.max(G+2,Y)/Y;J=[-X/2,-T/2,X,T,U*M,U*J,U,U]}else J=c+O+".png",u.Ba.push(J),J=[-Math.round(s[3][0]/2),-Math.round(s[3][1]/2),s[3][0],s[3][1]],g&&(J[0]*=y,J[1]*=y,J[2]*=y,J[3]*=y);u.vb.push(J)}if(s[2]&&s[7])for(G=s[2],J=0;J<s[2].length;J+=1){u.Ba.push(a.Rd);v=s[7][J];g&&(G[J][0]=Math.round(G[J][0]*y),G[J][1]=Math.round(G[J][1]* y),G[J][2]=Math.round(G[J][2]*y),G[J][3]=Math.round(G[J][3]*y));X=G[J][0];M=G[J][1]-(g?4:2);T=v[3];U=v[2];X<-U&&O&&s[3]&&(X=-U+u.vb[0][0]);if("v5">p){if("375"===O||"3751"===O)U=Math.min(G[J][2],g?24:14),X=-Math.floor(U/2),M=-Math.floor(T/2)}else X-=2;u.ke=T-4;4===e&&"\\u5317\\u4eac"===u.name&&(M=g?-50:-26);u.vb.push([X,M,U,v[3],v[0],v[1],v[2],v[3]])}u.Hl=s[5];u.Hl&&E.push(u.Hl);u.Vk=s[4];u.Tl=s[9];u.XK=s[10];u.Xe=O;u.br=K;a.ta||(a.ta=[]);a.ta.push(u)}a.wf||(a.wf={},a.wf.xe=E)}t===h[h.length-1]&&(a.status= "loaded",a.wa=a.qa=!0,a.Fc&&(a.Fc.wa=a.Fc.qa=!0))}}var d=this,e=a.Bd,g=a.cd,h=a.ta,k=a.gK,l=a.jb,m=a.IK,n=a.tx,p=a.Ed,q=this.A,r=this.l.Z,s=n[0].split("-");1===s.length&&(s=n[0].split("_"));a=parseInt(s[1]);var u=parseInt(s[2]),v=parseInt(s[0]),x=this,t=s[3],y=g?l:1,l=Math.pow(2,v);10>v&&(a<=k&&c(e,a+l,u,v),a>=l-k&&c(e,a-l,u,v));c(e,a,u,v)}}},function(a){a||(f.qi.qda=!0)})}})();(function(){if(f.l.hr&&!f.sf){f.sf=f.HE();var a=f.a.SJ({g:"on",Od:"hasEvents",I:"off",oD:"offByContext",r:"emit",Uh:"clearEvents"});f.sf.Mj(null,function(){return{DW:function(a,c){var d=this;if(3<this.hq||this.disabled)return this.Ri(a,c);var e=a.Bd,g=a.lc,h=a.tg,k=a.MM,l=a.Wca,m=a.ta;a.Id.Nc?this.Nc=a.Id.Nc:a.Id.Nc=this.Nc;if(h&&this.bo())this.lk(e,c);else{var n=[(new Date).getTime(),this.Qq()+1&65535,h?1:0].join("-");h||(this.yf[n]=1);var k={command:"tiles",reqId:n,payload:{t:k,opt:g,cs:{level:g, flds:m.join(","),v:l?"3":"2"}}},p=this.send(k);this.Am[n]={Bd:e,lc:g,F:a,yc:c,tg:h};this.Zx()||setTimeout(function(){d.Zx()||(d.hq?d.hq++:d.hq=1,d.vU(p)&&(delete d.Am[n],delete d.yf[n],d.Ri(a,c)))},300);this.g("tiles",this.wD,this);this.g("ack",this.vD,this);this.g("disable",this.uD,this)}},p$:function(a){this.EK()&&this.send(a)},uD:function(){this.disabled=!0;this.close();for(var a in this.Am)this.Am.hasOwnProperty(a)&&this.cG(a)},cG:function(a){var c=this.Am[a];c&&(this.lk(c.Bd,c.yc),delete this.Am[a], delete this.yf[a])},vD:function(a){var c=a.reqId,d=this.Am[c];d&&(a.content.status?d.yc&&(d.yc(null,{xc:d.F.xc,q9:!0,Pj:!0},{qr:!1,Sm:!0}),delete this.Am[c],delete this.yf[c]):this.cG(c))},wD:function(a){var c=a.reqId,d=this.Am[c];d&&(d.tg&&this.bo()?this.cG(c):this.sr(this.extend({Pj:!1},d.F,{rE:a.content.data,lc:a.content.opt}),d.yc))},sr:function(a,c){for(var d=a.rE,e=a.Pj,g=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.ZV&&(l=JSON.parse(l)),l["x-vd-v"]?(this.Ed=a.Id.Ed=l["x-vd-v"],this.lf=a.Id.lf= l.tv,this.Vd=a.Vd=[l.tv||"",l.vdv].join("-"),l.bgc&&(l="#"+l.bgc.substring(2),a.uq!==l&&(a.uq=l))):this.mu(this.extend({},a,{tx:l,Rc:g})))}g.length?(d=this.extend({},a.Id,{Rc:g}),(a.He?this.rX:this.parseDataToVector)(d,function(d,g){c(d,{xc:a.xc,Bd:a.Bd.filter(function(a){return"loaded"===a.status}),data:g.data,uq:a.uq,Pj:e,ye:{Ed:a.Id.Ed,lf:a.Id.lf,Vd:a.Id.Vd,lc:a.lc}},{qr:!e,Sm:e})})):c(null,{xc:a.xc,Bd:[],data:null,Pj:e},{qr:!e,Sm:e})}}});f.sf.Mj(null,f.aL);f.sf.Mj(null,new Function("\\n    return {\\n      "+ a.on+": "+f.hs.g.toString()+",\\n      "+a.hasEvents+": "+f.hs.Od.toString()+",\\n      "+a.off+": "+f.hs.I.toString()+",\\n      "+a.offByContext+": "+f.hs.oD.toString()+",\\n      "+a.emit+": "+f.hs.r.toString()+",\\n      "+a.clearEvents+": "+f.hs.Uh.toString()+"\\n    }\\n  "));f.sf.Mj(null,f.$E,function(a){a||(f.sf.Mca=!0)})}})(); ')

_jsload_('overlay', 'f.pa.bc=f.pa.Xd.extend({B:function(a,b){var c=a.length;this.Mf=Array(c);for(var d,e,g=0;g<c;g+=1)if(d=a[g],e=new f.pa.JN(d),this.Mf[g]=e,!b)if(0===g){if(0===d.length)break;e.No(d)||d.reverse()}else 0!==d.length&&e.No(d)&&d.reverse()},Qc:function(){if(0===this.Mf.length)return[Infinity,Infinity,-Infinity,-Infinity];if(!this.hf){for(var a=this.Mf[0].Qc(),b=1;b<this.Mf.length;b+=1){var c=this.Mf[b].Qc();f.H.aU(a,c)||f.H.extend(a,c)}this.hf=a}return this.hf},qV:function(){return this.Mf},Vg:function(){return f.pa.Yd.Cz}, md:function(a){for(var b=this.Mf,c,d=0,e=b.length;d<e&&(c=b[d].md(a),0<d&&(c=!c),c);d+=1);return c}});f.pa.ks=f.pa.Xd.extend({B:function(a){var b=a.length;this.We=Array(b);for(var c=0;c<b;c+=1){var d=new f.pa.bc(a[c]);this.We[c]=d}},Qc:function(){if(!this.hf){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.We,c=0,d=b.length;c<d;c+=1)f.H.extend(a,b[c].Qc());this.hf=a}return this.hf},IJ:function(){return this.Na},Vg:function(){return f.pa.Yd.Az},UU:function(){return this.We},md:function(a){for(var b=!1,c=0,d=this.We.length;c<d;c+=1)if(this.We[c].md(a)){b=!0;break}return b}});f.pa.Kn=f.pa.Xd.extend({B:function(a){this.Na=a},Qc:function(){if(!this.hf){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=0,c=this.Na.length;b<c;b+=1)f.H.wC(a,this.Na[b]);this.hf=a}return this.hf},IJ:function(){return this.Na},Vg:function(){return f.pa.Yd.ME},Qq:function(){return this.Na.length},Gt:function(a){return f.Mc.yo(a,this.Na)}});f.pa.JN=f.pa.Kn.extend({Vg:function(){return f.pa.Yd.IN},No:f.Mc.No,md:function(a){return f.Mc.md(a,this.Na)}});f.pa.vv=f.pa.Xd.extend({B:function(a){var b=a.length;this.We=Array(b);for(var c=0;c<b;c+=1){var d=new f.pa.Kn(a[c]);this.We[c]=d}},UU:function(){return this.We},Qc:function(){if(!this.hf){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.We,c=0,d=b.length;c<d;c+=1)f.H.extend(a,b[c].Qc());this.hf=a}return this.hf},IJ:function(){return this.Na},Vg:function(){return f.pa.Yd.SE},Qq:function(){return this.Na.length},Gt:function(a){for(var b=Infinity,c=0,d=this.We.length;c<d;c+=1)b=Math.min(b,this.We[c].Gt(a)); return b}});f.D.Fb=f.D.Hg.extend({B:function(a,b){arguments.callee.oa.apply(this,arguments);this.L9=a;this.X("options",a);this.X("geodesic",a);this.X("path",a);this.X("noSelect",a);this.vq();this.X("display",b);b.g("zoomend",this.pl,this)},Gm:function(){if("3D"==this.map.J.view.type){var a=this.M;a&&(a=a.Y)&&(delete a.Ca,delete a.Ct)}},deltaPosChanged:function(){this.set("display")},geodesicChanged:function(){this.pathChanged()},$o:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path"),b=a.Sc(b), d=[],e,g,h;e=0;for(g=c.length;e<g;e+=1)h=this.map.Jb(c[e]).add(b),d.push(this.map.de(h));0<d.length&&this.set("path",d);if(this.vH&&0<this.vH.length)for(e=0,c=this.vH.length;e<c;e+=1)this.vH[e].$o(a);this.L9.r("movepoly",{tu:b})},oy:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]])},Yv:function(a){this.get("options");return this.x4()?this.n3(a):this.hG(a)},x4:function(){var a=this.get("options");return a&&!!a.geodesic},getStrokeWeight:function(){return this.get("options").strokeWeight}, n3:function(a){if(!a||!a.length)return[];var b,c=[],d,e,g=[],h,k=this.map.get("resolution"),l=this.get("options").geodesicInterpolatePixelWidth||17;c.push(a[0]);g.push(this.iG(a[0]));d=1;for(e=a.length;d<e;d+=1)h=this.iG(a[d]),b=Math.round(Math.abs(h[0]-g[g.length-1][0])/k),b=Math.min(31,Math.round(b/l),Math.round(Math.abs(a[d-1].O-a[d].O))),"3D"==this.map.J.view.type&&(b=Math.round(b/1.2)),b=f.V.Vba(a[d-1],a[d],b),c.push.apply(c,b),g.push.apply(g,this.hG(b)),c.push(a[d]),g.push(h);return g},WB:function(a){var b= [],c=[],d,e,g,h,k,l,m=a.Y;m instanceof f.pa.Kn?l=[m]:m instanceof f.pa.vv&&(l=m.We);m=[];a=a.Ia.rotation;b=this.map.get("size");d=Math.PI*a/180;a=(Math.abs(b.width*Math.cos(d))+Math.abs(b.height*Math.sin(d)))/2;var n=(Math.abs(b.width*Math.sin(d))+Math.abs(b.height*Math.cos(d)))/2;d=0;for(e=l.length;d<e;d+=1)if(g=l[d].Na,g.length)for(h=0,k=g.length;h<k;h+=1)if(b=g[h],b=this.$e(b),b[0]=Math.round(b[0]+a),b[1]=Math.round(b[1]+n),0===h)c[0]=NaN,c[1]=NaN,m.push("M"+b[0]+" "+b[1]);else if(b[0]!==c[0]|| b[1]!==c[1])m.push("L"+b[0]+" "+b[1]),c[0]=b[0],c[1]=b[1];return m},vq:function(){if(this.map&&!this.M){var a=this.map,b=this.get("path"),b=this.M=new f.Eg({dG:this.Oc.CA,name:"polyline-"+f.a.Lb(this),zIndex:this.get("options").zIndex||1,map:a,Y:new f.pa.Kn(this.Yv(b)),style:this.get("options")});b.ao=this;this.X("resolution",a);this.X("center",a);this.X("coords",b);this.X("style",b);b.he("noSelect visible zIndex strokeWeight isOutline deltaPos".split(" "),this)}},pathChanged:function(){this.Gm(); var a=this.M,b=this.get("path");a&&(this.set("coords",this.Yv(b)),a.Ug=!0,"c"!==this.map.get("overlayRender")&&a.Ia?(b=this.WB(a),f.l.Ol||b.push("e"),b=b.join(" "),0===b.length&&a.Ia?(a.Ia.Ye.parentNode.removeChild(a.Ia.Ye),a.Ia.Wb.parentNode&&a.Ia.Wb.parentNode.removeChild(a.Ia.Wb),a.Ia=null):f.l.Ol?(a.Ia.Ye.setAttribute("d",b),a.Ia.Wb&&a.Ia.Wb.setAttribute("d",b)):(a.Ia.Ye.path=b,a.Ia.Wb&&(a.Ia.Wb.path=b))):this.set("display"))},pl:function(){},visibleChanged:function(){this.M&&(this.M.Ia?this.get("visible")? (this.M.Ia.Ye.style.display="block",this.M.Ia.Wb&&(this.M.Ia.Wb.style.display="block")):(this.M.Ia.Ye.style.display="none",this.M.Ia.Wb&&(this.M.Ia.Wb.style.display="none")):this.set("display"))},optionsChanged:function(){this.Gm();this.M&&(this.M.style=this.get("options"),this.M.zIndex=this.get("options").zIndex,this.M.Bo(),this.M.Ia&&(this.M.Ia.Ye.parentNode&&this.M.Ia.Ye.parentNode.removeChild(this.M.Ia.Ye),this.M.Ia.Wb&&this.M.Ia.Wb.parentNode&&this.M.Ia.Wb.parentNode.removeChild(this.M.Ia.Wb))); this.set("display")}});f.D.iv=f.D.Fb.extend({B:function(a,b){this.J9=a;arguments.callee.oa.apply(this,arguments);this.X("tolerance",a);b.g("zoomend",this.pl,this)},hG:function(a){var b=Math.pow(2,20-Math.round(this.map.get("zoom")));return f.rN.cV(a,this.map.Lm,b,this.J9.F)},toleranceChanged:function(){this.pathChanged()},pl:function(){this.pathChanged()}});f.D.bc=f.D.Hg.extend({B:function(a,b){arguments.callee.oa.apply(this,arguments);this.rT=a;this.X("options",a);this.X("path",a);this.vq();this.X("display",b)},Gm:function(){if("3D"==this.map.J.view.type){var a=this.M;a&&(a=a.Y.get("rings"))&&f.a.isArray(a)&&a.forEach(function(a){delete a.Ca;delete a.Ct})}},deltaPosChanged:function(){this.set("display")},$o:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path");a=a.Sc(b);var b=[],d,e;c.length&&c[0]instanceof f.V&&(c=[c],e=!0);for(var g= 0,h=c.length;g<h;g+=1){for(var k=c[g],l=[],m=0,n=k.length;m<n;m+=1)d=this.map.Jb(k[m]).add(a),l.push(this.map.de(d));b.push(l)}0<b.length&&this.set("path",e?b[0]:b);this.rT.r("movepoly",{tu:a})},oy:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.rT.r("movepoly",{tu:c})},Yv:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];a.length&&a[0]instanceof f.V&&(a=[a]);for(var b,c,d=[],e,g=this.map,h=0;h<a.length;h+=1){var k=a[h];e=[];b=0; for(c=k.length;b<c;b+=1){var l=g.Jb(k[b]);e.push([l.x,l.y])}d.push(e)}return d},vq:function(){if(this.map&&!this.M){var a=this.map,b=this.get("path"),b=this.M=new f.Eg({dG:this.Oc.CA,name:"polygon-"+f.a.Lb(this),zIndex:this.get("options").zIndex||1,map:a,Y:new f.pa.bc(this.Yv(b)),style:this.get("options")});b.ao=this;this.X("resolution",a);this.X("center",a);this.X("coords",b);this.X("style",b);b.he(["visible","zIndex","strokeWeight","deltaPos"],this)}},pathChanged:function(){var a=this.M,b=this.get("path"); this.Gm();a&&(this.set("coords",this.Yv(b)),a.Ug=!0,"c"!==this.map.get("overlayRender")&&a.ea?(b=this.XB(a),0===b.length?(a.ea.parentNode.removeChild(a.ea),a.ea=null):f.l.Ol?a.ea.setAttribute("d",b.join(" ")):(b.push("e"),a.ea.path=b.join(" "))):this.set("display"))},getStrokeWeight:function(){return this.get("options").strokeWeight},visibleChanged:function(){this.M&&(this.M.ea?this.get("visible")?this.M.ea.style.display="block":this.M.ea.style.display="none":this.set("display"))},optionsChanged:function(){this.Gm(); this.M&&(this.M.style=this.get("options"),this.M.zIndex=this.get("options").zIndex,this.M.Bo());this.set("display")},XB:function(a){var b=[NaN,NaN,0],c=[NaN,NaN],d,e,g,h,k,l,m,n=a.ea.rotation,p=this.map.get("size");e=Math.PI*n/180;n=(Math.abs(p.width*Math.cos(e))+Math.abs(p.height*Math.sin(e)))/2;p=(Math.abs(p.width*Math.sin(e))+Math.abs(p.height*Math.cos(e)))/2;a=a.Y;a instanceof f.pa.bc?d=[a]:a instanceof f.pa.ks&&(d=a.We);var q=[];a=0;for(e=d.length;a<e;a+=1)if(b=d[a],g=b.Mf,h=g.length,0<h)for(var r= 0;r<h;r+=1){var s;k=g[r].Na;l=0;for(m=k.length;l<m;l+=1)if(b=k[l],b=this.$e(b),b[0]=Math.ceil(b[0]+n),b[1]=Math.ceil(b[1]+p),0===l)c[0]=NaN,c[1]=NaN,s=b,q.push("M"+b[0]+" "+b[1]);else if(b[0]!==c[0]||b[1]!==c[1])q.push("L"+b[0]+" "+b[1]),c=b;s&&q.push("L"+s[0]+" "+s[1])}return q}});f.D.Pf=f.D.Hg.extend({B:function(a,b){arguments.callee.oa.apply(this,arguments);this.K9=a;this.X("center",a);this.X("draggable",a);this.X("unit",a,!0);this.X("radius",a);this.X("options",a);this.vq();this.X("display",b)},$o:function(a){var b=this.get("center");a=a.Sc(Math.pow(2,20-this.map.get("zoom")));var c=this.map.Jb(b).add(a);b instanceof f.V?this.set("center",this.map.de(c)):this.set("center",c);this.K9.r("movepoly",{tu:a})},oy:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos", [c.x+a[0],c.y+a[1]])},vq:function(){if(this.map&&!this.M){var a=this.map,b=a.Jb(this.get("center")),c="px"===this.get("unit"),b=this.M=new f.Eg({hw:!0,dG:this.Oc.CA,name:"circle-"+f.a.Lb(this),zIndex:this.get("options").zIndex||1,map:a,Y:new f.pa.Qf([b.x,b.y]),style:this.get("options")});b.fr=c;b.ao=this;this.X("resolution",a);this.X("coords",b);this.X("style",b);b.X("visible",this,!0);b.he("radius center unit resolution zIndex strokeWeight deltaPos".split(" "),this)}},Gm:function(){if("3D"==this.map.J.view.type){var a= this.M;a&&(a=a.Y)&&(delete a.Ca,delete a.Ct,delete a.LZ)}},deltaPosChanged:function(){this.set("display")},getStrokeWeight:function(){return this.get("options").strokeWeight},centerChanged:function(){var a=this.M,b=this.map.Jb(this.get("center"));a&&(a.Y.Na=[b.x,b.y],this.Gm(),this.set("coords",[b.x,b.y]),this.Ug=!0,a.ea?this.OX():this.set("display"))},visibleChanged:function(){this.M&&(this.M.ea?this.get("visible")?this.M.ea.style.display="block":this.M.ea.style.display="none":this.set("display"))}, optionsChanged:function(){this.Gm();this.M&&(this.M.style=this.get("options"),this.M.zIndex=this.get("options").zIndex,this.M.Bo(),this.M.Ug=!0,this.set("display"))},xI:function(a){var b=[],c=[],d,c=a.Y;c instanceof f.pa.Qf&&(d=[c]);var c=this.map.get("resolution",Math.floor(this.map.get("zoom"))),e=a.ea.rotation,b=this.map.get("size"),g=Math.PI*e/180,e=(Math.abs(b.width*Math.cos(g))+Math.abs(b.height*Math.sin(g)))/2,g=(Math.abs(b.width*Math.sin(g))+Math.abs(b.height*Math.cos(g)))/2,b=this.$e(d[0].Na); b[0]=Math.round(b[0]+e);b[1]=Math.round(b[1]+g);a=a.get("remain")?5.23:a.fr?this.get("radius"):this.get("radius")/(c*Math.cos(Math.PI*this.get("center").P/180));return c=["M",b[0],b[1]-a,"A",a,a,0,1,1,b[0]-0.01,b[1]-a,"Z"].join(" ")},OX:function(){var a=this.M,b=this.get("radius");if("c"!==this.map.get("overlayRender")&&a.ea)if(f.l.Ol)b=this.xI(a),a.ea.setAttribute("d",b);else{b=this.map.get("resolution",Math.floor(this.map.get("zoom")));b=a.fr?this.get("radius"):this.get("radius")/(b*Math.cos(Math.PI* this.get("center").P/180));a.ea.style.width=Math.round(2*b);a.ea.style.height=Math.round(2*b);var c=this.map.get("size").width/2,d=this.map.get("size").height/2,e=this.$e(a.Y.Na);e[0]=Math.round(e[0]+c);e[1]=Math.round(e[1]+d);a.ea.style.top=Math.round(e[1]-b);a.ea.style.left=Math.round(e[0]-b)}else this.set("display")},radiusChanged:function(){var a=this.M,b=this.get("radius");a&&(this.Gm(),a.Ug=!0,a.r("rad",{target:a,Yi:b}),this.OX())}}); ')

_jsload_('wgl', '(function(){if(f.l.bm){var a=function(a){function c(a,b,c,d,g,h,k){c=a.Ca;d=[];var l=a.li,m=null,n=null;a.Ca=[];h=h&&16<b;for(var p=1,q=c.length;p<q;p+=1){var t=c[p],x=t[1].split("&"),y=!1,m=r(A?A:x[0]),n=r(x[4]),Y=t[2],X=t[0],ca=t[3]*Math.pow(2,2)*k,Z=t[4],P={};if((t=t[5])&&t.length)for(var y=!0,L=0,W=t.length;L<W;L+=1)for(var Q=t[L].split("-")[1].split("^"),x=0,V=Q.length;x<V;x+=1)-1===e(d,Q[x])&&d.push(Q[x]);if(Z&&Z.length)for(t=0,L=Z.length;t<L;t+=1)for(W=Z[t].split("-"),Q=parseInt(W[0]),P[Q]= {},x=1,V=W.length;x<V;x+=1)P[Q][parseInt(W[x])]=!0;t=0;for(Z=X.length;t<Z;t+=1){for(var x=X[t],L=[],W=[],Q=[],x=u(x,v,b),x=s(x,l,g,!0)[1],V=[],R=0,S=0,$=0,pa=x.length-1;$<pa;$+=1){var ea=x[$],fa=x[$+1],R=R+ea[0],S=S+fa[1];if(!P[t]||!P[t][$])if(h){var ka=0,la=fa[0]-ea[0],ta=fa[1]-ea[1];0===la?ka=0.5:0===ta?ka=fa[0]>ea[0]?0:1:(ka=Math.abs(Math.atan(ta/la)/Math.PI),ka=fa[0]>ea[0]?ka:1-ka);ta=Math.sqrt(Math.pow(la,2)+Math.pow(ta,2));la=Math.round(ca/64);ta=Math.ceil(ta/64);la?Q.push(0,0,ta,la,0,la,0, 0,ta,0,ta,la):Q.push(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1);la=0.4+0.6*ka;ka=0.8+0.2*ka;L.push(ea[0],ea[1],-ca,la);L.push(fa[0],fa[1],0,ka);L.push(ea[0],ea[1],0,ka);L.push(ea[0],ea[1],-ca,la);L.push(fa[0],fa[1],-ca,la);L.push(fa[0],fa[1],0,ka)}else W.push(ea[0],ea[1],0,1,fa[0],fa[1],0,1);V.push([ea[0],ea[1]])}x.pop();R=[R/x.length+215440491,S/x.length+106744817];V=z.tp(h?V:x,[],0,1);S=0;for($=V.length;S<$;S+=1)for(x=0;3>x;x+=1)pa=-ca,h||(pa=0),Q.push(0,0,0,0,0,0),L.push(V[S][x][0],V[S][x][1],pa,0); x=[m,n,Y];L=[new Float32Array(L),new Float32Array(Q),new Float32Array(W),x,null,R];y&&(L.vca=!0);a.Ca.push(L)}}a.Lk=d;return a}function d(a,b,c,d,g,h){c=a.Ca;d=[];for(var k=a.li,l=null,m=null,n={},p=1,q=c.length;p<q;p+=1){var t=c[p],x=t[1].split("&"),l=r(A?A:x[0]),m=r(x[2]),y=x[0]+x[2];n[y]||(n[y]={wZ:[],nY:[],To:[],Xh:[],fba:l,borderColor:m,Tb:t[2]});var l=n[y].wZ,m=n[y].nY,x=n[y].To,y=n[y].Xh,Y=t[0],X=t[3]*Math.pow(2,2),ca=t[4],Z={};if((t=t[5])&&t.length)for(var P=0,L=t.length;P<L;P+=1)for(var W= t[P].split("-")[1].split("^"),Q=0,V=W.length;Q<V;Q+=1)-1===e(d,W[Q])&&d.push(W[Q]);if(ca&&ca.length)for(t=0,L=ca.length;t<L;t+=1)for(W=ca[t].split("-"),Q=parseInt(W[0]),Z[Q]={},P=1,V=W.length;P<V;P+=1)Z[Q][parseInt(W[P])]=!0;t=0;for(ca=Y.length;t<ca;t+=1){for(var R=Y[t],R=u(R,v,b),R=s(R,k,g,!0)[1],P=[],L=0,W=R.length-1;L<W;L+=1){var Q=R[L],V=R[L+1],S=[Q[0]-0*X,Q[1]-0.3*X],$=[V[0]-0*X,V[1]-0.3*X];Z[t]&&Z[t][L]||(h?((V[0]-Q[0])*(S[1]-Q[1])<(S[0]-Q[0])*(V[1]-Q[1])&&(l.push(S[0],S[1],2),l.push(V[0],V[1], -1),l.push(Q[0],Q[1],-1),l.push(S[0],S[1],2),l.push($[0],$[1],2),l.push(V[0],V[1],-1),y.push([Q,V,$,S])),x.push(S[0],S[1],-1,$[0],$[1],-1)):x.push(Q[0],Q[1],-1,V[0],V[1],2));P.push([S[0],S[1]])}R.pop();L=z.tp(h?P:R,[],0,1);y.push(h?P:R);R=0;for(W=L.length;R<W;R+=1)for(P=0;3>P;P+=1)m.push(L[R][P][0],L[R][P][1],3)}}a.Ca=[];for(R in n)n.hasOwnProperty(R)&&(x=[n[R].fba,n[R].borderColor,n[R].Tb],n[R].Xh.pr=!0,a.Ca.push([new Float32Array(n[R].wZ),new Float32Array(n[R].nY),new Float32Array(n[R].To),x,n[R].Xh])); a.Lk=d;return a}function e(a,b){if(a&&!a.length)return-1;if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1}function g(a,b){for(var c=a.Ca,d=[],e={0:"ffde0000",1:"ffffcc00",2:"ff33b100",3:"ff8c0e0e",4:"ffadadad"},g=0,h=c.length;g<h;g++){for(var k=[],l=0,n=c[g].length;l<n;l++){var p=[],q=[],s=[];m(p,s,q,c[g][l][1],a.ma,b);q.pr=!0;p.forEach(function(a,b){k.push([a,s[b]])})}if(k.length){var u=[[],[],{width:0.75*c[g][0][0],borderColor:r(e[g])}];k.forEach(function(a){var b= u[0].length/9;b&&(a[1]=a[1].map(function(a){return a+b}));u[0]=u[0].concat(a[0]);u[1]=u[1].concat(a[1])});u[0]=new Float32Array(u[0]);u[1]=new Uint16Array(u[1]);d.push(u)}}a.Ca=d;return a}function h(a){var b=[],c=[],d=[];a=s(a,{x:0,y:0},1);c.push.apply(c,a[2]);if(2<a[1].length){var e=z.tp(a[1],[],0);e.length&&(b.push.apply(b,a[0]),d.push.apply(d,e))}return[new Float32Array(b),new Uint16Array(d),{},c]}function k(a,b,c,d,e){for(var g="solid solid_roundcap solid_squarecap dash railway dash_crewel".split(" "), h=a.Ca.slice(1),k=h.length-1;0<=k;k--)h[k].SV=k;h.sort(function(a,b){return a[2]>b[2]?1:a.SV>b.SV?1:-1});for(var m={},k=0,n=h.length;k<n;k+=1){var p=h[k],q=p[1].split("&"),s,u,v,x,y;s=u=v=x=y=null;var A,z,P,L,W=null,Q=!1;A=z=P=L=null;q[1]&&(s=r(q[1]));u=parseInt(q[0]);v=q[2];v!==g[0]&&(v===g[1]?A="round":v===g[2]?A="square":0===v.indexOf(g[5])?(W=!0,P=[3,2]):0===v.indexOf(g[3])?(P=v.substring(5).split(")")[0].split(","),P.forEach(function(a,b){P[b]*=e})):0===v.indexOf(g[4])&&(x=s,s=q[4]?r(q[4]):[1, 1,1,s[3]],P=[12,12],Q=!0,y=3,u=1));q[3]&&q[4]&&3<q.length&&(y=u+parseInt(q[3]),x=r(q[4]),v=q[5],v!==g[0]&&(v===g[1]?z="round":v===g[2]?z="square":0!==v.indexOf(g[5])&&0===v.indexOf(g[3])&&(y+=1,L=v.substring(5).split(")")[0].split(","),L.forEach(function(a,b){L[b]*=e}))));if(c){if(P)for(q=P.length-1;0<=q;q-=1)P[q]*=e;if(L)for(q=L.length-1;0<=q;q-=1)L[q]*=e}v=[];v.Wf=0;var V=[],R=[];l(v,R,V,p[0],a.li,b,c,d,e,A);"app"===t&&(u/=4,y/=4);q=[u,s,P,y,x,L,W,Q,A,z,p[3],p[4]];q.mma=!0;p=p[2];m[p]||(m[p]=[]); V.pr=!0;m[p].push([new Float32Array(v),new Uint16Array(R),q,V])}a.Ca=m;return a}function l(a,b,c,d,e,g,h,k,l,m){for(var n=0,p=d.length;n<p;n+=1){var q=a.length/11,r=q+6,t=u(d[n],v,g),x=s(t,e,k);if(1<x[1].length){for(var t=x[0],y=x[2],A=0,x=x[1].length;A<x;A+=1){if(0<A){var z=t[2*A]-t[2*A-2],P=t[2*A+1]-t[2*A-1];a.Wf+=Math.sqrt(z*z+P*P)*(h?l:1)}var z=t[2*A],P=t[2*A+1],L=y[A][0],W=y[A][1],Q,V;A===x-1?(Q=t[2*x-2],V=t[2*x-1]):(Q=t[2*A+2],V=t[2*A+3]);var R,S;0===A?(R=z,S=P):(R=t[2*A-2],S=t[2*A-1]);if(0!== A){var $=A===x-1?0:-1;a.push(z,P,L,W,1,R,S,$,Q,V,a.Wf);a.push(z,P,L,W,-1,R,S,$,Q,V,a.Wf)}else a.push(z,P,L,W,0,R,S,0,Q,V,a.Wf),a.push(z,P,L,W,1,R,S,0,Q,V,a.Wf),a.push(z,P,L,W,1,R,S,1,Q,V,a.Wf),a.push(z,P,L,W,0,R,S,1,Q,V,a.Wf),a.push(z,P,L,W,-1,R,S,1,Q,V,a.Wf),a.push(z,P,L,W,-1,R,S,0,Q,V,a.Wf),m&&(b.push(q+2,q+0,q+3),b.push(q+2,q+1,q+0),b.push(q+3,q+0,q+4),b.push(q+4,q+0,q+5));A!==x-1?($=0===A?0:1,a.push(z,P,L,W,1,R,S,$,Q,V,a.Wf),a.push(z,P,L,W,-1,R,S,$,Q,V,a.Wf)):(a.push(z,P,L,W,0,R,S,0,Q,V,a.Wf), a.push(z,P,L,W,1,R,S,0,Q,V,a.Wf),a.push(z,P,L,W,1,R,S,-1,Q,V,a.Wf),a.push(z,P,L,W,0,R,S,-1,Q,V,a.Wf),a.push(z,P,L,W,-1,R,S,-1,Q,V,a.Wf),a.push(z,P,L,W,-1,R,S,0,Q,V,a.Wf));A!==x-1?(b.push(r+4*A,r+4*A+3,r+4*A+1),b.push(r+4*A,r+4*A+2,r+4*A+3)):m&&(z=r+4*(x-1),b.push(z+1,z+2,z+0),b.push(z+2,z+3,z+0),b.push(z+0,z+4,z+5),b.push(z+0,z+3,z+4))}c.push(y)}}}function m(a,b,c,d,e,g){for(var h=0,k=d.length;h<k;h+=1){var l=[],m=[],n=u(d[h]),p=s(n,e,g);c.push(p[2]);if(1<p[1].length){var q=p[1].length;p[1].forEach(function(a, b,c){var d=c[b-1];c=c[b+1];0===b?d=a:b===q-1&&(c=a);l.push(a[0],a[1],p[2][b][0],p[2][b][1],1,d[0],d[1],c[0],c[1]);l.push(a[0],a[1],p[2][b][0],p[2][b][1],-1,d[0],d[1],c[0],c[1]);0===b?m.push(0,1,2):b!=q-1?(m.push(2*(b-1)+1,2*b+1,2*b),m.push(2*b,2*b+1,2*(b+1))):m.push(2*(b-1)+1,2*b+1,2*b)});a.push(l);b.push(m)}}}function n(a,b,c,d,e,g,h,k){for(var l=0,m=d.length;l<m;l+=1){var n=a.length/2,p=s(u(d[l],v,g),e,h);if(2<p[1].length&&(n=z.tp(p[1],[],n),n.length&&(a.push.apply(a,p[0]),b.push.apply(b,n),c.push(p[2]), k)))for(var n=0,q=p[2].length;n<q;n+=1){var r=p[2][n][0]/512,t=p[2][n][1]/512;1==e.x%2&&(r+=0.5);1==e.y%2&&(t+=0.5);k.push(r,t)}}}function p(a,b,c){var d=a.Ca,e=[],g=[],h=[],k=[];q(a,g,h,c);for(var l=[[[0,0],[255,0],[255,255],[0,255]]],m=[[0,0],[255,0],[0,255],[255,255]],p=a.li,s=0,u=m.length;s<u;s+=1){var t=m[s][0]/512,v=m[s][1]/512;1==p.x%2&&(t+=0.5);1==p.y%2&&(v+=0.5);k.push(t,v)}l.pr=!0;e.push([new Float32Array(g),new Uint16Array(h),r("ff"+a.sI.substr(1)),"regions:land",l,new Float32Array(k)]); d.sort(function(a,b){return"string"===typeof a?-1:"string"===typeof b?1:a[2]>b[2]?1:a[2]<b[2]?-1:0});m=1;for(p=d.length;m<p;m+=1)s=d[m],g=[],h=[],l=[],k=[],u=r(s[1].split("&")[0]),n(g,h,l,s[0],a.li,b,c,k),l.pr=!0,e.push([new Float32Array(g),new Uint16Array(h),u,s[3],l,new Float32Array(k)]);a.Ca=e;return a}function q(a,b,c,d){var e=a.li;a=256*e.x*d-215440491;e=256*e.y*d-106744817;b.push(a,e);var g=256*d;d=a+g;b.push(d,e);e+=g;b.push(a,e);b.push(d,e);c.push(0,1,2,1,3,2)}function r(a){for(var b=[],c= 0,d=a.length;c<d;c+=2)b.push(parseInt(a.substr(c,2),16)/255);b.push(b.shift());return b}function s(a,b,c,d){var e=0,g=0,e=256*b.x,g=256*b.y;b=[];for(var h=[],k=[],l=0,m=a.length;l<m;l+=2){var n=(e+a[l])*c-215440491,p=(g+a[l+1])*c-106744817,q=k.length;if(d||0===b.length)k.push(n),k.push(p),b.push([n,p]),h.push([a[l],a[l+1]]);else if(n!==k[q-2]||p!==k[q-1])n===k[q-2]&&n===k[q-4]?(k[q-1]=p,b[b.length-1][1]=p,h[b.length-1][1]=a[l+1]):p===k[q-1]&&p===k[q-3]?(k[q-2]=n,b[b.length-1][0]=n,h[b.length-1][0]= a[l]):(k.push(n),k.push(p),b.push([n,p]),h.push([a[l],a[l+1]]))}return[k,b,h]}function u(a,b,c){var d="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM";b=b||"v5";var e,g;"v5"<b?(e=d.length,g=512):(e=27,d=d.substr(0,27),g=333);var h,k,l,m,n;k=[];l=NaN;m=0;for(n=a.length;m<n;m++)h=a[m],h=d.indexOf(h),isNaN(l)?l=h*e:(h=l+h-g,18===c&&"v5"<b&&(h/=4),k.push(h),l=NaN);return k}var v,x=Number.EPSILON||2E-16,t,y=!1,A=null,z={Cf:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d][0]*a[e][1]- a[e][0]*a[d][1];return 0.5*c},LM:function(){return function(a,b){var c=a.length;if(3>c)return null;var d=[],e=[],g=[],h,k,l;if(0<z.Cf(a))for(k=0;k<c;k++)e[k]=k;else for(k=0;k<c;k++)e[k]=c-1-k;var m=2*c;for(k=c-1;2<c&&!(0>=m--);){h=k;c<=h&&(h=0);k=h+1;c<=k&&(k=0);l=k+1;c<=l&&(l=0);var n;a:{var p=n=void 0,q=void 0,s=void 0,r=void 0,u=void 0,t=void 0,v=void 0,y=void 0,p=a[e[h]][0],q=a[e[h]][1],s=a[e[k]][0],r=a[e[k]][1],u=a[e[l]][0],t=a[e[l]][1];if(x>(s-p)*(t-q)-(r-q)*(u-p))n=!1;else{var A=void 0,L=void 0, W=void 0,Q=void 0,V=void 0,R=void 0,S=void 0,$=void 0,pa=void 0,ea=void 0,pa=$=S=y=v=void 0,A=u-s,L=t-r,W=p-u,Q=q-t,V=s-p,R=r-q;for(n=0;n<c;n++)if(v=a[e[n]][0],y=a[e[n]][1],!(v===p&&y===q||v===s&&y===r||v===u&&y===t)&&(S=v-p,$=y-q,pa=v-s,ea=y-r,v-=u,y-=t,pa=A*ea-L*pa,S=V*$-R*S,$=W*y-Q*v,pa>=-x&&$>=-x&&S>=-x)){n=!1;break a}n=!0}}if(n){d.push([a[e[h]],a[e[k]],a[e[l]]]);g.push([e[h],e[k],e[l]]);h=k;for(l=k+1;l<c;h++,l++)e[h]=e[l];c--;m=2*c}}return b?g:d}}(),tp:function(a,b,c,d){var e,g,h,k={};b=0;for(e= a.length;b<e;b++)h=a[b][0]+":"+a[b][1],k[h]=b;a=z.LM(a,!1);if(!a)return[];if(d)return a;var l=[];b=0;for(e=a.length;b<e;b++)for(g=a[b],d=0;3>d;d++)h=g[d][0]+":"+g[d][1],h=k[h],l.push(h+c);return l},Yca:function(a){return 0>z.Cf(a)}};return{rX:function(e,g){function h(a){var b=a.Ca;q&&b&&1<b.length&&b.slice(1).forEach(function(b){if(b&&null===b[1]){var c=b[b.length-1],d=q[c];b[1]=d.browserStyle[d.levelStyleMapping[m]];"road"===a.dd&&(b[1]=b[1][0],b[4]=d,b[4].id=c)}})}v=e.Ed;y=e.Uca;t=e.mode;var l= y?c:d,m=e.eu,n=e.Eu,q=null;A=e.YB;var s=e.Z,r=[],u=Math.pow(2,20-m);e.Nc&&(q=e.Nc.stylemaps);for(var x=0,z=e.Rc.length;x<z;x+=1){var M=e.Rc[x],T=M.dd;h(M);switch(T){case "region":r.push(p(M,m,u));break;case "road":r.push(k(M,m,n,u,e.lY));break;case "building":r.push(l(M,m,n,s,u,e.l$,e.Wt))}}delete e.Nc;e.Rc=r;if(a){l=[];x=0;for(z=r.length;x<z;x++)if((n=r[x].Ca)&&n.length)for(s=0,u=n.length;s<u;s++)n[s].buffer&&n[s].buffer instanceof ArrayBuffer&&l.push(n[s].buffer);a.$w(l)}g(null,{data:e})},gfa:function(a, b){for(var c=a.Rc,d=Math.pow(2,20-a.lc),e=[],h=0,k=c.length;h<k;h++)e.push(g(c[h],d));a.Rc=e;b(null,{data:a})},tX:function(a,b){var c=a.ur.reduce(function(a,b){return a.concat(b)},[]),c=h(c);b(null,{data:c})},pX:function(a,b){var c=a.hb,d=a.Yi,e=0,g=Math.PI/180*6,h=[],k=[];h.push(c[0],c[1]);for(var l=0;60>l;l++)h.push(c[0]+d*Math.cos(e),c[1]+d*Math.sin(e)),e+=g,0<l&&k.push(0,l,l+1),59==l&&k.push(0,l+1,1);b(null,{data:[h,k]})},Pma:function(){}}};f.PZ=a();f.CE=new f.ts(a,{lazy:"untilCall"});f.l.hr&& f.sf.Mj(null,a)}})(f);(function(){function a(){function a(b,c,d,e,g,k){var l=[0,0,0,0,0],n=d.slice(0,4).concat(l),p=[],r=Math.PI/180*6,C=void 0,H=void 0,C=d.slice(0,2),F=m(e),B=m(g),H=q.normalize(h(F).ag(h(C))),D=q.normalize(h(B).ag(h(C)));q.AK(H,k)?(C=q.VC(H),H=q.VC(D)):(C=q.VC(D),H=q.VC(H),k=[B,F],F=k[0],B=k[1],g=[g,e],e=g[0],g=g[1]);F=Math.ceil(Math.abs(H-C)/r);30<=F&&(F=60-F);for(k=0;k<F;k++)0===k?(n.push.apply(n,e.slice(0,4)),n.push.apply(n,l)):(B=(k*r+C)%(2*Math.PI),n.push.apply(n,d.slice(0,2).concat([0,0])),n.push(1* Math.cos(B),1*Math.sin(B),0,0,0)),0<k&&p.push(0,k,k+1);n.push.apply(n,g.slice(0,4));n.push.apply(n,l);p.push(0,F,F+1);var E=b.length/9;b.push.apply(b,n);c.push.apply(c,p.map(function(a){return a+E}));return n.length/9}function c(c,d,e,g,k,l){function n(a,b,c,d,e){var g=void 0;a.vC(b)||q.fW(a,b)?g=b:c&&d&&e?g=a:c&&!d&&e?g=b:c||d||e?c||!d||e?(g=q.normalize(a.ei(b)),H=q.cos(g,a),g=g.bJ(H)):g=a:g=b;return g}function p(a,b,c){if(void 0===c||!0===c)d.push(a[0],a[1]),d.push(-b.y,b.x,0,0),d.push(C,0,0),l.push(a[2]); if(void 0===c||!1===c)d.push(a[0],a[1]),d.push(b.y,-b.x,0,0),d.push(C,0,0),l.push(a[2])}var r=c.length,I=0,C=0,H=void 0,F=void 0;k&&(g="bevel");c.forEach(function(c,s,E){var G=E[s-1];E=E[s+1];var K=void 0;G&&(C+=q.Fd(c,G));if(0===s||s===r-1)0===s?(void 0===E&&(E=c),K=q.normalize(h(E[0]-c[0],E[1]-c[1])),e.push(0,1,2)):(K=q.normalize(h(c[0]-G[0],c[1]-G[1])),s=d.length/9+2,4===s?e.push(3,2,1):e.push(s-3-I,s-1,s-2)),p(c,K);else{var J=q.normalize(h(c[0]-G[0],c[1]-G[1])),O=q.normalize(h(E[0]-c[0],E[1]- c[1])),K=q.normalize(J.multiply(-1).ei(O));F=q.AK(K,J);H=q.cos(K,J);p(c,n(J,O,F,!0,!0),!0);p(c,n(J,O,F,!0,!1),!1);p(c,n(J,O,F,!1,!0),!0);p(c,n(J,O,F,!1,!1),!1);s=d.length/9;G=s-4;E=G+2;var M=9*G,T=M+9,U=T+9,Y=U+9;F?(U=m(d.slice(T,U)),M=m(d.slice(M,T)),M=q.normalize(h(U).ag(h(M))),M=Math.abs(q.cos(J,M)/q.sin(J,M)*2),d[T+7]=-M,d[Y+7]=M):(Y=m(d.slice(M,T)),T=m(d.slice(T,U)),T=q.normalize(h(Y).ag(h(T))),T=Math.abs(q.cos(T,J)/q.sin(T,J)*2),d[M+7]=-T,d[U+7]=T);q.fW(J,O)?e.push(G,G+1,G-2-I):e.push(G,G-1- I,G+1);"miter"==g&&(F?p(c,n(J,O,0,!0,!0),!0):p(c,n(J,O,0,!0,!0),!1),I=1);if("round"===g){M=O=J=void 0;F?(J=d.slice(9*(G+1),9*(G+2)),O=d.slice(9*G,9*(G+1)),M=d.slice(9*E,9*(E+1))):(J=d.slice(9*G,9*(G+1)),O=d.slice(9*(G+1),9*(G+2)),M=d.slice(9*(E+1),9*(E+2)));K=a(d,e,J,O,M,K.multiply(-1));if(l)for(;0<K--;)l.push(c[2]);I=d.length/9-s}e.push(E,E+1,E+2+I);k||"bevel"!=g&&"miter"!=g||(F?e.push(E,G,G+1):e.push(E,E-1,E+1),"miter"==g&&(F?e.push(E+2,E-2,E):e.push(E+2,E+1,E-1)))}})}function d(a,b,c,d){function e(a, b){var c=void 0;if(a.vC(b))c=b;else{var c=q.normalize(a.ei(b)),d=q.cos(c,a);d>Math.sqrt(3)/2&&(d=Math.sqrt(3)/2);c=c.bJ(d)}return c}function g(a,c,e){if(void 0===e||!0===e)b.push(a[0],a[1]),b.push(-c.y,c.x,0,0),b.push(m,0,0),d.push(a[2]);if(void 0===e||!1===e)b.push(a[0],a[1]),b.push(c.y,-c.x,0,0),b.push(m,0,0),d.push(a[2])}for(var k=a[0],l=a[a.length-1],m=0,n=void 0;k[0]===l[0]&&k[1]===l[1]&&k!==l;)a.pop(),l=a[a.length-1];a.push(k);a.push(a[1]);a.unshift(l);var p=a.length;a.forEach(function(a,d, k){var l=k[d-1];k=k[d+1];var s=void 0;l&&(m+=q.Fd(a,l));if(0===d||d===p-1)0===d?(s=q.normalize(h(k[0]-a[0],k[1]-a[1])),c.push(0,1,2)):(s=q.normalize(h(a[0]-l[0],a[1]-l[1])),d=b.length/9+2,c.push(d-3,d-1,d-2)),g(a,s);else{d=q.normalize(h(a[0]-l[0],a[1]-l[1]));k=q.normalize(h(k[0]-a[0],k[1]-a[1]));l=q.normalize(d.multiply(-1).ei(k));n=q.AK(l,d);g(a,e(d,k),!0);g(a,e(d,k),!1);g(a,e(d,k),!0);g(a,e(d,k),!1);a=b.length/9-4;k=a+2;var s=9*a,r=s+9,x=r+9,A=x+9;d=Math.abs(q.cos(d,l)/q.sin(d,l));n?(b[s+7]=d,b[r+ 7]=-d,b[x+7]=-d,b[A+7]=d):(b[s+7]=-d,b[r+7]=d,b[x+7]=d,b[A+7]=-d);c.push(a,a-1,a+1);c.push(k,k+1,k+2)}})}function e(c,d,e){function g(a,b){if(p)for(;0<a--;)p.push(b)}function m(a,b){I.push.apply(I,a.slice(0,k));I.push(b.x,b.y);I.push.apply(I,a.slice(l));I.push.apply(I,a)}var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"butt",p=arguments[4],r=c.length-1,N=d.length,I=[],C=[],H=[d.slice(0,9),d.slice(9,18)],F=[d.slice(N-9,N),d.slice(N-18,N-9)];"square"===n?(n=q.normalize(h(c[0]).ag(h(c[1]))), m(H[0],n),m(H[1],n),n=q.normalize(h(c[r]).ag(h(c[r-1]))),m(F[0],n),m(F[1],n),C.push(0,2,3,3,1,0),C.push(6,7,4,4,7,5),p&&(p.push(c[0][2]),p.push(c[r][2]))):"round"===n&&(n=H[0].slice(0,2).concat(0,0,0,0).concat(H[0].slice(l)),H=a(d,e,n,H[0],H[1],q.normalize(h(c[0]).ag(h(c[1])))),g(H,c[0][2]),n=F[0].slice(0,2).concat(0,0,0,0).concat(F[0].slice(l)),H=a(d,e,n,F[0],F[1],q.normalize(h(c[r]).ag(h(c[r-1])))),g(H,c[r][2]));d.push.apply(d,I);e.push.apply(e,C.map(function(a){return a+N/9}))}function g(a,b){var c= [];a.forEach(function(a){var d=a[0],e=a[1];a=a[2];b&&(d-=p[0],e-=p[1]);var g=c.length-1;if(-1===g)c.push([d,e,a]);else if(d!==c[g][0]||e!==c[g][1]||a!==c[g][2])if(1<=g){var k=q.normalize(h(d-c[g][0],e-c[g][1])),l=q.normalize(h(c[g][0]-c[g-1][0],c[g][1]-c[g-1][1]));k.vC(l)&&a===c[g][2]?c[g]=[d,e,a]:c.push([d,e,a])}else c.push([d,e,a])});return c}function h(a,b){"object"===typeof a&&a.length&&(b=a[1],a=a[0]);return f.a.create(r,{x:{value:a},y:{value:b}})}var k,l;function m(a){return[a[0]+n*a[2],a[1]+ n*a[3]]}var n=1;k=4;l=6;var p=[215440491,106744817],q={normalize:function(a){var b=this.length(a);return a.bJ(b)},Cj:function(a,b){return a.multiply(b)},UI:function(a,b){return a.x*b.y-a.y*b.x},length:function(a){return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))},sin:function(a,b){return this.UI(a,b)/(this.length(a)*this.length(b))},cos:function(a,b){return this.Cj(a,b)/(this.length(a)*this.length(b))},AK:function(a,b){return 0<this.UI(a,b)},Fd:function(a,b){return Math.sqrt(Math.pow(b[0]-a[0],2)+ Math.pow(b[1]-a[1],2))},fW:function(a,b){return a.multiply(-1).vC(b)},VC:function(a){a=Math.atan2(a.y,a.x);0>=a&&(a+=2*Math.PI);return a}},r={ei:function(a){return h(this.x+a.x,this.y+a.y)},ag:function(a){return h(this.x-a.x,this.y-a.y)},multiply:function(a){return"number"===typeof a?h(this.x*a,this.y*a):this.x*a.x+this.y*a.y},bJ:function(a){return h(this.x/a,this.y/a)},vC:function(a){var b=a.y;return this.x===a.x&&this.y===b}};return{parse:function(a,b){var h=a.lineJoin,h=void 0===h?"bevel":h,k= a.lineCap,k=void 0===k?"butt":k,l=a.gda,l=void 0===l?!1:l,m=a.cn,n=void 0===m?!1:m,p=a.lX,m=a.Kha,q=void 0===m?!0:m,m=a.$ca,r=[],C=[],H=g(a.ur,void 0===p?!0:p),p=[];l?(d(H,r,C,p),h=r.length,[0,1,2,h/9-1,h/9-2].forEach(function(a){r[9*a+8]=-1})):(c(H,r,C,h,n,p),e(H,r,C,k,p));q&&(r=new Float32Array(r),C=new Uint16Array(C));h=[r,C];m&&h.push(p);if(b)b(null,{data:h});else return h}}}f.hN=a();f.Kia=new f.ts(a,{})})();f.ev={Rca:function(a,b,c){b=f.ev.createProgram(a,b,c);if(!b)return console.log("Failed to create program"),!1;a.useProgram(b);a.La=b;return!0},createProgram:function(a,b,c){b=f.ev.EW(a,a.VERTEX_SHADER,b);c=f.ev.EW(a,a.FRAGMENT_SHADER,c);if(!b||!c)return null;var d=a.createProgram();if(!d)return null;a.attachShader(d,b);a.attachShader(d,c);a.linkProgram(d);return a.getProgramParameter(d,a.LINK_STATUS)?d:(console.log("Failed to link program: "+a.getProgramInfoLog(d)),a.deleteProgram(d),a.deleteShader(c), a.deleteShader(b),null)},EW:function(a,b,c){b=a.createShader(b);if(null===b)return console.log("unable to create shader"),null;a.shaderSource(b,c);a.compileShader(b);return a.getShaderParameter(b,a.COMPILE_STATUS)?b:(console.log("Failed to compile shader: "+a.getShaderInfoLog(b)),a.deleteShader(b),null)}};f.Q.of.Vc=f.Q.Gd.ri.extend({ga:[f.ps],B:function(a,b){this.Ei=20;this.jb=Math.min(2,window.devicePixelRatio||1);this.dp=1;arguments.callee.oa.apply(this,arguments);this.X("mapStyle",a.h);this.X("style",a.h);this.Gh=this.bi=!0;a.h.J.en&&this.cx(a,b);this.mm=0;this.lg={};this.UC()||this.set("reload")},l0:"precision highp float;attribute vec4 a_Position;attribute vec3 a_op,a_Next,a_Previous;attribute float a_Tags;uniform float u_xDelta,u_width;uniform lowp int u_type;uniform mat4 u_othMatrix,u_zoomMatrix,u_modelMatrix;uniform float u_scale;varying float v_distance;varying vec2 v_op;varying float v_TB;varying float v_cap;varying lowp float v_Tags;void main() {vec4 position=a_Position;position.x+=u_xDelta;if (u_type==0) {gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}else if(u_type>1) {v_op=a_op.xy;v_TB=a_op.z;vec3 curPos=position.xyz;v_distance=a_Next.z;float ddis=0.0;vec3 previous=vec3(a_Previous.x+u_xDelta,a_Previous.y,0);vec3 next=vec3(a_Next.x+u_xDelta,a_Next.y,0);vec4 up,dir;v_distance *= u_scale;if(previous==curPos){ dir= vec4(normalize(next-curPos).xy,0,0);}else if(next==curPos){dir= -vec4(normalize(previous-curPos).xy,0,0);}else {vec3 dir0=previous-curPos;vec3 dir1=next-curPos;vec3 dir2=normalize(dir0);vec3 dir3=normalize(dir1);float f0=dir0.x*dir1.y-dir1.x*dir0.y;dir = vec4(0); v_cap=1.0;if(f0==0.0){up = vec4(dir3.y,-dir3.x,0,0); }else{vec3 dir4=normalize(dir2+dir3);float sinA=length(cross(dir4,dir2));float cosA=dot(dir4,dir2);if(sinA<0.5){sinA=0.5;}up= vec4(dir4,0)/sinA;ddis=abs(length(up)*cosA*u_width*0.5);if(f0<0.0){up=-up;ddis=-ddis;}v_distance += v_TB*a_Previous.z*ddis;}}if(previous==curPos||next==curPos){ up = vec4(dir.y,-dir.x,0,0); if(u_type==4){v_cap=sqrt(v_TB*v_TB+a_Previous.z*a_Previous.z);}else if(u_type==3){v_cap=1.0;}else{dir = vec4(0);}}vec4 pos=u_zoomMatrix*u_modelMatrix*position;pos=pos+(up*v_TB-dir*a_Previous.z)*u_width*0.5;gl_Position=u_othMatrix*pos;}else if (u_type==1) {v_Tags=a_Tags;gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}}", m_:"precision lowp float;uniform vec4 u_FragColor,u_FragColor2;varying lowp float v_distance,v_TB;varying vec2 v_op;varying lowp float v_Tags;varying float v_cap;uniform lowp int u_type;uniform int u_isDash,u_onlyBorder;uniform vec4 u_dash;void main() {vec4 color=u_FragColor;if (u_type==0) {}else if(u_type>1) {if(v_op.x<-0.2||v_op.x>256.2||v_op.y<-0.2||v_op.y>256.2){discard;}if(v_cap>1.0){discard;}if(u_isDash==1){float all = u_dash[0] + u_dash[1] + u_dash[2] + u_dash[3];float off = mod(v_distance - u_dash[0], all);if(off> u_dash[0]&&off<=(u_dash[0]+u_dash[1])||off>(all-u_dash[3])){discard;}}if(u_onlyBorder==1&&v_TB<=0.7&&v_TB>=-0.7){discard;}}else if(u_type==1) {color=v_Tags==3.0?u_FragColor2:vec4((u_FragColor+(u_FragColor2-u_FragColor)*v_Tags/3.0).xyzw);}gl_FragColor=color;}", reloadChanged:function(){this.q&&(this.q.wa=!1);this.xa.clear();this.Qa&&this.Qa.parentNode&&this.Qa.parentNode.removeChild(this.Qa);this.set("display")},ou:function(a){if(this.q&&a.JK===this.q.xc)for(var b=0,c=a.Rc.length;b<c;b+=1)this.uy(a.Rc[b],a.eu,a.Eu,a.Z)},QL:function(a){for(var b=0,c=a.length;b<c;b+=1){var d=a[b];this.h.Xj&&d[3]&&!this.h.cc&&(d[2]=this.T.Fo(d[2],d[3]));d.De=d[1].length;d[0]=this.tf(this.Ka.ARRAY_BUFFER,d[0]);d[1]=this.tf(this.Ka.ELEMENT_ARRAY_BUFFER,d[1])}},$L:function(a){for(var b= 0,c=a.length;b<c;b+=1){var d=a[b];d.De=d[1].length;d[0]=this.tf(this.Ka.ARRAY_BUFFER,d[0]);d[1]=this.tf(this.Ka.ELEMENT_ARRAY_BUFFER,d[1]);this.h.Xj&&d[2][10]&&!this.h.cc&&(d[2][1]=this.T.Fj(d[2][1],d[2][10],1),d[2][4]=this.T.Fj(d[2][4],d[2][10],0))}},CI:function(a){for(var b=0,c=a.length;b<c;b+=1){var d=a[b];d.py=d[0].length/3;d[0]=this.tf(this.Ka.ARRAY_BUFFER,d[0]);d.lD=d[1].length/3;d[1]=this.tf(this.Ka.ARRAY_BUFFER,d[1]);d.qy=d[2].length/3;d[2]=this.tf(this.Ka.ARRAY_BUFFER,d[2]);if(this.h.Xj&& d[3][2]&&!this.h.cc){var e=this.T.Oq(d[3][0],d[3][1],d[3][2]);d[3][0]=e[0];d[3][1]=e[1]}}},tf:function(a,b){if(b.length){var c=this.Ka,d=c.createBuffer();c.bindBuffer(a,d);c.bufferData(a,b,c.STATIC_DRAW);return d}},PU:function(a){var b=a.ma,c=b.x,d=b.y,e=b.z,g=Math.pow(2,e),h=(c+g)%g,k=h+g,l=h-g,m=null;h!==c&&(m=this.Xq(e,h,d));m||l===c||(m=this.Xq(e,l,d));m||k===c||(m=this.Xq(e,k,d));return m?(a.status=m.status,a.qa=m.qa,a.ec=m.ec,a.Lc=m.Lc,a.Pa={building:m.Pa.building,region:m.Pa.region,road:m.Pa.road, Nm:(b.x-m.ma.x)/g+m.Pa.Nm},!0):!1},Xq:function(a,b,c){if((a=this.xa.get(a+"/"+b+"/"+c))&&a.Pa)return a},uy:function(a){var b=a.dd,c=this.xa.get(a.$k);if(c){c.Pa||(c.Pa={Nm:0});c.Pa[b]=a.Ca;if("region"===b)this.QL(a.Ca);else if("road"===b)for(var d in a.Ca)a.Ca.hasOwnProperty(d)&&this.$L(a.Ca[d]);else"building"===b&&(this.CI(a.Ca),a.Lk&&a.Lk.length&&!c.wf&&(c.wf={},c.wf.xe=a.Lk,f.Gn&&f.Gn.r("vecTileParsed.buildings",{Mr:c})));b===this.q.ta[this.q.ta.length-1]&&(c.qa=!0,this.set("display"))}},ld:function(){if(this.ng&& !this.q.wa){var a=this.q;this.h.gy||f.Zd.te.end({key:"rb",index:2,id:this.h.J.id});a.wa=!0;a.$c?a.ha("renderComplete"):(a.$c=!0,a.ha("complete"))}},fc:function(a,b){!window.xa&&this.xa&&(window.xa=this.xa);this.ek=a.ek;this.Xl(a,b);this.ld();a.RC||(a.U9=this.ng,this.Cu(a,b),this.Ro=this.eb,this.hi&&this.set("display",0))},$h:function(){return this.Qa},ty:function(){f.Q.of.Vc.uo+=1;this.Qa&&f.C.I(this.Qa,"webglcontextlost",this.ty,this);this.Qa.parentNode&&this.Qa.parentNode.removeChild(this.Qa);if(1< f.Q.of.Vc.uo)this.tD();else{var a=this.Qa.className;this.Qa=document.createElement("canvas");this.Qa.className=a;this.UC()}this.set("reload");new f.Sa.bb(f.A.Qb+offlineMap.domain+"count?"+["type=glfail","c="+f.Q.of.Vc.uo,"crd="+f.l.eK,"k="+f.A.key,"u="+f.A.jo,"m="+(f.l.Z?1:0),"pf="+f.l.wr,"dpr="+window.devicePixelRatio,"scale="+(f.l.yE||0),"detect="+f.l.ja].join("&"))},tD:function(){f.l.He=!1;this.q&&this.q.h.J&&(this.q.h.set("baseRender",f.l.xU?"dv":"d"),this.q.h.J.TK(),this.q.Q=null,this.q.ia.hp(), this.q=null);this.Qa=this.T=null},Df:function(a){this.Qa=document.createElement("canvas");this.Qa.className=a||"amap-layer"},UC:function(){if(1<f.Q.of.Vc.uo)return this.tD(),!1;var a=this.Ka=this.Qa.getContext(f.l.NZ,f.l.OZ);if(a)f.C.g(this.Qa,"webglcontextlost",this.ty,this);else return this.tD(),!1;f.ev.Rca(a,this.l0,this.m_);this.$M=a.getUniformLocation(a.La,"u_xDelta");this.CZ=a.getUniformLocation(a.La,"u_othMatrix");this.FZ=a.getUniformLocation(a.La,"u_zoomMatrix");this.BZ=a.getUniformLocation(a.La, "u_modelMatrix");this.Bf=a.getAttribLocation(a.La,"a_Position");this.wj=a.getAttribLocation(a.La,"a_op");this.vj=a.getAttribLocation(a.La,"a_Previous");this.ph=a.getAttribLocation(a.La,"a_Next");this.pt=a.getAttribLocation(a.La,"a_Tags");a.enableVertexAttribArray(this.Bf);this.zn=a.getUniformLocation(a.La,"u_FragColor");this.NM=a.getUniformLocation(a.La,"u_FragColor2");this.ak=a.getUniformLocation(a.La,"u_type");this.jz=a.getUniformLocation(a.La,"u_width");this.SM=a.getUniformLocation(a.La,"u_isDash"); this.TM=a.getUniformLocation(a.La,"u_onlyBorder");this.PM=a.getUniformLocation(a.La,"u_dash");this.XM=a.getUniformLocation(a.La,"u_scale");a.enable(a.BLEND);a.enable(a.CULL_FACE);a.cullFace(a.FRONT);a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);a.clearColor(0,0,0,0);this.qu=this.Bt=this.cn=void 0;this.dk=0;return!0},Br:function(a){var b=Math.pow(2,a.W.zoom-this.qe),c=a.W.eb.Va(this.Ro).vc(this.ii);this.transform={translate:this.transform[0].translate.add(c), scale:b,rotate:0};this.eb=a.W.eb},Cu:function(a,b){var c=this.rI(a,b),d=this.Ka;d.clear(d.COLOR_BUFFER_BIT);var e=this.q.ja?this.jb:this.dp,g=0,h=0;0!==a.W.rotation?(g=2*Math.floor(a.W.Aa.Ub.x)*e,h=2*Math.floor(a.W.Aa.Ub.y)*e):(g=a.size.width*e,h=a.size.height*e);g&&h&&(this.Qa.width=g,this.Qa.height=h,d.viewport(0,0,this.Qa.width,this.Qa.height),this.ip.apply(this,c),this.Ne(a))},mp:256*Math.pow(2,20),iJ:function(a,b){var c=b.Pa.region;if(c){this.Fm(b.Pa.Nm*this.mp);for(var d=0;d<c.length;d+=1){var e= c[d],g=e[2],h=e[3];h&&this.h.cc&&(g=this.T.Fo(g,h),e.bd=g);g&&(a.bindBuffer(a.ARRAY_BUFFER,e[0]),a.vertexAttribPointer(this.Bf,2,a.FLOAT,!1,8,0),a.uniform4f(this.zn,g[0],g[1],g[2],g[3]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e[1]),a.drawElements(a.TRIANGLES,e.De,a.UNSIGNED_SHORT,0))}}},jJ:function(a,b){var c=this.q.ja?this.jb:this.dp,d;for(d in b)if(b.hasOwnProperty(d)){for(var e=b[d],g=0;g<e.length;g+=1){var h=e[g],k=h[2],l=k[4],m=k[10];m&&this.h.cc&&(l=this.T.Fj(l,m,0),h.bd=l);if(l){m="square"===h[2][9]? 3:"round"===h[2][9]?4:2;a.uniform1i(this.ak,m);var n=this.aw(k)[1];n&&(this.Fm(h.dk*this.mp),a.bindBuffer(a.ARRAY_BUFFER,h[0]),a.vertexAttribPointer(this.Bf,2,a.FLOAT,!1,44,0),a.vertexAttribPointer(this.wj,3,a.FLOAT,!1,44,8),a.vertexAttribPointer(this.vj,3,a.FLOAT,!1,44,20),a.vertexAttribPointer(this.ph,3,a.FLOAT,!1,44,32),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,h[1]),h=h.De,a.uniform1f(this.jz,n*c),a.uniform4f(this.zn,l[0],l[1],l[2],l[3]),this.Em(k[5]?1:0,k[5],0),a.drawElements(a.TRIANGLES,h,a.UNSIGNED_SHORT, 0))}}for(g=0;g<e.length;g+=1)if(h=e[g],k=h[2],l=this.aw(k)[0])n=k[1],(m=k[10])&&this.h.cc&&(n=this.T.Fj(n,m,1),h.bd=n),n&&(m="square"===h[2][8]?3:"round"===h[2][8]?4:2,a.uniform1i(this.ak,m),this.Fm(h.dk*this.mp),a.bindBuffer(a.ARRAY_BUFFER,h[0]),a.vertexAttribPointer(this.Bf,2,a.FLOAT,!1,44,0),a.vertexAttribPointer(this.wj,3,a.FLOAT,!1,44,8),a.vertexAttribPointer(this.vj,3,a.FLOAT,!1,44,20),a.vertexAttribPointer(this.ph,3,a.FLOAT,!1,44,32),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,h[1]),h=h.De,a.uniform1f(this.jz, l*c),a.uniform4f(this.zn,n[0],n[1],n[2],n[3]),this.Em(k[2]?1:0,k[2],k[6]?1:0),a.drawElements(a.TRIANGLES,h,a.UNSIGNED_SHORT,0))}},Wc:new f.G(215440491,106744817),ip:function(a,b,c){if(a.length){this.ec+=1;b=this.Qa.width;c=this.Qa.height;var d=this.Ka;b=(new f.ge).FY(-b/2,b/2,c/2,-c/2,0);c=Math.pow(2,this.zoom-this.Ei)*(this.q.ja?this.jb:this.dp);c=(new f.ge).scale(c,c,1);var e=this.eb.vc(this.S/Math.pow(2,this.Ei-this.zoom)).Va(this.Wc),e=(new f.ge).translate(-e.x,-e.y,0);d.uniformMatrix4fv(this.CZ, !1,b.elements);d.uniformMatrix4fv(this.FZ,!1,c.elements);d.uniformMatrix4fv(this.BZ,!1,e.elements);d.uniform1f(this.XM,Math.pow(2,this.zoom-this.Ei)*(this.q.ja?this.jb:1));b=this.pm=[];for(c=a.length-1;0<=c;c-=1){e=a[c];d.disableVertexAttribArray(this.wj);d.disableVertexAttribArray(this.vj);d.disableVertexAttribArray(this.ph);d.disableVertexAttribArray(this.pt);this.Em(0,void 0,void 0);d.uniform1i(this.ak,0);this.Fm(0);for(var g=0,h=e.length;g<h;g+=1){var k=e[g];e[g].Pa&&(k.ec=this.ec,b.push(k),this.iJ(d, k))}d.enableVertexAttribArray(this.wj);d.enableVertexAttribArray(this.vj);d.enableVertexAttribArray(this.ph);d.disableVertexAttribArray(this.pt);if(e.length){for(var l={},g=0,h=e.length;g<h;g+=1){var k=e[g],m=k.Pa.road;if(m)for(var n in m)if(m.hasOwnProperty(n)){l[n]||(l[n]=[]);for(var p=0,q=m[n].length;p<q;p+=1)m[n][p].dk=k.Pa.Nm,l[n].push(m[n][p])}}this.jJ(d,l,e[0].ma.z)}if(!(14>this.zoom))for(d.uniform1i(this.ak,1),this.Em(0,void 0,void 0),d.disableVertexAttribArray(this.wj),d.disableVertexAttribArray(this.vj), d.disableVertexAttribArray(this.ph),d.enableVertexAttribArray(this.pt),g=0,h=e.length;g<h;g+=1)k=e[g],k.Pa.building&&this.sC(d,k)}}},sC:function(a,b){for(var c=b.Pa.building,d=0;d<c.length;d+=1){var e=c[d],g=e[3][0],h=e[3][1];if(!e||!g)break;var k=e[3][2];k&&this.h.cc&&(h=this.T.Oq(g,h,k),g=h[0],h=h[1],e.bd=g);if(g||h)g||(g=[0,0,0,0]),h||(h=[0,0,0,0]),a.uniform4f(this.NM,g[0],g[1],g[2],g[3]),a.uniform4f(this.zn,h[0],h[1],h[2],h[3]),e.py&&(a.bindBuffer(a.ARRAY_BUFFER,e[0]),a.vertexAttribPointer(this.Bf, 2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.pt,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,e.py)),e.qy&&(a.bindBuffer(a.ARRAY_BUFFER,e[2]),a.vertexAttribPointer(this.Bf,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.pt,1,a.FLOAT,!1,12,8),a.drawArrays(a.LINES,0,e.qy)),e.lD&&(a.bindBuffer(a.ARRAY_BUFFER,e[1]),a.vertexAttribPointer(this.Bf,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.pt,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,e.lD))}},Em:function(a,b,c){var d=this.Ka;a!==this.cn&&(d.uniform1i(this.SM, a),this.cn=a);a&&b!==this.Bt&&(this.Bt=b,d.uniform4f(this.PM,b[0],b[1],b[2]||0,b[3]||0));c!==this.qu&&(d.uniform1i(this.TM,c),this.qu=c)},Fm:function(a){a!==this.dk&&(this.Ka.uniform1f(this.$M,a),this.dk=a)},Ne:function(){this.transform={translate:{x:this.Qa.width/2,y:this.Qa.height/2},scale:this.q.ja?1/this.jb:1/this.dp,rotate:0}},cI:function(a,b,c){var d=null;if(a.length&&c)d=a[11].id+"-"+c,this.lg[d]&&(a[0]=this.lg[d][0],a[3]=this.lg[d][3]);else return c=[],b&&b[0]&&(c=b[0].split("&")),(b=c[2])&& 0===b.indexOf("railway")?(a[0]=1,a[3]=3):a[0]=parseInt(c[0])||0,c[3]&&c[4]&&3<c.length?(a[3]=a[0]+parseInt(c[3]),0===f.a.indexOf(c[5],"dash")&&(a[3]+=1)):a[3]=0,d&&void 0===this.lg[d]&&(this.lg[d]=[a[0],0,0,a[3]]),a},aw:function(a){function b(a,b,c){var d;a&&b?d=a+c%1*(b-a):0===a&&b?d=Math.max(0,c%1-0.5)/0.5*b:0===a&&0===b?d=0:0!==a&&0===b&&(d=0);return f.a.Pc(d,3)}var c=a[11].browserStyle,d=a[11].levelStyleMapping;if(18<this.zoom){var e=this.xi(a,18,c,d);a=Math.pow(2,this.zoom-18);return[e[0]*a, e[3]*a]}if(f.a.eW(this.zoom))return e=this.xi(a,this.zoom,c,d),[e[0],e[3]];e=this.xi(a,Math.floor(this.zoom),c,d);c=this.xi(a,Math.ceil(this.zoom),c,d);a=b(e[0],c[0],this.zoom);e=b(e[3],c[3],this.zoom);return[a,e]},xi:function(a,b,c,d){a=a[11].id+"-"+b;this.lg[a]||(this.lg[a]=this.cI([],c[d[b]]));return this.lg[a]}});f.Q.of.Vc.uo=0; ')

_jsload_('vectorlayer', '(function(a){a.aL||(a.aL=function(){function a(b,c,d){for(var e=0,g=d.length;e<g;e++){var h=d.charCodeAt(e);if(128>h)b.setUint8(c++,h>>>0&127|0);else if(2048>h)b.setUint8(c++,h>>>6&31|192),b.setUint8(c++,h>>>0&63|128);else if(65536>h)b.setUint8(c++,h>>>12&15|224),b.setUint8(c++,h>>>6&63|128),b.setUint8(c++,h>>>0&63|128);else if(1114112>h)b.setUint8(c++,h>>>18&7|240),b.setUint8(c++,h>>>12&63|128),b.setUint8(c++,h>>>6&63|128),b.setUint8(c++,h>>>0&63|128);else throw Error("bad codepoint "+h);}}function c(a, b,c){var d="",e=b;for(b+=c;e<b;e++)if(c=a.getUint8(e),0===(c&128))d+=String.fromCharCode(c);else if(192===(c&224))d+=String.fromCharCode((c&15)<<6|a.getUint8(++e)&63);else if(224===(c&240))d+=String.fromCharCode((c&15)<<12|(a.getUint8(++e)&63)<<6|(a.getUint8(++e)&63)<<0);else if(240===(c&248))d+=String.fromCharCode((c&7)<<18|(a.getUint8(++e)&63)<<12|(a.getUint8(++e)&63)<<6|(a.getUint8(++e)&63)<<0);else throw Error("Invalid byte "+c.toString(16));return d}function d(a){for(var b=0,c=0,d=a.length;c< d;c++){var e=a.charCodeAt(c);if(128>e)b+=1;else if(2048>e)b+=2;else if(65536>e)b+=3;else if(1114112>e)b+=4;else throw Error("bad codepoint "+e);}return b}function e(a,b){this.offset=b||0;this.view=a}function g(c,e,h){var k=typeof c;if("string"===k){var q=d(c);if(32>q)return e.setUint8(h,q|160),a(e,h+1,c),1+q;if(256>q)return e.setUint8(h,217),e.setUint8(h+1,q),a(e,h+2,c),2+q;if(65536>q)return e.setUint8(h,218),e.setUint16(h+1,q),a(e,h+3,c),3+q;if(4294967296>q)return e.setUint8(h,219),e.setUint32(h+ 1,q),a(e,h+5,c),5+q}if(c instanceof ArrayBuffer){q=c.byteLength;if(256>q)return e.setUint8(h,196),e.setUint8(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+2),2+q;if(65536>q)return e.setUint8(h,197),e.setUint16(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+3),3+q;if(4294967296>q)return e.setUint8(h,198),e.setUint32(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+5),5+q}if("number"===k){if(c<<0!==c)return e.setUint8(h,203),e.setFloat64(h+1,c),9;if(0<=c){if(128>c)return e.setUint8(h, c),1;if(256>c)return e.setUint8(h,204),e.setUint8(h+1,c),2;if(65536>c)return e.setUint8(h,205),e.setUint16(h+1,c),3;if(4294967296>c)return e.setUint8(h,206),e.setUint32(h+1,c),5;throw Error("Number too big 0x"+c.toString(16));}if(-32<=c)return e.setInt8(h,c),1;if(-128<=c)return e.setUint8(h,208),e.setInt8(h+1,c),2;if(-32768<=c)return e.setUint8(h,209),e.setInt16(h+1,c),3;if(-2147483648<=c)return e.setUint8(h,210),e.setInt32(h+1,c),5;throw Error("Number too small -0x"+(-c).toString(16).substr(1)); }if("undefined"===k)return e.setUint8(h,212),e.setUint8(h+1,0),e.setUint8(h+2,0),3;if(null===c)return e.setUint8(h,192),1;if("boolean"===k)return e.setUint8(h,c?195:194),1;if("object"===k){var k=0,r=Array.isArray(c),s=null;r?q=c.length:(s=Object.keys(c),q=s.length);16>q?(e.setUint8(h,q|(r?144:128)),k=1):65536>q?(e.setUint8(h,r?220:222),e.setUint16(h+1,q),k=3):4294967296>q&&(e.setUint8(h,r?221:223),e.setUint32(h+1,q),k=5);if(r)for(r=0;r<q;r++)k+=g(c[r],e,h+k);else for(r=0;r<q;r++)var u=s[r],k=k+g(u, e,h+k),k=k+g(c[u],e,h+k);return k}throw Error("Unknown type "+k);}function h(a){var b=typeof a;if("string"===b){var c=d(a);if(32>c)return 1+c;if(256>c)return 2+c;if(65536>c)return 3+c;if(4294967296>c)return 5+c}if(a instanceof ArrayBuffer){c=a.byteLength;if(256>c)return 2+c;if(65536>c)return 3+c;if(4294967296>c)return 5+c}if("number"===b){if(a<<0!==a)return 9;if(0<=a){if(128>a)return 1;if(256>a)return 2;if(65536>a)return 3;if(4294967296>a)return 5;if(1.8446744073709552E19>a)return 9;throw Error("Number too big 0x"+ a.toString(16));}if(-32<=a)return 1;if(-128<=a)return 2;if(-32768<=a)return 3;if(-2147483648<=a)return 5;if(-9223372036854775E3<=a)return 9;throw Error("Number too small -0x"+a.toString(16).substr(1));}if("undefined"===b)return 3;if("boolean"===b||null===a)return 1;if("object"===b){b=0;if(Array.isArray(a))for(var c=a.length,e=0;e<c;e++)b+=h(a[e]);else for(var g=Object.keys(a),c=g.length,e=0;e<c;e++)var k=g[e],b=b+(h(k)+h(a[k]));if(16>c)return 1+b;if(65536>c)return 3+b;if(4294967296>c)return 5+b;throw Error("Array or object too long 0x"+ c.toString(16));}throw Error("Unknown type "+b);}var k={};k.Rna=a;k.Qna=c;k.Pna=d;e.prototype.map=function(a){for(var b={},c=0;c<a;c++){var d=this.parse();b[d]=this.parse()}return b};e.prototype.tI=function(a){var b=new ArrayBuffer(a);(new Uint8Array(b)).set(new Uint8Array(this.view.buffer,this.offset,a),0);this.offset+=a;return b};e.prototype.dE=function(a){var b=c(this.view,this.offset,a);this.offset+=a;return b};e.prototype.jI=function(a){for(var b=Array(a),c=0;c<a;c++)b[c]=this.parse();return b}; e.prototype.parse=function(){var a=this.view.getUint8(this.offset);if(160===(a&224))return this.offset++,this.dE(a&31);if(128===(a&240))return this.offset++,this.map(a&15);if(144===(a&240))return this.offset++,this.jI(a&15);if(0===(a&128))return this.offset++,a;if(224===(a&224))return a=this.view.getInt8(this.offset),this.offset++,a;if(212===a&&0===this.view.getUint8(this.offset+1))this.offset+=3;else{switch(a){case 217:return a=this.view.getUint8(this.offset+1),this.offset+=2,this.dE(a);case 218:return a= this.view.getUint16(this.offset+1),this.offset+=3,this.dE(a);case 219:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.dE(a);case 196:return a=this.view.getUint8(this.offset+1),this.offset+=2,this.tI(a);case 197:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.tI(a);case 198:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.tI(a);case 192:return this.offset++,null;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 204:return a=this.view.getUint8(this.offset+ 1),this.offset+=2,a;case 205:return a=this.view.getUint16(this.offset+1),this.offset+=3,a;case 206:return a=this.view.getUint32(this.offset+1),this.offset+=5,a;case 207:var a=this.view.getUint32(this.offset+1),b=this.view.getUint32(this.offset+5);this.offset+=9;return 4294967296*a+b;case 208:return a=this.view.getInt8(this.offset+1),this.offset+=2,a;case 209:return a=this.view.getInt16(this.offset+1),this.offset+=3,a;case 210:return a=this.view.getInt32(this.offset+1),this.offset+=5,a;case 211:return a= this.view.getInt32(this.offset+1),b=this.view.getUint32(this.offset+5),this.offset+=9,4294967296*a+b;case 222:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.map(a);case 223:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.map(a);case 220:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.jI(a);case 221:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.jI(a);case 202:return a=this.view.getFloat32(this.offset+1),this.offset+=5,a;case 203:return a= this.view.getFloat64(this.offset+1),this.offset+=9,a}throw Error("Unknown type 0x"+a.toString(16));}};k.Bj=function(a){var b=new DataView(a),b=new e(b),c=b.parse();if(b.offset!==a.byteLength)throw Error(a.byteLength-b.offset+" trailing bytes");return c};k.qJ=function(a){var b=new ArrayBuffer(h(a)),c=new DataView(b);g(a,c,0);return b};return{yU:function(a,b){b(null,{Zt:a.Zt,dd:a.dd,Ca:k.qJ(a.Ca)})},kU:function(a,b){b(null,{Zt:a.Zt,dd:a.dd,Ca:k.Bj(a.Ca)})}}},a.ju=a.l.en?new a.ts(a.aL,{hostWorker:a.MC, clientId:"msg",lazy:"untilCall"}):new a.ts(function(){},{hostWorker:a.MC,clientId:"msg",lazy:"untilCall"}))})(f);!f.$E&&f.l.en&&(f.$E=function(){function a(a,b){return a.bind?a.bind(b):function(){a.apply(b,arguments)}}function b(){v="unsupport";p.length=0;c();this.r("disable")}function c(){s&&(clearTimeout(s.X$),s.onopen=s.onmessage=s.onerror=null,3!==s.readyState&&s.close(),s=null)}function d(){A=!0;this.flush();this.r("open")}function e(){A?(v="closed",c()):b.call(this)}function g(a,b){if("unsupport"===v)return!1;"connected"===v?h.call(this,a):("closed"===v&&this.W$(),p.push({data:a,Oy:b}));x+=1}function h(a){var c= this;s.readyState===WebSocket.OPEN&&(s.send(a),t&&clearTimeout(t),t=setTimeout(function(){b.call(c);t=null},5E3),y&&clearTimeout(y),y=setTimeout(function(){c.close();y=null},1E4))}var k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,l={},m="undefined"===typeof window||!k,n=null,p=[],q=[],r=+new Date,s=null,u=1,v="closed",x=0,t=null,y=null,A=!1;m||(l.Lda=function(){if(q.length){var a=f.A.Qb+offlineMap.domain+"count?",b=["type=v","k="+f.A.key,"u="+f.A.jo,"m="+(f.l.Z?1:0),"pf="+f.l.wr,"frq="+ q.join(",")];new f.Sa.bb(a+b.join("&"))}},f.extend(l,f.ka),f.event.U(window,"beforeunload",l.Lda,l));l.Bea=function(a){if("encode"===a.dd)g.call(this,a.Ca);else if("decode"===a.dd)if(a=a.Ca,"ack"===a.type)switch(a.command){case "tiles":this.r("ack",a);break;case "retain":v="connected";this.flush();break;case "close":b.call(this)}else 0===a.content.errcode&&("tiles"===a.type?this.r("tiles",a):"traffic"===a.type&&this.r("traffic",a))};l.Lga=function(a){x=a};l.Qq=function(){return x};l.close=function(){s&& (v="closed",s.close())};l.W$=function(){var c=this;"closed"===v&&(null===n&&(n=m?this.A.lN+"://"+this.A.av:f.A.lN+"://"+f.A.av),s=new WebSocket(n),s.binaryType="arraybuffer",v="connecting",s.onopen=a(d,this),s.onclose=a(e,this),s.onerror=a(b,this),s.ontimeout=a(b,this),s.onmessage=a(this.Cea,this),s.X$=setTimeout(function(){s.readyState!==WebSocket.OPEN&&b.call(c)},1200))};l.Zx=function(){return"connected"===v};l.Zca=function(){return"closed"===v};l.flush=function(){if("connected"===v){for(var a= 0,b=p.length;a<b;a++)h.call(this,p[a].data);p.length=0}};l.EK=function(){return"unsupport"!==v};l.send=function(a){var b=this,c=u++;a={dd:"encode",Ca:a,Zt:r};var d=this.yU;m||(d=f.ju.yU);d(a,function(a,d){a||g.call(b,d.Ca,c)});return c};l.vU=function(a){for(var b=0,c=p.length;b<c;b++)if(p[b].Oy===a)return p.splice(b,1),!0;return!1};l.C9=function(a){q.push(a)};l.Cea=function(a){var b=this;t&&(clearTimeout(t),t=null);var c=this.kU,d=self.$w;m||(c=f.ju.kU,d=f.ju.$w);d([a.data]);c({Zt:r,dd:"decode",Ca:a.data}, function(a,c){a||b.Bea(c)})};return l});f.Ch={yZ:function(){0===f.Ba.be&&f.Ch.GV()},Ona:function(a,b){if(!a)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]&&a[c].Cn===b)return!0},E$:function(a,b){var c="limg-"+a.key+"-"+b.q.xc;f.Ba[c]&&delete f.Ba[c]},SU:function(a){return f.Ba[a.Cn?a.Cn:a]},Ok:function(a){var b=null,c=null,d=!1;a.Cn?(b=a,c=b.Cn,(a=b.url)&&(d=!0)):c=a;var e=f.Ba[c];d&&e&&e.src!==a&&(e=f.Ba[c]=null);if(!e&&a){d="data:"===a.substr(0,5);e=document.createElement("img");d||(e.crossOrigin="Anonymous");f.Ba[c]=e;e.loaded=!1;f.Ba.be+= 1;f.C.g(e,"load",this.QC,this);f.C.g(e,"error",this.FV,this);var g=this;e.Ru=setTimeout(function(){e.loaded||g.GV()},300);e.src=a;b&&(e.kka=c,b.url=null)}},GV:function(){for(var a=0;a<f.Ba.zp.length;a+=1)f.Ba.zp[a].set("display")},TT:function(a){f.C.I(a,"load",this.QC,this);f.C.I(a,"error",this.FV,this)},QC:function(a){a=a.target;a.loaded=!0;f.Ba.be-=1;this.TT(a);this.yZ();a.Ru&&(clearTimeout(a.Ru),a.Ru=null)},FV:function(a){a=a.target;a.loaded=!1;f.Ba.be-=1;this.TT(a);this.yZ();a.Ru&&(clearTimeout(a.Ru), a.Ru=null)}};f.w.ik=f.w.oc.extend({B:function(a,b,c){this.KB=c;f.Ba.zp.push(this);this.xc=f.a.$U("layer");this.jb=2;a.get("textRatio");this.yN=25;this.X("tiles",a);this.zia=a.get("vdataUrl")||b.J.get("vdataUrl")||f.A.av;this.bi=!0;this.ia=a;this.ij=f.l.Z?!1:!0;this.h=b;this.Rh=this.Qh=!0;this.he("zoom center centerCoords resolution coordsBound styleID iconsID businessIconsID forceBig mode display".split(" "),b);this.he("zooms detectRetina visible zIndex textIndex watermark opacity".split(" "),a);this.X("lang", b,!0);this.get("watermark")&&(this.dv=new Image,this.dv.src=this.get("watermark"));this.Sna="v4";this.xa={};this.Yh={};this.ee=256;this.or=[];this.Fe=this.af=0;this.ja=f.l.ja&&this.get("detectRetina");this.ee=256*(this.ja?2:1);this.X("mapStyle",b);this.X("style",b);this.Mm=0;this.X("features",b);this.Ce=18;this.X("reload",a)},mapStyleChanged:function(){this.get("mapStyle");this.od=!1;if(this.h.get("styleUrl")||"normal"===this.get("mapStyle"))this.od=!!this.h.get("showBuildingBlock");this.featuresChanged()}, featuresChanged:function(){this.set("reload")},langChanged:function(){this.set("reload");this.ia.hp()},f9:function(){var a=!1,b=this.SP();if(b){if(this.jh){var c="active"===this.jh.dw;b.Kv(this.jh);c&&(b.Qp(this.jh,"active"),a=!0)}f.l.z$&&!a&&b.vB()}},Ev:function(){this.f9()},bz:function(a,b){var c=!0;if("hotspotout"===a)this.h.J.set("optimalCursor",null);else if("hotspotover"===a)this.h.J.set("optimalCursor","pointer");else if("mouseup"===a||"mousedown"===a)c=!1;var d=this.SP();if(d)switch(a){case "hotspotout":d.AB(b); break;case "hotspotover":d.Qp(b,"hover");break;case "mouseup":d.Qp(b,"hoverup");break;case "mousedown":d.Qp(b,"active")}c&&(c=b.Na,c=new f.G(c[0],c[1]),c=this.h.de(c,3),this.h.J.r(a,{name:b.name,lnglat:c,id:b.Vk,isIndoorPOI:b.BK}))},SP:function(){if(!f.l.OV){var a=this.Q||this.$l;if(!a)return null;var b=this.h?this.h.J.get("hotspotOptions"):{},b=f.extend({},b);if(b.disableHighlight)return null;this.Nw||(this.Nw=new f.w.ik.c0(a));return this.Nw}},Vn:function(a){(a=this.iV(a))&&this.bz("hotspotclick", a)},Ys:function(a){var b="mousemove"===a.type;if(!this.h.Ng||!b){var c=this.iV(a);switch(a.type){case "mousemove":case "mouseup":case "mousedown":c&&this.jh!==c&&(this.jh&&this.bz("hotspotout",this.jh),this.bz("hotspotover",c)),!c&&this.jh&&this.bz("hotspotout",this.jh),c&&!b&&this.bz(a.type,c)}this.jh=c}},textIndexChanged:function(){this.set("display")},Gea:function(){this.h.g("click",this.Vn,this);this.h.g("mousemove",this.Ys,this);this.h.g("mousedown",this.Ys,this);this.h.g("mouseup",this.Ys,this)}, LI:function(){this.h.I("click",this.Vn,this);this.h.I("mousemove",this.Ys,this);this.h.I("mousedown",this.Ys,this);this.h.I("mouseup",this.Ys,this)},Dl:function(){return null},Wm:function(){var a=this.au?null:this.h.J.get("forceZooms");return{bi:!0,ee:256,visible:this.get("visible"),ed:a||this.get("zooms"),TB:this.ij&&this.wa,Qh:!this.h.kE,Rh:!this.h.kE,opacity:this.get("opacity"),cd:!1}},vl:function(a){if(f.Q.canvas.ik)return new f.Q.canvas.ik(this,a)},fx:function(a){0===a.indexOf("amap://styles/")&& (a="normal");var b=this.get("forceBig")||f.l.Z&&!this.ja?"6":"5";this.url=f.A.Qb+"://"+this.zia+"/tiles?mapType="+a+"&v="+(f.Nc?3:2)+"&style="+b;this.url+=this.ja?"&rd=2":"&rd=1";this.url+="&flds="+this.ta;this.url+="&t="},styleChanged:function(){this.h.cc||this.featuresChanged()}}); f.w.Vc=f.w.ik.extend({vl:function(a){var b=this;if(!b.dv&&f.l.He&&"vw"===b.h.get("baseRender")){var c=["wgl"];this.h.cc&&c.push("wgl2");if(f.gb.ay(c))return new f.Q.of.Vc(b,a)}else if(c=["cmng","cgl"],this.h.cc&&c.push("cgl2"),f.gb.ay(c))return new f.Q.canvas.Vc(b,a);f.gb.$f(c,function(){b.set("display")})},featuresChanged:function(){var a=this.get("features"),b=[];"all"===a?b=this.KB:a&&(-1!==f.a.indexOf(a,"bg")&&-1!==f.a.indexOf(this.KB,"region")&&b.push("region"),-1!==f.a.indexOf(a,"building")&& -1!==f.a.indexOf(this.KB,"building")&&b.push("building"),-1!==f.a.indexOf(a,"road")&&-1!==f.a.indexOf(this.KB,"road")&&b.push("road"));this.ta=b;this.fx(this.get("mapStyle")||"normal");this.set("reload")}});f.w.n0=f.w.Vc.extend({B:function(){this.Zk(arguments);this.Ce=this.Sl=17;this.ta=["building"];this.od=!0;this.fx(this.get("mapStyle")||"normal");this.au=!0},featuresChanged:function(){},mapStyleChanged:function(){}}); f.w.Lh=f.w.ik.extend({vl:function(a){var b=this;if(this.rK()){if(this.$u=!0,f.Q.canvas.cF)return this.GT(),a=new f.Q.canvas.cF(this,a),a.g("afterLabelRender",this.Ev,this),a}else{b.$u=!1;if(f.Q.canvas.bF)return a=new f.Q.canvas.bF(this,a),a.g("afterLabelRender",this.Ev,this),a;a=["cmng","labelcanvas"];f.l.kJ&&a.push("labelDir");f.gb.$f(a,function(){b.set("display")})}},rK:function(){var a=this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.h.get("nolimg")?!1:f.l.$u?!0:!1},Ica:function(){var a= this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.h.get("nolimg")||f.l.cd||f.l.Z?!1:!0},featuresChanged:function(){var a=this.get("features"),b=this.get("mapStyle"),c=[];"all"===a?c=["roadlabel","poilabel"]:a&&(-1!==f.a.indexOf(a,"road")&&c.push("roadlabel"),-1!==f.a.indexOf(a,"point")&&c.push("poilabel"));a=this.rK();c.length&&(a||this.Ica())&&c.unshift("limg");this.ta=c;this.fx(b);this.set("reload");(b=this.Q||this.$l)&&a^this.$u&&(this.Nw&&(this.Nw=this.Nw.Q=null),b.I("afterLabelRender", this.Ev,this),b.Et(),this.$l=this.Q=null)},GT:function(){this.ir=f.A.Qb+"://"+(this.ia.get("vdataUrl")||this.h.J.get("vdataUrl")||f.A.av)+"/limg?";var a=this.ja?2:1;this.ir+="&font="+(f.l.Z&&!this.ja?"big":"small");this.ir+="&scl="+a;this.ir+="&t="},iV:function(a){return a.nf?(a=this.WU(this.h.Xb(a.nf,20),!0))?a[0]:null:null},WU:function(a,b){var c=this.h.DC();if(c&&(c=c.Vq(this)))return c.Pt(a,b)}});f.w.ik.c0=f.ba.extend({B:function(a){this.L8(a)},L8:function(a){this.Q=a},AB:function(a){if(a.dw){a.dw=!1;var b=this.Q;b&&b.AB.apply(b,arguments)}},Kv:function(a){a.dw=!1;var b=this.Q;b&&b.Kv.apply(b,arguments)},Qp:function(a,b){b||(console.warn("hlStyle is required, e.g. hover, active.."),b="hover");if(a.dw!==b){a.dw=b;var c=this.Q;c&&c.Qp.apply(c,arguments)}},vB:function(){var a=this.Q;a&&a.vB()}});f.ps={cx:function(a,b){this.xf={};this.xf.Zt=f.a.Lb(this.xf);b.Ec||(b.Ec=f.$E());this.Ec=b.Ec;this.Ec.g("tiles",this.wD,this);this.Ec.g("ack",this.vD,this);this.Ec.g("disable",this.uD,this)},fT:function(){if(this.ai&&!this.Oj&&f.qi.Cia||this.Oj&&f.qi.qda||!this.Oj&&!this.ai&&this.bi&&f.sf.Mca)return!0},Fw:function(a){this.zf=f.a.Dt(this.zf,a)},bo:function(){return f.a.keys(this.yf).length?!0:!1},EA:function(a){f.a.Ib(a,function(a){f.Ch.Ok(a)})},Mz:function(){for(var a=this.zf.length-1;0<=a;a--){var b= this.zf[a];b.Kp||b.abort()}this.zf.splice(0,this.zf.length)},ou:function(a){if(this.q&&a.JK===this.q.xc){this.Pe||this.Hf?this.zH([this.q,"groupcomplete",null,null,"allbase"]):(this.Ii(),this.cq.jC(this.q,"groupcomplete",null,null,"allbase"));for(var b=0,c=a.Rc.length;b<c;b+=1)this.uy(a.Rc[b],a.eu,a.Eu,a.Z)}},uy:function(a,b){var c=a.dd,d=this.xa.get(a.$k);if(d){var e=this.q.ta;d.ta||(d.Pa={},d.ta=[]);var g="";(this.h.Xj&&!this.h.cc||this.Vca&&this.h.cc)&&this.AJ(c,a.Ca);"poilabel"===c||"roadlabel"=== c?(a.Rd||(g=a.Ca,a.Rd=null),d.ta.push.apply(d.ta,a.Ca),c===this.q.ta[this.q.ta.length-1]&&(d.Rd=null)):d.Pa[c]=a.Ca;"building"!==c&&"poilabel"!==c||!a.Lk||d.wf||(d.wf={},d.wf.xe=a.Lk,f.Gn&&f.Gn.r("vecTileParsed.buildings",{Mr:d}));if("roadlabel"!==c&&"poilabel"!==c||this.YV||!f.l.kJ&&!this.h.cc)this.Pe||this.Hf?this.zH([this.q,g,d,b,c]):(this.Ii(),this.cq.jC(this.q,g,d,b,c));c===e[e.length-1]&&(c="roadlabel"===c||"poilabel"===c?"labels":"allbase",this.Pe||this.Hf?this.zH([this.q,"tileComplete",d, b,c]):(this.Ii(),this.cq.jC(this.q,"tileComplete",d,b,c)))}},Tz:function(){if(this.h){var a=this.h.J.getMapStyle();this.Wo=a;this.D4(a);this.Ec&&this.Ec.EK()&&(-1!==a.indexOf("amap://styles")&&(a="normal"),a={command:"status",payload:{mapType:a,style:f.l.Z&&!this.q.ja?"6":"5",rd:this.q.ja?2:1}},this.h.J.get("workerMode")&&this.fT()?(f.sf.p$(a,f.a.bp),this.Ec.Zca()||this.Ec.close()):this.Ec.send(a))}},mapStyleChanged:function(){this.Tz()},styleChanged:function(){this.Tz()},uD:function(){for(var a in this.xf)this.xf.hasOwnProperty(a)&& this.xf[a].Bd&&(this.lk(this.xf[a].Bd,this.xf[a].lc),delete this.xf[a],delete this.yf[a]);this.Ec=null;this.cj("mapStyle");this.set("display",1)},vD:function(a){var b=a.reqId;this.xf[b]&&(!a.content.status&&this.xf[b]&&this.lk(this.xf[b].Bd,this.xf[b].lc),delete this.xf[b],delete this.yf[b])},wD:function(a){var b=a.reqId;if((!/-1$/.test(b)||!this.bo())&&this.xf[b]){var c=a.content.opt,d=this.xf[b].Bd[0];c!==this.Ta&&!d.tg||d.tg&&2<(this.bo()||Math.abs(c-this.Ta))?this.lk(this.xf[b].Bd,this.xf[b].lc): this.sr(a.content.data,c)}},gI:function(a,b){var c=a.ye,d=null;(f.l.ef||f.l.Si&&!this.h.J.wa)&&18>=c.lc&&(b?d={Rd:!0,data:a.maa,url:this.Tm(a.lc,[]),w:this.q,"x-vd-v":c.Ed,tv:c.lf,bgc:this.h.qd,vdataVersion:c.Vd,od:this.h.J.get("showBuildingBlock")}:this.sE||(d={Rc:a.data.Rc,"x-vd-v":c.Ed,tv:c.lf,bgc:this.h.qd,vdataVersion:c.Vd,He:!!this.Gh,url:this.Tm(a.lc,[]),w:this.q,od:this.h.J.get("showBuildingBlock")}));d&&f.im.set(d)},QK:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]: !1;if(a.length)if(this.XX)this.WW=!0;else{void 0===this.zf&&(this.zf=[]);c||this.Mz();void 0===this.yf&&(this.yf={});var d=1,e=[],g=this;18<b&&(d=Math.pow(2,b-18));for(var h=Math.pow(2,20-a[0].ma.z),k=0;k<a.length;k+=1){var l=a[k],m=l.ma;l.lc=b;m.S=h;if(18<b&&!this.Gh){for(var n=0;n<d;n+=1)for(var p=0;p<d;p+=1){var q=new f.Wa(new f.hk(b,d*m.x+n,d*m.y+p));this.xa.Bc(q.key)||(this.xa.set(q.key,q),q.status="loading")}this.xa.set(l.key+"/"+b,l)}else this.xa.set(l.key,l),this.Gh&&10>m.z&&this.PU(l)?this.set("display", 0):l.status="loading"}this.R7(a,b,f.a.bind(function(a,d){var g=this;if(d.length){for(var h=0,k=d.length;h<k;h++){var l=d[h].ma,m=l.x,n=l.y,l=l.z;if(10>l){var p=Math.pow(2,l);if(m>=p||0>m)m=(m+p)%p}m=f.a.tC(m,n,l).join(",");f.a.ga(e,m)||e.push(m)}h=this.d3({Hha:d,tg:c,lc:b,MM:e});if(this.h.J.get("workerMode")&&this.fT())if(this.ai)f.qi.Fv&&delete h.Id.Nc,f.qi.Ri(h,function(a,c){null!==c.data&&g.h&&(void 0===f.qi.Fv&&(f.qi.Fv=!0),c.jW?g.lk(c.Bd,b):(c.Pj&&g.mB(),g.Oj?(f.a.Ib(c.Bd,function(a){this.xa.set(a.key, a);a.Rd&&!a.Rd.loaded&&(f.Ch.Ok(a.Rd,!0),a.Rd.loaded=!0);a.M&&a.M.Ba&&this.EA(a.M.Ba)},g),g.set("display"),g.gI(c,!0)):(f.a.Ib(c.Bd,function(a){var b=this.xa.get(a.key);b&&(b.status=a.status,a.M&&a.M.Ba&&this.EA(a.M.Ba))},g),g.gI(c),c.data&&g.ou(c.data))))});else{var q=f.sf.DW;if(!this.h.J.wa||f.sf.Baa)q=f.sf.Ri;f.sf.Fv&&delete h.Id.Nc;this.Tz();q(h,function(a,c){if(g.h){void 0===f.sf.Fv&&(f.sf.Fv=!0);c.jW&&g.lk(c.Bd,b);if(q===f.sf.DW){if(c.disabled){f.sf.Baa=!0;g.set("display");return}if(c.q9)return}c.Pj&& g.mB();c.data&&(g.h.qd!==c.uq&&(g.h.qd=c.uq),f.a.Ib(c.Bd,function(a){var b=this.xa.get(a.key);b&&(b.status=a.status,a.M&&a.M.Ba&&this.EA(a.M.Ba))},g),g.EA(c.icons),g.gI(c),c.data&&g.ou(c.data))}})}else!this.ai&&this.Ec&&this.Ec.EK()?this.h.J.get("workerMode")?this.FA(d,b,e,c):(1>this.Ec.Qq()||3<this.hq?this.FA(d,b,e,c):((2===this.Ec.Qq()||this.Ec.Zx())&&this.Tz(),this.U4(d,b,e,c)),this.Ec.Lga(this.Ec.Qq()+1),this.Ec.wW&&this.Ec.C9(Math.ceil((new Date-this.Ec.wW)/1E3)),this.Ec.wW=new Date):this.FA(d, b,e,c)}},this));window.renderDelay&&(this.XX=setTimeout(function(){g.WW&&g.set("display",!1);g.WW=!1;g.XX=null},window.renderDelay))}},D4:function(a){a&&"normal"!==a&&0!==a.indexOf("amap://styles/")?this.sE=!0:this.sE=!1},R7:function(a,b,c){if((f.l.ef||f.l.Si&&!this.h.J.wa)&&(this.Oj||!this.sE)&&18>=b){var d=f.im,e=this,g=this.h,h=g.J;g.gy||void 0!==g.fD||("dv"===h.get("baseRender")?g.fD=1:g.fD=2);d.get({type:h.wa?"NFS":"FS",od:this.q.au||this.q.od,Eha:a,He:!!this.Gh,w:this.q,url:this.Tm(b,[]),timeout:500}, function(d,h){if(e.q){if(!d&&h.pK.length){h.pK.length===a.length&&(g.gy||g.fD--,e.mB());if(h.Rc){e.Ed=h.ye["x-vd-v"];e.lf=h.ye.tv;var m="#"+h.ye.bgc;e.h.qd!==m&&(e.h.qd=m);h.pK.forEach(function(a){a.status="loaded"});m=e.pG(b,h.Rc);e.ou(m)}else h.rda.forEach(function(a){e.mu(a,b,[],h.ye["x-vd-v"],!0)}),e.set("display");a=h.Wda}c(null,a)}})}else c(null,a)},U4:function(a,b,c,d){if(!d||!this.bo()){var e=[(new Date).getTime(),this.Ec.Qq()+1&65535,d?1:0].join("-");d||(this.yf[e]=1);var g={command:"tiles", reqId:e,payload:{t:c,opt:b,cs:{level:b,flds:this.q.ta.join(","),v:f.Nc?"3":"2"}}},h;if(!this.Ec.Zx()){var k=this;setTimeout(function(){k.Ec&&!k.Ec.Zx()&&(k.hq?k.hq++:k.hq=1,k.Ec.vU(h)&&(delete k.xf[e],delete k.yf[e],k.FA(a,b,c,d)))},300)}h=this.Ec.send(g);this.xf[e]={Bd:a,lc:b}}},mL:function(a){if(!a.wa||a.tg)a.status="",a.wa=void 0,a.qa=null,a.sc=null,a.Fc&&(a.Fc.sc=null,a.Fc.Fc=null,a.Fc=null),this.xa.Bn(a.key)},d3:function(a){var b=a.Hha,c=a.lc,d=a.MM;a=a.tg;var e=+new Date;return{xc:e,uq:this.h.qd, ai:this.ai,Oj:this.Oj,od:this.q.od,Wca:!!f.Nc,He:this.Gh,IK:this.q.xc,ta:this.q.ta,cd:this.q.ja,jb:this.q.jb,gK:Math.ceil(this.Kf.NC),Bd:f.a.filter(b,function(a){return"loaded"!==a.status}),lc:c,MM:d,tg:a,url:this.Tm(c,d,b)+"&_id="+e,Id:this.pG(c,[])}},pG:function(a,b){f.Nc&&1<f.Nc.length&&(f.Nc=f.Nc[this.q.get("forceBig")||f.l.Z&&!this.q.ja?1:0]);var c=f.Nc||null;return{Uca:"3D"===this.q.h.J.view.type,l$:this.q.od,YB:f.A.YB||null,xka:this.q.get("businessIconsID"),Ed:this.Ed,lf:this.lf,Kla:this.q.get("iconsID"), JK:this.q.xc,eu:a,Wt:this.q.Wt,Rc:b,Z:this.q.get("forceBig")||f.l.Z,mode:this.q.get("mode"),Afa:f.A.Qb,lY:this.q.get("forceBig")?1:this.q.jb,Eu:this.q.get("forceBig")?!1:this.q.ja,Nc:c}},Ov:function(a){a=a.split(";");for(var b=0,c=a.length;b<c;b+=1){a[b]=a[b].split(",");for(var d=0,e=a[b].length;d<e;d+=1)a[b][d]=parseInt(a[b][d],36)}return a},sr:function(a,b,c){if(this.q){for(var d=[],e=0,g=a.length;e<g;e+=1){var h=a[e];h&&(c&&(h=JSON.parse(h)),h["x-vd-v"]?(this.Ed=h["x-vd-v"],this.lf=h.tv,this.Vd= [h.tv,h.vdv].join("-"),h.bgc&&(h="#"+h.bgc.substring(2),this.h.qd!==h&&(this.h.qd=h))):this.mu(h,b,d))}if(d.length){var k=this;a=null;var l;this.Gh?(a=f.CE,l=a.rX):(a=f.ju,l=this.ai?a["label:parseLabel"]:a["base:parseDataToVector"]);(function(){l(k.pG(b,d),function(a,c){if(k.q&&!a){var d=c.icons;if(d)for(var e=0;e<d.length;e+=1)f.Ch.Ok(d[e]);(f.l.ef||f.l.Si&&!k.h.J.wa)&&(k.Oj||!k.sE)&&18>=b&&f.im.set({Rc:c.data.Rc,"x-vd-v":k.Ed,tv:k.lf,bgc:k.h.qd,Vd:k.Vd,He:!!k.Gh,url:k.Tm(10,[]),w:k.q,od:k.q.od}, function(){});c.data&&k.ou(c.data)}})})()}}},mu:function(a,b,c){function d(d,e,g){e=[g,d,e].join("/");18<b&&!l.Gh&&(e+="/"+b);if((d=l.xa.get(e))&&"loaded"!==d.status)if(l.pZ(d,p)||d.tg){if(-1!==n.indexOf(m))if("limg"===m){if(e=a[1],d.Rd=e,"string"===typeof e.b&&(e.b=l.Ov(e.b)),g="",g="object"===typeof e.u?e.u.url:e.u)d={url:g,Cn:"limg-"+d.key+"-"+l.q.xc},e.u=d,f.Ch.Ok(d,!0)}else{e={li:d.ma,$k:e,Ca:a,dd:m,Wt:l.q.Wt,sI:l.h.qd,zK:"building"===m,Wg:"poilabel"===m||"roadlabel"===m||"building"===m&&l.q.od}; if("poilabel"===m||"roadlabel"===m)e.Rd=d.Rd;m===n[n.length-1]&&(d.status="loaded");c.push(e)}}else l.lM(b,d,p,f.a.bind(l.mL,l)),18<b&&l.xa.Bn(e)}var e=a[0].split("-"),g=parseInt(e[1]),h=parseInt(e[2]),k=parseInt(e[0]),l=this,m=e[3],n=this.q.ta,p=18<b?Math.pow(2,b-18):1,e=l.Kf.NC,q=Math.pow(2,k);10>k&&(g<=e&&d(g+q,h,k),g>=q-e&&d(g-q,h,k));d(g,h,k)},zH:function(a){this.nq||(this.nq=[]);this.nq.push(a)},Ii:function(){if(this.nq&&this.nq.length){for(var a=0,b=this.nq.length;a<b;a+=1)this.cq.jC.apply(this.cq, this.nq[a]);this.nq=[]}},lk:function(a,b){for(var c=18<b?Math.pow(2,b-18):1,d=0;d<a.length;d+=1){var e=a[d];this.lM(b,e,c,f.a.bind(this.mL,this));18<b&&this.xa.Bn(e.key+"/"+b)}f.l.ef&&f.im.Bn({Bd:a,url:this.Tm(b,[]),w:this.q,He:!!this.Gh,od:this.q.od})},Tm:function(a,b,c){return this.q.url+b.join(";")+"&lv="+a+"&preload="+(c&&c[0]&&c[0].tg?1:0)},E3:function(){var a=this.q.url,b="rb";if(/\\/limg/.test(a)||/flds=[^&]+label/.test(a))b="rl";return b},mB:function(){this.h.gy||f.Zd.te.end({key:this.E3(), index:0,id:this.h.J.id})},FA:function(a,b,c){function d(a,c){var d=a.split("|");d[0]=c+d[0];var e=d,g="";d[d.length-1]&&(g=d[d.length-1],e=d.splice(0,d.length-1));l.sr(e,b,!0);return g}var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,g=new XMLHttpRequest;g.jp=[(new Date).getTime(),e?1:0].join("-");e||(this.yf[g.jp]=1);var h=this.Tm(b,c,a),k=0,l=this;g.pn="";g.onreadystatechange=function(){if(l.q&&!(2>g.readyState)){var c=4===g.readyState&&0===g.status;(b!==l.Ta&&!a[0].tg||a[0].tg&& (b>l.Ta||2<l.Ta-b)||c)&&!g.Kp?(g.Kp=!0,l.lk(a,b),g.onreadystatechange="",c||g.abort(),e?l.Fw(g):delete l.yf[g.jp]):g.Kp||(3===g.readyState?(c=g.responseText.substring(k),g.pn=d(c,g.pn),k=g.responseText.length):4===g.readyState&&(l.mB(),delete l.yf[g.jp],c=g.responseText.substring(k),l.ai&&(c+="|"),d(c,g.pn),g.pn="",l.h.J.wa||f.Zd.te.push({id:l.h.J.id,key:"ds",Dn:g.responseText.length/2}),e&&l.Fw(g)))}};g.onerror=function(){};this.lK||(this.lK=1);g.open("GET",h,!0);g.send();e&&this.zf.push(g)},pZ:function(a, b){var c=this.em||this.Kf,d=a.ma.x,e=a.ma.y;return d>Math.floor(c.Td/b)||d<Math.floor(c.pe/b)||e>Math.floor(c.wd/b)||e<Math.floor(c.xd/b)?!1:!0},lM:function(a,b,c,d){if(18<a){b=b.ma;for(var e=0;e<c;e+=1)for(var g=0;g<c;g+=1){var h=new f.hk(a,c*b.x+e,c*b.y+g)+"";(h=this.xa.get(h))&&d(h)}}else d(b),b.Fc&&d(b.Fc)}};f.Q.canvas.Lh=f.Q.ri.extend({ga:[f.ps],B:function(a,b){arguments.callee.oa.apply(this,arguments);this.xc=f.a.Lb(this);this.mm=300;this.Ce=a.Ce;this.ai=this.bi=!0;this.X("mapStyle",a.h);this.X("style",a.h);this.Oj=!0;this.ht=1;var c=this;this.fQ=function(){c.fea=!0;c.set("display",0)};this.Df();this.OK(a)},OK:function(a){a=f.l.Z||a.ja?"big":"small";var b=f.A.Qb+offlineMap.domain+"style_icon/icon-biz-"+a+".png";f.Ch.Ok(f.A.Qb+offlineMap.domain+"style_icon/icon-normal-"+a+".png",!0);f.Ch.Ok(b,!0)},Pv:function(a){f.Ch.E$(a, this);var b=f.Q.canvas.Lh.qc.Pv;b&&b.apply(this,arguments)},Df:function(){this.pk=document.createElement("canvas");this.pk.className="amap-labels";this.pk.draggable=!1;this.pk.gW=!0;this.nj=this.pk.getContext("2d",{alpha:!0});this.Rx=[];this.fy=[];this.Io=this.q.ja?16:8},Br:function(a){var b=Math.pow(2,a.W.zoom-this.ce),c=this.q.ja?this.q.jb:1,d=a.W.eb.Va(this.Ro).vc(this.Ze);this.transform={translate:this.transform.translate.add(d.Sc(c)),scale:b/c,rotate:0};this.eb=a.W.eb},Cu:function(a,b){if(!this.ra|| 3E4<Math.abs(this.eb.x-this.ra.x)/this.S||3E4<Math.abs(this.eb.y-this.ra.y)/this.S)this.ra=this.eb;this.qe=this.ce;this.ii=this.Ze;this.hi=!1;this.currentTime=+new Date;this.dN=b.dN;this.Cd=[this.Aa.Nb.x,this.Aa.Nb.y];this.ij=b.TB;var c=this.bj;this.Pe=this.zoom<<0!==this.zoom;var d=this.eb.Va(this.ra);d.x<-f.a.fb/2&&(d.x+=f.a.fb);d.x>f.a.fb/2&&(d.x-=f.a.fb);this.GI=d.vc(this.Ze);for(d=c.length-1;0<=d;d-=1){var e=c[d];if(e.length){var g=e[0].ma.z,h=!1;!e.ng||f.Ba.be||!(g<=this.zoom&&"in"===this.pu|| g>=this.zoom&&"out"===this.pu)&&this.pu||this.labels&&this.labels.length&&!a.Qj&&this.FD(this.labels.Qu,this.Kf)||(h=!0,this.labels&&this.labels.Nk?(this.So=this.labels.Nk,this.So.zoom=this.labels.zoom):(this.So=[],this.So.zoom=null),this.labels=[],this.labels.zoom=g,this.labels.Qu=this.Kf);if(h){for(g=e.length-1;0<=g;g-=1){var k=e[g],h=!1,l=k.ta;!l&&k.Fc&&k.Fc.ta&&(l=k.Fc.ta,h=!0);if(l){for(var k=0,m=l.length;k<m;k+=1)l[k].reverse=h;Array.prototype.push.apply(this.labels,l)}}this.labels.sort(function(a, b){return a.Wk>b.Wk?-1:a.ke>=b.ke?-1:1})}}}if(this.t$(a)){this.ld();if(!this.h.J.wa)return;this.WL(a);this.Rm=this.labels}this.fea=!1;this.Ne(a)},ld:function(){if(this.ng&&!this.q.wa){var a=this.q;f.Zd.te.end({id:this.h.J.id,key:"rl",index:2});a.wa=!0;a.$c?a.ha("renderComplete"):(a.$c=!0,a.ha("complete"))}},fc:function(a,b){this.Wo=a.Wo;this.ek=a.ek;this.Xl(a,b);this.Pe||this.Ii();this.Ro&&(a.uZ||a.IM&&f.l.yj||a.Hf&&!a.Pe&&a.Z9)?this.Br(a,b):this.Cu(a,b);this.Ro=this.eb;this.hi&&this.set("display", 0)},Ne:function(a){var b=this.eb.Va(this.ra);b.x<-f.a.fb/2&&(b.x+=f.a.fb);b.x>f.a.fb/2&&(b.x-=f.a.fb);this.transform={translate:new f.G(a.W.Aa.Ub.x*(this.q.ja?this.q.jb:1),a.W.Aa.Ub.y*(this.q.ja?this.q.jb:1)),scale:1/(this.q.ja?this.q.jb:1),rotate:0}},FD:function(a,b){return a.xd===b.xd&&a.pe===b.pe&&a.wd===b.wd&&a.Td===b.Td},Pt:function(a,b){var c;if(this.zoom){var d=a.vc(Math.pow(2,20-this.zoom));this.labels&&(c=this.Pba(d,b))&&(c.BK=!1);!c&&this.Gb&&(c=this.Oba(d))&&(c.BK=!0)}return c?[c]:[]}, Pba:function(a,b){for(var c=a.x,d=a.y,e=this.labels.Nk||this.labels,g=e.length-1;0<=g;g-=1){var h=e[g],k=h.Na[0]/this.S,l=h.Na[1]/this.S;if((h.Vk||!b)&&this.aW(h,c,d,k,l))return h}},Oba:function(a){var b=a.x;a=a.y;for(var c=this.Gb.length-1;0<=c;c-=1){var d=this.Gb[c],e=d.Na[0]/this.S,g=d.Na[1]/this.S;if(d.Vk&&this.aW(d,b,a,e,g))return d}},aW:function(a,b,c,d,e){for(var g=0;g<a.vb.length;g+=1){var h=a.vb[g][2],k=a.vb[g][3],l=a.vb[g][0],m=a.vb[g][1];this.q.ja&&(h/=this.q.jb,k/=this.q.jb,l/=this.q.jb, m/=this.q.jb);if(b>=d+l-1&&b<=d+l+h+1&&c>=e+m-1&&c<=e+m+k+1)return!0}return!1},reloadChanged:function(){this.q&&(this.q.wa=!1);this.xa.clear();this.labels=[];this.Rx=[];this.fy=[];this.xb&&this.xb.parentNode&&this.xb.parentNode.removeChild(this.xb);this.pk&&this.pk.parentNode&&this.pk.parentNode.removeChild(this.pk);this.set("display")},$h:function(){return this.pk},AJ:function(a,b){if("roadlabel"===a||"poilabel"===a)for(var c=0;c<b.length;c+=1){var d=b[c];if(d.Tb){var e="",g="",h="";d.Ud&&(h=d.Ud[0], e=h[3],g=h[4],h=d.Oi?"":h[7]);if(e=this.T.Nt&&this.T.Nt(e,g,h,d.Tb,d.Fq))d.visible=e[4],d.Wj=e[3];if(d.Ud)for(g=0;g<d.Ud.length;g+=1)h=d.Ud[g],h[3]=e[0],h[4]=e[1],d.dn&&(h[7]=e[2])}}}});f.dF={Tm:function(a,b,c){return this.q.ir+b.join(";")+"&lv="+a+"&preload="+(c&&c[0]&&c[0].tg?1:0)},sr:function(a,b){if(this.q){for(var c=[],d=[],e=0,g=a.length;e<g;e+=1){var h=a[e];h&&(h=JSON.parse(h),h["x-vd-v"]?(this.Ed=h["x-vd-v"],this.Vd=[h.tv||"",h.vdv].join("-"),this.lf=h.tv,this.h.qd="#"+h.bgc.substring(2)):(this.mu(h,b,c,this.Ed||"v4"),d.push(h)))}d.length&&(f.l.ef||f.l.Si&&!this.h.J.wa)&&18>=b&&f.im.set({Rd:!0,data:d,url:this.Tm(b,[]),w:this.q,vdataVersion:this.Vd,"x-vd-v":this.Ed,tv:this.lf, bgc:this.h.qd,od:this.h.J.get("showBuildingBlock")});this.set("display")}},wu:function(a,b){var c=0,d=0,e=1,c=256*b.x,d=256*b.y,e=b.S;return[(c+a[0])*e,(d+a[1])*e]},mu:function(a,b,c,d,e){function g(c,g,l){c=[l,c,g].join("/");if(c=p.xa.get(c)){g=c.ma;var m=f.A.Qb+offlineMap.domain+"icons/"+(h||k?"b":"n")+(10>g.z?"39":"18")+"/1/";if(c&&"loaded"!==c.status)if(p.pZ(c,s)||c.tg){if(-1!==r.indexOf(q))if("limg"===q)a[1]&&(c.Rd={url:"data:image/png;base64,"+a[1],Cn:"limg-"+c.key+"-"+p.q.xc},f.Ch.Ok(c.Rd, !0));else{if("roadlabel"===q)for(var n=1;n<a.length;n+=1){var v=a[n];v.Ou=v[0];var I=f.a.Ur(v[1],d);if(!(0>I[0]||256<=I[0]||0>I[1]||256<=I[1])){var C=p.wu(I,g),I={Na:C,name:v[0],Oi:!0,Ad:I,Ba:[],vb:[],visible:!0,Wj:!0},H=I.name;I.Er=15>v[2]%90||75<v[2]%90?90*Math.floor((v[2]+15)/90):v[2];C=v[3];0<=v[8]&&(I.hB={name:v[6],kZ:v[7],dir:v[8]});var F=C[2];l=C[3];var B=-Math.floor(l/2);if(v[4])if("v5"<=d){var D=v[5].split(":"),E=D[1],E=parseInt(E)-1,D=f.A.Qb+offlineMap.domain+"style_icon/icon-normal-"+(h|| k?"big":"small")+".png";I.Ba.push(D);var D=Math.floor(E/10),G=E%10,K=0,J=0,O=0;k?(K=48,O=J=40):h?(K=J=40,O=36):(K=J=24,O=20);var M=K*Math.max(F+2,O)/O,D=[-M/2,-K/2,M,K,J*G,J*D,J,J];I.ke=7;I.vb.push(D)}else{B=!1;E=parseInt(v[5]);153===E&&(0===H.indexOf("G")?(E="153g",B=!0):0===H.indexOf("S")&&(E="153s",B=!0));if(151===E||150===E)B=!1,0===H.indexOf("G")&&(E=150,B=!0),0===H.indexOf("S")&&(E=151,B=!0);152===E&&(E=151);!0===B&&(m=f.A.Qb+offlineMap.domain+"theme/v1.3/icons/"+(h||k?"b/":"n/"));D=m+E+".png"; f.Ch.Ok(D);I.Ba.push(D);M=v[4][0]*u;v=v[4][1]*u;D=[-M/2,-v/2,M,v];I.vb.push(D);F=Math.min(M-3,F);l=Math.min(v,l);B=-Math.floor(l/2)+(k?3:1)}I.Ba.push(c.Rd);I.ke=11;I.vb.push([-Math.floor(F/2),B,F,l,C[0],C[1],C[2],C[3]]);c.ta||(c.ta=[]);c.ta.push(I)}}else if("poilabel"===q){H=[];for(n=1;n<a.length;n+=1)if(v=a[n],v.Ou=v[0],I=f.a.Ur(v[1],d),!(0>I[0]||256<=I[0]||0>I[1]||256<=I[1])){C=p.wu(I,g);I={Na:C,name:v[0].replace("^",""),dn:!0,Ad:I,Ba:[],vb:[],visible:!0,Wj:!0};E=0;I.Wk=v[8];v[6]&&("v5"<=d?(D=v[6].split(":"), E=D[1],B=Math.floor((parseInt(D[0].split("_")[1])-28)/2)):E=v[6]);if(E&&v[3]){if("v5"<=d){D=f.A.Qb+offlineMap.domain+"style_icon/icon-"+(1===B?"biz-":"normal-")+(h||k?"big":"small")+".png";I.Ba.push(D);E=parseInt(E)-1;D=Math.floor(E/10);G=E%10;k?(K=48,J=40,O=28):h?(K=J=40,O=28):(K=J=24,O=20);M=K;if(151===E||152===E||153===E)O-=4,F=v[7][0][2],M=K*Math.max(F+2,O)/O;D=[-M/2,-K/2,M,K,J*G,J*D,J,J]}else D=m+E+".png",f.Ch.Ok(D),I.Ba.push(D),D=[-Math.round(v[3][0]/2),-Math.round(v[3][1]/2),v[3][0],v[3][1]], k&&!e&&(D[0]*=u,D[1]*=u,D[2]*=u,D[3]*=u);I.vb.push(D)}if(v[2]&&v[7])for(F=v[2],D=0;D<v[2].length;D+=1){I.Ba.push(c.Rd);C=v[7][D];k&&!e&&(F[D][0]=Math.round(F[D][0]*u),F[D][1]=Math.round(F[D][1]*u),F[D][2]=Math.round(F[D][2]*u),F[D][3]=Math.round(F[D][3]*u));M=F[D][0];G=F[D][1]-(k?4:2);K=C[3];J=C[2];M<-J&&E&&v[3]&&(M=-J+I.vb[0][0]);if("v5">d){if("375"===E||"3751"===E)J=Math.min(F[D][2],k?24:14),M=-Math.floor(J/2),G=-Math.floor(K/2)}else M-=2;I.ke=K-4;4===l&&"\\u5317\\u4eac"===I.name&&(G=k?-50:-26);I.vb.push([M, G,J,C[3],C[0],C[1],C[2],C[3]])}I.Hl=v[5];I.Hl&&H.push(I.Hl);I.Vk=v[4];I.Tl=v[9];I.XK=v[10];I.Xe=E;I.br=B;c.ta||(c.ta=[]);c.ta.push(I)}c.wf||(c.wf={},c.wf.xe=H)}q===r[r.length-1]&&(c.status="loaded",c.wa=c.qa=!0,c.Fc&&(c.Fc.wa=c.Fc.qa=!0))}}else p.lM(b,c,s,f.a.bind(p.mL,p))}}var h=f.l.Z,k=this.q.ja,l=a[0].split("-");1===l.length&&(l=a[0].split("_"));c=parseInt(l[1]);var m=parseInt(l[2]),n=parseInt(l[0]),p=this,q=l[3],r=this.q.ta,s=18<b?Math.pow(2,b-18):1,l=Math.ceil(p.Kf.NC),u=this.q.ja?this.q.jb: 1,v=Math.pow(2,n);10>n&&(c<=l&&g(c+v,m,n),c>=v-l&&g(c-v,m,n));g(c,m,n)}};f.Q.canvas.cF=f.Q.canvas.Lh.extend({ga:[f.dF]});f.Q.canvas.Lh.ob({WL:function(a){this.ht++;var b=this.pk,c=this.nj;this.Tt={};var d=this.q.ja?this.q.jb:1,e;0!==a.W.rotation?(e=2*Math.floor(a.W.Aa.Ub.x)*d,d*=2*Math.floor(a.W.Aa.Ub.y)):(e=a.size.width*d,d*=a.size.height);f.j.am(b,e,d,!0);f.l.A$&&b.parentNode&&b.parentNode.appendChild(b);c.textBaseline="bottom";this.HV=0;a.Gb&&(this.GX(a.Gb,1,a.Gb),0===a.Gb.length&&this.labels&&this.labels.Nk&&this.labels.zoom===this.zoom&&this.labels.Nk.length!==this.labels.length&&(this.labels.Nk=null));this.labels&& this.GX(this.labels,0,a.Gb);!f.l.Z&&this.So&&this.So.length&&this.Nba(a);this.Rx=this.Rx&&this.ZX(c,this.Rx,480);this.fy=this.fy&&this.ZX(c,this.fy,200);a.Gb&&this.bY(a.Gb,c,f.hh.bV(this.h.J),this.ec,e,d);this.labels&&this.bY(this.labels,c,f.hh.bV(this.h.J),this.ec,e,d);this.So=[];this.labels&&(this.labels.Du=this.zoom,this.labels.Au=this.eb,this.labels.Ky=this.rotation,this.labels.dY=this.q.ja,this.labels.size=a.size);a.Gb&&(this.Gb=a.Gb);this.Gb&&(this.Gb.Du=this.zoom,this.Gb.Au=this.eb,this.Gb.Ky= this.rotation,this.Gb.size=a.size);this.r("afterLabelRender")},$X:function(a,b,c){var d=void 0===b.Wj?!0:b.Wj,e=1,g=void 0===b.visible?!0:b.visible,h=null;if(b.Tb&&this.h.cc){var k=h="",l="";b.Ud&&this.gJ&&(l=b.Ud[0],h=l[3],k=l[4],l=b.Oi?"":l[7]);if(h=this.T.Nt&&this.T.Nt(h,k,l,b.Tb,b.Fq))g=h[4],d=h[3],e=h[5]}if(g){if(this.nj.globalAlpha!==c||e)this.nj.globalAlpha=c||e;g=0;for(k=b.Ba.length;g<k;g+=1)(d||"CANVAS"===b.Ba[g].tagName)&&this.Maa(a,b.Ba[g],b.vb[g],b.Er,c||e);this.nj.globalAlpha!==c&&(this.nj.globalAlpha= c);b.Ud&&this.gJ&&this.gJ(a,b,h)}},Maa:function(a,b,c,d){var e=this.nj;b=this.Vm(b);if(!b)return 1;var g=c[2],h=c[3],k=c[0],l=c[1];d=(d||0)%360*-Math.PI/180;if(0!==d){var m=Math.cos(d),n=Math.sin(d),p=a[0],q=a[1];e.transform(m,n,-n,m,(1-m)*p+n*q,(1-m)*q-n*p)}k=a[0]+k;a=a[1]+l;4===c.length?b.loaded&&e.drawImage(b,k,a,g,h):e.drawImage(b,c[4],c[5],c[6],c[7],k,a,g,h);0!==d&&e.setTransform(1,0,0,1,0,0)},Vm:function(a){if(!a)return null;if("IMG"===a.tagName||"CANVAS"===a.tagName||(a=f.Ch.SU(a))&&a.loaded)return a}, IC:function(a){var b=a.Na,c=b[0];a.reverse&&(c>f.a.fb/2?c-=f.a.fb:c<-f.a.fb/2&&(c+=f.a.fb));return this.vo(c,b[1])},vo:function(a,b){var c=this.q.ja?this.q.jb:1,d=this.S,e=0,g=0,e=(a-this.Cd[0])/d,g=(b-this.Cd[1])/d;return[Math.round(e*c),Math.round(g*c)]},Uba:function(a){var b=a.Na,c=b[0];a.reverse&&(c>f.a.fb/2?c-=f.a.fb:c<f.a.fb/2&&(c+=f.a.fb));return[c/this.S,b[1]/this.S]},lda:function(a,b){var c=a.Na;return c[0]>b.nd.x||c[1]>b.nd.y||c[0]<b.Nb.x||c[1]<b.Nb.y?!1:!0},Nba:function(a){var b=this.So; if(this.So.zoom!==this.labels.zoom)for(var c=0,d=b.length;c<d;c+=1){var e=b[c];e.dn&&this.lda(e,a.W.Aa)&&(this.fy.push(e),e.zoom=b.zoom,e.oK=new Date)}},GX:function(a,b,c){var d=!(!c||!c.length),e=a.zoom-this.zoom,g=a.Nk||a;if(0<e||d){a.Nk=[];for(var h=0,k=g.length;h<k;h+=1){var l=g[h],m=this.Uba(l);l.dn||b?l.Hl&&d&&c.VW&&-1!==f.a.indexOf(c.VW,l.Hl)||(5>e&&this.Gca(m,l,0<e,b,d)?a.Nk.push(l):f.l.Z||0===e&&!b||(this.Rx.push(l),l.zoom=this.labels?this.labels.zoom:this.ce,l.oK=new Date)):l.Oi&&a.Nk.push(l)}}else a.Nk= a;return!1},ZX:function(a,b,c,d,e){a=new Date;for(var g=[],h=0,k=b.length;h<k;h+=1){var l=b[h],m=Math.max(0,Math.abs(l.zoom-this.zoom)),m=Math.max(0,1-(a-l.oK)/(1/Math.pow(1.3,m)*c));if(0<m){g.push(l);var n=this.IC(l);-20>n[0]||n[0]>d+20||-20>n[1]||n[1]>e+20||this.$X(n,l,m)}else l.oK=void 0}g.length&&(this.HV=this.hi=1);return g},bY:function(a,b,c,d,e,g){d=a.zoom!==this.zoom;18===a.zoom&&18<this.zoom&&(d=!1);b.globalAlpha=1;a=a.Nk;b=0;for(var h=a.length;b<h;b+=1){var k=a[b];if(!(d&&k.Oi||k.nm&&c&& 0<=c.indexOf(k.nm))){var l=this.IC(k);-20>l[0]||l[0]>e+20||-20>l[1]||l[1]>g+20||this.$X(l,k)}}},t$:function(a){this.Rm&&this.Rm.dY!==this.q.ja&&this.q.set("reload");if(this.HV)return!0;if(a.Gb&&a.Gb.length)if(this.Gb&&this.Gb.length){if(this.Gb!==a.Gb||this.Gb.Du!==this.zoom||this.Gb.Au!==this.eb||this.Gb.Ky!==this.rotation||!this.Gb.size.rb(a.size))return!0}else return!0;else if(this.Gb&&this.Gb.length)return!0;return!this.labels||!this.h.JU&&this.labels===this.Rm&&this.Rm&&this.Rm.Du===this.zoom&& this.Rm.Au===this.eb&&!a.Qj&&this.Rm.Ky===this.rotation&&this.Rm.dY===this.q.ja&&this.Rm.size.rb(a.size)?!1:!0},Gca:function(a,b,c,d,e){if(!e&&!c&&!d)return!0;var g;e=b.Ba.length;if(b.Tl>this.zoom)g=!0;else if(!c&&d)g=!1;else for(var h=0;h<e;h+=1){var k=b.vb[h],l=k[2],m=k[3],n=k[0],k=k[1],n=a[0]+n,k=a[1]+k;this.Hca(n,k,l,m)||(g=!0)}if(!g&&(c||d))for(h=0;h<e;h+=1)for(k=b.vb[h],l=k[2],m=k[3],n=k[0],k=k[1],n=a[0]+n,k=a[1]+k,l=Math.ceil((n+l)/this.Io),c=Math.ceil((k+m)/this.Io),n=Math.floor(n/this.Io), k=Math.floor(k/this.Io),d=0,m=l-n;d<=m;d+=1)for(var l=0,p=c-k;l<=p;l+=1)this.Tt[n+d]||(this.Tt[n+d]={}),this.Tt[n+d][k+l]=1;return!g},Hca:function(a,b,c,d){var e=Math.ceil((a+c)/this.Io);d=Math.ceil((b+d)/this.Io);a=Math.floor(a/this.Io);b=Math.floor(b/this.Io);c=0;for(e-=a;c<=e;c+=1)if(this.Tt[a+c])for(var g=0,h=d-b;g<=h;g+=1){if(1===this.Tt[a+c][b+g])return!1}else this.Tt[a+c]={};return!0}});f.Q.canvas.Lh.t_=f.ba.extend({B:function(a){this.Q=a},K8:function(a){this.Wo=a;return this.KH([0,0,0])?!0:this.Wo=!1},xQ:function(){return this.Q.Pe?!1:!0},X3:function(a){if(a){var b=Array.prototype.slice.call(arguments,0);switch(a.type){case "icon":return this.a4.apply(this,b);case "label":return this.b4.apply(this,b);default:console.error("Unknown type",a)}}},LP:function(a,b,c){a=null;try{a=b.getImageData.apply(b,c)}catch(d){console.error(d),a=null}return a},e9:function(a){return 0>a?0:255<a?255: Math.round(a)},XS:function(a,b){for(var c=0;4>c;c++)a[b+c]=this.e9(a[b+c]);return a},JH:function(a,b){var c=259*(b+255)/(255*(259-b));return[c*(a[0]-128)+128,c*(a[1]-128)+128,c*(a[2]-128)+128]},C8:function(a){return[255-a[0],255-a[1],255-a[2]]},KH:function(a,b){isNaN(b)&&(b=20);var c=Math.max(0,0.299*a[0]+0.587*a[1]+0.114*a[2]-b);switch(this.Wo){case "amap://styles/normal":case "normal":return[1*c,1.2*c,255];case "amap://styles/light":case "light":return[1*c,1*c,255];case "amap://styles/fresh":case "fresh":return[1* c,1*c,220];case "amap://styles/grey":case "amap://styles/dark":case "insight":case "dark":return[1.5*a[0],1.5*a[1],1*a[2]];case "amap://styles/blue":case "amap://styles/darkblue":case "blue_night":case "mapv":return[2*a[0],1.5*a[1],1*a[2]]}return!1},c4:function(a,b){var c=20,d=10;switch(b.Fl){case "active":c+=20,d+=20}return this.JH(this.KH(a,c),d)},dQ:function(a,b){var c=-110;switch(b.Fl){case "active":c+=30}return this.JH(this.KH(this.C8(a),c),50)},Z3:function(a){return this.JH(a,20)},cQ:function(a, b,c,d,e,g){var h=a[b],k=a[b+1],l=a[b+2];a=a[b+3];0<a?(e=e.call(this,[h,k,l,a],g),c[d]=e[0],c[d+1]=e[1],c[d+2]=e[2]):(c[d]=h,c[d+1]=k,c[d+2]=l);c[d+3]=a;this.XS(c,d)},q3:function(a){var b=a.data,c=a.width;a=a.height;for(var d=0,e=0,g=[Infinity,Infinity],h=[-Infinity,-Infinity],k=0;k<c;k++)for(var l=0;l<a;l++){var m=4*this.lG(k,l,c,a);if(!(76.5>b[m+3])){e++;k<g[0]&&(g[0]=k);l<g[1]&&(g[1]=l);k>h[0]&&(h[0]=k);l>h[1]&&(h[1]=l);for(var n=!0,p=0;4>p;p++)if(220>b[m+p]){n=!1;break}n&&d++}}return{Mia:0<e?d/ e:0,R$:[g[0],g[1],h[0]-g[0]+1,h[1]-g[1]+1]}},lG:function(a,b,c){return b*c+a},tB:function(a,b,c,d,e,g,h){var k=this.lG(b,c,d,e);d=a[4*k+0];e=a[4*k+1];var l=a[4*k+2];a=a[4*k+3];if(a/255<h.PW||h.hZ&&!h.hZ.call(this,d,e,l,a))return!1;g.push([b,c]);return!0},I7:function(a,b){var c=Math.abs(a[0]-b[0]),d=Math.abs(a[1]-b[1]);return Math.sqrt(c*c+d*d)},$s:function(a,b){return 0.1>Math.abs(a[0]-b[0])&&0.1>Math.abs(a[1]-b[1])},U8:function(a,b){for(var c=[a[0]],d=1,e=a.length;d<e;d++){var g=a[d];this.I7(g,c[c.length- 1])<=b&&c.push(g)}return this.$s(c[c.length-1],a[a.length-1])?c:null},eka:function(){},O1:function(a,b,c,d){d=f.extend({PW:0.2,LW:4},d);var e,g,h=[],k=[],l=[],m=[];for(e=0;e<c;e++){for(g=0;g<b&&!this.tB(a,g,e,b,c,h,d);g++);for(g=b-1;0<=g&&!this.tB(a,g,e,b,c,k,d);g--);}if(!h.length||!k.length)return null;for(g=0;g<b;g++){var n;e=h[0][0];n=k[0][0];if(g>=e&&g<=n)for(e=0;e<c&&!this.tB(a,g,e,b,c,l,d);e++);e=h[h.length-1][0];n=k[k.length-1][0];if(g>=e&&g<=n)for(e=c-1;0<=e&&!this.tB(a,g,e,b,c,m,d);e--); }if(!l.length||!m.length)return null;m.reverse();h.reverse();if(this.$s(l[l.length-1],k[0])&&this.$s(k[k.length-1],m[0])&&this.$s(m[m.length-1],h[0])&&this.$s(h[h.length-1],l[0])){b=[m,h,l,k];e=0;for(a=b.length;e<a;e++)if(!(2>b[e].length||(b[e]=this.U8(b[e],d.LW),b[e])))return null;return[].concat(b[0]).concat(b[1].slice(1)).concat(b[2].slice(1)).concat(b[3].slice(1))}return null},Z2:function(a){for(var b=[Infinity,Infinity],c=[-Infinity,-Infinity],d=0,e=a.length;d<e;d++){var g=a[d][0],h=a[d][1]; b[0]>g&&(b[0]=g);b[1]>h&&(b[1]=h);c[0]<g&&(c[0]=g);c[1]<h&&(c[1]=h)}return b.concat([c[0]-b[0]+1,c[1]-b[1]+1])},TP:function(a,b){this.OS||(this.OS=document.createElement("canvas"));var c=this.OS;c.width=a;c.height=b;return c},w3:function(a){switch(a.length){case 2:return"lineTo";case 4:return"quadraticCurveTo"}return null},pP:function(a){switch(a.length){case 2:return[a[0]+0.5,a[1]+0.5];case 4:return[a[0]+0.5,a[1]+0.5,a[2]+0.5,a[3]+0.5]}return a},BO:function(a,b){a.beginPath();for(var c=0,d=b.length;c< d;c++){var e=b[c];0===c?(2<e.length&&(4===e.length?e=e.slice(-2):console.error("Unknown start point: ",b)),a.moveTo.apply(a,this.pP(e))):a[this.w3(e)].apply(a,this.pP(e))}},e3:function(a){a=this.dQ([255,255,255],{Fl:a.Fl});this.XS(a,0);return"rgba("+a.slice(0,3).join(",")+", 0.8)"},Y3:function(a,b,c){function d(a){return[Math.round((a[0]-n)*q+n-m[0]),Math.round((a[1]-p)*r+p-m[1])]}c=f.extend({Fl:"hover",pT:!0,padding:[1.5,1.5]},c);var e=a.width,g=a.height,h=this.TP(2*e+10,g),k=h.getContext("2d"), l=this.Z2(b),m=c.padding;f.l.cd&&(m[0]+=2.5,m[1]+=2.5);for(var n=l[0],p=l[1],q=(l[2]+2*m[0])/l[2],r=(l[3]+2*m[1])/l[3],l=0,s=b.length;l<s;l++)switch(b[l].length){case 2:b[l]=d(b[l]);break;case 4:b[l]=d(b[l]).concat(d(b[l].slice(2)));break;default:console.error("Unknown point: ",b[l])}k.save();this.BO(k,b);k.closePath();k.fillStyle=c.fillStyle||"rgba(255,255,255,0.85)";k.fill();k.putImageData(a,e+6,0);k.drawImage(h,e+6,0,e,g,0,0,e,g);a=c.pT&&10<b.length;var u=c.strokeStyle||this.e3(c);k.strokeStyle= a?"#fff":u;k.lineCap="butt";k.lineJoin="round";k.lineWidth=f.l.cd?2:1.2;k.stroke();k.restore();return{qa:h,Cf:[0,0,e,g],ld:a?function(a,c){this.V8(a,c,b,u)}:null}},V8:function(a,b,c,d){this.S1();var e=this.Q.ht;this.tO(a,c,{duration:200,DL:0,startTime:Date.now(),Jga:function(a){a.strokeStyle=d;a.lineCap="butt";a.lineJoin="round";a.lineWidth=f.l.cd?2:1;a.translate(b[0],b[1])},Nia:function(){return this.Q.ht!==e}})},S1:function(){this.rF&&f.a.Sg(this.rF)},tO:function(a,b,c,d){this.xQ()?this.rF=f.a.nc(function(){this.rF= null;if(c.Nia.call(this))d&&d.call(this);else{var e=(Date.now()-c.startTime)/c.duration;1<e&&(e=1);var g=Math.round(b.length*e);if(c.DL<g){var h=1===e?b:b.slice(c.DL,g+1);h.length&&(a.save(),c.Jga.call(this,a,e),this.BO(a,h),a.stroke(),a.restore());c.DL=g}1>e?this.tO(a,b,c,d):d&&d.call(this)}},this):d&&d.call(this)},a2:function(a,b,c){a=a.createImageData(b.width,b.height);var d=a.data,e=a.width,g=a.height,h=c[0]+c[2],k=c[1],l=c[1]+c[3];for(c=c[0];c<h;c++)for(var m=k;m<l;m++)for(var n=4*this.lG(c, m,e,g),p=0;4>p;p++)d[n+p]=b.data[n+p];return a},O4:function(a,b,c){var d=a[1]+(b[1]-a[1])*c;return[Math.round(a[0]+(b[0]-a[0])*c),Math.round(d)]},v4:function(a,b,c){for(var d=1/c,e=[],g=1;g<c;g++){var h=this.O4(a,b,d*g);e.length&&this.$s(h,e[e.length-1])||e.push(h)}return e},w4:function(a,b){for(var c=1,d=a.length;c<d;c++){var e=a[c-1],g=a[c];2===g.length&&(4===e.length&&(e=e.slice(2)),2===e.length&&(e=this.v4(e,g,b),a.splice.apply(a,[c,0].concat(e)),c+=e.length,d+=e.length))}},z3:function(a,b,c, d,e){e=Math.round(Math.min(c,d)*e);c--;d--;e?a=[[a+c,b+d-e],[a+c,b+d,a+c-e,b+d],[a+e,b+d],[a,b+d,a,b+d-e],[a,b+e],[a,b,a+e,b],[a+c-e,b],[a+c,b,a+c,b+e],[a+c,b+d-e]]:(e=[a+c,b+d],a=[e,[a,b+d],[a,b],[a+c,b],e]);this.w4(a,5);return a},a4:function(a,b,c,d,e,g){b=a.Cf;var h=c?c.tK:this.LP(d,e,b);if(h){var k=c?c.KV:null,l=h,m=a.padding,n=m?m[0]:0,p=m?m[1]:0;(m=0<n*p)&&(l=this.a2(e,l,[n,p,l.width-2*n,l.height-2*p]));d=l.data;b=l.width;var q=l.height;if(b&&q){c=(c=this.Q.h)&&c.J?c.J.get("hotspotOptions"): {};c=f.extend({borderAnimation:!0},c);l=this.q3(l);a=!a.eda&&0.46<=l.Mia;var r=e.createImageData(b,q);e=r.data;for(var s=a?this.dQ:this.Z3,u=0,v=d.length;u<v;u+=4)this.cQ(d,u,e,u,s,{Fl:g});if(m&&(e=a&&!f.l.cd?this.O1(d,b,q,{hZ:a?function(a,b,c){return!(220<a&&220<b&&220<c)}:null,PW:0.2,LW:4}):null,e||(e=l.R$,e=this.z3(e[0],e[1],e[2],e[3],0.2)),e)){var x=this.Y3(r,e,{Fl:g,fillStyle:"active"!==g?null:"#ddd",pD:h,pT:c.borderAnimation&&"hover"===g&&!k,padding:a?[1.5,1.5]:[2.5,2.5]}),r=null;return{pD:h, Bu:function(a,b){k&&h&&a.putImageData(h,b[0],b[1]);a.drawImage(x.qa,x.Cf[0],x.Cf[1],x.Cf[2],x.Cf[3],b[0],b[1],b[2],b[3]);x.ld&&(x.ld.call(this,a,b),x.ld=null)}}}return{pD:h,Bu:function(a,b){if(m){var c=this.TP(r.width,r.height);c.getContext("2d").putImageData(r,0,0);a.clearRect(b[0]+n,b[1]+p,b[2]-2*n,b[3]-2*p);a.drawImage(c,0,0,c.width,c.height,b[0],b[1],b[2],b[3])}else a.putImageData(r,b[0],b[1]);r=null}}}}},b4:function(a,b,c,d,e,g){a=a.Cf;if(c=c?c.tK:this.LP(d,e,a))if(d=c.data,a=c.width,b=c.height, a&&b){var h=e.createImageData(a,b);e=h.data;a=0;for(b=d.length;a<b;a+=4)this.cQ(d,a,e,a,this.c4,{Fl:g});return{pD:c,Bu:function(a,b){a.putImageData(h,b[0],b[1]);h=null}}}},VP:function(a,b,c){var d=c[2],e=c[3],g=a[0]+c[0];a=a[1]+c[1];if(4===c.length||c.rQ){if((b=this.Q.Vm(b))&&b.loaded)return c=[4,4],f.l.cd&&(c[0]*=2,c[1]*=2),{type:"icon",eda:b.src&&b.src.indexOf&&0<=b.src.indexOf("/indoor_icon/"),padding:c,Cf:[g-c[0],a-c[1],d+2*c[0],e+2*c[1]]}}else return{type:"label",Cf:[g,a,d,e]}}}); f.Q.canvas.Lh.ob({JP:function(){this.sG||(this.sG=new f.Q.canvas.Lh.t_(this));return!1===this.sG.K8(this.Wo)?null:this.sG},Qp:function(a,b){var c=this.JP();if(c&&c.xQ()&&a&&a.Ba&&a.vb&&0===this.rotation){var d=this.ht,e=this.IC(a),g=[],h;a.Yn||(a.Yn=[]);var k=a.Yn;for(h=a.vb.length-1;0<=h;h--){if(k[h]){if(k[h].rev!==d)continue;if(k[h].KV===b)continue}var l=c.VP(e,a.Ba[h],a.vb[h]);if(l){var m=c.X3(l,a,k[h],this.pk,this.nj,b);m&&(k[h]={KV:b,rev:d,tK:m.pD},g.push({Bu:m.Bu,Cf:l.Cf,By:"icon"===l.type? 2:1}))}}g.sort(function(a,b){return a.By-b.By});h=0;for(d=g.length;h<d;h++)g[h].Bu.call(c,this.nj,g[h].Cf),g[h].Bu=null}},Kv:function(a){a.Yn&&(a.Yn.length=0,a.Yn=null)},vB:function(){var a=this.nj;a&&a.putImageData&&a.putImageData(a.getImageData(0,0,1,1),0,0)},AB:function(a){if(a&&a.Ba&&a.vb&&a.Yn){var b=this.nj,c=this.JP();if(c){for(var d=this.ht,e=this.IC(a),g=a.Yn,h=0,k=a.vb.length;h<k;h++){var l=g[h];if(l&&(g[h]=null,d===l.rev)){var m=c.VP(e,a.Ba[h],a.vb[h]);m&&m.Cf&&b.putImageData(l.tK,m.Cf[0], m.Cf[1])}}a.Yn=null;this.ht++}}}});f.hs={g:function(a,b,c,d,e){if(this.Od(a,b,c||this))return this;var g=this.ue=this.ue||{};g[a]=g[a]||[];e?g[a].unshift({ib:b,je:c||this,Rj:d}):g[a].push({ib:b,je:c||this,Rj:d});"complete"===a&&this.wa&&this.r(a);return this},Od:function(a,b,c){var d=this.ue;if(b&&c){if(d&&a in d&&d[a])for(var e=0;e<d[a].length;e+=1)if(d[a][e].ib===b&&d[a][e].je===c)return!0;return!1}return d&&a in d&&d[a]&&0<d[a].length},I:function(a,b,c){if(!this.Od(a))return this;var d=this.ue;if(d&&d[a])for(var e=0;e<d[a].length;e+= 1)if(!(d[a][e].ib!==b&&"mv"!==b||c&&d[a][e].je!==c)){d[a].splice(e,1);d[a].length||(d[a]=null);break}return this},oD:function(a,b){if(!this.Od(a))return this;var c=this.ue;if(c&&c[a])for(var d=0;d<c[a].length;d+=1)if(!b||c[a][d].je===b){c[a].splice(d,1);c[a].length||(c[a]=null);break}return this},r:function(a,b){function c(a){var b=Array.prototype.slice.call(arguments,1),c,d,e,g;d=0;for(e=b.length;d<e;d+=1)for(c in g=b[d]||{},g)Object.prototype.hasOwnProperty.call(g,c)&&(a[c]=g[c]);return a}if(!this.Od(a))return this; var d={type:a};b||"string"!==typeof b&&"number"!==typeof b&&"boolean"!==typeof b?("object"===typeof HTMLElement?b instanceof HTMLElement:b&&"object"===typeof b&&1===b.nodeType&&"string"===typeof b.nodeName)?d.value=b:d=c(d,b):d.value=b;for(var e=[].concat(this.ue[a]),g=0;g<e.length;g+=1)e[g].ib&&(e[g].ib.call(e[g].je||this,d),e[g]&&e[g].Rj&&this.ue[a]&&this.ue[a].splice(g,1));return this},Uh:function(a){a?this.ue&&this.ue[a]&&(this.ue[a]=null):this.ue=null;return this}};(function(){if(f.l.hr&&!f.qi){f.qi=f.HE();var a=f.a.SJ({wu:"posToCoord",Ov:"_decodeBoundsList"});f.qi.Mj(null,new Function("\\n    return {\\n      "+a.posToCoord+": "+f.dF.wu.toString()+",\\n      "+a._decodeBoundsList+": "+f.ps.Ov.toString()+"\\n  }"));f.qi.Mj(null,function(){return{sr:function(a,c){a.Oj?this.tea.call(this,a,c):this.uea.call(this,a,c)},uea:function(a,c){for(var d=a.rE,e=a.Pj,g=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.ZV&&(l=JSON.parse(l)),l["x-vd-v"]?(this.Ed=a.Id.Ed=l["x-vd-v"], this.Vd=a.Id.Vd=[l.tv||"",l.vdv].join("-"),this.lf=a.Id.lf=l.tv):this.sea(this.extend({},a,{tx:l,Rc:g})))}g.length?this.parseLabel(this.extend({},a.Id,{Rc:g}),function(d,g){var h=g.data,k=g.Aca;c(d,{xc:a.xc,Bd:a.Bd.filter(function(a){return"loaded"===a.status}),data:h,Aca:k,Pj:e,ye:{Ed:a.Id.Ed,Vd:a.Id.Vd,lf:a.Id.lf,lc:a.lc}},{qr:!e,Sm:e})}):c(null,{xc:a.xc,data:null,Pj:e},{qr:!e,Sm:e})},sea:function(a){function c(a,b,c){var n=[c,a,b].join("/");18<h&&!m&&(n+="/"+h);if((a=d.filter(function(a){return a.key=== n})[0])&&"loaded"!==a.status&&-1!==l.indexOf(v))if("limg"===v)b=g[1],a.Rd=b,"string"===typeof b.b&&(b.b=u.Ov(b.b)),c="",(c="object"===typeof b.u?b.u.url:b.u)&&(b.u={url:c,Cn:"limg-"+a.key+"-"+e});else{b={li:a.ma,$k:n,Ca:g,dd:v,zK:"building"===v,Wg:"poilabel"===v||"roadlabel"===v||"building"===v&&p};if("poilabel"===v||"roadlabel"===v)b.Rd=a.Rd;v===l[l.length-1]&&(a.status="loaded");k.push(b)}}var d=a.Bd,e=a.IK,g=a.tx,h=a.lc,k=a.Rc,l=a.ta,m=a.He,n=a.gK,p=a.od,q=g[0].split("-");a=parseInt(q[1]);var r= parseInt(q[2]),s=parseInt(q[0]),u=this,v=q[3],q=Math.pow(2,s);10>s&&(a<=n&&c(a+q,r,s),a>=q-n&&c(a-q,r,s));c(a,r,s)},tea:function(a,c){for(var d=a.rE,e=a.Pj,g=[],h=[],k=0,l=d.length;k<l;k+=1){var m=d[k];m&&(m=JSON.parse(m),m["x-vd-v"]?(this.Ed=a.Id.Ed=m["x-vd-v"],this.Vd=a.Id.Vd=[m.tv||"",m.vdv].join("-"),this.lf=a.Id.lf=m.tv):(this.rea(this.extend({},a,{tx:m,Rc:g,Ed:this.Ed||"v4"})),h.push(m)))}c(null,{xc:a.xc,maa:h,Bd:a.Bd.filter(function(a){return"loaded"===a.status}),Pj:e,ye:{Ed:a.Id.Ed,Vd:a.Id.Vd, lf:a.Id.lf,lc:a.lc}},{qr:!e,Sm:e})},rea:function(a){function c(a,b,c,e){var k=[e,b,c].join("/");if(a=a.filter(function(a){return a.key===k})[0])if(b=a.ma,c=q.Qb+offlineMap.domain+"icons/"+(r||g?"b":"n")+(10>b.z?"39":"18")+"/1/",a&&"loaded"!==a.status&&-1!==h.indexOf(t))if("limg"===t)n[1]&&(a.Rd={url:"data:image/png;base64,"+n[1],Cn:"limg-"+a.key+"-"+m});else{if("roadlabel"===t)for(var l=1;l<n.length;l+=1){var s=n[l];s.Ou=s[0];var u=d.Ur(s[1],p);if(!(0>u[0]||256<=u[0]||0>u[1]||256<=u[1])){var v=x.wu(u, b),u={Na:v,name:s[0],Oi:!0,Ad:u,Ba:[],vb:[],visible:!0,Wj:!0},E=u.name;u.Er=15>s[2]%90||75<s[2]%90?90*Math.floor((s[2]+15)/90):s[2];v=s[3];0<=s[8]&&(u.hB={name:s[6],kZ:s[7],dir:s[8]});var G=v[2];e=v[3];var K=-Math.floor(e/2);if(s[4])if("v5"<=p){var J=s[5].split(":"),O=J[1],O=parseInt(O)-1,J=q.Qb+offlineMap.domain+"style_icon/icon-normal-"+(r||g?"big":"small")+".png";u.Ba.push(J);var J=Math.floor(O/10),M=O%10,T=0,U=0,Y=0;g?(T=48,Y=U=40):r?(T=U=40,Y=36):(T=U=24,Y=20);var X=T*Math.max(G+2,Y)/Y,J=[-X/ 2,-T/2,X,T,U*M,U*J,U,U];u.ke=7;u.vb.push(J)}else{K=!1;O=parseInt(s[5]);153===O&&(0===E.indexOf("G")?(O="153g",K=!0):0===E.indexOf("S")&&(O="153s",K=!0));if(151===O||150===O)K=!1,0===E.indexOf("G")&&(O=150,K=!0),0===E.indexOf("S")&&(O=151,K=!0);152===O&&(O=151);!0===K&&(c=q.Qb+offlineMap.domain+"theme/v1.3/icons/"+(r||g?"b/":"n/"));J=c+O+".png";u.Ba.push(J);X=s[4][0]*y;s=s[4][1]*y;J=[-X/2,-s/2,X,s];u.vb.push(J);G=Math.min(X-3,G);e=Math.min(s,e);K=-Math.floor(e/2)+(g?3:1)}u.Ba.push(a.Rd);u.ke=11;u.vb.push([-Math.floor(G/ 2),K,G,e,v[0],v[1],v[2],v[3]]);a.ta||(a.ta=[]);a.ta.push(u)}}else if("poilabel"===t){E=[];for(l=1;l<n.length;l+=1)if(s=n[l],s.Ou=s[0],u=d.Ur(s[1],p),!(0>u[0]||256<=u[0]||0>u[1]||256<=u[1])){v=x.wu(u,b);u={Na:v,name:s[0].replace("^",""),dn:!0,Ad:u,Ba:[],vb:[],visible:!0,Wj:!0};O=0;u.Wk=s[8];s[6]&&("v5"<=p?(J=s[6].split(":"),O=J[1],K=Math.floor((parseInt(J[0].split("_")[1])-28)/2)):O=s[6]);if(O&&s[3]){if("v5"<=p){J=q.Qb+offlineMap.domain+"style_icon/icon-"+(1===K?"biz-":"normal-")+(r||g?"big":"small")+ ".png";u.Ba.push(J);O=parseInt(O)-1;J=Math.floor(O/10);M=O%10;Y=U=T=0;g?(T=48,U=40,Y=28):r?(T=U=40,Y=28):(T=U=24,Y=20);X=T;if(151===O||152===O||153===O)Y-=4,G=s[7][0][2],X=T*Math.max(G+2,Y)/Y;J=[-X/2,-T/2,X,T,U*M,U*J,U,U]}else J=c+O+".png",u.Ba.push(J),J=[-Math.round(s[3][0]/2),-Math.round(s[3][1]/2),s[3][0],s[3][1]],g&&(J[0]*=y,J[1]*=y,J[2]*=y,J[3]*=y);u.vb.push(J)}if(s[2]&&s[7])for(G=s[2],J=0;J<s[2].length;J+=1){u.Ba.push(a.Rd);v=s[7][J];g&&(G[J][0]=Math.round(G[J][0]*y),G[J][1]=Math.round(G[J][1]* y),G[J][2]=Math.round(G[J][2]*y),G[J][3]=Math.round(G[J][3]*y));X=G[J][0];M=G[J][1]-(g?4:2);T=v[3];U=v[2];X<-U&&O&&s[3]&&(X=-U+u.vb[0][0]);if("v5">p){if("375"===O||"3751"===O)U=Math.min(G[J][2],g?24:14),X=-Math.floor(U/2),M=-Math.floor(T/2)}else X-=2;u.ke=T-4;4===e&&"\\u5317\\u4eac"===u.name&&(M=g?-50:-26);u.vb.push([X,M,U,v[3],v[0],v[1],v[2],v[3]])}u.Hl=s[5];u.Hl&&E.push(u.Hl);u.Vk=s[4];u.Tl=s[9];u.XK=s[10];u.Xe=O;u.br=K;a.ta||(a.ta=[]);a.ta.push(u)}a.wf||(a.wf={},a.wf.xe=E)}t===h[h.length-1]&&(a.status= "loaded",a.wa=a.qa=!0,a.Fc&&(a.Fc.wa=a.Fc.qa=!0))}}var d=this,e=a.Bd,g=a.cd,h=a.ta,k=a.gK,l=a.jb,m=a.IK,n=a.tx,p=a.Ed,q=this.A,r=this.l.Z,s=n[0].split("-");1===s.length&&(s=n[0].split("_"));a=parseInt(s[1]);var u=parseInt(s[2]),v=parseInt(s[0]),x=this,t=s[3],y=g?l:1,l=Math.pow(2,v);10>v&&(a<=k&&c(e,a+l,u,v),a>=l-k&&c(e,a-l,u,v));c(e,a,u,v)}}},function(a){a||(f.qi.qda=!0)})}})();(function(){if(f.l.hr&&!f.sf){f.sf=f.HE();var a=f.a.SJ({g:"on",Od:"hasEvents",I:"off",oD:"offByContext",r:"emit",Uh:"clearEvents"});f.sf.Mj(null,function(){return{DW:function(a,c){var d=this;if(3<this.hq||this.disabled)return this.Ri(a,c);var e=a.Bd,g=a.lc,h=a.tg,k=a.MM,l=a.Wca,m=a.ta;a.Id.Nc?this.Nc=a.Id.Nc:a.Id.Nc=this.Nc;if(h&&this.bo())this.lk(e,c);else{var n=[(new Date).getTime(),this.Qq()+1&65535,h?1:0].join("-");h||(this.yf[n]=1);var k={command:"tiles",reqId:n,payload:{t:k,opt:g,cs:{level:g, flds:m.join(","),v:l?"3":"2"}}},p=this.send(k);this.Am[n]={Bd:e,lc:g,F:a,yc:c,tg:h};this.Zx()||setTimeout(function(){d.Zx()||(d.hq?d.hq++:d.hq=1,d.vU(p)&&(delete d.Am[n],delete d.yf[n],d.Ri(a,c)))},300);this.g("tiles",this.wD,this);this.g("ack",this.vD,this);this.g("disable",this.uD,this)}},p$:function(a){this.EK()&&this.send(a)},uD:function(){this.disabled=!0;this.close();for(var a in this.Am)this.Am.hasOwnProperty(a)&&this.cG(a)},cG:function(a){var c=this.Am[a];c&&(this.lk(c.Bd,c.yc),delete this.Am[a], delete this.yf[a])},vD:function(a){var c=a.reqId,d=this.Am[c];d&&(a.content.status?d.yc&&(d.yc(null,{xc:d.F.xc,q9:!0,Pj:!0},{qr:!1,Sm:!0}),delete this.Am[c],delete this.yf[c]):this.cG(c))},wD:function(a){var c=a.reqId,d=this.Am[c];d&&(d.tg&&this.bo()?this.cG(c):this.sr(this.extend({Pj:!1},d.F,{rE:a.content.data,lc:a.content.opt}),d.yc))},sr:function(a,c){for(var d=a.rE,e=a.Pj,g=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.ZV&&(l=JSON.parse(l)),l["x-vd-v"]?(this.Ed=a.Id.Ed=l["x-vd-v"],this.lf=a.Id.lf= l.tv,this.Vd=a.Vd=[l.tv||"",l.vdv].join("-"),l.bgc&&(l="#"+l.bgc.substring(2),a.uq!==l&&(a.uq=l))):this.mu(this.extend({},a,{tx:l,Rc:g})))}g.length?(d=this.extend({},a.Id,{Rc:g}),(a.He?this.rX:this.parseDataToVector)(d,function(d,g){c(d,{xc:a.xc,Bd:a.Bd.filter(function(a){return"loaded"===a.status}),data:g.data,uq:a.uq,Pj:e,ye:{Ed:a.Id.Ed,lf:a.Id.lf,Vd:a.Id.Vd,lc:a.lc}},{qr:!e,Sm:e})})):c(null,{xc:a.xc,Bd:[],data:null,Pj:e},{qr:!e,Sm:e})}}});f.sf.Mj(null,f.aL);f.sf.Mj(null,new Function("\\n    return {\\n      "+ a.on+": "+f.hs.g.toString()+",\\n      "+a.hasEvents+": "+f.hs.Od.toString()+",\\n      "+a.off+": "+f.hs.I.toString()+",\\n      "+a.offByContext+": "+f.hs.oD.toString()+",\\n      "+a.emit+": "+f.hs.r.toString()+",\\n      "+a.clearEvents+": "+f.hs.Uh.toString()+"\\n    }\\n  "));f.sf.Mj(null,f.$E,function(a){a||(f.sf.Mca=!0)})}})(); ')

_jsload_('wgl', '(function(){if(f.l.bm){var a=function(a){function c(a,b,c,d,g,h,k){c=a.Ca;d=[];var l=a.li,m=null,n=null;a.Ca=[];h=h&&16<b;for(var p=1,q=c.length;p<q;p+=1){var t=c[p],x=t[1].split("&"),y=!1,m=r(A?A:x[0]),n=r(x[4]),Y=t[2],X=t[0],ca=t[3]*Math.pow(2,2)*k,Z=t[4],P={};if((t=t[5])&&t.length)for(var y=!0,L=0,W=t.length;L<W;L+=1)for(var Q=t[L].split("-")[1].split("^"),x=0,V=Q.length;x<V;x+=1)-1===e(d,Q[x])&&d.push(Q[x]);if(Z&&Z.length)for(t=0,L=Z.length;t<L;t+=1)for(W=Z[t].split("-"),Q=parseInt(W[0]),P[Q]= {},x=1,V=W.length;x<V;x+=1)P[Q][parseInt(W[x])]=!0;t=0;for(Z=X.length;t<Z;t+=1){for(var x=X[t],L=[],W=[],Q=[],x=u(x,v,b),x=s(x,l,g,!0)[1],V=[],R=0,S=0,$=0,pa=x.length-1;$<pa;$+=1){var ea=x[$],fa=x[$+1],R=R+ea[0],S=S+fa[1];if(!P[t]||!P[t][$])if(h){var ka=0,la=fa[0]-ea[0],ta=fa[1]-ea[1];0===la?ka=0.5:0===ta?ka=fa[0]>ea[0]?0:1:(ka=Math.abs(Math.atan(ta/la)/Math.PI),ka=fa[0]>ea[0]?ka:1-ka);ta=Math.sqrt(Math.pow(la,2)+Math.pow(ta,2));la=Math.round(ca/64);ta=Math.ceil(ta/64);la?Q.push(0,0,ta,la,0,la,0, 0,ta,0,ta,la):Q.push(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1);la=0.4+0.6*ka;ka=0.8+0.2*ka;L.push(ea[0],ea[1],-ca,la);L.push(fa[0],fa[1],0,ka);L.push(ea[0],ea[1],0,ka);L.push(ea[0],ea[1],-ca,la);L.push(fa[0],fa[1],-ca,la);L.push(fa[0],fa[1],0,ka)}else W.push(ea[0],ea[1],0,1,fa[0],fa[1],0,1);V.push([ea[0],ea[1]])}x.pop();R=[R/x.length+215440491,S/x.length+106744817];V=z.tp(h?V:x,[],0,1);S=0;for($=V.length;S<$;S+=1)for(x=0;3>x;x+=1)pa=-ca,h||(pa=0),Q.push(0,0,0,0,0,0),L.push(V[S][x][0],V[S][x][1],pa,0); x=[m,n,Y];L=[new Float32Array(L),new Float32Array(Q),new Float32Array(W),x,null,R];y&&(L.vca=!0);a.Ca.push(L)}}a.Lk=d;return a}function d(a,b,c,d,g,h){c=a.Ca;d=[];for(var k=a.li,l=null,m=null,n={},p=1,q=c.length;p<q;p+=1){var t=c[p],x=t[1].split("&"),l=r(A?A:x[0]),m=r(x[2]),y=x[0]+x[2];n[y]||(n[y]={wZ:[],nY:[],To:[],Xh:[],fba:l,borderColor:m,Tb:t[2]});var l=n[y].wZ,m=n[y].nY,x=n[y].To,y=n[y].Xh,Y=t[0],X=t[3]*Math.pow(2,2),ca=t[4],Z={};if((t=t[5])&&t.length)for(var P=0,L=t.length;P<L;P+=1)for(var W= t[P].split("-")[1].split("^"),Q=0,V=W.length;Q<V;Q+=1)-1===e(d,W[Q])&&d.push(W[Q]);if(ca&&ca.length)for(t=0,L=ca.length;t<L;t+=1)for(W=ca[t].split("-"),Q=parseInt(W[0]),Z[Q]={},P=1,V=W.length;P<V;P+=1)Z[Q][parseInt(W[P])]=!0;t=0;for(ca=Y.length;t<ca;t+=1){for(var R=Y[t],R=u(R,v,b),R=s(R,k,g,!0)[1],P=[],L=0,W=R.length-1;L<W;L+=1){var Q=R[L],V=R[L+1],S=[Q[0]-0*X,Q[1]-0.3*X],$=[V[0]-0*X,V[1]-0.3*X];Z[t]&&Z[t][L]||(h?((V[0]-Q[0])*(S[1]-Q[1])<(S[0]-Q[0])*(V[1]-Q[1])&&(l.push(S[0],S[1],2),l.push(V[0],V[1], -1),l.push(Q[0],Q[1],-1),l.push(S[0],S[1],2),l.push($[0],$[1],2),l.push(V[0],V[1],-1),y.push([Q,V,$,S])),x.push(S[0],S[1],-1,$[0],$[1],-1)):x.push(Q[0],Q[1],-1,V[0],V[1],2));P.push([S[0],S[1]])}R.pop();L=z.tp(h?P:R,[],0,1);y.push(h?P:R);R=0;for(W=L.length;R<W;R+=1)for(P=0;3>P;P+=1)m.push(L[R][P][0],L[R][P][1],3)}}a.Ca=[];for(R in n)n.hasOwnProperty(R)&&(x=[n[R].fba,n[R].borderColor,n[R].Tb],n[R].Xh.pr=!0,a.Ca.push([new Float32Array(n[R].wZ),new Float32Array(n[R].nY),new Float32Array(n[R].To),x,n[R].Xh])); a.Lk=d;return a}function e(a,b){if(a&&!a.length)return-1;if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1}function g(a,b){for(var c=a.Ca,d=[],e={0:"ffde0000",1:"ffffcc00",2:"ff33b100",3:"ff8c0e0e",4:"ffadadad"},g=0,h=c.length;g<h;g++){for(var k=[],l=0,n=c[g].length;l<n;l++){var p=[],q=[],s=[];m(p,s,q,c[g][l][1],a.ma,b);q.pr=!0;p.forEach(function(a,b){k.push([a,s[b]])})}if(k.length){var u=[[],[],{width:0.75*c[g][0][0],borderColor:r(e[g])}];k.forEach(function(a){var b= u[0].length/9;b&&(a[1]=a[1].map(function(a){return a+b}));u[0]=u[0].concat(a[0]);u[1]=u[1].concat(a[1])});u[0]=new Float32Array(u[0]);u[1]=new Uint16Array(u[1]);d.push(u)}}a.Ca=d;return a}function h(a){var b=[],c=[],d=[];a=s(a,{x:0,y:0},1);c.push.apply(c,a[2]);if(2<a[1].length){var e=z.tp(a[1],[],0);e.length&&(b.push.apply(b,a[0]),d.push.apply(d,e))}return[new Float32Array(b),new Uint16Array(d),{},c]}function k(a,b,c,d,e){for(var g="solid solid_roundcap solid_squarecap dash railway dash_crewel".split(" "), h=a.Ca.slice(1),k=h.length-1;0<=k;k--)h[k].SV=k;h.sort(function(a,b){return a[2]>b[2]?1:a.SV>b.SV?1:-1});for(var m={},k=0,n=h.length;k<n;k+=1){var p=h[k],q=p[1].split("&"),s,u,v,x,y;s=u=v=x=y=null;var A,z,P,L,W=null,Q=!1;A=z=P=L=null;q[1]&&(s=r(q[1]));u=parseInt(q[0]);v=q[2];v!==g[0]&&(v===g[1]?A="round":v===g[2]?A="square":0===v.indexOf(g[5])?(W=!0,P=[3,2]):0===v.indexOf(g[3])?(P=v.substring(5).split(")")[0].split(","),P.forEach(function(a,b){P[b]*=e})):0===v.indexOf(g[4])&&(x=s,s=q[4]?r(q[4]):[1, 1,1,s[3]],P=[12,12],Q=!0,y=3,u=1));q[3]&&q[4]&&3<q.length&&(y=u+parseInt(q[3]),x=r(q[4]),v=q[5],v!==g[0]&&(v===g[1]?z="round":v===g[2]?z="square":0!==v.indexOf(g[5])&&0===v.indexOf(g[3])&&(y+=1,L=v.substring(5).split(")")[0].split(","),L.forEach(function(a,b){L[b]*=e}))));if(c){if(P)for(q=P.length-1;0<=q;q-=1)P[q]*=e;if(L)for(q=L.length-1;0<=q;q-=1)L[q]*=e}v=[];v.Wf=0;var V=[],R=[];l(v,R,V,p[0],a.li,b,c,d,e,A);"app"===t&&(u/=4,y/=4);q=[u,s,P,y,x,L,W,Q,A,z,p[3],p[4]];q.mma=!0;p=p[2];m[p]||(m[p]=[]); V.pr=!0;m[p].push([new Float32Array(v),new Uint16Array(R),q,V])}a.Ca=m;return a}function l(a,b,c,d,e,g,h,k,l,m){for(var n=0,p=d.length;n<p;n+=1){var q=a.length/11,r=q+6,t=u(d[n],v,g),x=s(t,e,k);if(1<x[1].length){for(var t=x[0],y=x[2],A=0,x=x[1].length;A<x;A+=1){if(0<A){var z=t[2*A]-t[2*A-2],P=t[2*A+1]-t[2*A-1];a.Wf+=Math.sqrt(z*z+P*P)*(h?l:1)}var z=t[2*A],P=t[2*A+1],L=y[A][0],W=y[A][1],Q,V;A===x-1?(Q=t[2*x-2],V=t[2*x-1]):(Q=t[2*A+2],V=t[2*A+3]);var R,S;0===A?(R=z,S=P):(R=t[2*A-2],S=t[2*A-1]);if(0!== A){var $=A===x-1?0:-1;a.push(z,P,L,W,1,R,S,$,Q,V,a.Wf);a.push(z,P,L,W,-1,R,S,$,Q,V,a.Wf)}else a.push(z,P,L,W,0,R,S,0,Q,V,a.Wf),a.push(z,P,L,W,1,R,S,0,Q,V,a.Wf),a.push(z,P,L,W,1,R,S,1,Q,V,a.Wf),a.push(z,P,L,W,0,R,S,1,Q,V,a.Wf),a.push(z,P,L,W,-1,R,S,1,Q,V,a.Wf),a.push(z,P,L,W,-1,R,S,0,Q,V,a.Wf),m&&(b.push(q+2,q+0,q+3),b.push(q+2,q+1,q+0),b.push(q+3,q+0,q+4),b.push(q+4,q+0,q+5));A!==x-1?($=0===A?0:1,a.push(z,P,L,W,1,R,S,$,Q,V,a.Wf),a.push(z,P,L,W,-1,R,S,$,Q,V,a.Wf)):(a.push(z,P,L,W,0,R,S,0,Q,V,a.Wf), a.push(z,P,L,W,1,R,S,0,Q,V,a.Wf),a.push(z,P,L,W,1,R,S,-1,Q,V,a.Wf),a.push(z,P,L,W,0,R,S,-1,Q,V,a.Wf),a.push(z,P,L,W,-1,R,S,-1,Q,V,a.Wf),a.push(z,P,L,W,-1,R,S,0,Q,V,a.Wf));A!==x-1?(b.push(r+4*A,r+4*A+3,r+4*A+1),b.push(r+4*A,r+4*A+2,r+4*A+3)):m&&(z=r+4*(x-1),b.push(z+1,z+2,z+0),b.push(z+2,z+3,z+0),b.push(z+0,z+4,z+5),b.push(z+0,z+3,z+4))}c.push(y)}}}function m(a,b,c,d,e,g){for(var h=0,k=d.length;h<k;h+=1){var l=[],m=[],n=u(d[h]),p=s(n,e,g);c.push(p[2]);if(1<p[1].length){var q=p[1].length;p[1].forEach(function(a, b,c){var d=c[b-1];c=c[b+1];0===b?d=a:b===q-1&&(c=a);l.push(a[0],a[1],p[2][b][0],p[2][b][1],1,d[0],d[1],c[0],c[1]);l.push(a[0],a[1],p[2][b][0],p[2][b][1],-1,d[0],d[1],c[0],c[1]);0===b?m.push(0,1,2):b!=q-1?(m.push(2*(b-1)+1,2*b+1,2*b),m.push(2*b,2*b+1,2*(b+1))):m.push(2*(b-1)+1,2*b+1,2*b)});a.push(l);b.push(m)}}}function n(a,b,c,d,e,g,h,k){for(var l=0,m=d.length;l<m;l+=1){var n=a.length/2,p=s(u(d[l],v,g),e,h);if(2<p[1].length&&(n=z.tp(p[1],[],n),n.length&&(a.push.apply(a,p[0]),b.push.apply(b,n),c.push(p[2]), k)))for(var n=0,q=p[2].length;n<q;n+=1){var r=p[2][n][0]/512,t=p[2][n][1]/512;1==e.x%2&&(r+=0.5);1==e.y%2&&(t+=0.5);k.push(r,t)}}}function p(a,b,c){var d=a.Ca,e=[],g=[],h=[],k=[];q(a,g,h,c);for(var l=[[[0,0],[255,0],[255,255],[0,255]]],m=[[0,0],[255,0],[0,255],[255,255]],p=a.li,s=0,u=m.length;s<u;s+=1){var t=m[s][0]/512,v=m[s][1]/512;1==p.x%2&&(t+=0.5);1==p.y%2&&(v+=0.5);k.push(t,v)}l.pr=!0;e.push([new Float32Array(g),new Uint16Array(h),r("ff"+a.sI.substr(1)),"regions:land",l,new Float32Array(k)]); d.sort(function(a,b){return"string"===typeof a?-1:"string"===typeof b?1:a[2]>b[2]?1:a[2]<b[2]?-1:0});m=1;for(p=d.length;m<p;m+=1)s=d[m],g=[],h=[],l=[],k=[],u=r(s[1].split("&")[0]),n(g,h,l,s[0],a.li,b,c,k),l.pr=!0,e.push([new Float32Array(g),new Uint16Array(h),u,s[3],l,new Float32Array(k)]);a.Ca=e;return a}function q(a,b,c,d){var e=a.li;a=256*e.x*d-215440491;e=256*e.y*d-106744817;b.push(a,e);var g=256*d;d=a+g;b.push(d,e);e+=g;b.push(a,e);b.push(d,e);c.push(0,1,2,1,3,2)}function r(a){for(var b=[],c= 0,d=a.length;c<d;c+=2)b.push(parseInt(a.substr(c,2),16)/255);b.push(b.shift());return b}function s(a,b,c,d){var e=0,g=0,e=256*b.x,g=256*b.y;b=[];for(var h=[],k=[],l=0,m=a.length;l<m;l+=2){var n=(e+a[l])*c-215440491,p=(g+a[l+1])*c-106744817,q=k.length;if(d||0===b.length)k.push(n),k.push(p),b.push([n,p]),h.push([a[l],a[l+1]]);else if(n!==k[q-2]||p!==k[q-1])n===k[q-2]&&n===k[q-4]?(k[q-1]=p,b[b.length-1][1]=p,h[b.length-1][1]=a[l+1]):p===k[q-1]&&p===k[q-3]?(k[q-2]=n,b[b.length-1][0]=n,h[b.length-1][0]= a[l]):(k.push(n),k.push(p),b.push([n,p]),h.push([a[l],a[l+1]]))}return[k,b,h]}function u(a,b,c){var d="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM";b=b||"v5";var e,g;"v5"<b?(e=d.length,g=512):(e=27,d=d.substr(0,27),g=333);var h,k,l,m,n;k=[];l=NaN;m=0;for(n=a.length;m<n;m++)h=a[m],h=d.indexOf(h),isNaN(l)?l=h*e:(h=l+h-g,18===c&&"v5"<b&&(h/=4),k.push(h),l=NaN);return k}var v,x=Number.EPSILON||2E-16,t,y=!1,A=null,z={Cf:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d][0]*a[e][1]- a[e][0]*a[d][1];return 0.5*c},LM:function(){return function(a,b){var c=a.length;if(3>c)return null;var d=[],e=[],g=[],h,k,l;if(0<z.Cf(a))for(k=0;k<c;k++)e[k]=k;else for(k=0;k<c;k++)e[k]=c-1-k;var m=2*c;for(k=c-1;2<c&&!(0>=m--);){h=k;c<=h&&(h=0);k=h+1;c<=k&&(k=0);l=k+1;c<=l&&(l=0);var n;a:{var p=n=void 0,q=void 0,s=void 0,r=void 0,u=void 0,t=void 0,v=void 0,y=void 0,p=a[e[h]][0],q=a[e[h]][1],s=a[e[k]][0],r=a[e[k]][1],u=a[e[l]][0],t=a[e[l]][1];if(x>(s-p)*(t-q)-(r-q)*(u-p))n=!1;else{var A=void 0,L=void 0, W=void 0,Q=void 0,V=void 0,R=void 0,S=void 0,$=void 0,pa=void 0,ea=void 0,pa=$=S=y=v=void 0,A=u-s,L=t-r,W=p-u,Q=q-t,V=s-p,R=r-q;for(n=0;n<c;n++)if(v=a[e[n]][0],y=a[e[n]][1],!(v===p&&y===q||v===s&&y===r||v===u&&y===t)&&(S=v-p,$=y-q,pa=v-s,ea=y-r,v-=u,y-=t,pa=A*ea-L*pa,S=V*$-R*S,$=W*y-Q*v,pa>=-x&&$>=-x&&S>=-x)){n=!1;break a}n=!0}}if(n){d.push([a[e[h]],a[e[k]],a[e[l]]]);g.push([e[h],e[k],e[l]]);h=k;for(l=k+1;l<c;h++,l++)e[h]=e[l];c--;m=2*c}}return b?g:d}}(),tp:function(a,b,c,d){var e,g,h,k={};b=0;for(e= a.length;b<e;b++)h=a[b][0]+":"+a[b][1],k[h]=b;a=z.LM(a,!1);if(!a)return[];if(d)return a;var l=[];b=0;for(e=a.length;b<e;b++)for(g=a[b],d=0;3>d;d++)h=g[d][0]+":"+g[d][1],h=k[h],l.push(h+c);return l},Yca:function(a){return 0>z.Cf(a)}};return{rX:function(e,g){function h(a){var b=a.Ca;q&&b&&1<b.length&&b.slice(1).forEach(function(b){if(b&&null===b[1]){var c=b[b.length-1],d=q[c];b[1]=d.browserStyle[d.levelStyleMapping[m]];"road"===a.dd&&(b[1]=b[1][0],b[4]=d,b[4].id=c)}})}v=e.Ed;y=e.Uca;t=e.mode;var l= y?c:d,m=e.eu,n=e.Eu,q=null;A=e.YB;var s=e.Z,r=[],u=Math.pow(2,20-m);e.Nc&&(q=e.Nc.stylemaps);for(var x=0,z=e.Rc.length;x<z;x+=1){var M=e.Rc[x],T=M.dd;h(M);switch(T){case "region":r.push(p(M,m,u));break;case "road":r.push(k(M,m,n,u,e.lY));break;case "building":r.push(l(M,m,n,s,u,e.l$,e.Wt))}}delete e.Nc;e.Rc=r;if(a){l=[];x=0;for(z=r.length;x<z;x++)if((n=r[x].Ca)&&n.length)for(s=0,u=n.length;s<u;s++)n[s].buffer&&n[s].buffer instanceof ArrayBuffer&&l.push(n[s].buffer);a.$w(l)}g(null,{data:e})},gfa:function(a, b){for(var c=a.Rc,d=Math.pow(2,20-a.lc),e=[],h=0,k=c.length;h<k;h++)e.push(g(c[h],d));a.Rc=e;b(null,{data:a})},tX:function(a,b){var c=a.ur.reduce(function(a,b){return a.concat(b)},[]),c=h(c);b(null,{data:c})},pX:function(a,b){var c=a.hb,d=a.Yi,e=0,g=Math.PI/180*6,h=[],k=[];h.push(c[0],c[1]);for(var l=0;60>l;l++)h.push(c[0]+d*Math.cos(e),c[1]+d*Math.sin(e)),e+=g,0<l&&k.push(0,l,l+1),59==l&&k.push(0,l+1,1);b(null,{data:[h,k]})},Pma:function(){}}};f.PZ=a();f.CE=new f.ts(a,{lazy:"untilCall"});f.l.hr&& f.sf.Mj(null,a)}})(f);(function(){function a(){function a(b,c,d,e,g,k){var l=[0,0,0,0,0],n=d.slice(0,4).concat(l),p=[],r=Math.PI/180*6,C=void 0,H=void 0,C=d.slice(0,2),F=m(e),B=m(g),H=q.normalize(h(F).ag(h(C))),D=q.normalize(h(B).ag(h(C)));q.AK(H,k)?(C=q.VC(H),H=q.VC(D)):(C=q.VC(D),H=q.VC(H),k=[B,F],F=k[0],B=k[1],g=[g,e],e=g[0],g=g[1]);F=Math.ceil(Math.abs(H-C)/r);30<=F&&(F=60-F);for(k=0;k<F;k++)0===k?(n.push.apply(n,e.slice(0,4)),n.push.apply(n,l)):(B=(k*r+C)%(2*Math.PI),n.push.apply(n,d.slice(0,2).concat([0,0])),n.push(1* Math.cos(B),1*Math.sin(B),0,0,0)),0<k&&p.push(0,k,k+1);n.push.apply(n,g.slice(0,4));n.push.apply(n,l);p.push(0,F,F+1);var E=b.length/9;b.push.apply(b,n);c.push.apply(c,p.map(function(a){return a+E}));return n.length/9}function c(c,d,e,g,k,l){function n(a,b,c,d,e){var g=void 0;a.vC(b)||q.fW(a,b)?g=b:c&&d&&e?g=a:c&&!d&&e?g=b:c||d||e?c||!d||e?(g=q.normalize(a.ei(b)),H=q.cos(g,a),g=g.bJ(H)):g=a:g=b;return g}function p(a,b,c){if(void 0===c||!0===c)d.push(a[0],a[1]),d.push(-b.y,b.x,0,0),d.push(C,0,0),l.push(a[2]); if(void 0===c||!1===c)d.push(a[0],a[1]),d.push(b.y,-b.x,0,0),d.push(C,0,0),l.push(a[2])}var r=c.length,I=0,C=0,H=void 0,F=void 0;k&&(g="bevel");c.forEach(function(c,s,E){var G=E[s-1];E=E[s+1];var K=void 0;G&&(C+=q.Fd(c,G));if(0===s||s===r-1)0===s?(void 0===E&&(E=c),K=q.normalize(h(E[0]-c[0],E[1]-c[1])),e.push(0,1,2)):(K=q.normalize(h(c[0]-G[0],c[1]-G[1])),s=d.length/9+2,4===s?e.push(3,2,1):e.push(s-3-I,s-1,s-2)),p(c,K);else{var J=q.normalize(h(c[0]-G[0],c[1]-G[1])),O=q.normalize(h(E[0]-c[0],E[1]- c[1])),K=q.normalize(J.multiply(-1).ei(O));F=q.AK(K,J);H=q.cos(K,J);p(c,n(J,O,F,!0,!0),!0);p(c,n(J,O,F,!0,!1),!1);p(c,n(J,O,F,!1,!0),!0);p(c,n(J,O,F,!1,!1),!1);s=d.length/9;G=s-4;E=G+2;var M=9*G,T=M+9,U=T+9,Y=U+9;F?(U=m(d.slice(T,U)),M=m(d.slice(M,T)),M=q.normalize(h(U).ag(h(M))),M=Math.abs(q.cos(J,M)/q.sin(J,M)*2),d[T+7]=-M,d[Y+7]=M):(Y=m(d.slice(M,T)),T=m(d.slice(T,U)),T=q.normalize(h(Y).ag(h(T))),T=Math.abs(q.cos(T,J)/q.sin(T,J)*2),d[M+7]=-T,d[U+7]=T);q.fW(J,O)?e.push(G,G+1,G-2-I):e.push(G,G-1- I,G+1);"miter"==g&&(F?p(c,n(J,O,0,!0,!0),!0):p(c,n(J,O,0,!0,!0),!1),I=1);if("round"===g){M=O=J=void 0;F?(J=d.slice(9*(G+1),9*(G+2)),O=d.slice(9*G,9*(G+1)),M=d.slice(9*E,9*(E+1))):(J=d.slice(9*G,9*(G+1)),O=d.slice(9*(G+1),9*(G+2)),M=d.slice(9*(E+1),9*(E+2)));K=a(d,e,J,O,M,K.multiply(-1));if(l)for(;0<K--;)l.push(c[2]);I=d.length/9-s}e.push(E,E+1,E+2+I);k||"bevel"!=g&&"miter"!=g||(F?e.push(E,G,G+1):e.push(E,E-1,E+1),"miter"==g&&(F?e.push(E+2,E-2,E):e.push(E+2,E+1,E-1)))}})}function d(a,b,c,d){function e(a, b){var c=void 0;if(a.vC(b))c=b;else{var c=q.normalize(a.ei(b)),d=q.cos(c,a);d>Math.sqrt(3)/2&&(d=Math.sqrt(3)/2);c=c.bJ(d)}return c}function g(a,c,e){if(void 0===e||!0===e)b.push(a[0],a[1]),b.push(-c.y,c.x,0,0),b.push(m,0,0),d.push(a[2]);if(void 0===e||!1===e)b.push(a[0],a[1]),b.push(c.y,-c.x,0,0),b.push(m,0,0),d.push(a[2])}for(var k=a[0],l=a[a.length-1],m=0,n=void 0;k[0]===l[0]&&k[1]===l[1]&&k!==l;)a.pop(),l=a[a.length-1];a.push(k);a.push(a[1]);a.unshift(l);var p=a.length;a.forEach(function(a,d, k){var l=k[d-1];k=k[d+1];var s=void 0;l&&(m+=q.Fd(a,l));if(0===d||d===p-1)0===d?(s=q.normalize(h(k[0]-a[0],k[1]-a[1])),c.push(0,1,2)):(s=q.normalize(h(a[0]-l[0],a[1]-l[1])),d=b.length/9+2,c.push(d-3,d-1,d-2)),g(a,s);else{d=q.normalize(h(a[0]-l[0],a[1]-l[1]));k=q.normalize(h(k[0]-a[0],k[1]-a[1]));l=q.normalize(d.multiply(-1).ei(k));n=q.AK(l,d);g(a,e(d,k),!0);g(a,e(d,k),!1);g(a,e(d,k),!0);g(a,e(d,k),!1);a=b.length/9-4;k=a+2;var s=9*a,r=s+9,x=r+9,A=x+9;d=Math.abs(q.cos(d,l)/q.sin(d,l));n?(b[s+7]=d,b[r+ 7]=-d,b[x+7]=-d,b[A+7]=d):(b[s+7]=-d,b[r+7]=d,b[x+7]=d,b[A+7]=-d);c.push(a,a-1,a+1);c.push(k,k+1,k+2)}})}function e(c,d,e){function g(a,b){if(p)for(;0<a--;)p.push(b)}function m(a,b){I.push.apply(I,a.slice(0,k));I.push(b.x,b.y);I.push.apply(I,a.slice(l));I.push.apply(I,a)}var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"butt",p=arguments[4],r=c.length-1,N=d.length,I=[],C=[],H=[d.slice(0,9),d.slice(9,18)],F=[d.slice(N-9,N),d.slice(N-18,N-9)];"square"===n?(n=q.normalize(h(c[0]).ag(h(c[1]))), m(H[0],n),m(H[1],n),n=q.normalize(h(c[r]).ag(h(c[r-1]))),m(F[0],n),m(F[1],n),C.push(0,2,3,3,1,0),C.push(6,7,4,4,7,5),p&&(p.push(c[0][2]),p.push(c[r][2]))):"round"===n&&(n=H[0].slice(0,2).concat(0,0,0,0).concat(H[0].slice(l)),H=a(d,e,n,H[0],H[1],q.normalize(h(c[0]).ag(h(c[1])))),g(H,c[0][2]),n=F[0].slice(0,2).concat(0,0,0,0).concat(F[0].slice(l)),H=a(d,e,n,F[0],F[1],q.normalize(h(c[r]).ag(h(c[r-1])))),g(H,c[r][2]));d.push.apply(d,I);e.push.apply(e,C.map(function(a){return a+N/9}))}function g(a,b){var c= [];a.forEach(function(a){var d=a[0],e=a[1];a=a[2];b&&(d-=p[0],e-=p[1]);var g=c.length-1;if(-1===g)c.push([d,e,a]);else if(d!==c[g][0]||e!==c[g][1]||a!==c[g][2])if(1<=g){var k=q.normalize(h(d-c[g][0],e-c[g][1])),l=q.normalize(h(c[g][0]-c[g-1][0],c[g][1]-c[g-1][1]));k.vC(l)&&a===c[g][2]?c[g]=[d,e,a]:c.push([d,e,a])}else c.push([d,e,a])});return c}function h(a,b){"object"===typeof a&&a.length&&(b=a[1],a=a[0]);return f.a.create(r,{x:{value:a},y:{value:b}})}var k,l;function m(a){return[a[0]+n*a[2],a[1]+ n*a[3]]}var n=1;k=4;l=6;var p=[215440491,106744817],q={normalize:function(a){var b=this.length(a);return a.bJ(b)},Cj:function(a,b){return a.multiply(b)},UI:function(a,b){return a.x*b.y-a.y*b.x},length:function(a){return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))},sin:function(a,b){return this.UI(a,b)/(this.length(a)*this.length(b))},cos:function(a,b){return this.Cj(a,b)/(this.length(a)*this.length(b))},AK:function(a,b){return 0<this.UI(a,b)},Fd:function(a,b){return Math.sqrt(Math.pow(b[0]-a[0],2)+ Math.pow(b[1]-a[1],2))},fW:function(a,b){return a.multiply(-1).vC(b)},VC:function(a){a=Math.atan2(a.y,a.x);0>=a&&(a+=2*Math.PI);return a}},r={ei:function(a){return h(this.x+a.x,this.y+a.y)},ag:function(a){return h(this.x-a.x,this.y-a.y)},multiply:function(a){return"number"===typeof a?h(this.x*a,this.y*a):this.x*a.x+this.y*a.y},bJ:function(a){return h(this.x/a,this.y/a)},vC:function(a){var b=a.y;return this.x===a.x&&this.y===b}};return{parse:function(a,b){var h=a.lineJoin,h=void 0===h?"bevel":h,k= a.lineCap,k=void 0===k?"butt":k,l=a.gda,l=void 0===l?!1:l,m=a.cn,n=void 0===m?!1:m,p=a.lX,m=a.Kha,q=void 0===m?!0:m,m=a.$ca,r=[],C=[],H=g(a.ur,void 0===p?!0:p),p=[];l?(d(H,r,C,p),h=r.length,[0,1,2,h/9-1,h/9-2].forEach(function(a){r[9*a+8]=-1})):(c(H,r,C,h,n,p),e(H,r,C,k,p));q&&(r=new Float32Array(r),C=new Uint16Array(C));h=[r,C];m&&h.push(p);if(b)b(null,{data:h});else return h}}}f.hN=a();f.Kia=new f.ts(a,{})})();f.ev={Rca:function(a,b,c){b=f.ev.createProgram(a,b,c);if(!b)return console.log("Failed to create program"),!1;a.useProgram(b);a.La=b;return!0},createProgram:function(a,b,c){b=f.ev.EW(a,a.VERTEX_SHADER,b);c=f.ev.EW(a,a.FRAGMENT_SHADER,c);if(!b||!c)return null;var d=a.createProgram();if(!d)return null;a.attachShader(d,b);a.attachShader(d,c);a.linkProgram(d);return a.getProgramParameter(d,a.LINK_STATUS)?d:(console.log("Failed to link program: "+a.getProgramInfoLog(d)),a.deleteProgram(d),a.deleteShader(c), a.deleteShader(b),null)},EW:function(a,b,c){b=a.createShader(b);if(null===b)return console.log("unable to create shader"),null;a.shaderSource(b,c);a.compileShader(b);return a.getShaderParameter(b,a.COMPILE_STATUS)?b:(console.log("Failed to compile shader: "+a.getShaderInfoLog(b)),a.deleteShader(b),null)}};f.Q.of.Vc=f.Q.Gd.ri.extend({ga:[f.ps],B:function(a,b){this.Ei=20;this.jb=Math.min(2,window.devicePixelRatio||1);this.dp=1;arguments.callee.oa.apply(this,arguments);this.X("mapStyle",a.h);this.X("style",a.h);this.Gh=this.bi=!0;a.h.J.en&&this.cx(a,b);this.mm=0;this.lg={};this.UC()||this.set("reload")},l0:"precision highp float;attribute vec4 a_Position;attribute vec3 a_op,a_Next,a_Previous;attribute float a_Tags;uniform float u_xDelta,u_width;uniform lowp int u_type;uniform mat4 u_othMatrix,u_zoomMatrix,u_modelMatrix;uniform float u_scale;varying float v_distance;varying vec2 v_op;varying float v_TB;varying float v_cap;varying lowp float v_Tags;void main() {vec4 position=a_Position;position.x+=u_xDelta;if (u_type==0) {gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}else if(u_type>1) {v_op=a_op.xy;v_TB=a_op.z;vec3 curPos=position.xyz;v_distance=a_Next.z;float ddis=0.0;vec3 previous=vec3(a_Previous.x+u_xDelta,a_Previous.y,0);vec3 next=vec3(a_Next.x+u_xDelta,a_Next.y,0);vec4 up,dir;v_distance *= u_scale;if(previous==curPos){ dir= vec4(normalize(next-curPos).xy,0,0);}else if(next==curPos){dir= -vec4(normalize(previous-curPos).xy,0,0);}else {vec3 dir0=previous-curPos;vec3 dir1=next-curPos;vec3 dir2=normalize(dir0);vec3 dir3=normalize(dir1);float f0=dir0.x*dir1.y-dir1.x*dir0.y;dir = vec4(0); v_cap=1.0;if(f0==0.0){up = vec4(dir3.y,-dir3.x,0,0); }else{vec3 dir4=normalize(dir2+dir3);float sinA=length(cross(dir4,dir2));float cosA=dot(dir4,dir2);if(sinA<0.5){sinA=0.5;}up= vec4(dir4,0)/sinA;ddis=abs(length(up)*cosA*u_width*0.5);if(f0<0.0){up=-up;ddis=-ddis;}v_distance += v_TB*a_Previous.z*ddis;}}if(previous==curPos||next==curPos){ up = vec4(dir.y,-dir.x,0,0); if(u_type==4){v_cap=sqrt(v_TB*v_TB+a_Previous.z*a_Previous.z);}else if(u_type==3){v_cap=1.0;}else{dir = vec4(0);}}vec4 pos=u_zoomMatrix*u_modelMatrix*position;pos=pos+(up*v_TB-dir*a_Previous.z)*u_width*0.5;gl_Position=u_othMatrix*pos;}else if (u_type==1) {v_Tags=a_Tags;gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}}", m_:"precision lowp float;uniform vec4 u_FragColor,u_FragColor2;varying lowp float v_distance,v_TB;varying vec2 v_op;varying lowp float v_Tags;varying float v_cap;uniform lowp int u_type;uniform int u_isDash,u_onlyBorder;uniform vec4 u_dash;void main() {vec4 color=u_FragColor;if (u_type==0) {}else if(u_type>1) {if(v_op.x<-0.2||v_op.x>256.2||v_op.y<-0.2||v_op.y>256.2){discard;}if(v_cap>1.0){discard;}if(u_isDash==1){float all = u_dash[0] + u_dash[1] + u_dash[2] + u_dash[3];float off = mod(v_distance - u_dash[0], all);if(off> u_dash[0]&&off<=(u_dash[0]+u_dash[1])||off>(all-u_dash[3])){discard;}}if(u_onlyBorder==1&&v_TB<=0.7&&v_TB>=-0.7){discard;}}else if(u_type==1) {color=v_Tags==3.0?u_FragColor2:vec4((u_FragColor+(u_FragColor2-u_FragColor)*v_Tags/3.0).xyzw);}gl_FragColor=color;}", reloadChanged:function(){this.q&&(this.q.wa=!1);this.xa.clear();this.Qa&&this.Qa.parentNode&&this.Qa.parentNode.removeChild(this.Qa);this.set("display")},ou:function(a){if(this.q&&a.JK===this.q.xc)for(var b=0,c=a.Rc.length;b<c;b+=1)this.uy(a.Rc[b],a.eu,a.Eu,a.Z)},QL:function(a){for(var b=0,c=a.length;b<c;b+=1){var d=a[b];this.h.Xj&&d[3]&&!this.h.cc&&(d[2]=this.T.Fo(d[2],d[3]));d.De=d[1].length;d[0]=this.tf(this.Ka.ARRAY_BUFFER,d[0]);d[1]=this.tf(this.Ka.ELEMENT_ARRAY_BUFFER,d[1])}},$L:function(a){for(var b= 0,c=a.length;b<c;b+=1){var d=a[b];d.De=d[1].length;d[0]=this.tf(this.Ka.ARRAY_BUFFER,d[0]);d[1]=this.tf(this.Ka.ELEMENT_ARRAY_BUFFER,d[1]);this.h.Xj&&d[2][10]&&!this.h.cc&&(d[2][1]=this.T.Fj(d[2][1],d[2][10],1),d[2][4]=this.T.Fj(d[2][4],d[2][10],0))}},CI:function(a){for(var b=0,c=a.length;b<c;b+=1){var d=a[b];d.py=d[0].length/3;d[0]=this.tf(this.Ka.ARRAY_BUFFER,d[0]);d.lD=d[1].length/3;d[1]=this.tf(this.Ka.ARRAY_BUFFER,d[1]);d.qy=d[2].length/3;d[2]=this.tf(this.Ka.ARRAY_BUFFER,d[2]);if(this.h.Xj&& d[3][2]&&!this.h.cc){var e=this.T.Oq(d[3][0],d[3][1],d[3][2]);d[3][0]=e[0];d[3][1]=e[1]}}},tf:function(a,b){if(b.length){var c=this.Ka,d=c.createBuffer();c.bindBuffer(a,d);c.bufferData(a,b,c.STATIC_DRAW);return d}},PU:function(a){var b=a.ma,c=b.x,d=b.y,e=b.z,g=Math.pow(2,e),h=(c+g)%g,k=h+g,l=h-g,m=null;h!==c&&(m=this.Xq(e,h,d));m||l===c||(m=this.Xq(e,l,d));m||k===c||(m=this.Xq(e,k,d));return m?(a.status=m.status,a.qa=m.qa,a.ec=m.ec,a.Lc=m.Lc,a.Pa={building:m.Pa.building,region:m.Pa.region,road:m.Pa.road, Nm:(b.x-m.ma.x)/g+m.Pa.Nm},!0):!1},Xq:function(a,b,c){if((a=this.xa.get(a+"/"+b+"/"+c))&&a.Pa)return a},uy:function(a){var b=a.dd,c=this.xa.get(a.$k);if(c){c.Pa||(c.Pa={Nm:0});c.Pa[b]=a.Ca;if("region"===b)this.QL(a.Ca);else if("road"===b)for(var d in a.Ca)a.Ca.hasOwnProperty(d)&&this.$L(a.Ca[d]);else"building"===b&&(this.CI(a.Ca),a.Lk&&a.Lk.length&&!c.wf&&(c.wf={},c.wf.xe=a.Lk,f.Gn&&f.Gn.r("vecTileParsed.buildings",{Mr:c})));b===this.q.ta[this.q.ta.length-1]&&(c.qa=!0,this.set("display"))}},ld:function(){if(this.ng&& !this.q.wa){var a=this.q;this.h.gy||f.Zd.te.end({key:"rb",index:2,id:this.h.J.id});a.wa=!0;a.$c?a.ha("renderComplete"):(a.$c=!0,a.ha("complete"))}},fc:function(a,b){!window.xa&&this.xa&&(window.xa=this.xa);this.ek=a.ek;this.Xl(a,b);this.ld();a.RC||(a.U9=this.ng,this.Cu(a,b),this.Ro=this.eb,this.hi&&this.set("display",0))},$h:function(){return this.Qa},ty:function(){f.Q.of.Vc.uo+=1;this.Qa&&f.C.I(this.Qa,"webglcontextlost",this.ty,this);this.Qa.parentNode&&this.Qa.parentNode.removeChild(this.Qa);if(1< f.Q.of.Vc.uo)this.tD();else{var a=this.Qa.className;this.Qa=document.createElement("canvas");this.Qa.className=a;this.UC()}this.set("reload");new f.Sa.bb(f.A.Qb+offlineMap.domain+"count?"+["type=glfail","c="+f.Q.of.Vc.uo,"crd="+f.l.eK,"k="+f.A.key,"u="+f.A.jo,"m="+(f.l.Z?1:0),"pf="+f.l.wr,"dpr="+window.devicePixelRatio,"scale="+(f.l.yE||0),"detect="+f.l.ja].join("&"))},tD:function(){f.l.He=!1;this.q&&this.q.h.J&&(this.q.h.set("baseRender",f.l.xU?"dv":"d"),this.q.h.J.TK(),this.q.Q=null,this.q.ia.hp(), this.q=null);this.Qa=this.T=null},Df:function(a){this.Qa=document.createElement("canvas");this.Qa.className=a||"amap-layer"},UC:function(){if(1<f.Q.of.Vc.uo)return this.tD(),!1;var a=this.Ka=this.Qa.getContext(f.l.NZ,f.l.OZ);if(a)f.C.g(this.Qa,"webglcontextlost",this.ty,this);else return this.tD(),!1;f.ev.Rca(a,this.l0,this.m_);this.$M=a.getUniformLocation(a.La,"u_xDelta");this.CZ=a.getUniformLocation(a.La,"u_othMatrix");this.FZ=a.getUniformLocation(a.La,"u_zoomMatrix");this.BZ=a.getUniformLocation(a.La, "u_modelMatrix");this.Bf=a.getAttribLocation(a.La,"a_Position");this.wj=a.getAttribLocation(a.La,"a_op");this.vj=a.getAttribLocation(a.La,"a_Previous");this.ph=a.getAttribLocation(a.La,"a_Next");this.pt=a.getAttribLocation(a.La,"a_Tags");a.enableVertexAttribArray(this.Bf);this.zn=a.getUniformLocation(a.La,"u_FragColor");this.NM=a.getUniformLocation(a.La,"u_FragColor2");this.ak=a.getUniformLocation(a.La,"u_type");this.jz=a.getUniformLocation(a.La,"u_width");this.SM=a.getUniformLocation(a.La,"u_isDash"); this.TM=a.getUniformLocation(a.La,"u_onlyBorder");this.PM=a.getUniformLocation(a.La,"u_dash");this.XM=a.getUniformLocation(a.La,"u_scale");a.enable(a.BLEND);a.enable(a.CULL_FACE);a.cullFace(a.FRONT);a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);a.clearColor(0,0,0,0);this.qu=this.Bt=this.cn=void 0;this.dk=0;return!0},Br:function(a){var b=Math.pow(2,a.W.zoom-this.qe),c=a.W.eb.Va(this.Ro).vc(this.ii);this.transform={translate:this.transform[0].translate.add(c), scale:b,rotate:0};this.eb=a.W.eb},Cu:function(a,b){var c=this.rI(a,b),d=this.Ka;d.clear(d.COLOR_BUFFER_BIT);var e=this.q.ja?this.jb:this.dp,g=0,h=0;0!==a.W.rotation?(g=2*Math.floor(a.W.Aa.Ub.x)*e,h=2*Math.floor(a.W.Aa.Ub.y)*e):(g=a.size.width*e,h=a.size.height*e);g&&h&&(this.Qa.width=g,this.Qa.height=h,d.viewport(0,0,this.Qa.width,this.Qa.height),this.ip.apply(this,c),this.Ne(a))},mp:256*Math.pow(2,20),iJ:function(a,b){var c=b.Pa.region;if(c){this.Fm(b.Pa.Nm*this.mp);for(var d=0;d<c.length;d+=1){var e= c[d],g=e[2],h=e[3];h&&this.h.cc&&(g=this.T.Fo(g,h),e.bd=g);g&&(a.bindBuffer(a.ARRAY_BUFFER,e[0]),a.vertexAttribPointer(this.Bf,2,a.FLOAT,!1,8,0),a.uniform4f(this.zn,g[0],g[1],g[2],g[3]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e[1]),a.drawElements(a.TRIANGLES,e.De,a.UNSIGNED_SHORT,0))}}},jJ:function(a,b){var c=this.q.ja?this.jb:this.dp,d;for(d in b)if(b.hasOwnProperty(d)){for(var e=b[d],g=0;g<e.length;g+=1){var h=e[g],k=h[2],l=k[4],m=k[10];m&&this.h.cc&&(l=this.T.Fj(l,m,0),h.bd=l);if(l){m="square"===h[2][9]? 3:"round"===h[2][9]?4:2;a.uniform1i(this.ak,m);var n=this.aw(k)[1];n&&(this.Fm(h.dk*this.mp),a.bindBuffer(a.ARRAY_BUFFER,h[0]),a.vertexAttribPointer(this.Bf,2,a.FLOAT,!1,44,0),a.vertexAttribPointer(this.wj,3,a.FLOAT,!1,44,8),a.vertexAttribPointer(this.vj,3,a.FLOAT,!1,44,20),a.vertexAttribPointer(this.ph,3,a.FLOAT,!1,44,32),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,h[1]),h=h.De,a.uniform1f(this.jz,n*c),a.uniform4f(this.zn,l[0],l[1],l[2],l[3]),this.Em(k[5]?1:0,k[5],0),a.drawElements(a.TRIANGLES,h,a.UNSIGNED_SHORT, 0))}}for(g=0;g<e.length;g+=1)if(h=e[g],k=h[2],l=this.aw(k)[0])n=k[1],(m=k[10])&&this.h.cc&&(n=this.T.Fj(n,m,1),h.bd=n),n&&(m="square"===h[2][8]?3:"round"===h[2][8]?4:2,a.uniform1i(this.ak,m),this.Fm(h.dk*this.mp),a.bindBuffer(a.ARRAY_BUFFER,h[0]),a.vertexAttribPointer(this.Bf,2,a.FLOAT,!1,44,0),a.vertexAttribPointer(this.wj,3,a.FLOAT,!1,44,8),a.vertexAttribPointer(this.vj,3,a.FLOAT,!1,44,20),a.vertexAttribPointer(this.ph,3,a.FLOAT,!1,44,32),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,h[1]),h=h.De,a.uniform1f(this.jz, l*c),a.uniform4f(this.zn,n[0],n[1],n[2],n[3]),this.Em(k[2]?1:0,k[2],k[6]?1:0),a.drawElements(a.TRIANGLES,h,a.UNSIGNED_SHORT,0))}},Wc:new f.G(215440491,106744817),ip:function(a,b,c){if(a.length){this.ec+=1;b=this.Qa.width;c=this.Qa.height;var d=this.Ka;b=(new f.ge).FY(-b/2,b/2,c/2,-c/2,0);c=Math.pow(2,this.zoom-this.Ei)*(this.q.ja?this.jb:this.dp);c=(new f.ge).scale(c,c,1);var e=this.eb.vc(this.S/Math.pow(2,this.Ei-this.zoom)).Va(this.Wc),e=(new f.ge).translate(-e.x,-e.y,0);d.uniformMatrix4fv(this.CZ, !1,b.elements);d.uniformMatrix4fv(this.FZ,!1,c.elements);d.uniformMatrix4fv(this.BZ,!1,e.elements);d.uniform1f(this.XM,Math.pow(2,this.zoom-this.Ei)*(this.q.ja?this.jb:1));b=this.pm=[];for(c=a.length-1;0<=c;c-=1){e=a[c];d.disableVertexAttribArray(this.wj);d.disableVertexAttribArray(this.vj);d.disableVertexAttribArray(this.ph);d.disableVertexAttribArray(this.pt);this.Em(0,void 0,void 0);d.uniform1i(this.ak,0);this.Fm(0);for(var g=0,h=e.length;g<h;g+=1){var k=e[g];e[g].Pa&&(k.ec=this.ec,b.push(k),this.iJ(d, k))}d.enableVertexAttribArray(this.wj);d.enableVertexAttribArray(this.vj);d.enableVertexAttribArray(this.ph);d.disableVertexAttribArray(this.pt);if(e.length){for(var l={},g=0,h=e.length;g<h;g+=1){var k=e[g],m=k.Pa.road;if(m)for(var n in m)if(m.hasOwnProperty(n)){l[n]||(l[n]=[]);for(var p=0,q=m[n].length;p<q;p+=1)m[n][p].dk=k.Pa.Nm,l[n].push(m[n][p])}}this.jJ(d,l,e[0].ma.z)}if(!(14>this.zoom))for(d.uniform1i(this.ak,1),this.Em(0,void 0,void 0),d.disableVertexAttribArray(this.wj),d.disableVertexAttribArray(this.vj), d.disableVertexAttribArray(this.ph),d.enableVertexAttribArray(this.pt),g=0,h=e.length;g<h;g+=1)k=e[g],k.Pa.building&&this.sC(d,k)}}},sC:function(a,b){for(var c=b.Pa.building,d=0;d<c.length;d+=1){var e=c[d],g=e[3][0],h=e[3][1];if(!e||!g)break;var k=e[3][2];k&&this.h.cc&&(h=this.T.Oq(g,h,k),g=h[0],h=h[1],e.bd=g);if(g||h)g||(g=[0,0,0,0]),h||(h=[0,0,0,0]),a.uniform4f(this.NM,g[0],g[1],g[2],g[3]),a.uniform4f(this.zn,h[0],h[1],h[2],h[3]),e.py&&(a.bindBuffer(a.ARRAY_BUFFER,e[0]),a.vertexAttribPointer(this.Bf, 2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.pt,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,e.py)),e.qy&&(a.bindBuffer(a.ARRAY_BUFFER,e[2]),a.vertexAttribPointer(this.Bf,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.pt,1,a.FLOAT,!1,12,8),a.drawArrays(a.LINES,0,e.qy)),e.lD&&(a.bindBuffer(a.ARRAY_BUFFER,e[1]),a.vertexAttribPointer(this.Bf,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.pt,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,e.lD))}},Em:function(a,b,c){var d=this.Ka;a!==this.cn&&(d.uniform1i(this.SM, a),this.cn=a);a&&b!==this.Bt&&(this.Bt=b,d.uniform4f(this.PM,b[0],b[1],b[2]||0,b[3]||0));c!==this.qu&&(d.uniform1i(this.TM,c),this.qu=c)},Fm:function(a){a!==this.dk&&(this.Ka.uniform1f(this.$M,a),this.dk=a)},Ne:function(){this.transform={translate:{x:this.Qa.width/2,y:this.Qa.height/2},scale:this.q.ja?1/this.jb:1/this.dp,rotate:0}},cI:function(a,b,c){var d=null;if(a.length&&c)d=a[11].id+"-"+c,this.lg[d]&&(a[0]=this.lg[d][0],a[3]=this.lg[d][3]);else return c=[],b&&b[0]&&(c=b[0].split("&")),(b=c[2])&& 0===b.indexOf("railway")?(a[0]=1,a[3]=3):a[0]=parseInt(c[0])||0,c[3]&&c[4]&&3<c.length?(a[3]=a[0]+parseInt(c[3]),0===f.a.indexOf(c[5],"dash")&&(a[3]+=1)):a[3]=0,d&&void 0===this.lg[d]&&(this.lg[d]=[a[0],0,0,a[3]]),a},aw:function(a){function b(a,b,c){var d;a&&b?d=a+c%1*(b-a):0===a&&b?d=Math.max(0,c%1-0.5)/0.5*b:0===a&&0===b?d=0:0!==a&&0===b&&(d=0);return f.a.Pc(d,3)}var c=a[11].browserStyle,d=a[11].levelStyleMapping;if(18<this.zoom){var e=this.xi(a,18,c,d);a=Math.pow(2,this.zoom-18);return[e[0]*a, e[3]*a]}if(f.a.eW(this.zoom))return e=this.xi(a,this.zoom,c,d),[e[0],e[3]];e=this.xi(a,Math.floor(this.zoom),c,d);c=this.xi(a,Math.ceil(this.zoom),c,d);a=b(e[0],c[0],this.zoom);e=b(e[3],c[3],this.zoom);return[a,e]},xi:function(a,b,c,d){a=a[11].id+"-"+b;this.lg[a]||(this.lg[a]=this.cI([],c[d[b]]));return this.lg[a]}});f.Q.of.Vc.uo=0; ')

_jsload_('AMap.CustomLayer', 'w.w.ej=w.w.oc.extend({F:{visible:!0,opacity:1,zIndex:11,zooms:[3,20],alwaysRender:!1},B:function(a,b){this.CLASS_NAME=this.CLASS_NAME||"AMap.CustomLayer";f.e.cb(this.CLASS_NAME,b);this.Jg=f.j.create("div",null,"amap-e");a&&(this.Jg.appendChild(a),a.className="amap-custom");f.a.Bb(this,b);this.zg(this.F)},setOpacity:function(a){f.e.add(this.CLASS_NAME,"setOpacity");this.Jg&&f.j.un(this.Jg,a);this.set("opacity",a,!0)},getContainer:function(){f.e.add(this.CLASS_NAME,"getContainer");return this.Jg},show:function(){f.e.add(this.CLASS_NAME, "show");this.set("visible",!0)},hide:function(){f.e.add(this.CLASS_NAME,"hide");this.set("visible",!1)},setzIndex:function(a){f.e.add(this.CLASS_NAME,"setzIndex");this.set("zIndex",a,!0);this.Jg&&(this.Jg.style.zIndex=a)},og:function(a){this.get("map")||this.set("map",a.J,!0);return new f.w.ej(this,a)}});window.AMap.CustomLayer=w.w.ej; w.w.is=w.w.ej.extend({B:function(a,b){this.CLASS_NAME=this.CLASS_NAME||"AMap.GLCustomLayer";arguments.callee.oa.apply(this,arguments)},setzIndex:function(a){f.e.add(this.CLASS_NAME,"setzIndex");this.set("zIndex",a)},og:function(a){this.get("map")||this.set("map",a.J,!0);return new f.w.is(this,a)},setMap:function(a){f.e.add(this.CLASS_NAME,"setMap");var b=this.get("map");a?(b&&a!==b&&b.Tj(this),"3D"===a.view.type&&this.set("map",a)):b&&(b.Tj(this),this.set("map",null,!0),this.Fi=!1,this.bg&&this.bg())}}); window.AMap.GLCustomLayer=w.w.is;f.w.ej=f.w.oc.extend({B:function(a,b){this.ia=a;this.Ni=!0;this.Lz=f.a.Lb(this);a&&this.he("opacity visible zIndex zooms container alwaysRender".split(" "),a);this.h=b;this.X("display",b)},Wm:function(){return{visible:this.get("visible"),zIndex:this.get("zIndex"),ed:this.get("zooms"),opacity:this.get("opacity"),K:this.get("container"),ax:this.get("alwaysRender")}},oV:function(){return this.ia.render},vl:function(a){if(f.Q.ej)return new f.Q.ej(this,a)}}); f.w.is=f.w.ej.extend({vl:function(){return null},wl:function(a){if(f.Ja.is)return new f.Ja.is(this,a)}});f.Q.ej=f.Q.oc.extend({$h:function(){return this.q.get("container")},fc:function(a,b){if(this.q){var c=a.W.eb;if(this.ra&&!this.q.ia.Zr){if(this.ra===c&&this.qe===a.W.zoom&&!this.h.Jr)return;if(!b.ax&&(a.Hf||a.Pe)){if(!f.j.rf&&a.Pe){b.K.style.visibility="hidden";return}var c=Math.pow(2,a.W.zoom-this.qe),d=a.W.eb.Va(this.ra);d.x<-f.a.fb/2&&(d.x+=f.a.fb);d.x>f.a.fb/2&&(d.x-=f.a.fb);d=d.vc(this.ii);1!==c&&(b.K.style[f.j.rf]="scale3d("+c+","+c+",1)");b.K.style.top=-d.y*c+"px";b.K.style.left=-d.x*c+"px"; return}}(d=this.q.oV())&&d.call(this.q.ia,a);this.q.wa||(this.q.wa=!0,f.a.nc(function(){this.q&&(this.q.$c?this.q.ha("renderComplete"):(this.q.$c=!0,this.q.ha("complete")))},this));this.ra=c;this.ii=a.W.S;this.qe=a.W.zoom;b.K.style.zIndex=b.zIndex;b.K.style[f.j.rf]="";b.K.style.top="";b.K.style.left="";b.K.style.height="";b.K.style.visibility="";f.j.un(b.K,b.opacity)}}}); ')

_jsload_('Map3D', 'f.Kz=function(a,b,c){this.path=a;this.xY=b;this.height=c};f.Kz.prototype={Ab:function(){return new f.Kz(this.path,this.xY,this.height)}};f.Pb.ob({rR:function(a){this.RK(a);this.gq();this.Ng=!0;a.Ad&&(this.R.Ht=a.Ad.x,this.R.zx=a.Ad.y);this.R.cJ=a.ub.x;this.R.dJ=a.ub.y;this.Qd&&(this.Qd.stop(),this.Co(!0));this.ha("dragstart");this.ha("movestart");this.r("movestart",a)},nR:function(a){if(2!=a.button&&!a.ctrlKey&&!a.shiftKey||this.k6(a)){var b=this.R;if(void 0!==b.Ht){if(!a.Ad)return;var c=a.Ad.x-b.Ht;a=a.Ad.y-b.zx;this.CS(c,a);b=this.get("centerCoords").Va(new f.G(c,a)).toFixed(3);this.set("centerCoords",b);this.er&&(this.Sf?(b=new Date, this.Ss=100<b-this.Sf?new f.G(0,0):new f.G(c,a),this.Sf=b):this.Sf=new Date)}else a.Ad&&(this.R.Ht=a.Ad.x,this.R.zx=a.Ad.y);this.ha("dragging");this.ha("mapmove")}},pR:function(){this.Tr();this.gq();100<new Date-this.Sf&&(this.Ss=null);this.R.Ff=null;this.Ng=!1;this.ha("dragend");if(this.er&&this.Ss)if(this.R.hg){var a=this.Ss,b=new f.G(0,0);a.x>=f.a.fb?a.x-=f.a.fb:a.x<=-f.a.fb&&(a.x+=f.a.fb);this.Qd=new f.pi(a,b,function(a,b,e){return 600<=e?b:a.Sc(1-Math.pow(e/600,1.5))},1);this.Qd.kn=function(a){2> Math.abs(a.x)&&2>Math.abs(a.y)?(this.Qd.stop(),this.r("moveend"),this.Co(),this.Ss=this.Sf=null):(a=this.get("centerCoords").Va(a).toFixed(3),this.set("centerCoords",a),this.ha("mapmove"))};this.Qd.Xk(this)}else this.r("moveend"),this.Co(!0),this.Ss=this.Sf=null;else this.r("moveend"),this.Co(),this.Ss=this.Sf=null},k6:function(a){var b=this.get("rotateEnable"),c=this.get("pitchEnable");if(b||c){var d=this.get("size"),e=a.ub.y-this.R.dJ;if(Math.abs(a.ub.x-this.R.cJ)<Math.abs(e)&&c)this.set("pitch", 90*e/d.height+this.get("pitch"));else if(b){var b=this.R.cJ-d.width/2,c=this.R.dJ-d.height/2,e=a.ub.x-d.width/2,d=a.ub.y-d.height/2,g=Math.acos((b*e+c*d)/(Math.sqrt(b*b+c*c)*Math.sqrt(e*e+d*d)));0>b*d-e*c&&(g=-g);this.set("rotation",(g/Math.PI*180+this.get("rotation"))%360)}else return!0;this.R.cJ=a.ub.x;this.R.dJ=a.ub.y}else return!0}});f.w.ej.ob({wl:function(a){return new f.Ja.ej(this,a)}});f.w.Wa.ob({wl:function(a){return new f.Ja.ri(this,a)}});f.w.Vc.ob({wl:function(a){var b=this;if(!this.h.cc||this.h.cc&&f.gb.ay(["wgl2"]))return new f.Ja.Vc(b,a);f.gb.load("wgl2",function(){b.set("display")})}}); f.w.Lh.ob({wl:function(a){var b=this,c;if(this.rK())return this.$u=!0,f.Q.canvas.cF&&(this.GT(),c=new f.Ja.A_(this,a),c.g("afterLabelRender",this.Ev,this)),c;b.$u=!1;if(f.Q.canvas.bF)return c=new f.Ja.B_(this,a),c.g("afterLabelRender",this.Ev,this),c;f.gb.$f(["cmng","labelcanvas"],function(){b.set("display")})}});f.Ja={Sd:{}}; f.Ja.Bz=f.ba.extend({ga:[f.ka,f.se],B:function(a){this.type="3D";this.NL=new f.XE;this.Aj={};this.df={};this.h=a;this.lj=a.lj;this.K=a.Oa.w;this.X("display",a);this.X("rotateEnable",a);this.X("hightlight",a);this.Ei=20;this.jb=Math.min(2,window.devicePixelRatio||1);this.dp=1;this.Qa=document.createElement("canvas");this.Qa.className="amap-layer";a.Oa.w.appendChild(this.Qa);this.UC();this.ul=256*Math.pow(2,18);this.xu={};this.Qy=new f.Ja.TN(this);this.rM=new f.Ja.a0(this);this.OE=new f.Ja.OE(this);this.ja= a.J.ja;this.X("style",a)},UC:function(){var a=this.Ka=this.Qa.getContext(f.l.NZ,f.l.OZ);if(a)f.C.g(this.Qa,"webglcontextlost",this.ty,this);else return console.error("create webgl failed!"),!1;a.enable(a.CULL_FACE);a.frontFace(a.CW);a.cullFace(a.BACK);a.clearColor(0,0,0,0);this.Iq||(this.Iq=[this.dU()]);return!0},XV:function(a,b){var c=this.NL,d=b.yd;if(d){d.oe||(d.oe=d.Nj());var e=new f.Ea(d.oe.If(a)),d=new f.Ea(d.oe.If(new f.fj(0,0,0,1))),e=e.sub(d).normalize();c.origin.copy(d);c.direction.copy(e); for(var e=b.kb,d=b.TV,g=new f.Ea,h=new f.Ea,k=new f.Ea,l=0,m=d.length;l<m;l+=3){var n=3*d[l],p=3*d[l+1],q=3*d[l+2];g.set(e[n],e[n+1],e[n+2]);h.set(e[p],e[p+1],e[p+2]);k.set(e[q],e[q+1],e[q+2]);if(c.$t(g,h,k))return b}}},nfa:function(a){var b=[],c=this.h.get("zoom");if(this.Qy.LC(c)){var d=this.XV(a,this.Qy);d&&b.push({type:d.Xy,color:f.RGBA.toString(d.bd)})}this.rM.LC(c)&&(a=this.XV(a,this.rM))&&b.push({type:a.Xy,color:f.RGBA.toString(a.bd)});return b},jL:function(a,b,c){this.qd=a||f.a.Cr(this.h.qd.slice(1)); this.FB=b||f.a.Cr(this.h.FB.slice(1));this.Mw=c||f.a.Cr(this.h.Mw.slice(1))},ty:function(){f.Q.of.Vc.uo+=1;this.set("reload");new f.Sa.bb(f.A.Qb+offlineMap.domain+"count?"+["type=glfail","c="+f.Q.of.Vc.uo,"crd="+f.l.eK,"k="+f.A.key,"u="+f.A.jo,"m="+(f.l.Z?1:0),"pf="+f.l.wr,"mode=3d","dpr="+window.devicePixelRatio,"scale="+(f.l.yE||0),"detect="+this.ja].join("&"))},tD:function(){f.l.MT=!1;f.l.bm=!1;this.q&&this.q.h.J&&(this.q.h.set("baseRender",f.l.xU?"dv":"d"),this.q.h.J.TK(),this.q.Q=null,this.q.ia.hp(), this.q=null);this.Qa=this.T=null},Sq:function(a,b,c,d){function e(a,d){a.length&&(h[f.a.indexOf(b,d)]=a);k-=1;0>=k&&(c(h),k=0)}for(var g=b.length,h=[],k=0,l,m=[],n=0;n<g;n+=1)if(l=b[n],l instanceof f.w.Gc&&l.get("visible")&&!l.eL&&(l=this.Vq(l)))m.push(l),k+=1;for(g=0;g<m.length;g+=1)m[g].Sq(a,e,d)},fc:function(a){var b=this.h.lC||this.h.qd;this.OL!==b&&this.h.J.Wg&&(this.h.zY(b),this.OL=b);var b=this.Ka,c=this.ja?this.jb:this.dp,d=a.size.width*c,c=a.size.height*c;if(d&&c){var e=this.h.J;e.DirectionLight&& (this.pda=(new f.Ea(e.DirectionLight.direction)).normalize().Ve(e.view.kp).Ve(e.view.ofa));this.Qa.width=d;this.Qa.height=c;this.Qa.style.width=a.size.width+"px";this.Qa.style.height=a.size.height+"px";b.viewport(0,0,this.Qa.width,this.Qa.height);b.clear(b.COLOR_BUFFER_BIT);d=a.W;c=a.Ya;11>d.zoom&&this.OE.fc(b,a);for(e=0;e<c.length;e+=1){var g=c[e].Wm(),h=c[e];if(!g.visible||c[e].eL||g.ed[0]>d.zoom||g.ed[1]<d.zoom)h.Ni&&h.get("container").parentNode===this.K&&this.K.removeChild(h.get("container")); else{var k=this.Vq(c[e]);k&&(h.Ni&&h.get("container").parentNode!==this.K&&this.K.appendChild(h.get("container")),k.fc(b,a,g))}}this.rM.fc(b,a);this.Qy.fc(b,a);a=this.h.Oa.w;b=this.h.Oa.D;this.h.Oa.no.style.cssText="";a.style.cssText="-webkit-transform: translateZ(0);";b.style.cssText="";this.h.Jr=!1}},Vq:function(a){if(!a.$l&&a.wl){var b=a.wl(this);b&&!b.gaa&&(a.$l=b)}return a.$l},dU:function(){var a=this.Ka,b=a.createTexture();a.bindTexture(a.TEXTURE_2D,b);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,1,1, 0,a.RGBA,a.UNSIGNED_BYTE,new Uint8Array([0,0,0,255]));var c=a.RGB,d=a.RGB,e=a.UNSIGNED_BYTE,g=new Uint8Array([0,0,0]);a.texImage2D(a.TEXTURE_2D,0,c,1,1,0,d,e,g);return b},HZ:function(a){this.Iq||(this.Iq=[this.dU()]);var b={},c;for(c in a)if(a.hasOwnProperty(c)&&a[c].hc)if(this.Aj[c]&&this.Aj[c].url===a[c].hc&&this.Aj[c].hc)b[c]=this.Aj[c];else{b[c]={url:a[c].hc};var d=this;this.FW(c,a[c].hc,function(a,c,h,k){b[a].hc=c;b[a].width=h;b[a].height=k;d.set("display")},function(a){delete b[a]})}this.Aj= b},bD:function(a){for(var b=2;b!==a&&b<a;)b*=2;return b==a?!0:!1},FW:function(a,b,c,d,e){var g=document.createElement("img");g.crossOrigin="anonymous";g.src=b;var h=this;g.onload=function(){if(16>g.width||16>g.height||!h.bD(g.width)||!h.bD(g.height))d(a);else{var b=h.createTexture(g,e);c(a,b,g.width,g.height)}}},createTexture:function(a,b){var c=this.Ka,d=c.createTexture();c.bindTexture(c.TEXTURE_2D,d);c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE, a);c.generateMipmap(c.TEXTURE_2D);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,b?c.MIRRORED_REPEAT:c.REPEAT);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,b?c.MIRRORED_REPEAT:c.REPEAT);return d}});f.Ja.Bz.ob(f.iU);f.Ja.oc=f.ba.extend({ga:[f.ka,f.se],YV:!0,B:function(a,b){this.q=a;this.T=b;this.h=b.h;this.Fh=a.ia.Fh;this.X("display",a);this.ida||this.createProgram()},Et:function(){this.nu&&this.nu();this.vp();this.La=this.h=this.T=this.q=null},qba:"varying highp float w;",rba:"w = gl_Position.w;",oba:"varying highp float w;uniform vec2 fog;uniform vec4 fogColor;uniform float _opacity;",pba:"float depth = gl_FragCoord.z * w;highp float fogFactor = smoothstep( fog.x, fog.y, depth );gl_FragColor.w*=(1.0-fogFactor)*_opacity;", Eea:"uniform float _opacity;",Fea:"gl_FragColor=vec4(gl_FragColor.rgb,gl_FragColor.a*_opacity);",mT:function(a,b,c,d){var e="",g="",h=this.Eea,k=this.Fea;d&&(k=h="");(c||this).Th&&(e=this.qba,g=this.rba,h=this.oba,k=this.pba,a=a.replace("void main",e+"void main"),a=a.substr(0,a.lastIndexOf("}"))+g+"}");b=b.replace("void main",h+"void main");b=b.substr(0,b.lastIndexOf("}"))+k+"}";return[a,b]},createProgram:function(){var a;a="custom"===this.type?this.q.ia.get("type"):this.type;if(!this.T.xu[a]){var b= this.T.Ka,c=this.dj||this.q.ia.get("vertexShader"),d=this.le||this.q.ia.get("fragmentShader");if(c&&d&&(c=this.mT(c,d),c=f.ev.createProgram(b,c[0],c[1]))){this.T.xu[a]=c;c.iz=b.getUniformLocation(c,"u_projectionMatrix");c.hz=b.getUniformLocation(c,"u_modelViewMatrix");var e,g;this.q&&this.q.ia.getWebGLVariableLoaction?(g=this.q.ia,e=g.getWebGLVariableLoaction):this.Ah&&(g=this,e=this.Ah);this.Th&&(c.RM=b.getUniformLocation(c,"fog"),c.QM=b.getUniformLocation(c,"fogColor"));c.fz=b.getUniformLocation(c, "_opacity");e&&(b=this.T.Ka,e.call(g,b,c))}}this.La=this.T.xu[a]},fc:function(a,b,c){var d=this.La;if(!d)return!1;a.useProgram(d);b=b.W;this.Aa=b.Aa;d.iz&&a.uniformMatrix4fv(d.iz,!1,b.Zg.elements);d.hz&&a.uniformMatrix4fv(d.hz,!1,b.yd.elements);c=parseFloat((c||{}).opacity);isNaN(c)&&(c=1);a.uniform1f(d.fz,c);if(0>=c)return!1;1>c&&(a.enable(a.BLEND),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA));this.Th&&(c=this.h.J.view.ul*(1+1.1*Math.cos(b.pitch*Math.PI/180)), a.uniform2f(d.RM,0.9*c,1.5*c),c=this.T.Qy.Ry,a.uniform4f(d.QM,c[0],c[1],c[2],1));return!0},cca:function(a){var b=-Infinity,c=Infinity,d=-Infinity,e=Infinity;a.forEach(function(a){a[0]>b&&(b=a[0]);a[1]>d&&(d=a[1]);a[0]<c&&(c=a[0]);a[1]<e&&(e=a[1])});return[c,e,b,d]},Sq:function(a,b){var c=[],d=this.q;if(this.Aa&&a){var e=[a.x,a.y],g=this.q.h.J.view.Je(a);if(d.Ik){for(var h=d.Jf,k=!0,l=[],m=0;m<h.length;m+=1){var n=h[m].pg;if(n)if(n.parentNode&&n.parentNode.parentNode&&this.T&&n.parentNode.parentNode!== this.T.lj&&"none"!==n.parentNode.style.display){var p=f.j.Hx(n),n=p[0],p=p[1];n&&p?(Math.max(Math.abs(h[m].get("offset").x),Math.abs(h[m].get("offset").y)),Math.max(n,p),d.Fe=Math.max(d.Fe,n),d.af=Math.max(d.af,p),h[m].width=n,h[m].height=p):(k=!1,l.push(h[m]))}else k=!1,l.push(h[m])}k?(d.Ik=!1,d.Jf=[]):d.Jf=l}h=this.cca(this.Aa.path);if(h=d.Li(h)){for(var q in h)if(h.hasOwnProperty(q)&&(k=h[q],k.get("visible")&&!k.get("noSelect")))if(l=k.Y,l instanceof f.pa.Qf)if(this.Fh){m=this.q.Yj;m instanceof Array&&(m="number"===typeof k.Ra.style&&m[k.Ra.style]?m[k.Ra.style]:m[0]);var r=m.size.width*this.S,s=m.size.height*this.S,u=m.anchor.x*this.S,v=m.anchor.y*this.S,m=f.H.vI([[e[0]-r+u,e[1]-s+v],[e[0]+u,e[1]+v]]);f.H.md(m,l.Na)&&c.push(k)}else"undefined"!==typeof l.get("radius")?(m=l.Na,n=k.get("deltaPos")||[0,0],p={x:m[0],y:m[1]},k.fr?(p.x+=n[0],p.y+=n[1],this.h.J.Je(p).Md(g)<l.get("radius")+l.get("strokeWeight")&&c.push(k)):(p=this.h.J.de(p),l=l.get("radius")/(this.h.J.view.getResolution(20)*Math.cos(p.P* Math.PI/180)),Math.sqrt(Math.pow(m[0]-a.x+n[0],2)+Math.pow(m[1]-a.y+n[1],2))<=l&&c.push(k))):(m=k.get("params"),m.visible&&(l=l.Na,n=new f.G(l[0],l[1]),n=this.q.h.J.view.Je(n),r=k.width,s=k.height,u=m.offset.x,v=m.offset.y,p=null,p=function(a,b){var c=Math.round(a.x+u),d=Math.round(a.x+u+r),e=Math.round(a.y+v+s),g=Math.round(a.y+v),h=Math.round(b.x),k=Math.round(b.y);return h<=d&&h>=c&&k<=e&&k>=g?!0:!1},p=m.shape?this.$x(k,g,n):p(n,g),l[0]instanceof Array||(l=[l]),p&&c.push(k)));else l.md?(n=k.get("deltaPos")|| [0,0],l.md([a.x-n[0],a.y-n[1]])&&c.push(k)):l.Gt&&(n=k.get("deltaPos")||[0,0],1.8*l.Gt([a.x-n[0],a.y-n[1]])<=k.get("strokeWeight")*this.S&&c.push(k));this.Fh?c.sort(function(a,b){return a.Ej>b.Ej?-1:1}):c.sort(function(a,b){return a.get("isTop")?-1:b.get("isTop")?1:a.get("zIndex")>b.get("zIndex")||a.get("zIndex")===b.get("zIndex")&&a.Ej>b.Ej?-1:1});b(c,d)}else b([],d)}else b(c,d)},$x:function(a,b,c){var d=a.get("params").shape,e=a.pg.children[0].clientWidth;a=a.pg.children[0].clientHeight;if("circle"=== d.F.type){if(e=c.x-e/2+d.F.coords[0],c=c.y-a+d.F.coords[1],Math.sqrt((b.x-e)*(b.x-e)+(b.y-c)*(b.y-c))<=d.F.coords[2])return!0}else{if("poly"===d.F.type)return b=[b.x,b.y],d=d.F.coords,d=this.$B(d),f.Mc.md(b,d);if("rect"===d.F.type){d=d.F.coords;c=d[0];e=d[1];a=d[3];var g=b.x;b=b.y;if(g<d[2]&&g>c&&b>a&&b<e)return!0}}return!1},$B:function(a){for(var b=[],c=0;c/2<a.length/2;c+=2)b.push([a[c],a[c+1]]);return b}});f.Ja.ej=f.Ja.oc.extend({B:function(a,b){arguments.callee.oa.apply(this,arguments);a.xb=a.get("container")},fc:function(a,b,c){if(this.q){var d=b.W.eb;if(!this.ra||this.q.ia.Zr||!this.ra.rb(d)||this.qe!==b.W.zoom||this.Tfa!==b.W.rotation||this.Sfa!==b.W.pitch||this.h.Jr){var e=this.q.oV();e&&e.call(this.q.ia,b,a);this.q.wa||(this.q.wa=!0,f.a.nc(function(){this.q&&(this.q.$c?this.q.ha("renderComplete"):(this.q.$c=!0,this.q.ha("complete")))},this));this.ra=d;this.qe=b.W.zoom;this.Tfa=b.W.rotation;this.Sfa= b.W.pitch;c.K.style.zIndex=c.zIndex;c.K.style.top="";c.K.style.left="";c.K.style.height="";c.K.style.display=c.visible?"":"none";f.j.un(c.K,c.opacity);this.h.Oa.w.appendChild(c.K)}}}});f.Ja.is=f.Ja.oc.extend({ga:[f.ka,f.se],B:function(a,b){this.type="custom";arguments.callee.oa.apply(this,arguments)},fc:function(a,b){arguments.callee.oa.apply(this,arguments);if(this.q.ia.onRender)this.q.ia.onRender(a,this.La);this.q.ia.renderAgain&&(this.set("display"),this.q.ia.renderAgain=!1);this.q.wa||(this.q.wa=!0,f.a.nc(function(){this.q&&(this.q.$c?this.q.ha("renderComplete"):(this.q.$c=!0,this.q.ha("complete")))},this))}});f.Ja.qv=f.Ja.oc.extend({B:function(a,b){arguments.callee.oa.apply(this,arguments);this.X("reload",a,!0);var c=this.FM||f.l.size;if(this.h&&this.h.J){var d=this.h.J.get("tileCacheSize");d&&0<d&&(c=d)}this.xa=new f.ff(c);this.yi=!1;var e=this;this.xa.kL.lT(function(a){e.Pv(a)});this.ec=1;this.mm=50;this.sO=!0;this.q.xa=this.xa;this.Lj=new f.vz(6,null,a.tJ);this.Ce=a.Ce;this.Sl=a.Sl},nu:function(){this.clear();this.xa.clear()},reloadChanged:function(){this.q&&(this.q.wa=!1);this.xa.clear();this.reload= !0;this.set("display")},St:function(a,b){var c=a+"";return(b?this.xa.AD(c):this.xa.get(c))||new f.Wa(a.Ab())},bE:function(a,b){return this.ee*Math.pow(2,a-b)},Pv:function(a){a.Qo&&this.Lj.NT(a.Qo);a.OD=!1;a.loaded=!1;this.nC&&this.nC(a)},vt:function(a){for(var b=this.Ta,c=this.bE(20,b),d=0,e=0,g=Infinity,h=Infinity,k=[],l=0;l<a.length;l+=1){var m=a[l],n=m[0]/c,m=m[1]/c;k.push([n,m]);d=Math.max(d,n);e=Math.max(e,m);g=Math.min(g,n);h=Math.min(h,m)}k.push(k[0]);d=Math.floor(d);e=Math.min(Math.pow(2, b)-1,Math.floor(e));g=Math.floor(g);h=Math.max(0,Math.floor(h));a=[];for(l=g;l<=d;l+=1)for(c=h;c<=e;c+=1)(n=f.Mc.FX(k,[[l,c],[l+1,c],[l+1,c+1],[l,c+1],[l,c]]))&&n.length&&a.push({x:l,y:c,z:b});a.NC=Math.ceil(d-g)/2;return a},dr:function(a,b,c){return b<a.pe||b>a.Td||c<a.xd||c>a.wd?!1:!0},Kr:function(a,b){if(a.length){var c=this.eb.vc(this.ee<<20-a[0].ma.z),d=Math.floor(c.x),e=Math.floor(c.y);a.sort(function(a,c){var k=a.ma,l=c.ma,m=k.x-d,k=k.y-e,n=l.x-d,l=l.y-e;return(b?-1:1)*(n*n+l*l-(m*m+k*k))})}}, clear:function(){this.Lj.clear()},Xl:function(a,b){this.ng=!1;b.Dl!==this.Dl&&(this.Dl=b.Dl,this.xa.clear());this.clear();this.Rh=b.Rh;this.Qh=b.Qh;this.ee=b.ee;var c=a.W;this.bf=b.bf||a.W.bf;this.qh=c.qh;this.size=a.size;this.rotation=c.rotation;this.eb=c.eb;this.Aa=a.W.Aa;this.zoom&&(this.pu=c.zoom>this.zoom?"in":c.zoom<this.zoom?"out":!1);this.Pe=a.Pe;this.Hf=a.Hf;this.zoom=c.zoom;this.ce=c.ce;this.Ta=!1===this.bi&&!this.q.PV&&this.q.ja?this.ce+1:this.ce;this.Ce&&this.Ta>this.Ce&&(this.Ta=this.Ce); this.Sl&&this.Ta<this.Sl&&(this.Ta=this.Sl);this.S=c.S;this.Ze=c.Ze;c=a.W.Aa;this.Kf=this.vt(c.path);this.em=c.EE?this.vt(c.EE):null;var c=this.Kf,d=this.Aa.fZ,e=null,e=d<this.zoom&&this.em?this.em:c,g=[],h=[],k,l=[],m=[],n=[],p=new f.hk(0,0,0),q,r=this.zoom,m=this.pm||[],s={},u={},v,x,t,y,A,z;this.Lc=1E6*Math.random()<<0;for(q=m.length-1;0<=q;q-=1)if(k=m[q],!(k.ws<b.opacity))if(p.z=k.ma.z,p.x=k.ma.x,p.y=k.ma.y,p.z===this.Ta)s[p+""]|=16;else if(p.z<this.Ta){if(s[p+""]|=64,this.Rh)for(y=this.Ta-p.z, v=Math.max(c.pe,p.x<<y),r=Math.min(c.Td,(p.x+1<<y)-1),x=Math.max(c.xd,p.y<<y),t=Math.min(c.wd,(p.y+1<<y)-1),p.z=this.Ta,y=v;y<=r;y+=1)for(p.x=y,A=x;A<=t;A+=1)p.y=A,z=p+"",s[z]|=32,u[z]=u[z]?Math.max(k.ma.z,u[z]):k.ma.z}else if(this.Qh)for(k=1;p.z>=this.Ta;){s[p+""]|=k;v=p.x>>1;x=p.y>>1;r=v<<1;t=x<<1;k=0;for(y=2;0<y;y-=1)for(p.x=r+y,A=2;0<A;A-=1)p.y=t+A,s[p+""]&5&&(k+=1);p.z-=1;p.x=v;p.y=x;k=4===k?4:2}m=[];p.z=this.Ta;q=!0;this.xa.UT();for(r=0;r<e.length;r+=1)p.x=e[r].x,p.y=e[r].y,this.xa.GW(""+p), k=this.St(p),v=!1,k.qa?(k.Lc=this.Lc,this.dr(c,y,A)&&(m.push(k),this.ij&&(k.ec!==this.ec||1>k.ws)&&(v=!0))):(q=!1,this.dr(c,y,A)&&(v=!0),k.status||"3D"!=this.T.type&&this.ce!==d||this.em&&!this.dr(this.em,y,A)||l.push(k)),v&&n.push(k);q?this.Cx||(this.Cx=!0,this.q.wa||(A={key:"rb",index:1,id:this.h.J.id},this.q.ai&&(A.key="rl"),this.q.ia.gi||(f.Zd.te.end(A),f.Zd.te.push({key:"ftc",Dn:m.length,id:this.h.J.id})))):this.q.wa=!1;this.ng=q;m.length&&this.Cx&&(g.push(m),m.ng=q);h.push(l);l=!1;if(this.Qh){n= n.slice(0);e=[];for(q=n.length-1;0<=q;q-=1)k=n[q],s[k.key]&4||e.push(k);t=b.ed[1];for(r=this.Ta+1;n.length&&r<=t;r+=1){m=[];d=n;n=[];p.z=r;for(q=d.length-1;0<=q;q-=1)if(A=d[q],k=s[A.key],k&7)for(v=A.ma.x<<1,x=A.ma.y<<1,y=1;0<=y;y-=1)for(p.x=v+y,A=1;0<=A;A-=1)p.y=x+A,z=p+"",k=this.xa.AD(z),s[z]&5&&k&&k.qa?(k.tw=!0,k.Lc=this.Lc,m.push(k)):n.push(new f.Wa(p.Ab(),""));m.length&&(l=!0,g.push(m))}n=e}if(!l&&this.Rh)for(A=!g.length||this.Gh?b.ed[0]:Math.max(b.ed[0],this.Ta-2),y=Math.max(A,this.Ta-this.V4), r=this.Ta-1;n.length&&r>=A;r-=1){x=r>=y;l=[];m=[];e={};d=n;n=[];for(q=d.length-1;0<=q;q-=1)k=d[q],p.z=r,p.x=k.ma.x>>1,p.y=k.ma.y>>1,k=this.St(p,!x),e[k.key]||(e[k.key]=1,v=!1,k.qa&&(!this.W6||s[k.key]&64)?(p.x=Math.min(c.Td,Math.max(c.pe,p.x<<this.Ta-r)),p.y=Math.min(c.wd,Math.max(c.xd,p.y<<this.Ta-r)),p.z=this.Ta,z=p+"","number"===typeof u[z]&&k.ma.z>u[z]?v=!0:k.tw=!0,k.Lc=this.Lc,m.push(k)):v=!0,v&&n.push(k));m.length&&g.push(m);x&&l.length&&h.push(l)}this.kr=this.fn=0;this.LL(a,b);a.Pe||this.Pk(h); this.bj=g;this.q&&this.q.set("tiles",g)},QI:function(a){var b=a.Bl,b=void 0===b?{}:b,c=a.as,c=void 0===c?0:c;a=a.op;a=void 0===a?0:a;var d=Math.pow(2,c),e=this.Kf,g=e[e.length-1],c=this.yi&&(!c||!a);return{pe:Math.floor(e[0].x*d)-(!c||b.left?a:0),Td:Math.ceil(g.x*d)+(!c||b.right?a:0),xd:Math.floor(e[0].y*d)-(!c||b.Yu?a:0),wd:Math.ceil(g.y*d)+(!c||b.rC?a:0)}},Lx:function(a){var b=this,c=a.op,d=void 0===c?0:c,c=a.as,e=void 0===c?0:c,c=a.mode,g=void 0===c?0:c,h=[],k=this.QI({Bl:a.Bl,as:e,op:d});a=function(){var a= void 0;switch(g){case 0:a=function(a,c){if(0<=a&&0<=c&&(a<k.pe+d||c<k.xd+d||a>k.Td-k||c>k.wd-k)){var g=new f.hk(b.Ta+e,a,c);b.xa.Bc(g.toString())||h.push(new f.Wa(g,!0))}};break;default:a=function(a,c){var d=new f.hk(b.Ta+e,a,c);b.xa.Bc(d.toString())||h.push(new f.Wa(d,!0))}}return a}();for(c=k.pe;c<=k.Td;c++)for(var l=k.xd;l<=k.wd;l++)a(c,l);return h},BF:function(){var a=this.h.J;return!!(a.HX&&a.get("preloadMode")&&0===a.get("pitch")&&200<=this.xa.ml&&this.q.ia.gr())},LL:function(a,b){var c=a.Bl, d=a.Hc,e=a.W,g=b.ed;if(this.BF()){if(d||!this.yi)c=this.Lx({Bl:c,op:this.yi?2:1}),c.length&&this.Pk([c],!0);this.Ta>=g[0]+2&&("out"===this.pu||!this.yi)&&(e=this.Lx({as:this.yi?-2:-1,op:this.Ta===e.zoom?1:0,mode:1}),e.length&&this.Pk([e],!0));this.yi=!0}}});f.Ja.ija=f.Ja.qv.extend({type:"GridNet",dj:"precision highp float;attribute vec2 position;uniform mat4 u_modelViewMatrix;uniform mat4 u_projectionMatrix;void main(void) {\\tvec4 pos = vec4(position.x,position.y, 0.0, 1.0);\\tgl_Position = u_projectionMatrix * u_modelViewMatrix * pos;}",le:"precision mediump float;void main(void) {\\tgl_FragColor =  vec4(0.0,0.7,1.0,1.0);}",Ah:function(a,b){b.pd=a.getAttribLocation(b,"position")},B:function(a){this.T=a;this.h=a.h;this.createProgram();a=f.l.size;if(this.h&& this.h.J){var b=this.h.J.get("tileCacheSize");b&&0<b&&(a=b)}this.xa=new f.ff(a);this.ee=256;this.q=new f.w.oc(new w.w.oc,this.h)},clear:function(){},TI:function(a){var b=this.T.Ka,c=a.ma,d=256*Math.pow(2,20-c.z),e=c.x*d-f.a.Wc.x,c=c.y*d-f.a.Wc.y,d=[e,c,e+d,c,e+d,c+d,e,c+d],e=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,e);b.bufferData(b.ARRAY_BUFFER,new Float32Array(d),b.STATIC_DRAW);a.ni=e},Ri:function(a){a.qa=!0;a.status="loaded";this.TI(a);a.loaded=!0;this.xa.set(a.key,a);a.qa=!0;a.Qo=null},Pk:function(a){for(var b= a.length-1;0<=b;b-=1){var c=a[b];if(c.length)for(var d=c.length-1;0<=d;d-=1)this.Ri(c[d])}},ld:function(){},fc:function(a,b){var c=this.La;arguments.callee.oa.apply(this,arguments);a.enableVertexAttribArray(c.pd);this.ek=b.ek;this.Hf=b.Hf;this.Xl(b,{ee:256});for(var d=this.bj,e=d.length-1;0<=e;e-=1){var g=d[e];if(g.length)for(var h=g.length-1;0<=h;h-=1)a.bindBuffer(a.ARRAY_BUFFER,g[h].ni),a.vertexAttribPointer(c.pd,2,a.FLOAT,!1,0,0),a.drawArrays(a.LINE_LOOP,0,4)}this.ld()}});f.Ja.ri=f.Ja.qv.extend({type:"tile",dj:"precision highp float;attribute vec4 position;uniform mat4 u_modelViewMatrix;uniform mat4 u_projectionMatrix;varying vec2 vTextureCoord;void main(void) {\\tvTextureCoord = position.zw;\\tvec4 pos = vec4(position.x,position.y, 0.0, 1.0);\\tgl_Position = u_projectionMatrix * u_modelViewMatrix * pos;}",le:"precision mediump float;uniform sampler2D texture;varying vec2 vTextureCoord;void main(void) {\\tvec4 smpColor = texture2D(texture, vTextureCoord);\\tgl_FragColor =  smpColor;}", Ah:function(a,b){b.pd=a.getAttribLocation(b,"position");b.np=a.getUniformLocation(b,"texture")},B:function(a,b){this.Th=!0;arguments.callee.oa.apply(this,arguments);this.mm=120;this.bi=!1;this.Ce=a.Ce},TI:function(a){var b=this.T.Ka,c=a.ma,d=Math.pow(2,20-c.z)*this.ee,e=c.x*d-f.a.Wc.x,c=c.y*d-f.a.Wc.y,d=[e,c,0,0,e+d,c,1,0,e+d,c+d,1,1,e,c,0,0,e+d,c+d,1,1,e,c+d,0,1],e=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,e);b.bufferData(b.ARRAY_BUFFER,new Float32Array(d),b.STATIC_DRAW);a.ni=e;d=b.createTexture(); b.bindTexture(b.TEXTURE_2D,d);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a.sc);b.generateMipmap(b.TEXTURE_2D);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.MIRRORED_REPEAT);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.MIRRORED_REPEAT);a.hE=d},nC:function(a){a.hE&&this.T.Ka.deleteTexture(a.hE);a.ni&&this.T.Ka.deleteBuffer(a.ni)},Ri:function(a,b,c){function d(b){a.loaded= !0;if(e.q){a.status="loaded";var d=a.qa=!0;"IMG"===b.tagName&&b&&0!==b.src.indexOf(window.location.origin)&&"anonymous"!==b.crossOrigin&&(console.warn&&console.warn("JSAPI warning - Image at "+b.src+\' should be load with property crossOrigin="anonymous" under viewMode 3D!\'),d=!1);d&&(a.sc=b,e.TI(a),e.set("display",0));"function"===typeof c&&c()}}var e=this;a.status="loading";e.xa.set(a.key,a);this.q.yt&&this.q.yt.call(this,a,d,function(){a.loaded=!0;e.q&&(a.status="loaded",a.qa=!0,e.set("display", 0),"function"===typeof c&&c())})},Pk:function(a){for(var b=a.length-1;0<=b;b-=1){var c=a[b];if(c.length){var d=this,e=function(){var a=c.length;return function(){if(0===--a){var b={key:"rb",index:0,id:d.T.h.J.id};d.q.ia.gi||(f.Zd.te.end(b),f.Zd.te.end(f.extend(b,{index:1})))}}}();this.Kr(c);this.fn+=c.length;for(var g=c.length-1;0<=g;g-=1)this.Ri(c[g],this.Lj,e)}}},ld:function(){if(this.ng&&!this.q.wa){var a=this.q;this.q.ia.gi||f.Zd.te.end({id:this.T.h.J.id,key:"rb",index:2});a.wa=!0;a.$c?a.ha("renderComplete"): (a.$c=!0,a.ha("complete"))}},fc:function(a,b,c){var d=this.La;this.ee=c.ee;arguments.callee.oa.apply(this,arguments);a.enableVertexAttribArray(d.pd);a.activeTexture(a.TEXTURE0);this.Xl(b,c);if(this.Th||"overlayer"===this.q.get("type"))a.enable(a.BLEND),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);for(var e=this.bj,g=[],h=e.length-1;0<=h;h-=1){var k=e[h];if(k.length)for(var l=k.length-1;0<=l;l-=1){var m=k[l];m.hE&&(g.push(m),a.bindTexture(a.TEXTURE_2D,m.hE),a.uniform1i(d.np, 0),a.bindBuffer(a.ARRAY_BUFFER,m.ni),a.vertexAttribPointer(d.pd,4,a.FLOAT,!1,0,0),a.drawArrays(a.TRIANGLES,0,6))}}a.disable(a.BLEND);a.disableVertexAttribArray(d.pd);this.ld();this.pm=g}});f.Ja.Vc=f.Ja.qv.extend({ga:[f.ps],type:"wbase",dj:"precision highp float;attribute vec4 a_Position;attribute vec2 a_uvs;varying vec2 vTextureCoord;attribute vec3 a_op,a_Next,a_Previous;uniform float u_xDelta,u_width;uniform lowp int u_type;uniform mat4 u_modelViewMatrix,u_projectionMatrix;uniform float u_scale;uniform float u_heightPercent;varying float v_distance;varying float v_height;varying vec2 v_op;varying float v_TB;varying highp float v_cap;void main() {vec4 position=a_Position;position.x+=u_xDelta;if (u_type==0) {\\tgl_Position=u_projectionMatrix*u_modelViewMatrix*position;\\tvTextureCoord = a_uvs;}else if(u_type>1) {\\tv_op=a_op.xy;\\tv_TB=a_op.z;\\tvec3 curPos=position.xyz;\\tv_distance=a_Next.z;\\tfloat ddis=0.0;\\tvec3 previous=vec3(a_Previous.x+u_xDelta,a_Previous.y,0);\\tvec3 next=vec3(a_Next.x+u_xDelta,a_Next.y,0);\\tvec4 up,dir;\\tv_distance *= u_scale;\\tif(previous==curPos){ \\t\\tdir= vec4(normalize(next-curPos).xy,0,0);\\t}else if(next==curPos){\\t\\tdir= -vec4(normalize(previous-curPos).xy,0,0);\\t}else {\\t\\tvec3 dir0=previous-curPos;\\t\\tvec3 dir1=next-curPos;\\t\\tvec3 dir2=normalize(dir0);\\t\\tvec3 dir3=normalize(dir1);\\t\\tfloat f0=dir0.x*dir1.y-dir1.x*dir0.y;\\t\\tdir = vec4(0); \\t\\tv_cap=1.0;\\t\\tif(f0==0.0){\\t\\t\\tup = vec4(dir3.y,-dir3.x,0,0); \\t\\t}else{\\t\\t\\tvec3 dir4=normalize(dir2+dir3);\\t\\t\\tfloat sinA=length(cross(dir4,dir2));\\t\\t\\tfloat cosA=dot(dir4,dir2);\\t\\t\\tif(sinA<0.5){\\t\\t\\t\\tsinA=0.5;\\t\\t\\t}\\t\\t\\tup= vec4(dir4,0)/sinA;\\t\\t\\tddis=abs(length(up)*cosA*u_width*0.5);\\t\\t\\tif(f0<0.0){\\t\\t\\t\\tup=-up;\\t\\t\\t\\tddis=-ddis;\\t\\t\\t}\\t\\t\\tv_distance += v_TB*a_Previous.z*ddis;\\t\\t}\\t}\\tif(previous==curPos||next==curPos){ \\t\\tup = vec4(dir.y,-dir.x,0,0); \\t\\tif(u_type==4){\\t\\t\\tv_cap=sqrt(v_TB*v_TB+a_Previous.z*a_Previous.z);\\t\\t}else if(u_type==3){\\t\\t\\tv_cap=1.0;\\t\\t}else{dir = vec4(0);}\\t}\\tposition=position+(up*v_TB-dir*a_Previous.z)*u_width*0.5/u_scale;\\tgl_Position=u_projectionMatrix*u_modelViewMatrix*position;}else if (u_type==1) {\\tfloat xielv = position.w;\\tposition=vec4(position.xy,position.z*u_heightPercent,1.0);\\tv_height = xielv;\\tgl_Position=u_projectionMatrix*u_modelViewMatrix*position;\\tvTextureCoord = a_uvs;}}", le:"#define BASE 1\\nprecision highp float;uniform vec4 u_FragColor,u_FragColor2;uniform sampler2D texture;uniform vec2 textureScale;varying vec2 vTextureCoord;varying lowp float v_distance,v_TB;varying float v_height;varying vec2 v_op;varying highp float v_cap;uniform lowp int u_type;uniform int u_isDash,u_onlyBorder;uniform vec4 u_dash;uniform float pitch;uniform int useTexture;void main() {vec4 color=u_FragColor;if (u_type==0) {\\tif (useTexture==1) {\\t\\tvec4 smpColor = texture2D(texture, vec2(vTextureCoord.x/textureScale.x,vTextureCoord.y/textureScale.y));\\t\\tcolor= vec4(smpColor.rgb*smpColor.a+color.rgb*(1.0-smpColor.a),color.a);\\t}}else if(u_type>1) {\\tif(v_op.x<-0.2||v_op.x>256.2||v_op.y<-0.2||v_op.y>256.2){discard;}\\tif(v_cap>1.0001){discard;}\\tif(u_isDash==1){\\t\\tfloat all = u_dash[0] + u_dash[1] + u_dash[2] + u_dash[3];\\t\\tfloat off = mod(v_distance*sqrt(pitch) - u_dash[0], all);\\t\\tif(off> u_dash[0]&&off<=(u_dash[0]+u_dash[1])||off>(all-u_dash[3])){discard;}}\\tif(u_onlyBorder==1&&v_TB<=0.7&&v_TB>=-0.7){discard;}}else if(u_type==1) {\\tcolor=vec4((u_FragColor2+(u_FragColor-u_FragColor2)*v_height).rgba);\\tif(useTexture==1&&vTextureCoord.x>-0.0) {\\t\\tvec4 smpColor = texture2D(texture, vec2(vTextureCoord.x*textureScale.x,vTextureCoord.y*textureScale.y));"+ (f.l.Z?"color= vec4(smpColor.rgb,color.a);":"color= vec4(smpColor.rgb*smpColor.a+color.rgb*(1.0-smpColor.a),color.a);")+"\\t}}gl_FragColor=color;}",Ah:function(a,b){b.$M=a.getUniformLocation(b,"u_xDelta");b.CZ=a.getUniformLocation(b,"u_othMatrix");b.FZ=a.getUniformLocation(b,"u_zoomMatrix");b.BZ=a.getUniformLocation(b,"u_modelMatrix");b.Bf=a.getAttribLocation(b,"a_Position");b.Qg=a.getAttribLocation(b,"a_uvs");b.wj=a.getAttribLocation(b,"a_op");b.vj=a.getAttribLocation(b,"a_Previous");b.ph=a.getAttribLocation(b, "a_Next");b.zn=a.getUniformLocation(b,"u_FragColor");b.NM=a.getUniformLocation(b,"u_FragColor2");b.nE=a.getUniformLocation(b,"texture");b.oE=a.getUniformLocation(b,"textureScale");b.ak=a.getUniformLocation(b,"u_type");b.jz=a.getUniformLocation(b,"u_width");b.SM=a.getUniformLocation(b,"u_isDash");b.TM=a.getUniformLocation(b,"u_onlyBorder");b.PM=a.getUniformLocation(b,"u_dash");b.XM=a.getUniformLocation(b,"u_scale");b.Wu=a.getUniformLocation(b,"useTexture");b.WM=a.getUniformLocation(b,"pitch");b.Yha= a.getUniformLocation(b,"u_heightPercent");this.qu=this.Bt=this.cn=void 0;this.dk=0},B:function(a,b){this.FM=500;this.Th=!0;arguments.callee.oa.apply(this,arguments);this.Ei=20;this.jb=Math.min(2,window.devicePixelRatio||1);this.dp=1;this.X("mapStyle",a.h);this.X("style",a.h);this.Gh=this.bi=!0;a.h.J.en&&this.cx(a,b);this.mm=0;this.lg={}},Pk:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!this.T.h.kz)for(var c=a.length-1;0<=c;c-=1){var d=a[c];if(d.length){if(this.q.Tw){for(var e= [],g=d.length-1;0<=g;g-=1){var h=d[g],k=h.ma;this.q.h.Rn.Wy(k.x,k.y,k.z)?e.push(d[g]):(this.xa.set(h.key,h),h.loaded=!0,h.status="loaded",h.qa=!0,h.Pa={})}d=e;a[c]=e;if(0==e.length)continue}e=d[0].ma.z;this.Kr(d,1);for(h=g=0;g<d.length;)this.QK(d.slice(200*h,200*h+200),e,b),g+=200,h+=1}}},reloadChanged:function(){this.q&&(this.q.wa=!1);this.xa.clear();this.Qa&&this.Qa.parentNode&&this.Qa.parentNode.removeChild(this.Qa);this.set("display")},ou:function(a){if(this.q&&a.JK===this.q.xc)for(var b=0,c= a.Rc.length;b<c;b+=1)this.uy(a.Rc[b],a.eu,a.Eu,a.Z)},QL:function(a){for(var b=this.T.Ka,c=0,d=a.length;c<d;c+=1){var e=a[c];this.h.Xj&&e[3]&&!this.h.cc&&(e[2]=this.T.Fo(e[2],e[3]));e.De=e[1].length;e[0]=this.tf(b.ARRAY_BUFFER,e[0]);e[1]=this.tf(b.ELEMENT_ARRAY_BUFFER,e[1]);e[5]=this.tf(b.ARRAY_BUFFER,e[5])}},$L:function(a){for(var b=this.T.Ka,c=0,d=a.length;c<d;c+=1){var e=a[c];e.De=e[1].length;e[0]=this.tf(b.ARRAY_BUFFER,e[0]);e[1]=this.tf(b.ELEMENT_ARRAY_BUFFER,e[1]);this.h.Xj&&e[2][10]&&!this.h.cc&& (e[2][1]=this.T.Fj(e[2][1],e[2][10],1),e[2][4]=this.T.Fj(e[2][4],e[2][10],0))}},nC:function(a){if(a.Pa){if(a.Pa.region&&a.Pa.region.length)for(var b=0,c=a.Pa.region.length;b<c;b+=1){var d=a.Pa.region[b];this.T.Ka.deleteBuffer(d[0]);d[0]=null;this.T.Ka.deleteBuffer(d[1]);d[1]=null;this.T.Ka.deleteBuffer(d[5]);d[5]=null}delete a.Pa.region;if(a.Pa.road)for(b in a.Pa.road)if(a.Pa.road.hasOwnProperty(b))for(var e=a.Pa.road[b],g=0,c=e.length;g<c;g+=1)d=e[g],this.T.Ka.deleteBuffer(d[0]),d[0]=null,this.T.Ka.deleteBuffer(d[1]), d[1]=null,d[2]=null,d[3]=null;delete a.Pa.road;if(a.Pa.building)for(b=0,c=a.Pa.building.length;b<c;b+=1)d=a.Pa.building[b],this.T.Ka.deleteBuffer(d[0]),d[0]=null,d[1]&&this.T.Ka.deleteBuffer(d[1]),d[1]=null,this.T.Ka.deleteBuffer(d[2]),d[2]=null,d[3]=null,d[4]=null,d[5]=null;delete a.Pa.building}},CI:function(a){for(var b=this.T.Ka,c=0,d=a.length;c<d;c+=1){var e=a[c];this.h.cc&&(e[4]=e[0],e[6]=new f.jv,cd(e[6],e[0],4));e.py=e[0].length/4;e[0]=this.tf(b.ARRAY_BUFFER,e[0]);e[1].length?(e.lD=e[1].length/ 2,e[1]=this.tf(b.ARRAY_BUFFER,e[1])):e[1]=null;e.qy=e[2].length/4;e[2]=this.tf(b.ARRAY_BUFFER,e[2]);if(this.h.Xj&&e[3][2]&&!this.h.cc){var g=this.T.Oq(e[3][0],e[3][1],e[3][2]);e[3][0]=g[0];e[3][1]=g[1]}e.Kj=0}},tf:function(a,b){if(b.length){var c=this.T.Ka,d=c.createBuffer();c.bindBuffer(a,d);c.bufferData(a,b,c.STATIC_DRAW);return d}},PU:function(a){var b=a.ma,c=b.x,d=b.y,e=b.z,g=Math.pow(2,e),h=(c+g)%g,k=h+g,l=h-g,m=null;h!==c&&(m=this.Xq(e,h,d));m||l===c||(m=this.Xq(e,l,d));m||k===c||(m=this.Xq(e, k,d));return m?(a.status=m.status,a.qa=m.qa,a.ec=m.ec,a.Lc=m.Lc,a.Pa={building:m.Pa.building,region:m.Pa.region,road:m.Pa.road,Nm:(b.x-m.ma.x)/g+m.Pa.Nm},!0):!1},Xq:function(a,b,c){if((a=this.xa.get(a+"/"+b+"/"+c))&&a.Pa)return a},uy:function(a){var b=a.dd,c=this.xa.get(a.$k);if(c){c.Pa||(c.Pa={Nm:0});c.Pa[b]=a.Ca;if("region"===b)this.QL(a.Ca);else if("road"===b)for(var d in a.Ca)a.Ca.hasOwnProperty(d)&&this.$L(a.Ca[d]);else"building"===b&&(this.CI(a.Ca),a.Lk&&a.Lk.length&&!c.wf&&(c.wf={},c.wf.xe= a.Lk,f.Gn&&f.Gn.r("vecTileParsed.buildings",{Mr:c})));b===this.q.ta[this.q.ta.length-1]&&(c.qa=!0,this.set("display"))}},ld:function(){if(this.ng&&!this.q.wa){var a=this.q;f.Zd.te.end({key:"rb",index:2,id:this.h.J.id});a.wa=!0;a.$c?a.ha("renderComplete"):(a.$c=!0,a.ia.get("innerLayer")&&a.h?a.h.um():a.ha("complete"))}},fc:function(a,b,c){this.hi=!1;arguments.callee.oa.apply(this,arguments);this.ek=b.ek;if(this.zoom&&this.Ql&&this.Ql.length&&0.49<Math.abs(this.zoom-b.W.zoom)){for(var d=0,e=this.Ql.length;d< e;d+=1)this.Ql[d].Kj=0;this.Ql=null}this.Xl(b,c);this.ld();b.RC||(b.U9=this.ng,a=this.T.Ka,this.ip(a,this.bj,b),this.yd=b.W.yd,a=this.T.Ka,a.disableVertexAttribArray(this.La.Bf),a.disableVertexAttribArray(this.La.Qg),a.disableVertexAttribArray(this.La.wj),a.disableVertexAttribArray(this.La.vj),a.disableVertexAttribArray(this.La.ph),this.hi&&this.set("display"))},ip:function(a,b){if(b.length){var c=this.La;this.ec+=1;a.uniform1f(c.XM,Math.pow(2,this.zoom-this.Ei)*(this.q.ja?this.jb:1));a.enableVertexAttribArray(c.Bf); a.uniform1f(c.OM,this.h.J.view.ul);a.uniform1f(c.WM,Math.cos(this.h.J.view.get("pitch")*Math.PI/180));var d=this.pm=[];a.disable(a.DEPTH_TEST);a.enable(a.BLEND);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);for(var e=b.length-1;0<=e;e-=1){var g=b[e];a.disableVertexAttribArray(c.wj);a.disableVertexAttribArray(c.vj);a.disableVertexAttribArray(c.ph);this.Em(0,void 0,void 0);a.uniform1i(c.ak,0);this.Fm(0);for(var h=0,k=g.length;h<k;h+=1){var l=g[h];g[h].Pa&&(l.ec= this.ec,d.push(l),this.iJ(a,l))}a.enableVertexAttribArray(c.wj);a.enableVertexAttribArray(c.vj);a.enableVertexAttribArray(c.ph);if(g.length){for(var m={},h=0,k=g.length;h<k;h+=1){var l=g[h],n=l.Pa.road;if(n)for(var p in n)if(n.hasOwnProperty(p)){m[p]||(m[p]=[]);for(var q=0,r=n[p].length;q<r;q+=1)n[p][q].dk=l.Pa.Nm,m[p].push(n[p][q])}}this.jJ(a,m,g[0].ma.z)}}if("building"===this.q.ta[0]&&this.Aa.DI){a.enable(a.DEPTH_TEST);a.clear(a.DEPTH_BUFFER_BIT);this.Em(0,void 0,void 0);a.disableVertexAttribArray(c.wj); a.disableVertexAttribArray(c.vj);a.disableVertexAttribArray(c.ph);a.uniform1i(c.ak,1);for(var s=this.Aa.DI.x,u=this.Aa.DI.y,e=b.length-1;0<=e;e-=1){g=b[e];d=g[0].lc;m=[];h=0;for(k=g.length;h<k;h+=1)l=g[h],m.push.apply(m,l.Pa.building);m.sort(function(a,b){return Math.abs(a[5][0]-s)+Math.abs(a[5][1]-u)>Math.abs(b[5][0]-s)+Math.abs(b[5][1]-u)?1:-1});m.lc=d;this.sC(a,m)}17>this.Ta&&this.Ql&&(this.sC(a,this.Ql),this.hi||(this.Ql=null));a.disable(a.BLEND);a.disable(a.DEPTH_TEST);a.disableVertexAttribArray(c.Bf)}}}, mp:256*Math.pow(2,20),iJ:function(a,b){var c=b.Pa.region;if(c){this.Fm(b.Pa.Nm*this.mp);for(var d=0;d<c.length;d+=1){var e=c[d],g=e[2],h=e[3];h&&this.h.cc&&(g=this.T.Fo(g,h),e.bd=g);g&&(h&&this.T.Aj[h]&&this.T.Aj[h].hc?(a.activeTexture(a.TEXTURE0),a.uniform1i(this.La.Wu,1),h=this.T.Aj[h],a.uniform2f(this.La.oE,h.width/512,h.height/512),a.bindTexture(a.TEXTURE_2D,h.hc),a.uniform1i(this.La.nE,0),a.enableVertexAttribArray(this.La.Qg),a.bindBuffer(a.ARRAY_BUFFER,e[5]),a.vertexAttribPointer(this.La.Qg, 2,a.FLOAT,!1,0,0)):(a.uniform1i(this.La.Wu,0),a.bindTexture(a.TEXTURE_2D,this.T.Iq[0])),a.bindBuffer(a.ARRAY_BUFFER,e[0]),a.vertexAttribPointer(this.La.Bf,2,a.FLOAT,!1,8,0),a.uniform4f(this.La.zn,g[0],g[1],g[2],g[3]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e[1]),a.drawElements(a.TRIANGLES,e.De,a.UNSIGNED_SHORT,0),a.disableVertexAttribArray(this.La.Qg))}}},jJ:function(a,b){var c=this.La,d=this.T.ja?this.jb:this.dp,e;for(e in b)if(b.hasOwnProperty(e)){for(var g=b[e],h=0;h<g.length;h+=1){var k=g[h],l=k[2], m=l[4],n=l[10];n&&this.h.cc&&(m=this.T.Fj(m,n,0),k.bd=m);if(m){n="square"===k[2][9]?3:"round"===k[2][9]?4:2;a.uniform1i(c.ak,n);var p=this.aw(l)[1];p&&(this.Fm(k.dk*this.mp),a.bindBuffer(a.ARRAY_BUFFER,k[0]),a.vertexAttribPointer(c.Bf,2,a.FLOAT,!1,44,0),a.vertexAttribPointer(c.wj,3,a.FLOAT,!1,44,8),a.vertexAttribPointer(c.vj,3,a.FLOAT,!1,44,20),a.vertexAttribPointer(c.ph,3,a.FLOAT,!1,44,32),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,k[1]),k=k.De,a.uniform1f(c.jz,p*d),a.uniform4f(c.zn,m[0],m[1],m[2],m[3]), this.Em(l[5]?1:0,l[5],0),a.drawElements(a.TRIANGLES,k,a.UNSIGNED_SHORT,0))}}for(h=0;h<g.length;h+=1)if(k=g[h],l=k[2],m=this.aw(l)[0])p=l[1],(n=l[10])&&this.h.cc&&(p=this.T.Fj(p,n,1),k.bd=p),p&&(n="square"===k[2][8]?3:"round"===k[2][8]?4:2,a.uniform1i(c.ak,n),this.Fm(k.dk*this.mp),a.bindBuffer(a.ARRAY_BUFFER,k[0]),a.vertexAttribPointer(c.Bf,2,a.FLOAT,!1,44,0),a.vertexAttribPointer(c.wj,3,a.FLOAT,!1,44,8),a.vertexAttribPointer(c.vj,3,a.FLOAT,!1,44,20),a.vertexAttribPointer(c.ph,3,a.FLOAT,!1,44,32), a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,k[1]),k=k.De,a.uniform1f(c.jz,m*d),a.uniform4f(c.zn,p[0],p[1],p[2],p[3]),this.Em(l[2]?1:0,l[2],l[6]?1:0),a.drawElements(a.TRIANGLES,k,a.UNSIGNED_SHORT,0))}},sC:function(a,b){var c=this.La;if(b.length){var d=!0;17>this.Ta?d=!1:this.Ql=b;var e=this.q.h.J.get("buildingAnimation");17>b.lc&&(e=!1);var g=this.T.Aj.buildings;if(g&&g.hc){var h=Math.max(g.width,g.height),h=128/h;a.uniform1i(this.La.Wu,1);a.uniform2f(this.La.oE,128/g.width/h,128/g.height/h)}else a.uniform1i(this.La.Wu, 0),a.bindTexture(a.TEXTURE_2D,this.T.Iq[0]);for(var h=0,k=b.length;h<k;h+=1){var l=b[h],m=f.a.find(this.h.get("layers"),function(a){if(a instanceof w.w.Gp&&a.get("visible"))return!0});if(!(l.vca&&17<=this.zoom&&m)){var m=l[3][0],n=l[3][1];if(l&&m){var p=l[3][2];p&&this.h.cc&&(n=this.T.Oq(m,n,p),m=n[0],n=n[1],l.bd=m);if(m||n){if(e){if(d?100>l.Kj&&(l.Kj+=20):0<l.Kj&&(l.Kj-=20),100>l.Kj&&d?this.hi=1:0<l.Kj&&!d&&(this.hi=1),!l.Kj)continue}else l.Kj=100;a.uniform1f(c.Yha,l.Kj/100);m||(m=[0,0,0,0]);n|| (n=[0,0,0,0]);l.color&&(m=l.color);a.uniform4f(c.NM,m[0],m[1],m[2],m[3]);a.uniform4f(c.zn,n[0],n[1],n[2],n[3]);l.py&&(l.lD&&g&&g.hc?(a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,g.hc),a.uniform1i(this.La.nE,0),a.enableVertexAttribArray(c.Qg),a.bindBuffer(a.ARRAY_BUFFER,l[1]),a.vertexAttribPointer(c.Qg,2,a.FLOAT,!1,0,0)):a.disableVertexAttribArray(c.Qg),a.bindBuffer(a.ARRAY_BUFFER,l[0]),a.vertexAttribPointer(c.Bf,4,a.FLOAT,!1,0,0),a.drawArrays(a.TRIANGLES,0,l.py),a.disableVertexAttribArray(c.Qg)); l.qy&&(a.bindBuffer(a.ARRAY_BUFFER,l[2]),a.vertexAttribPointer(c.Bf,4,a.FLOAT,!1,0,0),a.drawArrays(a.LINES,0,l.qy))}}}}}},Em:function(a,b,c){var d=this.La,e=this.T.Ka;a!==this.cn&&(e.uniform1i(d.SM,a),this.cn=a);a&&b!==this.Bt&&(this.Bt=b,e.uniform4f(d.PM,b[0],b[1],b[2]||0,b[3]||0));c!==this.qu&&(e.uniform1i(d.TM,c),this.qu=c)},Fm:function(a){a!==this.dk&&(this.T.Ka.uniform1f(this.La.$M,a),this.dk=a)},cI:function(a,b,c){var d=null;if(a.length&&c)d=a[11].id+"-"+c,this.lg[d]&&(a[0]=this.lg[d][0],a[3]= this.lg[d][3]);else return c=[],b&&b[0]&&(c=b[0].split("&")),(b=c[2])&&0===b.indexOf("railway")?(a[0]=1,a[3]=3):a[0]=parseInt(c[0])||0,c[3]&&c[4]&&3<c.length?(a[3]=a[0]+parseInt(c[3]),0===f.a.indexOf(c[5],"dash")&&(a[3]+=1)):a[3]=0,d&&void 0===this.lg[d]&&(this.lg[d]=[a[0],0,0,a[3]]),a},aw:function(a){function b(a,b,c){var d;a&&b?d=a+c%1*(b-a):0===a&&b?d=Math.max(0,c%1-0.5)/0.5*b:0===a&&0===b?d=0:0!==a&&0===b&&(d=0);return f.a.Pc(d,3)}var c=a[11].browserStyle,d=a[11].levelStyleMapping;if(18<this.zoom){var e= this.xi(a,18,c,d);a=Math.pow(2,this.zoom-18);return[e[0]*a,e[3]*a]}if(f.a.eW(this.zoom))return e=this.xi(a,this.zoom,c,d),[e[0],e[3]];e=this.xi(a,Math.floor(this.zoom),c,d);c=this.xi(a,Math.ceil(this.zoom),c,d);a=b(e[0],c[0],this.zoom);e=b(e[3],c[3],this.zoom);return[a,e]},xi:function(a,b,c,d){a=a[11].id+"-"+b;this.lg[a]||(this.lg[a]=this.cI([],c[d[b]]));return this.lg[a]}});f.Ja.TN=f.Ja.oc.extend({type:"sky",dj:"precision highp float;attribute vec3 position;attribute vec2 a_uvs;uniform mat4 u_scaleMatrix;uniform mat4 u_scaleMatrix2;uniform mat4 u_panMatrix;uniform int u_fh;uniform mat4 u_modelViewMatrix;uniform mat4 u_projectionMatrix;varying vec2 v_uvs;varying float z;void main(void) {\\tv_uvs = a_uvs;\\tz = -position.z/3000.0;\\tvec4 pos = u_scaleMatrix2*u_modelViewMatrix* u_panMatrix* u_scaleMatrix * vec4(position,1.0);\\tgl_Position = u_projectionMatrix * pos;}",le:"precision mediump float;uniform vec4 color;uniform sampler2D texture;uniform int ok;uniform float opacity;varying vec2 v_uvs;varying float z;void main(void) {\\tif(ok==1){\\t\\tvec4 smpColor = texture2D(texture, v_uvs);\\t\\tgl_FragColor = vec4(smpColor.xyz,color.w*opacity*z);\\t}else{\\t\\tgl_FragColor = vec4(color.xyz,color.w*opacity*z);\\t}}", Ah:function(a,b){b.UM=a.getUniformLocation(b,"u_panMatrix");b.pd=a.getAttribLocation(b,"position");b.Qg=a.getAttribLocation(b,"a_uvs");b.nE=a.getUniformLocation(b,"texture");b.DZ=a.getUniformLocation(b,"ok");b.$ha=a.getUniformLocation(b,"opacity");b.gz=a.getUniformLocation(b,"color");b.AZ=a.getUniformLocation(b,"aspect");b.OM=a.getUniformLocation(b,"u_cameraheight");b.Vha=a.getUniformLocation(b,"u_fh");b.cia=a.getUniformLocation(b,"u_scaleMatrix");b.dia=a.getUniformLocation(b,"u_scaleMatrix2")},B:function(a){this.Xy= "sky";this.ed=[11,20];this.Th=!1;this.T=a;this.h=a.h;this.X("display",this.h);this.createProgram();this.h.J.get("skyColor")?this.Ry=f.a.rq("ff"+this.h.J.get("skyColor").substr(1)):this.Ry=f.a.rq("ffcce0ff");this.rx()},rx:function(){for(var a=void 0!==a?a:0,b=void 0!==b?b:2*Math.PI,c=void 0!==c?c:Math.PI/4,d=void 0!==d?d:Math.PI/4,e=c+d,g=new Float32Array(1887),h=new Float32Array(1258),k=0,l=[],m=0;16>=m;m++){for(var n=[],p=m/16,q=0;36>=q;q++){var r=q/36,s=-1*Math.cos(a+r*b)*Math.sin(c+p*d),u=1*Math.cos(c+ p*d),v=1*Math.sin(a+r*b)*Math.sin(c+p*d);g[3*k]=1E4*s;g[3*k+1]=1E4*v;g[3*k+2]=1E4*-u;h[2*k]=r;h[2*k+1]=p;n.push(k);k++}l.push(n)}a=[];for(m=0;16>m;m++)for(q=0;36>q;q++)b=l[m][q+1],d=l[m][q],k=l[m+1][q],n=l[m+1][q+1],(0!==m||0<c)&&a.push(b,d,n),(15!==m||e<Math.PI)&&a.push(d,k,n);c=this.T.Ka;e=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,e);c.bufferData(c.ARRAY_BUFFER,new Float32Array(g),c.STATIC_DRAW);this.ni=e;this.fN=a.length;e=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,e);c.bufferData(c.ARRAY_BUFFER, new Float32Array(h),c.STATIC_DRAW);this.tE=e;h=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,h);c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(a),c.STATIC_DRAW);this.KM=h;this.kb=g;this.TV=a},ld:function(){},fc:function(a,b,c){if(this.LC(b.W.zoom)){a.disable(a.DEPTH_TEST);a.enable(a.BLEND);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);var d=this.La;arguments.callee.oa.apply(this,arguments);a.enableVertexAttribArray(d.Qg);a.enableVertexAttribArray(d.pd); var e=this.T.Mw;this.h.cc&&(this.bd=e=this.T.Fo(e,this.Xy));a.uniform4f(d.gz,e[0],e[1],e[2],e[3]);a.uniform1f(d.$ha,this.fV(b.W.zoom));a.uniform1i(d.Vha,120*b.W.zoom);e=this.h.J.view.sba;a.uniformMatrix4fv(d.UM,!1,e.elements);var g=1.1*this.h.J.view.ul/1E4,h=Math.max(1,b.W.OB),g=(new f.ge).Ir(g,g,g);a.uniformMatrix4fv(d.cia,!1,g.elements);h=(new f.ge).Ir(h,1,1);a.uniformMatrix4fv(d.dia,!1,h.elements);var k=this.T.Aj[this.Xy];k&&k.hc?(a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,k.hc),a.uniform1i(this.La.nE, 0),a.uniform1i(this.La.DZ,1)):(a.uniform1i(this.La.DZ,0),a.bindTexture(a.TEXTURE_2D,this.T.Iq[0]));a.bindBuffer(a.ARRAY_BUFFER,this.ni);a.vertexAttribPointer(d.pd,3,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.tE);a.vertexAttribPointer(d.Qg,2,a.FLOAT,!1,0,0);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.KM);a.drawElements(a.TRIANGLES,this.fN,a.UNSIGNED_SHORT,0);a.disableVertexAttribArray(d.Qg);a.disableVertexAttribArray(d.pd);a.disable(a.BLEND);this.yd=h.multiply((new f.ge).set(b.W.yd).multiply((new f.ge).set(e).multiply(g))); this.ld()}},fV:function(a){return 12<a?1:a-11},LC:function(a){return 11<a?!0:!1}});f.Ja.a0=f.Ja.TN.extend({B:function(){this.ed=[3,11];arguments.callee.oa.apply(this,arguments);this.Xy="atmosphere"},fV:function(){return 1},LC:function(a){return 12>a?!0:!1}});f.Ja.gja=f.Ja.oc.extend({type:"fog",dj:"precision highp float;attribute vec3 position;uniform float u_cameraheight;uniform float pitch;uniform float aspect;uniform mat4 u_panMatrix;uniform mat4 u_modelViewMatrix;uniform mat4 u_projectionMatrix;varying float z;void main(void) {\\tz = position.z;\\tvec3 pos_ = vec3(position.xy,position.z*pitch);\\tvec4 pos = u_modelViewMatrix* u_panMatrix * vec4(pos_*u_cameraheight,1.0);\\tpos.x *= aspect;\\tgl_Position = u_projectionMatrix * pos;}",le:"precision mediump float;uniform vec4 color;varying float z;uniform float factor;void main(void) {\\tfloat a = color.a*(1.0-pow(abs(z)/(z>0.0?(0.08-factor):(0.04+factor)),2.0));\\tgl_FragColor =  vec4(color.rgb,a);}", Ah:function(a,b){b.UM=a.getUniformLocation(b,"u_panMatrix");b.pd=a.getAttribLocation(b,"position");b.gz=a.getUniformLocation(b,"color");b.WM=a.getUniformLocation(b,"pitch");b.AZ=a.getUniformLocation(b,"aspect");b.Uha=a.getUniformLocation(b,"factor");b.OM=a.getUniformLocation(b,"u_cameraheight")},B:function(a){this.Th=!1;this.T=a;this.h=a.h;this.X("display",this.h);this.createProgram();this.h.J.get("skyColor")?this.Ry=f.a.rq("ff"+this.h.J.get("skyColor").substr(1)):this.Ry=f.a.rq("ffcce0ff");this.rx()}, rx:function(){for(var a=void 0!==a?a:0,b=void 0!==b?b:2*Math.PI,c=void 0!==c?c:30*Math.PI/100,d=void 0!==d?d:35*Math.PI/100,e=c+d,g=new Float32Array(666),h=new Float32Array(444),k=0,l=[],m=0;5>=m;m++){for(var n=[],p=m/5,q=0;36>=q;q++){var r=q/36,s=-1*Math.cos(a+r*b)*Math.sin(c+p*d),u=1*Math.cos(c+p*d),v=1*Math.sin(a+r*b)*Math.sin(c+p*d);g[3*k]=s;g[3*k+1]=v;g[3*k+2]=-u/3;h[2*k]=r;h[2*k+1]=p;n.push(k);k++}l.push(n)}a=[];for(m=0;5>m;m++)for(q=0;36>q;q++)b=l[m][q+1],d=l[m][q],k=l[m+1][q],n=l[m+1][q+1], (0!==m||0<c)&&a.push(b,d,n),(4!==m||e<Math.PI)&&a.push(d,k,n);c=this.T.Ka;e=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,e);c.bufferData(c.ARRAY_BUFFER,new Float32Array(g),c.STATIC_DRAW);this.ni=e;this.fN=a.length;this.kb=g;this.TV=a;g=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,g);c.bufferData(c.ARRAY_BUFFER,new Float32Array(h),c.STATIC_DRAW);this.tE=g;h=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,h);c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(a),c.STATIC_DRAW);this.KM=h},ld:function(){}, fc:function(a,b,c){a.disable(a.DEPTH_TEST);a.enable(a.BLEND);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);var d=this.La;arguments.callee.oa.apply(this,arguments);a.enableVertexAttribArray(d.pd);var e=b.W.zoom;a.uniform1f(d.fz,1-0.015*(e-3));a.uniform1f(d.Uha,11>e?0:0.008*(e-11));a.uniform1f(d.AZ,b.W.OB);a.uniform1f(d.WM,b.W.pitch/65*(1-0.5*Math.abs(e-11)/(11<e?6:9)));e=this.T.Mw;this.h.cc&&(e=this.T.Fo(e,"sky"));a.uniform4f(d.gz,e[0],e[1],e[2],e[3]);a.uniform1f(d.OM, this.h.J.view.ul*(1.3+0.03*(12-Math.min(12,b.W.zoom))));a.uniformMatrix4fv(d.UM,!1,this.h.J.view.vma.Nj().elements);a.bindBuffer(a.ARRAY_BUFFER,this.ni);a.vertexAttribPointer(d.pd,3,a.FLOAT,!1,0,0);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.KM);a.drawElements(a.TRIANGLES,this.fN,a.UNSIGNED_SHORT,0);a.disableVertexAttribArray(d.pd);a.disable(a.BLEND);this.ld()}});f.Ja.OE=f.Ja.oc.extend({type:"land",dj:"precision highp float;attribute vec3 position;attribute vec2 a_uvs;varying vec2 v_uvs;uniform mat4 u_modelViewMatrix;uniform mat4 u_projectionMatrix;varying  float z;void main(void) {\\tv_uvs = a_uvs;\\tvec4 pos = u_projectionMatrix*u_modelViewMatrix * vec4(position.xy,0.0,1.0);\\tgl_Position = pos;\\tz = position.z;}",le:"precision mediump float;uniform sampler2D textureL;uniform sampler2D textureW;uniform highp vec4 textureScale;varying highp vec2 v_uvs;uniform vec4 color;uniform vec4 color2;varying highp float z;void main(void) {if(z==0.0){\\tif(textureScale.z!=0.0){\\t\\tvec4 smpColor = texture2D(textureW, vec2(v_uvs.x/textureScale.z,v_uvs.y/textureScale.w));\\t\\tgl_FragColor= vec4(smpColor.rgb*smpColor.a+color2.rgb*(1.0-smpColor.a),color2.a);\\t}else{\\t\\tgl_FragColor = color2;\\t}}else{\\tif(textureScale.x!=0.0){\\t\\thighp float u  = v_uvs.x/textureScale.x;\\t\\thighp float v  = v_uvs.y/textureScale.y;\\t\\tvec4 smpColor = texture2D(textureL, vec2(u,v));\\t\\tgl_FragColor= vec4(smpColor.rgb*smpColor.a+color.rgb*(1.0-smpColor.a),color.a);\\t}else{\\t\\tgl_FragColor = color;\\t}}}", Ah:function(a,b){b.pd=a.getAttribLocation(b,"position");b.Qg=a.getAttribLocation(b,"a_uvs");b.eia=a.getUniformLocation(b,"textureL");b.fia=a.getUniformLocation(b,"textureW");b.gz=a.getUniformLocation(b,"color");b.Tha=a.getUniformLocation(b,"color2");b.oE=a.getUniformLocation(b,"textureScale")},B:function(a){this.Th=!0;this.T=a;this.h=a.h;this.X("display",this.h);this.createProgram();this.rx()},rx:function(){for(var a=this.T.Ka,b=f.a.fb,c=[-b,-b,0,2*b,-b,0,2*b,0,0,-b,-b,0,2*b,0,0,-b,0,0,-b,b,1,2*b, b,1,2*b,2*b,1,-b,b,1,2*b,2*b,1,-b,2*b,1],d=[],e=0;e<c.length;e+=3)d.push(c[e]+b,c[e+1]+b),c[e]-=f.a.Wc.x,c[e+1]-=f.a.Wc.y;b=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,b);a.bufferData(a.ARRAY_BUFFER,new Float32Array(c),a.STATIC_DRAW);this.ni=b;c=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c);a.bufferData(a.ARRAY_BUFFER,new Float32Array(d),a.STATIC_DRAW);this.tE=c},ld:function(){},fc:function(a,b,c){a.enable(a.BLEND);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ZERO);a.disable(a.DEPTH_TEST); var d=this.La;arguments.callee.oa.apply(this,arguments);a.enableVertexAttribArray(d.pd);a.enableVertexAttribArray(d.Qg);var e=this.T.qd;a.uniform4f(d.gz,e[0],e[1],e[2],e[3]);e=this.T.FB;a.uniform4f(d.Tha,e[0],e[1],e[2],e[3]);var e=this.T.Aj["regions:land"],g=this.T.Aj.water,h=b.W.Ze,k=0,l=0,m=0,n=0;a.activeTexture(a.TEXTURE1);var p=b.W.zoom;11>p&&e&&e.hc&&(k=e.width*h,l=e.height*h,a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,e.hc),a.uniform1i(this.La.eia,0));11>p&&g&&g.hc&&(m=g.width*h, n=g.height*h,a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,g.hc),a.uniform1i(this.La.fia,1));a.uniform4f(this.La.oE,k,l,m,n);a.bindBuffer(a.ARRAY_BUFFER,this.ni);a.vertexAttribPointer(d.pd,3,a.FLOAT,!1,0,0);a.bindBuffer(a.ARRAY_BUFFER,this.tE);a.vertexAttribPointer(d.Qg,2,a.FLOAT,!1,0,0);a.drawArrays(a.TRIANGLES,0,12);a.disableVertexAttribArray(d.Qg);this.ld()}});f.Ja.NE=f.Ja.qv.extend({ga:[f.ps],pI:1,DM:[1,0,1,1,0,0,1,1,0,1,0,0],dj:"precision mediump float;attribute highp vec4 position;varying vec4 v_texcoord;varying lowp float f_texIndex;uniform lowp int u_type;uniform vec3 u_hlColorFactor;uniform vec2 u_texVertices[6];uniform highp mat4 u_modelViewMatrix;uniform highp mat4 u_projectionMatrix;uniform mat4 u_poiPrjMatrix;uniform mat4 u_textureMatrix[_ElemBatchNum_];uniform mat4 u_transMatrix[_ElemBatchNum_];uniform vec4 u_params[_ElemBatchNum_];void main(void) {\\tif(u_type == 2){\\t\\tgl_Position = u_poiPrjMatrix * vec4(position.xyz, 1.0); \\t\\treturn;\\t}\\tint pointIdx = int(position.z); \\tint elemIdx = int(position.w); \\tvec4 param = u_params[elemIdx]; \\tf_texIndex  = param.z;   v_texcoord = vec4((u_textureMatrix[elemIdx] * vec4(u_texVertices[pointIdx].xy, 0.0, 1.0)).xy, param.xy);\\tvec4 pos =  vec4(position.xy, 0.0, 1.0);\\tif(u_type == 0 ){ \\t\\tpos.z = param.w;\\t\\tgl_Position = u_projectionMatrix * u_modelViewMatrix * u_transMatrix[elemIdx] * pos;\\t} else if(u_type == 1){\\t\\tgl_Position = u_poiPrjMatrix * pos;\\t\\tgl_Position.z = param.w;\\t} }", le:"precision mediump float;uniform sampler2D texture[_TexBatchNum_];uniform lowp int u_type;uniform vec3 u_hlColorFactor;varying vec4 v_texcoord;varying lowp float f_texIndex;void main(void) {\\tif(u_type == 2){\\t\\tgl_FragColor = normalize(vec4(0, 0, 0, 1)); return;\\t}\\tint style = int(v_texcoord.w); \\tif(style < 0){ gl_FragColor = vec4(0, 0, 0, 1); return; }\\tint texIdx = int(f_texIndex); \\tfloat opacity = v_texcoord.z; \\tvec4 smpColor; \\t__SmpColorLoop__\\tif(smpColor.a < 0.07) { discard; }\\tif( style > 0 ) {\\t\\tfloat r = u_hlColorFactor.x > 0.0 ? smpColor.r * u_hlColorFactor.x : -u_hlColorFactor.x; \\t\\tfloat g = u_hlColorFactor.y > 0.0 ? smpColor.g * u_hlColorFactor.y : -u_hlColorFactor.y; \\t\\tfloat b = u_hlColorFactor.z > 0.0 ? smpColor.b * u_hlColorFactor.z : -u_hlColorFactor.z; \\t\\tsmpColor = vec4(r, g, b, smpColor.a);\\t\\tif(style > 1){ smpColor = vec4(smpColor.rgb * 0.9, smpColor.a); }\\t} \\tsmpColor *= opacity;\\tgl_FragColor =  smpColor;}", Ah:function(a,b){b.pd=a.getAttribLocation(b,"position");b.np=a.getUniformLocation(b,"texture");b.YM=a.getUniformLocation(b,"u_texVertices");b.ZM=a.getUniformLocation(b,"u_textureMatrix");b.aia=a.getUniformLocation(b,"u_poiPrjMatrix");b.gia=a.getUniformLocation(b,"u_transMatrix");b.VM=a.getUniformLocation(b,"u_params");b.Zha=a.getUniformLocation(b,"u_hlColorFactor");b.ak=a.getUniformLocation(b,"u_type")},B:function(a,b){this.FM=500;this.Vca=!0;var c=b.Ka;this.Bx=Math.max(1,Math.min(Math.floor((c.getParameter(c.MAX_VERTEX_UNIFORM_VECTORS)- 20)/4/4),128));this.dj=this.dj.replace(/_ElemBatchNum_/g,this.Bx);this.gE=Math.min(this.Bx,c.getParameter(c.MAX_TEXTURE_IMAGE_UNITS));for(var d=[],e=0;e<this.gE;e++)d.push((0<e?"else ":" ")+"if(abs(f_texIndex -"+e+".0) < 0.01){ smpColor = texture2D(texture["+e+"], v_texcoord.xy); }");this.le=this.le.replace(/_TexBatchNum_/g,this.gE).replace(/__SmpColorLoop__/g,d.join("\\n"));arguments.callee.oa.apply(this,arguments);this.X("reload",a,!0);this.X("style",b);this.jb=Math.min(2,window.devicePixelRatio|| 1);this.ai=this.bi=!0;this.Qx=[];this.cA=[];this.dA=[];this.labels=[];this.qfa=new f.ge;this.OK(a);this.Pn=c.createBuffer()},styleChanged:function(){var a=this;this.T.h.cc?(a.qB&&clearTimeout(a.qB),a.qB=setTimeout(function(){a.qB=null;a.reloadChanged()},300)):a.reloadChanged()},reloadChanged:function(){this.q&&(this.q.wa=!1);this.xa.clear();this.labels=[];this.Qx=[];this.cA=[];this.dA=[];this.set("display")},OK:function(a){a=f.l.Z||a.ja?"big":"small";var b=f.A.Qb+offlineMap.domain+"style_icon/icon-biz-"+ a+".png";f.Ch.Ok(f.A.Qb+offlineMap.domain+"style_icon/icon-normal-"+a+".png",!0);f.Ch.Ok(b,!0)},Pk:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!this.qB&&!this.h.Ic.TA)for(var c=a.length-1;0<=c;c-=1){var d=a[c];if(d.length){if(this.q.Tw){for(var e=[],g=d.length-1;0<=g;g-=1){var h=d[g],k=h.ma;this.q.h.Rn.Wy(k.x,k.y,k.z)?e.push(d[g]):(this.xa.set(h.key,h),h.loaded=!0,h.status="loaded",h.qa=!0,h.Pa={})}d=e;a[c]=e;if(0==e.length)continue}if(this.h.kz)break;e=d[0].ma.z; 18<e&&(d=this.vZ(d,e));this.Kr(d,1);for(h=g=0;g<d.length;)this.QK(d.slice(100*h,100*h+100),e,b),g+=100,h+=1}}},ld:function(){if(this.ng&&!this.q.wa){var a=this.q;f.Zd.te.end({key:"rl",index:2,id:this.T.h.J.id});a.wa=!0;a.$c?a.ha("renderComplete"):(a.$c=!0,a.ha("complete"))}},$ba:function(a){var b=a.Na,c=b[0];a.reverse&&(c>f.a.fb/2?c-=f.a.fb:c<-f.a.fb/2&&(c+=f.a.fb));return[c,b[1]]},yI:function(a,b,c){a=b.createTexture();b.bindTexture(b.TEXTURE_2D,a);b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !0);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,c);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);return{width:c.width,height:c.height,hc:a,Nu:this.pI++}},xF:function(a,b,c){for(var d=[],e=0,g=b.length;e<g;e++){var h=b[e].td,k=h[0],l=h[1],m=h[2],h=h[3];d.push.apply(d,[m,l,0,e,m,h,1,e,k,l,2,e,m,h,3,e,k,h,4,e,k,l,5,e])}a.bindBuffer(a.ARRAY_BUFFER,c);a.bufferData(a.ARRAY_BUFFER,new Float32Array(d),a.STATIC_DRAW); return c},d1:function(a,b,c){for(var d=[],e=0,g=b.length;e<g;e++){var h=b[e][0],k=b[e][1];d.push.apply(d,[h[0],h[1],h[2],e,k[0],k[1],k[2],e])}a.bindBuffer(a.ARRAY_BUFFER,c);a.bufferData(a.ARRAY_BUFFER,new Float32Array(d),a.STATIC_DRAW);return c},g$:function(a,b,c,d,e,g){if(!a.bL&&!1===a.visible)return!1;var h=this.Vm(d);if(!h||!h.width||!h.height)return!1;d="string"===typeof d&&0<d.indexOf("/style_icon/");g=g||0;h.Bm&&h.Bm.xc===this.xc&&a.floor===h.kA||(h.Bm=this.yI(a,b,h),h.Bm.xc=this.xc,a.Nl&&void 0!== a.floor&&(h.kA=a.floor));var k=this.q.ja?d?1.75:2:1;b=this.S;var h=h.Bm,l=e[2]/k,m=e[3]/k,n=e[0]/k,k=e[1]/k,p=e[4],q=e[5],r=e[6],s=e[7];e=null;a.Oi&&a.hB&&(e=a.hB.kZ,e={td:e?[e[0],e[1],e[0]+e[2],e[1]+e[3]]:null,dir:a.hB.dir});var u=c[0]+n*b,v=c[1]+k*b,p=[p,q,p+r,q+s],q=[u,v,u+l*b,v+m*b];d&&(a.eI=!0);r=1;a.bL?r=1-this.T.Yt:a.Nl&&(r=a.opacity);return{Ef:a,Po:d,Nu:h.Nu,yha:h.hc,lZ:h.width,iZ:h.height,SY:p,My:e,Waa:q,width:l,height:m,HL:c,offset:[n,k],Qma:b,rotation:g,opacity:r}},HC:function(a,b,c,d){var e= c[0],g=c[1],h=c[2]-e;c=c[3]-g;var k=new f.ge;k.Ir(1/a,1/b,1);0!==d&&(a=[e+h/2,g+c/2],k.translate(a[0],a[1],0),k.rotate(d,0,0,1),k.translate(-a[0],-a[1],0));k.translate(e,g,0);k.scale(h,c,1);return k},oca:function(a,b,c,d){var e=new f.ge;if(b||c||1!==d){var g=a[0],h=a[1];a=[g+(a[2]-g)/2,h+(a[3]-h)/2];e.translate(a[0],a[1],0);b&&e.rotate(b,0,0,1);c&&e.rotate(c,1,0,0);1!==d&&e.scale(d,d,1);e.translate(-a[0],-a[1],0)}return e},xL:function(a){for(var b=a.length;b<this.gE;b++)a[b]=0;return a},Taa:function(a, b,c){var d=[],e,g;e=0;for(g=c.Lr.length;e<g;e++)b.activeTexture(b.TEXTURE0+e),b.bindTexture(b.TEXTURE_2D,c.Lr[e]),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR),d[e]=e;b.uniform1iv(a.np,this.xL(d));c=c.list;var d=[],h=this.Ds.W,k={CM:!0,JM:!0},l=h.rotation%360;0>l&&(l+=360);e=0;for(g=c.length;e<g;e++){var m=c[e],n=!1,p=-m.rotation,q=0,r=m.Ef.eI;r?q=-l:45<=l&&315>=l&&m.My&&(q=m.My.dir,0===q?45<=l&&225>=l&&(n=!0):1===q&&135<=l&& 315>=l&&(n=!0),q=90*-Math.round(l/90));var n=this.HC(m.lZ,m.iZ,n&&m.My&&m.My.td?m.My.td:m.SY,0),s=this.WH(m.Waa),p=this.oca(s,p+q,r?h.pitch:0,r?1:this.rS);d.push([n.elements,p.elements,{Ef:m.Ef,td:s,opacity:m.opacity,BM:m.TH,IL:m.Po?-1:-2,xM:0}]);if(e===g-1||d.length>=this.Bx)this.eJ(a,b,d,k),d.length=0}},WH:function(a){var b=f.a.Wc,c=b.x,b=b.y;return[a[0]-c,a[1]-b,a[2]-c,a[3]-b]},Qaa:function(a,b,c){var d=[],e,g;e=0;for(g=c.Lr.length;e<g;e++)b.activeTexture(b.TEXTURE0+e),b.bindTexture(b.TEXTURE_2D, c.Lr[e]),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),d[e]=e;b.uniform1iv(a.np,this.xL(d));c=c.list;var d=[],h,k,l={CM:!0,JM:!1};this.kj&&(h=this.kj.M,k="active"===this.kj.Fl?2:1);e=0;for(g=c.length;e<g;e++){var m=c[e],n=this.HC(m.lZ,m.iZ,this.Tq(m,m.SY),0);d.push([n.elements,null,{Ef:m.Ef,td:this.Tq(m,m.yu),opacity:m.opacity,BM:m.TH,IL:m.GL.z,xM:m.Ef===h?k:0}]);if(e===g-1||d.length>=this.Bx)this.eJ(a,b,d,l),d.length=0}}, Wka:function(a,b,c){var d=[],e=b.NEAREST,g,h;g=0;for(h=1;g<h;g++)b.activeTexture(b.TEXTURE0+g),b.bindTexture(b.TEXTURE_2D,c.Lr[g]),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,e),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,e),d[g]=g;b.uniform1iv(a.np,this.xL(d));c=c.list;d=[];e={CM:!1,JM:!1};g=0;for(h=c.length;g<h;g++){var k=c[g];d.push([null,null,{Ef:k.Ef,td:this.Tq(k),opacity:k.opacity,BM:k.TH,IL:k.GL.z,xM:-1}]);if(g===h-1||d.length>=this.Bx)this.eJ(a,b,d,e),d.length=0}},eJ:function(a, b,c,d){var e=c.length;if(e){for(var g=[],h=[],k=[],l=[],m=d.CM,n=d.JM,p=0;p<e;p++)m&&h.push.apply(h,c[p][0]),n&&k.push.apply(k,c[p][1]),d=c[p][2],g.push(d),l.push(d.opacity),l.push(d.xM),l.push(d.BM),l.push(d.IL||0);m&&b.uniformMatrix4fv(a.ZM,!1,h);n&&b.uniformMatrix4fv(a.gia,!1,k);b.uniform4fv(a.VM,l);this.xF(b,g,this.Pn);b.vertexAttribPointer(a.pd,4,b.FLOAT,!1,0,0);b.drawArrays(b.TRIANGLES,0,6*e)}},ufa:function(a,b){var c=!1;b.Tb&&(this.T.Ko===b.Tb?c=!0:void 0!==b.Fq&&this.T.Ko===b.Tb+"-"+b.Fq&& (c=!0),b.bL=c);var d=b.bL||void 0===b.Wj?!0:b.Wj,e=b.Na||this.$ba(b);if(!f.Mc.md(e,this.$O))return null;if(this.hQ&&!b.Nl&&this.Ds.Gb.length){var g=!1;f.a.Ib(this.hQ,function(a){if(f.Mc.md(e,a.Mf[0].Na))return g=!0,!1});if(g)return null}var c=[],h=b.Ba,k=b.vb,l,m;l=0;for(m=h.length;l<m;l+=1)if(d||"CANVAS"===h[l].tagName){var n=this.g$(b,a,e,h[l],k[l],b.Er);n&&c.push(n)}return b.Oi&&(d=this.Ds.W.pitch,60<d||45<d&&!b.eI)?null:c.length?c:null},i$:function(a){for(var b=0,c=a.length;b<c;b++){var d=this.d$(a[b]); d&&d.length?a[b]=d:(a.splice(b,1),b--,c--)}},d$:function(a){if(!a.length)return null;var b,c;b=0;for(c=a.length;b<c;b++)this.CT(a[b]);b=a[0].wJ;if(11>(a[0].Ef.ke||13)*b||0.75>b)return null;a=this.kba(a);if(!a)return null;var d=!1;b=0;for(c=a.length;b<c;b++)if((new f.Qe(this.Tq(a[b]))).mf(this.t2,10)){d=!0;break}return d?a:null},Tq:function(a,b){b||(b=a.yu);var c=a.Dfa||[0,0,0,0];return[b[0]-c[3],b[1]-c[0],b[2]+c[1],b[3]+c[2]]},kea:function(a,b){this.On.Wx(a,b)},kW:function(a){var b=0,c=0,d=a[2]-a[0], e=a[3]-a[1];1>this.Es&&(b+=Math.min(10,d)*(1-this.Es),c+=Math.min(10,e)*(1-this.Es));return 0===this.On.search([a[0]-b,a[1]-c,a[2]+b,a[3]+c]).length},N9:function(a){for(var b=0,c=a.length;b<c;b++)if(!this.kW(a[b]))return!1;return!0},lW:function(a){for(var b=0,c=a.length;b<c;b++)if(!this.kW(this.Tq(a[b])))return!1;return!0},lea:function(a){for(var b=0,c=a.length;b<c;b++)this.kea(this.Tq(a[b]),a[b].Ef)},kba:function(a){var b,c,d=[],e=[];b=0;for(c=a.length;b<c;b++){var g=a[b];g.Po?d.push(g):e.push(g)}b= this.lW(d);1===d.length&&this.Mha(d[0],e);d=this.lW(e);return b&&d?(this.lea(a),a):null},OU:function(a,b,c,d){var e=a[0],g=[],h,k=0,l;a=a[1];if(d){d=0;for(h=b.length;d<h;d++)0<d&&(k+=c),k+=b[d].height;a-=k}d=0;for(h=b.length;d<h;d++)k=b[d].width,l=b[d].height,g[d]=[e-k/2,a],g[d][2]=g[d][0]+k,g[d][3]=g[d][1]+l,a+=l+c;return g},NU:function(a,b,c,d){var e=a[0],g=a[1];a=[];var h,k,l=0;h=0;for(k=b.length;h<k;h++)0<h&&(l+=c),l+=b[h].height;var m=g-l/2;h=0;for(k=b.length;h<k;h++)g=b[h].width,l=b[h].height, a[h]=[e+(d?-g:0),m],a[h][2]=a[h][0]+g,a[h][3]=a[h][1]+l,m+=l+c;return a},Mha:function(a,b){if(b&&b.length){var c=this.Ds.W.rotation,c=c%360;0>c&&(c+=360);var d=null,e=a.Ef,g,h,k;if(0!==c&&(e.AA&&(!this.xA||10>Math.abs(e.AA.rotation-c))&&(d=e.AA.list,d.length!==b.length&&(d=null)),this.xA&&!d)){h=this.Tq(a);var l=[(h[0]+h[2])/2,(h[1]+h[3])/2],m=0,n=[],p=[];g=0;for(k=b.length;g<k;g++){var q=b[g].su;n[g]={width:q[2]-q[0],height:q[3]-q[1]};1===g&&(m=q[1]-b[0].su[3]);p.push(q)}l=[p,this.OU([l[0],h[3]+ 1],n,m,!1),this.NU([h[2]+1,l[1]],n,m,!1),this.NU([h[0]-1,l[1]],n,m,!0),this.OU([l[0],h[1]-1],n,m,!0)];g=0;for(k=l.length;g<k;g++)if(this.N9(l[g])){m=[];d=0;for(k=b.length;d<k;d++){n=[];for(h=0;4>h;h++)n[h]=l[g][d][h]-b[d].su[h];m[d]=n}d=m;break}d&&(e.AA={list:d,rotation:c})}g=0;for(k=b.length;g<k;g++)if(c=b[g],d){e=[];for(h=0;4>h;h++)e[h]=c.su[h]+d[g][h];c.yu=e}else c.yu=c.su;return!!d}},lca:function(a){var b=a.Ef;if(a.Po)if(a=b.Xe,0===b.br){if(0===a)return[-5,0,-4,0];if(2===a)return[-7,-7,-7,-7]; if(3===a||4===a||5===a||160<=a&&164>=a)return[-8,-8,-8,-8];if(6<=a&&8>=a)return[-5,0,-5,0];if(9===a)return[-7,0,-7,0];if(10<=a&&139>=a&&120!==a||142<=a&&144>=a||150<=a&&159>=a||164<=a&&169>=a)return[-3,-3,-3,-3]}else{if(1===b.br)return[-3,-3,-3,-3]}else if(13<=b.ke)return[-1,-1,-1,-1];return null},CT:function(a){var b=a.GL,c=1;a.wJ=1;if(1>this.Es){var d=this.Nv.height,e=b.y/d;0.5>e&&(d=Math.min(1,0<this.Es?(0.5-e)*d/this.Es*this.u2/3E3:1),a.wJ=1-0.4*d)}c*=a.wJ;d=b.x+a.offset[0]*c;b=b.y+a.offset[1]* c;a.yu=a.su=[d,b,d+a.width*c,b+a.height*c];a.Dfa=this.lca(a);return!0},Lfa:function(a){var b=a[0].Ef.AA,c=[],d=[],e,g;e=0;for(g=a.length;e<g;e++)this.CT(a[e]),a[e].Po?c.push(a[e]):d.push(a[e]);if(b&&b.length===d.length)for(e=0,g=d.length;e<g;e++){a=d[e];for(var c=[],h=0;4>h;h++)c[h]=a.su[h]+b[e][h];a.yu=c}},zV:function(a){function b(a,b,c){if(!e[c])for(var h=0,k=d.length;h<k;h++)if(d[h].Lr.length<g){d[h].jZ.push(c);d[h].Lr.push(b);e[c]=[h,d[h].jZ.length-1];break}e[c]||(d.push({Lr:[b],jZ:[c],list:[]}), e[c]=[d.length-1,0]);a.TH=e[c][1];b=d[e[c][0]];a.Po&&(b.UZ=!0);b.list.push(a)}function c(a,b){var c=a.Po?1:2,d=b.Po?1:2;return c!==d?d-c:a.Nu-b.Nu}var d=[],e={},g=this.gE;if(!a||!a.length)return d;var h,k;h=0;for(k=a.length;h<k;h++)for(var l=0,m=a[h].length;l<m;l++){var n=a[h][l];b(n,n.yha,n.Nu)}h=0;for(k=d.length;h<k;h++)d[h].list.sort(c),d[h].list.reverse();d.sort(function(a,b){return(a.UZ?1:2)-(b.UZ?1:2)});return d},Xka:function(a,b,c){for(var d=[],e=0,g=c.length;e<g;e++)for(var h=c[e],k=0,l=h.length;k< l;k++)if(h[k].Po){l=h[k].yu;h=h[k].Yla;d.push([[(l[0]+l[2])/2,l[3],h.z],[h.x,h.y,h.z]]);break}d.length&&(this.d1(b,d,this.Pn),b.vertexAttribPointer(a.pd,4,b.FLOAT,!1,0,0),b.drawArrays(b.LINES,0,2*d.length))},Saa:function(a,b,c){c=this.zV(c);for(var d=0,e=c.length;d<e;d++)this.Taa(a,b,c[d])},Paa:function(a,b,c){c=this.zV(c);for(var d=0,e=c.length;d<e;d++)this.Qaa(a,b,c[d])},vfa:function(a,b,c,d){var e,g,h=Math.abs(this.r2),k=Math.round(this.zoom),l=k+1;e=0;for(g=b.length;e<g;e+=1){var m=b[e];if(!m.Nl){if(m.Tl> l||m.XK<k)continue;if(!m.Tl&&!m.XK&&1.5<=h)continue}var n=m.dn,p=m.Oi,q=m.Nl;if(c&&(n||q)||d&&p)if(m=this.ufa(a,m))if(n||q)c.push(m);else if(p)d.push(m);else throw Error("Unknow label");}this.HT(c);this.i$(c)},HT:function(a){var b,c,d,e,g,h=[];b=0;for(c=a.length;b<c;b++){d=a[b][0].HL;e=0;for(g=a[b].length;e<g;e++)d!==a[b][e].HL&&console.error("coord not equal!!!!");h[b]=new f.G(d[0],d[1])}d=this.h.J.view.UW(h);b=0;for(c=a.length;b<c;b++)for(e=0,g=a[b].length;e<g;e++)a[b][e].GL=d[b]},fc:function(a, b,c){arguments.callee.oa.apply(this,arguments);if(this.h&&this.h.J){this.ek=b.ek;this.Hf=b.Hf;this.Xl(b,c);var d=this.bj;this.Ds=b;this.xA=this.h.J.view.qw;var e=Date.now(),g=!1;if(this.labels&&7E3<e-this.labels.nga||b.Gb&&b.Gb.length&&this.k4!==b.Gb)g=!0;for(var h=d.length-1;0<=h;h-=1){var k=d[h];if(k.length){var l=k[0].ma.z,m=!1;!1===k.ng||f.Ba.be||this.labels&&this.labels.length&&!b.Qj&&!this.xA&&!g||(m=!0,this.labels=[],this.labels.zoom=l,this.labels.Qu=this.Kf,this.labels.nga=e);if(m)for(l=k.length- 1;0<=l;l-=1){var n=k[l],m=!1,p=n.ta;!p&&n.Fc&&n.Fc.ta&&(p=n.Fc.ta,m=!0);if(p){for(var n=0,q=p.length;n<q;n+=1)p[n].reverse=m;Array.prototype.push.apply(this.labels,p)}}}}b.Gb&&b.Gb.length&&(this.h.Ic.TA&&(this.labels=[]),this.k4=b.Gb,f.a.Ib(b.Gb,function(a){a.Nl=!0}),this.labels.unshift.apply(this.labels,b.Gb),this.hQ=b.Gb.LT);this.ld();this.h.J.wa&&this.labels.length&&this.WL()}},iha:function(a,b){var c=a.Wk||-1,d=b.Wk||-1;c===d&&(c=a.Ba.length,d=b.Ba.length);c===d&&(c=a.ke,d=b.ke);return a.Nl&& !b.Nl?-1:!a.Nl&&b.Nl?1:c!==d?d-c:a.Vk&&b.Vk?a.Vk>b.Vk?1:-1:a.name>b.name?1:-1},RX:function(){this.set("display")},F$:function(){this.On&&(this.On=this.On.Ny=null)},xfa:function(a){var b=Date.now(),c,d,e=[];c=0;for(d=a.length;c<d;c++){var g=b-a[c].$P.startTime;if(200<=g||!f.Mc.md(a[c][0].HL,this.$O))a.splice(c,1),c--,d--;else{for(var g=a[c][0].Ef.Nl?0:a[c].$P.opacity*(1-g/200)*(1-g/200),h=0,k=a[c].length;h<k;h++)a[c][h].opacity=g;a[c][0].Ef.dn&&e.push(a[c])}}this.HT(e);c=0;for(d=e.length;c<d;c++)this.Lfa(e[c])}, Wba:function(){var a=this.h.J.get("highlightColorFactor")||[0.95,0.95,-0.95],b=this.Ds.Wo||"normal",b=b.replace("amap://styles/","");switch(b){case "insight":case "grey":case "dark":case "blue":case "darkblue":case "blue_night":case "mapv":a=[1.5,1.5,1];break;case "graffiti":a=[0.5,0.5,0.5]}return a},Jaa:function(a,b,c){var d=this.T.Ka,e=this.La;d.enable(d.BLEND);d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA);d.enableVertexAttribArray(e.pd);d.uniform2fv(e.YM,this.DM);d.uniform3fv(e.Zha,this.Wba());var g= this.qfa;g.FY(0,this.Nv.width,this.Nv.height,0,-1);d.uniformMatrix4fv(e.aia,!1,g.elements);this.xfa(c);for(var g=[],h=[],k=0,l=c.length;k<l;k++)c[k][0].Ef.Oi?h.push(c[k]):g.push(c[k]);a&&(d.uniform1i(e.ak,0),this.Saa(e,d,h.concat(a)));b&&(d.uniform1i(e.ak,1),this.Paa(e,d,g.concat(b)));d.disableVertexAttribArray(e.pd);d.disable(d.BLEND)},nia:function(){for(var a=this.dA,a=[].concat(this.cA).concat(a),b=this.labels.length=0,c=a.length;b<c;b++)this.labels.push(a[b][0].Ef)},pia:function(a){var b=this.cA.concat(this.dA); if(b&&b.length){var c=[],d=[],e,g;e=0;for(g=a.length;e<g;e++)c.push(a[e][0].Ef);a=Date.now();e=0;for(g=b.length;e<g;e++){var h=b[e][0].Ef;0>c.indexOf(h)&&(!h.Oi||h.eI)&&(b[e].$P={startTime:a,opacity:b[e][0].opacity},d.push(b[e]))}this.Qx.push.apply(this.Qx,d)}},WL:function(){var a=this.T.Ka;this.Nv=this.h.J.get("size");this.t2=new f.Qe(0,0,this.Nv.width,this.Nv.height);this.On&&this.F$();this.On=new f.Kh(32);this.r2=this.labels.zoom-this.zoom;var b=this.Ds.W.pitch*Math.PI/180;this.Es=Math.cos(b); this.u2=Math.sin(b);this.$O=this.Aa.path;this.rS=1;this.labels.zoom>this.zoom&&(this.rS=Math.min(1,Math.max(0.75,1-(this.labels.zoom-this.zoom))));var b=[],c=[];this.labels.sort(this.iha);this.vfa(a,this.labels,b,c);this.pia(b.concat(c));this.cA=b;this.dA=c;this.nia();this.Jaa(c,b,this.Qx);!this.Qx.length&&this.xA||this.set("display")},Pt:function(a){var b;if(this.zoom&&this.On){var c=this.h.J.Je(new f.G(a.Ae(),a.Hd()));a=c.Ae();c=c.Hd();a=this.On.search([a-1,c-1,a+1,c+1]);a.length&&(b=a[0],b.BK= !1)}return b?[b]:[]},Vm:function(a){if(!a)return null;if("IMG"===a.tagName||"CANVAS"===a.tagName||(a=f.Ch.SU(a))&&a.loaded)return a},FD:function(a,b){return a.xd===b.xd&&a.pe===b.pe&&a.wd===b.wd&&a.Td===b.Td},AJ:function(a,b){if("roadlabel"===a||"poilabel"===a)for(var c=0;c<b.length;c+=1){var d=b[c];if(d.Tb){var e="",g="",h="";d.Ud&&(h=d.Ud[0],e=h[3],g=h[4],h=d.Oi?"":h[7]);if(e=this.T.Nt&&this.T.Nt(e,g,h,d.Tb,d.Fq))d.visible=e[4],d.Wj=e[3],d.bd=e[0];if(d.Ud)for(g=0;g<d.Ud.length;g+=1)h=d.Ud[g],h[3]= e[0],h[4]=e[1],d.dn&&(h[7]=e[2])}}}});f.Ja.A_=f.Ja.NE.extend({ga:[f.dF],type:"road_poi_label_limg",B:function(a,b){arguments.callee.oa.apply(this,arguments);this.xc=f.a.Lb(this);this.Oj=!0}});f.Ja.B_=f.Ja.NE.extend({type:"road_poi_label",B:function(a,b){arguments.callee.oa.apply(this,arguments);this.xc=f.a.Lb(this);a.h.J.en&&this.cx(a,b);this.Oj=!1;this.cq=f.w.zv.Eh;a.h.g("zoomend",this.Ii,this);a.h.g("moveend",this.Ii,this)}});f.Ja.NE.ob({Qp:function(a,b){if(a){if(!this.kj||this.kj.M!==a||this.kj.Fl!==b){var c=[];this.kj&&c.push(this.kj.M);this.kj={M:a,Fl:b};c.push(a);this.RX(c)}}else this.Kv()},Kv:function(){this.kj=null},vB:function(){},AB:function(){if(this.kj){var a=[this.kj.M];this.kj=null;this.RX(a)}}});f.Ja.Sd.Gc=f.ba.extend({B:function(a){this.Vi=a},Jy:function(a,b){var c=document.createDocumentFragment(),d=b&&b.wK?null:{},e=!0,g;for(g in a)if(a.hasOwnProperty(g)){var h=a[g],k,l=h.get("params");if(h.ea)k=h.ea;else{k=f.j.create("div");k.className="amap-marker";var m=l.pg,n=l.KY;m&&k.appendChild(m);n&&k.appendChild(n);h.ea=k;h.pg=m;if(n=l.title)m.title=n;this.q.Ik=!0;-1===f.a.indexOf(this.q.Jf,h)&&this.q.Jf.push(h);h.Ug=!0}var m=l.offset,n=m.x,p=m.y,q=l.textAlign,r=l.verticalAlign,m=!1;if("left"!== q||"top"!==r)if(k.parentNode!==this.Vi&&d&&(m=!0,d[g]=h,e=!1),!m){var s=f.j.Hx(h.pg),u=s[0],s=s[1];switch(q){case "center":n-=u/2;break;case "right":n-=u}switch(r){case "middle":p-=s/2;break;case "bottom":p-=s}}h.Ug?(r=[],q=h.Y.Na,q=new f.G(q[0],q[1]),u=this.q.h.J.view.Je(q,null,l.altitude),h.ra=this.ra,q=Math.round(u.y+p),u=Math.round(u.x+n),r.push("top:"+q+"px"),r.push("left:"+u+"px"),r.push("z-index:"+(l.mW?this.q.wn+10:l.zIndex)),f.l.ne||r.push(f.j.rV(k,l.LB,{x:-n,y:-p})),r.push("display:"+(l.visible? "block":"none")+";"),k.style.cssText=r.join(";"),(n=l.label)&&n.content&&(l=l.qW,u=q=0,n.offset&&(q=n.offset.y+"px",u=n.offset.x+"px"),l.style.top=q,l.style.left=u,k.appendChild(l))):(q=h.Y.Na,q=new f.G(q[0],q[1]),u=this.q.h.J.view.Je(q,null,l.altitude),q=Math.round(u.y+p),u=Math.round(u.x+n),h.ra=this.ra,k.style.top=q+"px",k.style.left=u+"px");h.zoom=this.zoom;k.parentNode!==this.Vi&&(f.l.Dh&&f.a.iepngFix(k),c.appendChild(k),h.Ug=m);k.yw=this.Vi}this.Vi.appendChild(c);e||this.Jy(d,{wK:!0})},vo:function(a){return[(a[0]- this.ra.x)/this.S,(a[1]-this.ra.y)/this.S]}});f.Ja.Sd.gj=f.Ja.oc.extend({B:function(a,b){this.ida=!0;arguments.callee.oa.apply(this,arguments);this.Df()},bK:function(){return this.mb.zM},$h:function(){return this.xb},Df:function(){this.xb=document.createElement("div");this.xb.className="amap-markers";this.mb=new f.Ja.Sd.Gc(this.xb);this.mb.q=this.q;this.T.K.appendChild(this.xb)},xp:function(a,b,c){this.du=c;this.bf=b.W.bf;this.S=b.W.S;this.zoom=b.W.zoom;this.size=b.size;this.Aa=b.W.Aa;this.jn=b.S;this.hb=b.W.eb;this.qh=b.W.qh;a=!1;if(!this.ra|| 3E4<Math.abs(this.hb.x-this.ra.x)/this.S||3E4<Math.abs(this.hb.y-this.ra.y)/this.S)a=!0;if(a||this.zoom<<0!==this.zoom||this.qe!==this.zoom)this.ra=this.hb,this.qe=this.zoom},Yq:function(a){a=a.W.Aa.path;for(var b=a.length,c,d,e,g,h=0;h<b;h++)0===h?(c=a[h][0],e=a[h][0],d=a[h][1],g=a[h][1]):(a[h][0]<c&&(c=a[h][0]),a[h][0]>e&&(e=a[h][0]),a[h][1]<d&&(d=a[h][1]),a[h][1]>g&&(g=a[h][1]));return[c,d,e,g]},Ar:function(){if(this.xg&&this.xg)for(var a in this.xg)if(this.xg.hasOwnProperty(a)){var b=this.xg[a]; b.Lc!==this.Lc&&b.ea&&this.T.lj.appendChild(b.ea)}},fc:function(a,b,c){this.Lc=1E6*Math.random()<<0;this.xp(a,b,c);this.W=b.W;this.size=b.size;var d=this.q;this.ee=256;var e;this.Nda=d=d.Li(this.Yq(b));for(e in d)d.hasOwnProperty(e)&&(d[e].Lc=this.Lc,d[e].xW=this);this.Ar(d);this.xp.call(this.mb,a,b,c);this.mb.Jy(d);this.xg=d;this.Ne(b)},Ne:function(){var a=Math.pow(2,this.zoom-this.ce);this.transform={translate:this.ra.Va(this.hb).vc(this.S),scale:a,rotate:0}},Sq:function(a,b){var c=this.q,d=this.Nda, e=[];if(d&&a){var g=this.q.h.J.view.Je(a);if(c.Ik){for(var h=c.Jf,k=!0,l=[],m=0;m<h.length;m+=1){var n=h[m].pg;if(n)if(n.parentNode&&n.parentNode.parentNode&&this.T&&n.parentNode.parentNode!==this.T.lj&&"none"!==n.parentNode.style.display){var p=n.clientWidth,q=n.clientHeight;n.childNodes[0]&&(p=p||n.childNodes[0].clientWidth,q=q||n.childNodes[0].clientHeight);window.opera&&(p=Math.max(p,n.childNodes[0].scrollWidth),q=Math.max(q,n.childNodes[0].scrollHeight));p&&q?(n=Math.max(Math.abs(h[m].get("offset").x), Math.abs(h[m].get("offset").y))+Math.max(p,q),c.Fe=Math.max(c.Fe,n),c.af=Math.max(c.af,n),h[m].width=p,h[m].height=q):(k=!1,l.push(h[m]))}else k=!1,l.push(h[m])}k?(c.Ik=!1,c.Jf=[]):c.Jf=l}for(var r in d)if(d.hasOwnProperty(r)&&(h=function(a,b){var c=Math.round(a.x+t),d=Math.round(a.x+t+v),e=Math.round(a.y+y+x),g=Math.round(a.y+y),h=Math.round(b.x),k=Math.round(b.y);return h<=d&&h>=c&&k<=e&&k>=g?!0:!1},k=d[r],m=k.Y)){l=k.get("params");m=m.Na;m=new f.G(m[0],m[1]);m=this.q.h.J.view.Je(m,null,l.altitude); if(n=l.LB%360){var p=g.x-m.x,q=g.y-m.y,s=Math.PI*n/180,n=Math.cos(-s),s=Math.sin(-s),u=p*s+q*n;g.x=m.x+(p*n-q*s);g.y=m.y+u}var v=k.width,x=k.height,t=l.offset.x,y=l.offset.y,p=l.verticalAlign;switch(l.textAlign){case "center":t-=v/2;break;case "right":t-=v}switch(p){case "middle":y-=x/2;break;case "bottom":y-=x}p=!1;l.shape?(g.x-=t,g.y-=y,p=this.$x(k,g,m)):p=h(m,g);p&&e.push(k)}e.sort(function(a,b){return a.get("isTop")?-1:b.get("isTop")?1:a.get("zIndex")>b.get("zIndex")||a.get("zIndex")===b.get("zIndex")&& a.Ej>b.Ej?-1:1});b(e,c)}else b([],c)},$x:function(a,b,c){a=a.get("params").shape;if("circle"===a.F.type){var d=c.x+a.F.coords[0];c=c.y+a.F.coords[1];if(Math.sqrt((b.x-d)*(b.x-d)+(b.y-c)*(b.y-c))<=a.F.coords[2])return!0}else{if("poly"===a.F.type)return b=[b.x,b.y],a=a.F.coords,a=this.$B(a),f.Mc.md(b,a);if("rect"===a.F.type){a=a.F.coords;c=a[0];var d=a[1],e=a[3],g=b.x;b=b.y;if(g<a[2]&&g>c&&b>e&&b<d)return!0}}return!1}});f.Ja.h0=f.Ja.qv.extend({type:"traffic",dj:"\\n    precision highp float;\\n    attribute vec4 a_Position;\\n    attribute vec3 a_Op, a_Pre, a_Next;\\n    \\n    uniform float u_Scale;\\n    uniform float u_Width;\\n\\n    uniform mat4 u_modelViewMatrix,u_projectionMatrix;\\n\\n    void main() {\\n      vec4 position = a_Position;\\n\\n      vec3 dir, preDir, nextDir;\\n      vec3 curCoord = position.xyz;\\n      vec3 preCoord = a_Pre.xyz;\\n      vec3 nextCoord = a_Next.xyz;\\n\\n      if (curCoord == preCoord) {\\n        dir = normalize(nextCoord - curCoord);\\n      } else if (curCoord == nextCoord) {\\n        dir = normalize(curCoord - preCoord);\\n      } else {\\n        preDir = normalize(preCoord - curCoord);\\n        nextDir = normalize(nextCoord - curCoord);\\n\\n        if (preDir == -nextDir) {\\n          dir = nextDir; \\n        } else {\\n          dir = normalize(-preDir + nextDir); \\n\\n          float cosA = dot(dir, -preDir);\\n\\n          if (cosA > sqrt(3.0) / 2.0) {\\n            cosA = sqrt(3.0) / 2.0; \\n          }\\n\\n          dir = dir / cosA;\\n        }\\n      }\\n\\n      if (a_Op.z > 0.0) {\\n        position.x = position.x - dir.y * u_Width;\\n        position.y = position.y + dir.x * u_Width;\\n      } else {\\n        position.x = position.x + dir.y * u_Width;\\n        position.y = position.y - dir.x * u_Width;\\n      }\\n\\n      gl_Position=u_projectionMatrix*u_modelViewMatrix*position;\\n    }\\n  ", le:"\\n    precision lowp float;\\n    uniform vec4 v_Color;\\n\\n    void main() {\\n      gl_FragColor=v_Color;\\n    }\\n  ",B:function(a,b){this.FM=300;this.Th=!0;arguments.callee.oa.apply(this,arguments);this.Ei=20;this.jb=this.q.jb},Ah:function(a,b){b.Bf=a.getAttribLocation(b,"a_Position");b.ph=a.getAttribLocation(b,"a_Next");b.kT=a.getAttribLocation(b,"a_Pre");b.hI=a.getAttribLocation(b,"a_Op");b.yp=a.getUniformLocation(b,"v_Color");b.Qha=a.getUniformLocation(b,"u_Scale");b.ez=a.getUniformLocation(b, "u_Width")},Ij:function(){return Math.pow(2,this.zoom-this.Ei)*(this.q.ja?this.jb:1)},Pk:function(a){for(var b=a.length-1;0<=b;b-=1){var c=a[b];if(c.length){var d=function(){var a=c.length;return function(){--a}}();this.Kr(c);this.fn+=c.length;for(var e=c.length-1;0<=e;e-=1)this.Ri(c[e],this.Lj,d)}}},Ri:function(a){var b=a.ma;this.xa.Bc(a.key)||(this.xa.set(a.key,a),a.status="loading");var c=this.q.Dl(b.x,b.y,b.z),c=new f.Sa.bb(c,{callback:"callback"});c.g("complete",function(c){var e=this;this.q&& (a.Ca=c.data?c.data[f.a.tC(b.x,b.y,b.z).join("_")]:[],this.kr+=1,f.CE.gfa({lc:a.ma.z,Rc:[a],Z:this.q.get("forceBig")||f.l.Z,jb:this.q.get("forceBig")?1:this.jb,cd:this.q.get("forceBig")?!1:this.q.ja},function(a,b){b.data.Rc.forEach(function(a){e.Jha(a.Ca);a.status="loaded";a.qa=!0;e.xa.set(a.key,a)});e.set("display")}))},this);c.g("error",function(){a.status=null},this)},ld:function(){this.kr>=this.fn&&(this.q.wa||(this.q.wa=!0),this.q.$c?this.q.ha("renderComplete"):(this.q.$c=!0,this.q.ha("complete")))}, fc:function(a,b,c){arguments.callee.oa.apply(this,arguments);this.Ka=a;this.Xl(b,c);if(this.bj.length&&this.bj[0].length){var d=this.bj[0].filter(function(a){return"loaded"===a.status});d.length&&this.ip(a,d)}this.ld()},Jha:function(a){var b=this,c=this.T.Ka;a.forEach(function(a){a&&a[0].length&&a[1].length&&(a.De=a[1].length,a[0]=b.vi(c.ARRAY_BUFFER,a[0]),a[1]=b.vi(c.ELEMENT_ARRAY_BUFFER,a[1]))})},vi:function(a,b){if(b.length){var c=this.T.Ka,d=c.createBuffer();c.bindBuffer(a,d);c.bufferData(a,b, c.STATIC_DRAW);return d}},ip:function(a,b){var c=this;if(b.length){var d=this.La;a.useProgram(d);a.enableVertexAttribArray(d.Bf);a.enableVertexAttribArray(d.hI);a.enableVertexAttribArray(d.kT);a.enableVertexAttribArray(d.ph);b.forEach(function(b){return c.Vaa(a,b.Ca)})}},nC:function(a){var b=this;a.Ca&&a.Ca.forEach(function(a){b.T.Ka.deleteBuffer(a[0]);a[0]=null;b.T.Ka.deleteBuffer(a[1]);a[1]=null;a[2]=null})},Vaa:function(a,b){var c=this,d=this.La;b.forEach(function(b){if(0<b.De){var g=b[2].borderColor, h=b[2].width;g&&(a.bindBuffer(a.ARRAY_BUFFER,b[0]),a.uniform1f(d.Qha,c.Ij()),a.uniform1f(d.ez,h/c.Ij()/2),a.uniform4fv(d.yp,g),a.vertexAttribPointer(d.Bf,2,a.FLOAT,!1,36,0),a.vertexAttribPointer(d.hI,3,a.FLOAT,!1,36,8),a.vertexAttribPointer(d.kT,2,a.FLOAT,!1,36,20),a.vertexAttribPointer(d.ph,2,a.FLOAT,!1,36,28),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,b[1]),a.drawElements(a.TRIANGLES,b.De,a.UNSIGNED_SHORT,0))}})}});f.Ja.gj=f.Ja.oc.extend({type:"vector",dj:"\\n    precision highp float;\\n\\n    attribute highp vec4 v_Position;\\n    attribute vec4 v_PositionDir;\\n    attribute vec3 v_Props;\\n\\n    uniform vec2 u_DeltaPos;\\n    uniform highp float u_Width;\\n    uniform lowp int u_Type;\\n\\n    varying highp float v_Distance;\\n    varying float v_Render;\\n    uniform highp vec2 u_radius;\\n\\n    uniform mat4 u_modelViewMatrix,u_projectionMatrix;\\n\\n    void main() {\\n      highp vec4 position = vec4(v_Position.xy, 0, 1);\\n\\n      if (u_Type == 1 || u_Type == 5) {\\n        v_Distance = v_Props.x + u_Width * v_Props.y;\\n        v_Render = v_Props.z;\\n        float dis = sqrt(v_PositionDir.x*v_PositionDir.x+v_PositionDir.y*v_PositionDir.y);\\n        float x = v_PositionDir.x;\\n        float y = v_PositionDir.y;\\n        if(v_PositionDir.z==0.0&&v_PositionDir.w==0.0&&dis>4.0){\\n            x = v_PositionDir.x/dis*4.0;\\n            y = v_PositionDir.y/dis*4.0;\\n        }\\n        position.x = (position.x + u_Width * x) + u_Width * v_PositionDir.z;\\n        position.y = (position.y + u_Width * y) + u_Width * v_PositionDir.w;\\n      }\\n\\n      gl_Position=u_projectionMatrix*u_modelViewMatrix*(position + vec4(u_DeltaPos.xy, 0, 0));\\n      gl_PointSize = (2.0*u_radius.x+2.0);\\n    }\\n  ", le:"\\n    precision highp float;\\n\\n    uniform vec4 v_Color;\\n    uniform vec4 u_ColorBorder;\\n    uniform vec3 u_Dash;\\n    // 2-[10, 10] 3-[10, 2, 10]\\n    uniform float u_DashType;\\n\\n    varying highp float v_Distance;\\n    varying float v_Render;\\n\\n    uniform lowp int u_Type;\\n\\n    uniform highp vec2 u_radius;\\n\\n    void main() {\\n      if (u_Type == 1 || u_Type == 5) {\\n        if (u_DashType == 2.0) {\\n          if (u_Dash[0] != 0.0 && u_Dash[1] != 0.0) {\\n            float all = u_Dash[0] + u_Dash[1];\\n            float off = mod(v_Distance, all);\\n\\n            if (off > u_Dash[0] && off <= all) {\\n              discard;\\n            }\\n          } \\n        } else if(u_DashType == 3.0) {\\n          if (u_Dash[0] != 0.0 && u_Dash[1] != 0.0 && u_Dash[2] != 0.0) {\\n            float all = u_Dash[0] * 2.0 + u_Dash[1] * 2.0 + u_Dash[2] * 2.0;  \\n            float off = mod(v_Distance, all);\\n\\n            vec3 solidBound = vec3(u_Dash[0], u_Dash[0] + u_Dash[1] + u_Dash[2], u_Dash[0] * 2.0 + u_Dash[1] * 2.0 + u_Dash[2]);\\n            vec3 dashBound = vec3(solidBound.x + u_Dash[1], solidBound.y + u_Dash[0], solidBound.z + u_Dash[2]);\\n\\n            if (off > solidBound.x && off <= dashBound.x \\n             || off > solidBound.y && off <= dashBound.y\\n             || off > solidBound.z && off <= dashBound.z) {\\n                discard; \\n             }\\n          } \\n        }\\n\\n        if (v_Render < 0.0) {\\n          discard; \\n        }\\n      }\\n      if(u_Type==6){\\n        float dis2center = distance(gl_PointCoord,vec2(0.5,0.5));\\n        float dis2border = dis2center*(u_radius.x+1.0)*2.0;\\n        if(dis2border<=u_radius.y-0.5){\\n          gl_FragColor=v_Color;\\n        }else if(dis2border<u_radius.x-0.5){\\n          if(dis2border<u_radius.y+0.5){\\n            float fac = 0.5-dis2border+u_radius.y;\\n            gl_FragColor = fac*v_Color+(1.0-fac)*u_ColorBorder;\\n          }else{\\n            gl_FragColor=u_ColorBorder;\\n          }\\n        }else {\\n          if(dis2border<=u_radius.x+0.5){\\n            gl_FragColor = u_ColorBorder;\\n            gl_FragColor.a *= 0.5-dis2border+u_radius.x;\\n          }else{\\n            discard;\\n          }       \\n        }\\n      }else\\n      gl_FragColor=v_Color;\\n    }\\n  ", Tk:[215440491,106744817],Ij:function(){return Math.pow(2,this.zoom-this.Ei)*(this.T.ja?this.jb:1)},ar:function(a,b){a=f.a.dC(a);var c;"#"==a[0]?(a=a.substring(1),3==a.length&&(a=a.replace(/./g,function(a){return a+a})),c=f.a.Vf(8==a.length?a:"ff"+a)):c=a;c=c.match(/rgba?\\((.+)\\)/)[1].split(",").slice(0,3).map(function(a){return a/255});void 0===b&&(b=1);return c.concat(b)},Ah:function(a,b){b.cm=a.getAttribLocation(b,"v_Position");b.lz=a.getAttribLocation(b,"v_PositionDir");b.mz=a.getAttribLocation(b, "v_Props");b.hI=a.getAttribLocation(b,"a_Op");b.yp=a.getUniformLocation(b,"v_Color");b.Pha=a.getUniformLocation(b,"u_ColorBorder");b.dz=a.getUniformLocation(b,"u_Type");b.bia=a.getUniformLocation(b,"u_radius");b.mE=a.getUniformLocation(b,"u_Dash");b.cz=a.getUniformLocation(b,"u_DashType");b.Vu=a.getUniformLocation(b,"u_DeltaPos");b.ez=a.getUniformLocation(b,"u_Width");this.qu=this.Bt=this.cn=void 0;this.dk=0},Rka:function(){},E2:function(a){var b=this.Ka,c=this.La;b.useProgram(c);b.disableVertexAttribArray(c.cm); b.disableVertexAttribArray(c.lz);b.disableVertexAttribArray(c.mz);b.uniform2fv(c.Vu,[0,0]);b.uniform1f(c.cz,0);b.disable(b.DEPTH_TEST);b.enable(b.BLEND);b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA);a()},rU:function(){"function"===typeof this.Jt[this.Dj[0]]?this.It(this.Dj[0],this.Jt[this.Dj[0]]):this.Dj.shift()},It:function(a,b,c){this.Dj.length&&(this.Dj[0]===a?(this.E2(b),c||this.Dj.shift(),"function"===typeof this.Jt[this.Dj[0]]&&this.It(this.Dj[0],this.Jt[this.Dj[0]])): this.Jt[a]=b)},mp:256*Math.pow(2,20),B:function(a,b){this.Th=!0;arguments.callee.oa.apply(this,arguments);this.Ei=20;this.jb=this.q.jb;this.Dj=[];this.Jt={};this.Ap=0},Yq:function(a){a=a.W.Aa.path;for(var b=a.length,c,d,e,g,h=0;h<b;h++)0===h?(c=a[h][0],e=a[h][0],d=a[h][1],g=a[h][1]):(a[h][0]<c&&(c=a[h][0]),a[h][0]>e&&(e=a[h][0]),a[h][1]<d&&(d=a[h][1]),a[h][1]>g&&(g=a[h][1]));return[c,d,e,g]},fc:function(a,b,c){var d=this;arguments.callee.oa.apply(this,arguments);this.Ka=a;this.Ap++;a.cullFace(a.BACK); this.Dj.length=0;this.Jt={};this.W=b.W;this.S=this.W.S;this.zoom=b.W.zoom;if(this.q.Yh&&this.q.Yh.$m.length){var e=this.q.Yh.$m.filter(function(a){return!!a});this.q.fK(e).forEach(function(a){d.$fa(a[0],null)})}},$fa:function(a){for(var b=0,c=a.length;b<c;b+=1){var d=a[b],e=d.name.split("-")[0],e="render"+e.slice(0,1).toUpperCase()+e.slice(1);this.Dj.push(d._amap_id);if("function"===typeof this[e])this[e](d)}},renderPolygon:function(a){function b(b,h){var l="number"===typeof k.strokeWeight;0>=k.strokeWeight&& (k.strokeWeight=1);c.It(a._amap_id,function(){e.bindBuffer(e.ARRAY_BUFFER,b[0]);e.vertexAttribPointer(d.cm,2,e.FLOAT,!1,0,0);e.enableVertexAttribArray(d.cm);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,b[1]);e.uniform1i(d.dz,2);e.uniform4fv(d.yp,m);a.get("deltaPos")&&e.uniform2fv(d.Vu,a.get("deltaPos"));e.drawElements(e.TRIANGLES,b.De,e.UNSIGNED_SHORT,0);l&&c.cY(h.Na,k,h,a,g)})}var c=this,d=this.La,e=this.Ka,g=this.Ap,h=[],k=a.style,l=a.Y;l instanceof f.pa.bc?h=[l]:l instanceof f.pa.ks&&(h=l.We);e.enable(e.BLEND); var m=this.ar(k.fillColor,k.fillOpacity);h.forEach(function(a){a.Mf.forEach(function(a){if(a.Ca)b(a.Ca,a);else{var d=a.Na;f.PZ.tX({lc:c.h.get("zoom"),ur:f.a.Ab(d),cd:c.q.get("forceBig")?!1:!!c.q.ja},function(d,h){if(c.Ap===g){var k=h.data;k.De=k[1].length;k[0]=c.vi(e.ARRAY_BUFFER,k[0]);k[1]=c.vi(e.ELEMENT_ARRAY_BUFFER,k[1]);a.Ca=k;b(a.Ca,a)}})}})})},renderPolyline:function(a){function b(b){c.It(a._amap_id,function(){function g(){b.A4?f.a.Ib(b,function(a){return h(a)}):h(b)}function h(a){e.bindBuffer(e.ARRAY_BUFFER, a[0]);e.vertexAttribPointer(d.cm,2,e.FLOAT,!1,36,0);e.vertexAttribPointer(d.lz,4,e.FLOAT,!1,36,8);e.vertexAttribPointer(d.mz,3,e.FLOAT,!1,36,24);e.enableVertexAttribArray(d.cm);e.enableVertexAttribArray(d.lz);e.enableVertexAttribArray(d.mz);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a[1]);e.drawElements(e.TRIANGLES,a.De,e.UNSIGNED_SHORT,0)}a.get("deltaPos")&&e.uniform2fv(d.Vu,a.get("deltaPos"));"dashed"===l.strokeStyle&&2<=l.strokeDasharray.length&&(2==l.strokeDasharray.length?(e.uniform1f(d.cz,2),e.uniform3fv(d.mE, l.strokeDasharray.map(function(a){return a/c.Ij()}).concat(0))):(l.strokeDasharray=l.strokeDasharray.slice(0,3),e.uniform1f(d.cz,3),e.uniform3fv(d.mE,l.strokeDasharray.map(function(a){return a/c.Ij()}))));e.uniform1i(d.dz,1);l.isOutline&&(1>l.borderWeight&&(l.borderWeight=1),e.uniform1f(d.ez,(l.strokeWeight+2*l.borderWeight)/c.Ij()/2*c.jb),e.uniform4fv(d.yp,c.ar(l.outlineColor,l.strokeOpacity)),g());e.uniform1f(d.ez,l.strokeWeight/c.Ij()/2*c.jb);e.uniform4fv(d.yp,c.ar(l.strokeColor,l.strokeOpacity)); g()})}var c=this,d=this.La,e=this.Ka,g=this.Ap,h=3*parseInt(Math.pow(2,16)/3),k=[],l=a.style,m=a.Y;if(l.strokeColor){1>l.strokeWeight&&(l.strokeWeight=1);var n=l.lineJoin||"miter";"round"===n&&(n="bevel");m instanceof f.pa.Kn?k=[m]:m instanceof f.pa.vv&&(k=m.We);k.forEach(function(a){a.Ca?b(a.Ca):f.hN.parse({ur:f.a.Ab(a.Na),lineJoin:n,lineCap:l.lineCap||"butt",cn:"dashed"===l.strokeStyle},function(d,k){function l(a){var b=Math.min.apply(null,a[1]),d=Math.max.apply(null,a[1]);a[0]=m[0].slice(9*b,9* (d+1));a[1]=f.a.map(a[1],function(a){return a-b});a.De=a[1].length;a[0]=c.vi(e.ARRAY_BUFFER,new Float32Array(a[0]));a[1]=c.vi(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(a[1]))}if(c.Ap===g){var m=k.data;m.De=m[1].length;if(m.De>h){var n=Math.ceil(m.De/h);m.count=n;m.cE=[];for(var x=0;x<n;x++)m.cE[x]=[[],[]],m.cE[x][1]=m[1].slice(x*h,(x+1)*h),l(m.cE[x]);a.Ca=m.cE;a.Ca.A4=!0}else m[0]=c.vi(e.ARRAY_BUFFER,m[0]),m[1]=c.vi(e.ELEMENT_ARRAY_BUFFER,m[1]),a.Ca=m;b(a.Ca)}})})}else this.rU()},vi:function(a,b){if(b.length){var c= this.T.Ka,d=c.createBuffer();c.bindBuffer(a,d);c.bufferData(a,b,c.STATIC_DRAW);return d}},Yfa:function(a){function b(b,e){0>=e.strokeWeight&&(e.strokeWeight=0);d.enable(d.BLEND);d.blendFuncSeparate(d.SRC_ALPHA,d.ONE_MINUS_SRC_ALPHA,d.ONE,d.ONE_MINUS_SRC_ALPHA);d.vertexAttrib4f(c.cm,b[0],b[1],b[2],1);d.uniform1i(c.dz,6);d.uniform2f(c.bia,e.radius+e.strokeWeight,e.radius);var h=g.fillColor,k=h;e.strokeWeight&&(k=g.strokeColor);d.uniform4fv(c.Pha,k);d.uniform4fv(c.yp,h);d.uniform2fv(c.Vu,a.get("deltaPos")|| [0,0]);d.drawArrays(d.POINTS,0,1)}var c=this.La,d=this.Ka,e=a.style,g=a.Y,h=g;if(h.Ca)b(h.Ca,e);else{var k=h.Na,k=[k[0]-f.a.Wc.x,k[1]-f.a.Wc.y,0];h.Ca=k;h.fillColor=this.ar(e.fillColor,e.fillOpacity);h.strokeColor=this.ar(e.strokeColor,e.strokeOpacity);b(k,e)}},renderCircle:function(a){function b(b,g,h,k){0>=g.strokeWeight&&(g.strokeWeight=0);c.It(a._amap_id,function(){e.bindBuffer(e.ARRAY_BUFFER,b[0]);e.vertexAttribPointer(d.cm,2,e.FLOAT,!1,0,0);e.enableVertexAttribArray(d.cm);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, b[1]);e.uniform1i(d.dz,3);e.uniform4fv(d.yp,c.ar(g.fillColor,g.fillOpacity));a.get("deltaPos")&&e.uniform2fv(d.Vu,a.get("deltaPos"));e.drawElements(e.TRIANGLES,b.De,e.UNSIGNED_SHORT,0);c.cY(c.eca(h),g,k,a,l)})}if(a.fr)this.Yfa(a);else{var c=this,d=this.La,e=this.Ka,g=[],h=a.style,k=a.Y,l=this.Ap;k instanceof f.pa.Qf&&(g=[k]);g.forEach(function(d){if(d.Ca)b(d.Ca,h,d.LZ,d);else{var g=d.Na,k=c.h.J.de({x:g[0],y:g[1]});f.PZ.pX({hb:g.map(function(a,b){return a-c.Tk[b]}),Yi:a.get("radius")/(c.h.J.view.getResolution(20)* Math.cos(k.P*Math.PI/180))},function(a,g){if(c.Ap===l){var k=g.data;k.De=k[1].length;var n=f.a.Ab(k[0]).slice(2);k[0]=c.vi(e.ARRAY_BUFFER,new Float32Array(k[0]));k[1]=c.vi(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(k[1]));d.Ca=k;d.LZ=n;b(k,h,n,d)}})}})}},eca:function(a){var b=this,c=[];a.forEach(function(a,e){var g=Math.floor(e/2);void 0===c[g]?c[g]=[a+b.Tk[0]]:c[g][1]=a+b.Tk[1]});return c},cY:function(a,b,c,d,e){function g(a){h.It(d._amap_id,function(){k.bindBuffer(k.ARRAY_BUFFER,a[0]);k.vertexAttribPointer(l.cm, 2,k.FLOAT,!1,36,0);k.vertexAttribPointer(l.lz,4,k.FLOAT,!1,36,8);k.vertexAttribPointer(l.mz,3,k.FLOAT,!1,36,24);k.enableVertexAttribArray(l.cm);k.enableVertexAttribArray(l.lz);k.enableVertexAttribArray(l.mz);k.uniform1i(l.dz,5);"dashed"==b.strokeStyle&&2<=b.strokeDasharray.length&&(2==b.strokeDasharray.length?(k.uniform1f(l.cz,2),k.uniform3fv(l.mE,b.strokeDasharray.map(function(a){return a/h.Ij()}).concat(0))):(b.strokeDasharray=b.strokeDasharray.slice(0,3),k.uniform1f(l.cz,3),k.uniform3fv(l.mE,b.strokeDasharray.map(function(a){return a/ h.Ij()}))));m&&k.uniform2fv(l.Vu,m);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,a[1]);k.uniform1f(l.ez,b.strokeWeight/h.Ij()/2*h.jb);k.uniform4fv(l.yp,h.ar(b.strokeColor,b.strokeOpacity));k.drawElements(k.TRIANGLES,a.De,k.UNSIGNED_SHORT,0)})}var h=this,k=this.Ka,l=this.La,m=d.get("deltaPos");c.Ct?g(c.Ct):a.length?f.hN.parse({ur:f.a.Ab(a),gda:!0},function(a,b){if(h.Ap===e){var d=b.data;d.De=d[1].length;d[0]=h.vi(k.ARRAY_BUFFER,d[0]);d[1]=h.vi(k.ELEMENT_ARRAY_BUFFER,d[1]);c.Ct=d;g(c.Ct)}}):this.rU()}});f.Ja.I_=f.Ja.gj.extend({type:"massVector",pI:1,DM:[1,0,1,1,0,0,1,1,0,1,0,0],dj:"precision mediump float;attribute highp vec4 position;varying vec4 v_texcoord;uniform vec2 u_texVertices[6];uniform highp mat4 u_modelViewMatrix;uniform highp mat4 u_projectionMatrix;uniform mat4 u_textureMatrix;void main(void) { int pointIdx = int(position.z);  v_texcoord = vec4((u_textureMatrix * vec4(u_texVertices[pointIdx].xy, 0.0, 1.0))); vec4 pos =  vec4(position.xy, 0.0, 1.0); gl_Position = u_projectionMatrix * u_modelViewMatrix * pos;}", le:"precision mediump float;uniform sampler2D texture;varying vec4 v_texcoord;void main(void) { gl_FragColor =  texture2D(texture, v_texcoord.xy);}",Ah:function(a,b){b.pd=a.getAttribLocation(b,"position");b.np=a.getUniformLocation(b,"texture");b.YM=a.getUniformLocation(b,"u_texVertices");b.ZM=a.getUniformLocation(b,"u_textureMatrix")},B:function(a,b){arguments.callee.oa.apply(this,arguments);this.xc=f.a.Lb(this);this.Pn=b.Ka.createBuffer();this.Ba={}},fc:function(a,b,c){arguments.callee.oa.oa.apply(this, arguments);this.W=b.W;this.S=this.W.S;this.zoom=b.W.zoom;var d=this.q.Li(this.Yq(b)),e=[],g;for(g in d)d.hasOwnProperty(g)&&e.push(d[g]);this.UL(e)},UL:function(a){var b={},c=this.q.get("style");a.forEach(function(a){var d=c;d instanceof Array&&(d="number"===typeof a.Ra.style&&d[a.Ra.style]?d[a.Ra.style]:d[0]);b[d.url]||(b[d.url]={style:d,list:[]});b[d.url].list.push(a)});this.M7();for(var d in b)b.hasOwnProperty(d)&&this.aga(b[d].style,b[d].list);this.L7()},M7:function(){var a=this.La,b=this.T.Ka; b.enable(b.BLEND);b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA);b.enableVertexAttribArray(a.pd);b.uniform2fv(a.YM,this.DM)},L7:function(){var a=this.T.Ka;a.disableVertexAttribArray(this.La.pd);a.disable(a.BLEND)},aga:function(a,b){var c=this.Vm(a.url);if(!c)return!1;c.Bm&&c.Bm.xc===this.xc||(c.Bm=this.yI(c),c.Bm.xc=this.xc);for(var d=a.size.width,e=a.size.height,g=a.anchor.x,h=a.anchor.y,k=[],l=0,m=b.length;l<m;l++){var n=b[l].Y.Na,p=this.S,n=[n[0]-g*p,n[1]-h* p];k.push(this.WH([n[0],n[1],n[0]+d*p,n[1]+e*p]))}this.G2(c.Bm,k);return!0},G2:function(a,b){var c=this.La,d=this.T.Ka;d.disable(d.DEPTH_TEST);d.activeTexture(d.TEXTURE0);d.bindTexture(d.TEXTURE_2D,a.hc);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR);var e=this.HC(a.width,a.height,[0,0,a.width,a.height]);d.uniformMatrix4fv(c.ZM,!1,e.elements);this.xF(d,b,this.Pn);d.vertexAttribPointer(c.pd,4,d.FLOAT,!1,0,0);d.drawArrays(d.TRIANGLES, 0,6*b.length)},HC:function(a,b,c){var d=c[0],e=c[1],g=c[2]-d;c=c[3]-e;var h=new f.ge;h.Ir(1/a,1/b,1);h.translate(d,e,0);h.scale(g,c,1);return h},yI:function(a){var b=this.T.Ka,c=b.createTexture();b.bindTexture(b.TEXTURE_2D,c);b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,a);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);return{width:a.width,height:a.height, hc:c,Nu:this.pI++}},WH:function(a){var b=f.a.Wc,c=b.x,b=b.y;return[a[0]-c,a[1]-b,a[2]-c,a[3]-b]},xF:function(a,b,c){for(var d=[],e=0,g=b.length;e<g;e++){var h=b[e],k=h[0],l=h[1],m=h[2],h=h[3];d.push.apply(d,[m,l,0,e,m,h,1,e,k,l,2,e,m,h,3,e,k,h,4,e,k,l,5,e])}a.bindBuffer(a.ARRAY_BUFFER,c);a.bufferData(a.ARRAY_BUFFER,new Float32Array(d),a.STATIC_DRAW);return c},Vm:function(a){var b=this.Ba[a];if("undefined"===typeof b)b=document.createElement("img"),b.crossOrigin="Anonymous",b.src=a,this.Ba[a]=b,b.loaded= !1,f.C.Rj(b,"load",function(){b.loaded=!0;var a=document.createElement("canvas");a.width=b.naturalWidth;a.height=b.naturalHeight;a.getContext("2d").drawImage(b,0,0);b.canvas=a;this.set("display")},this);else if(b.loaded)return b.canvas||b}});f.Ja.uz=f.Ja.oc.extend({type:"imagelayer",dj:"precision highp float;attribute vec3 position;attribute vec2 uv;uniform mat4 u_modelViewMatrix;uniform mat4 u_projectionMatrix;varying vec2 vTextureCoord;void main(void) {\\tvTextureCoord = uv;\\tvec4 pos = u_projectionMatrix*u_modelViewMatrix * vec4(position,1.0);\\tgl_Position = pos;}",le:"precision mediump float;uniform sampler2D texture;varying vec2 vTextureCoord;uniform float alpha;void main(void) {\\tvec4 smpColor = texture2D(texture, vTextureCoord);\\tgl_FragColor =  vec4(smpColor.xyz, alpha*smpColor.a);}", Ah:function(a,b){b.pd=a.getAttribLocation(b,"position");b.eN=a.getAttribLocation(b,"uv");b.np=a.getUniformLocation(b,"texture");b.G9=a.getUniformLocation(b,"alpha")},B:function(a,b){this.Th=!0;arguments.callee.oa.apply(this,arguments);this.X("display",this.h);this.yv=this.xv=1},ria:function(a){var b=this.T.Ka;a=a.H;a[0]-=f.a.Wc.x;a[1]-=f.a.Wc.y;a[2]-=f.a.Wc.x;a[3]-=f.a.Wc.y;if(6===a.length){var c=-a[5],d=-a[4]-a[5];a=[a[0],a[1],d,a[2],a[3],c,a[0],a[1],c,a[0],a[1],d,a[2],a[3],d,a[2],a[3],c]}else a= [a[0],a[1],0,a[2],a[3],0,a[0],a[3],0,a[0],a[1],0,a[2],a[1],0,a[2],a[3],0];c=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,c);b.bufferData(b.ARRAY_BUFFER,new Float32Array(a),b.STATIC_DRAW);this.ni=c;a=[0,0,this.xv,this.yv,0,this.yv,0,0,this.xv,0,this.xv,this.yv];c=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,c);b.bufferData(b.ARRAY_BUFFER,new Float32Array(a),b.STATIC_DRAW);this.yia=c},XU:function(a){for(var b=2;b<a;)b*=2;return b},ld:function(){var a=this.q;a.wa||(a.wa=!0,a.$c?a.ha("renderComplete"): (a.$c=!0,a.ha("complete")))},Eda:function(a){function b(a){var b=a.target;"AMap.VideoLayer"===c.q.ia.CLASS_NAME&&(b.ontimeupdate=function(){0!==b.currentTime&&(c.JZ(),c.set("display"))});"AMap.CanvasLayer"!==c.q.ia.CLASS_NAME&&c.set("display");!c.q.wa&&c.q&&(c.q.wa=!0,c.q.$c?c.q.ha("renderComplete"):(c.q.$c=!0,c.q.ha("complete")));c.q.Vy=!0;c.hc.loaded=!0}var c=this;switch(this.q.ia.CLASS_NAME){case "AMap.GroundImage":case "AMap.ImageLayer":this.Hb||(this.Hb=document.createElement("img"));this.Hb.crossOrigin= "anonymous";this.Hb.onload=this.Hb.onerror=b;this.Hb.src=a;break;case "AMap.CanvasLayer":this.Hb=a;b({target:a});break;case "AMap.VideoLayer":if(!this.Hb){var d=document.createElement("video");d.controls="controls";this.Hb=d}f.j.Gy(this.Hb);this.Hb.loop=this.q.ia.get("loop");this.Hb.autoplay=this.q.ia.get("autoplay");this.Hb.crossOrigin="anonymous";this.Hb.onloadeddata=this.Hb.onerror=b;if(a instanceof Array)for(d=0;d<a.length;d+=1){var e=document.createElement("source");e.src=a[d];this.Hb.appendChild(e)}else e= document.createElement("source"),e.src=a,this.Hb.appendChild(e)}},nu:function(){this.hc&&(this.Hb.ontimeupdate=null,this.T.Ka.deleteTexture(this.hc),this.T.Ka.deleteBuffer(this.ni),this.Hb=null)},JZ:function(){var a=this.Hb,b=this.T.Ka,c=a.width,d=a.height;"AMap.VideoLayer"===this.q.ia.CLASS_NAME&&(c=a.videoWidth,d=a.videoHeight);if(!(2>c&&2>d)){this.yv=this.xv=1;if(this.T.bD(c)&&this.T.bD(d))this.canvas=null;else{var e=this.XU(c),g=this.XU(d),h=this.canvas||document.createElement("canvas");this.canvas= h;h.width=e;h.height=g;h.getContext("2d").drawImage(a,0,0,c,d);this.xv=c/e;this.yv=d/g}b.bindTexture(b.TEXTURE_2D,this.hc);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,this.canvas||this.Hb);b.generateMipmap(b.TEXTURE_2D);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.MIRRORED_REPEAT);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.MIRRORED_REPEAT)}},fc:function(a,b, c){this.hc||(this.hc=a.createTexture());if(c.dg!==this.hc.dg||c.dg.length!==this.hc.dg.length)this.Hb&&(this.Hb.onload=this.Hb.onerror=this.Hb.rma=null),this.hc.loaded=!1,this.Eda(c.dg),this.hc.dg=c.dg,this.q.UB=!0;if(this.hc.loaded){this.q.Vy&&(this.q.Vy=!1,this.JZ(c));this.q.UB&&(this.ria(c),this.q.UB=!1);var d=this.La;a.enable(a.BLEND);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);arguments.callee.oa.apply(this,arguments);a.activeTexture(a.TEXTURE0);a.uniform1f(d.G9, c.opacity);a.uniform1i(d.np,0);a.bindTexture(a.TEXTURE_2D,this.hc);a.enableVertexAttribArray(d.pd);a.bindBuffer(a.ARRAY_BUFFER,this.ni);a.vertexAttribPointer(d.pd,3,a.FLOAT,!1,0,0);a.enableVertexAttribArray(d.eN);a.bindBuffer(a.ARRAY_BUFFER,this.yia);a.vertexAttribPointer(d.eN,2,a.FLOAT,!1,0,0);a.drawArrays(a.TRIANGLES,0,6);this.ld();a.disableVertexAttribArray(d.eN);a.disableVertexAttribArray(d.pd)}}});f.Pb.ob({j1:function(){f.C.g(this.Oa.Kc,"touchstart",this.Nx,this)},t5:function(){f.C.I(this.Oa.Kc,"touchstart",this.Nx,this)},lla:function(a,b){var c=b.pageY-a.pageY,d=b.pageX-a.pageX;if(0!==d||0!==c){var e=0;0!==b.pageX-a.pageX?(e=180*Math.atan((b.pageY-a.pageY)/(b.pageX-a.pageX))/Math.PI,0===c?e=0<d?0:180:0>c&&0<d?e=-e:0>c&&0>d?e=180-e:0<c&&0>d?e=180-e:0<c&&0<d&&(e=360-e)):e=0<c?270:90;return e}},R:{Hc:!1},Nx:function(a){this.Tr();if(!(window.PointerEvent&&a instanceof window.PointerEvent&&"mouse"=== a.pointerType||(this.Qd&&this.Qd.stop(),f.C.preventDefault(a),2<a.touches.length))){var b=this.Oa.Kc;this.R.touches=[];for(var c=0;c<a.touches.length;c+=1)this.R.touches.push({pageX:a.touches[c].pageX,pageY:a.touches[c].pageY,clientX:a.touches[c].clientX,clientY:a.touches[c].clientY});this.R.$j||(1===a.touches.length&&(a=this.vg(a.touches[0]),a.jd.r("touchstart",a),a.jd!==this&&a.jd.get("bubble")&&this.r("touchstart",a),this.R.BA=a,f.C.g(b,"touchend",this.Zq,this)),f.C.g(b,"touchmove",this.EV,this))}}, vla:function(a,b){return Math.sqrt((a.pageX-b.pageX)*(a.pageX-b.pageX)+(a.pageY-b.pageY)*(a.pageY-b.pageY))},EV:function(a){if(!this.R.$j){if(1==a.touches.length){var b=(new f.G(a.touches[0].pageX,a.touches[0].pageY)).Va(this.R.BA.ub);if(b.length()<(f.l.yj?30:10))return;this.R.$j="drag"}else if(2<=a.touches.length){var b=new f.G(this.R.touches[0].pageX-a.touches[0].pageX,this.R.touches[0].pageY-a.touches[0].pageY),c=new f.G(this.R.touches[1].pageX-a.touches[1].pageX,this.R.touches[1].pageY-a.touches[1].pageY), d=b.length(),e=c.length();if(17>d&&17>e)return;b.direction();c.direction();(d=b.zq(c))&&30>d&&(60>b.zq(new f.G(0,1))&&60>c.zq(new f.G(0,1))||60>b.zq(new f.G(0,-1))&&60>c.zq(new f.G(0,-1)))?this.R.$j="pitch":(d=new f.G(a.touches[1].pageX-a.touches[0].pageX,a.touches[1].pageY-a.touches[0].pageY),b=d.zq(b),c=d.zq(c),this.R.$j=b&&(40>b||140<b)||c&&(40>c||140<c)?"zoom":"rotate")}switch(this.R.$j){case "drag":this.Jea(a);break;case "pitch":this.Kea(a);break;case "zoom":this.Mea(a);break;case "rotate":this.Lea(a)}this.R.$j&& (f.C.I(this.Oa.Kc,"touchmove",this.EV,this),f.C.I(this.Oa.Kc,"touchend",this.Zq,this),f.C.g(document,"touchend",this.Vt,this))}},Vt:function(a){if(!(window.PointerEvent&&a instanceof window.PointerEvent&&"mouse"===a.pointerType))switch(0===a.touches.length&&f.C.I(document,"touchend",this.Vt,this),this.R.$j){case "drag":this.M$();this.R.$j=null;break;case "pitch":this.N$();this.R.$j=null;break;case "zoom":this.P$();this.R.$j=null;break;case "rotate":this.O$(),this.R.$j=null}},Pp:function(a){var b= this;return function(c){b.ha(a,c)}},zO:function(){this.xn||(this.xn=this.Pp("touchstart"),this.Sr=this.Pp("touchmove"),this.Rr=this.Pp("touchend"));this.g("touchstart",this.xn,this);this.g("touchmove",this.Sr,this);this.g("touchend",this.Rr,this)},XQ:function(){this.I("touchstart",this.xn,this);this.I("touchmove",this.Sr,this);this.I("touchend",this.Rr,this);this.Rr=this.Sr=this.xn=null}});f.Pb.ob({Kea:function(a){this.nH(a);f.C.g(this.Oa.Kc,"touchmove",this.nH,this)},N$:function(){f.C.I(this.Oa.Kc,"touchmove",this.nH,this)},nH:function(a){if(this.get("pitchEnable")&&!(a.touches.length<(f.l.pE?3:2))){var b=(a.touches[0].pageY-this.R.touches[0].pageY+(a.touches[1].pageY-this.R.touches[1].pageY))/2/this.get("size").height*180;this.set("pitch",b+parseFloat(this.get("pitch")));this.R.touches=[];for(b=0;b<a.touches.length;b+=1)this.R.touches.push({pageX:a.touches[b].pageX,pageY:a.touches[b].pageY, clientX:a.touches[b].clientX,clientY:a.touches[b].clientY})}}});f.Pb.ob({Jea:function(){f.C.g(this.Oa.Kc,"touchmove",this.HR,this);this.H6(this.R.BA);this.R.BA=null},M$:function(){f.C.I(this.Oa.Kc,"touchmove",this.HR,this);this.G6()},G6:function(){var a=this.R;if(a.om){var b=this.R.Pm;a.om=!1;a.Hc=!1;a.Qm.r("touchend",b);a.Qm.r("dragend",b)}a.Qm=null;a.Ff=null;a.Om=null;a.Pm=null},H6:function(a){var b=this.R,c;this.DG(a.jd)&&a.jd.get("draggable")&&(c=a.jd);!c&&this.yx&&(c=this);c&&(b.Hc=!0,b.Qm=c,b.Ff=a.ub,b.Om=a)},HR:function(a){var b=this.R;if(b.Om){var c=this.vg(a.touches[0], !0,!0);b.Om.jd.r("touchmove",c);b.Om.jd!==this&&b.Om.jd.get("bubble")&&this.r("touchmove",c);if(this.vr(c.ub,b.Pm||b.Om.ub,2))return;b.Pm=c;this.xH()}else c=this.vg(a.touches[0]),c.jd.r("touchmove",c),c.jd!==this&&c.jd.get("bubble")&&this.r("touchmove",c);if(a.preventDefault)a.preventDefault();else return!1}});f.Pb.ob({Mea:function(){f.C.g(this.Oa.Kc,"touchmove",this.MR,this);this.J6(this.R.touches)},P$:function(){f.C.I(this.Oa.Kc,"touchmove",this.MR,this);this.I6()},J6:function(a){var b=a[0];a=a[1];var c=a.clientY-b.clientY,d=a.clientX-b.clientX;this.HG=1;this.FG=Math.sqrt(c*c+d*d);1==this.J.get("touchZoomCenter")?this.bs=this.get("centerCoords"):(b=new f.G((b.clientX+a.clientX)/2,(b.clientY+a.clientY)/2),this.bs=this.jf(b))},MR:function(a){if(!(2>a.touches.length)){f.C.preventDefault(a);this.get("zoomEnable")&& this.get("touchZoom");var b=0;if(a.scale)b=Math.log(a.scale/this.HG)/Math.log(2),this.HG=a.scale;else{var b=a.touches[0],c=a.touches[1];a=c.clientY-b.clientY;b=c.clientX-b.clientX;a=Math.sqrt(a*a+b*b);b=Math.log(a/this.FG)/Math.log(2);this.FG=a}b&&(b=this.get("zoom")+b,this.OT(b,this.bs,!0))}},I6:function(){this.HG=1;this.FG=null}});f.Pb.ob({Lea:function(){f.C.g(this.Oa.Kc,"touchmove",this.JR,this);this.SA(this.R.touches)},O$:function(){f.C.I(this.Oa.Kc,"touchmove",this.JR,this);this.RA()},SA:function(a){var b=a[0];a=a[1];this.zA=Math.atan2(a.clientY-b.clientY,a.clientX-b.clientX);this.GG=0},JR:function(a){if(!(2>a.touches.length)){f.C.preventDefault(a);this.get("rotateEnable");var b;if(a.rotation)b=Math.round(this.get("rotation")+a.rotation-this.GG),this.GG=a.rotation;else{var c=a.touches[0];a=a.touches[1];c=Math.atan2(a.clientY- c.clientY,a.clientX-c.clientX);0.1<Math.abs(c-this.zA)&&(b=Math.round(this.get("rotation")+180*(c-this.zA)/Math.PI),this.zA=c)}void 0!==b&&this.set("rotation",b)}},RA:function(){this.GG=0;this.zA=null}});f.Pb.ob({Zq:function(a){if(!(this.R.$j||0<a.touches.length)){this.hg&&!this.Ng&&this.r("moveend");a=this.R.BA;var b=a.jd,c=this.J.get("allBubble")||b.get("bubble");c?(b.r("touchend",a),b!==this&&this.r("touchend",a)):b.r("touchend",a);this.Ue&&this.vr(a.ub,this.Rs,600)?(clearTimeout(this.Ue),this.Ue=null,c?(b.r("dblclick",a),b!==this&&this.r("dblclick",a)):b.r("dblclick",a),this.Rs=null):(this.r("clickstart",a),this.Ue&&(clearTimeout(this.Ue),this.Ue=null),this.Rs=a.ub,c?(b.r("click",a),b!==this&& this.r("click",a)):(b.r("click",a),this.r("closeOverlays",a)),b.get("topWhenClick")&&b.Oc.setTop(!0),this.r("clickend",a),this.Ue=setTimeout(f.a.bind(function(){this.Ue=null},this),260));f.C.I(this.Oa.Kc,"touchend",this.Zq,this)}}});f.jv=function(a,b){this.min=void 0!==a?a:new f.Ea([Infinity,Infinity,Infinity]);this.max=void 0!==b?b:new f.Ea([-Infinity,-Infinity,-Infinity])}; f.jv.prototype={constructor:f.jv,set:function(a,b){this.min.copy(a);this.max.copy(b);return this},Ab:function(){return(new this.constructor).copy(this)},copy:function(a){this.min.copy(a.min);this.max.copy(a.max);return this},Oo:function(){var a=this.max.elements,b=this.min.elements;return a[0]<b[0]||a[1]<b[1]||a[2]<b[2]},WC:function(a){return a.max.elements[0]<this.min.elements[0]||a.min.elements[0]>this.max.elements[0]||a.max.elements[1]<this.min.elements[1]||a.min.elements[1]>this.max.elements[1]|| a.max.elements[2]<this.min.elements[2]||a.min.elements[2]>this.max.elements[2]?!1:!0},rb:function(a){return a.min.rb(this.min)&&a.max.rb(this.max)},Ve:function(){var a=new f.Ea,b=new f.Ea,c=new f.Ea,d=new f.Ea,e=new f.Ea,g=new f.Ea,h=new f.Ea,k=new f.Ea,l=[a,b,c,d,e,g,h,k];return function(m){var n=this.max.elements,p=this.min.elements;a.set(n[0],n[1],n[2]);b.set(p[0],n[1],n[2]);c.set(n[0],p[1],n[2]);d.set(p[0],p[1],n[2]);e.set(n[0],n[1],p[2]);g.set(p[0],n[1],p[2]);h.set(n[0],p[1],p[2]);k.set(p[0], p[1],p[2]);a.Ve(m);b.Ve(m);c.Ve(m);d.Ve(m);e.Ve(m);g.Ve(m);h.Ve(m);k.Ve(m);m=new f.jv;for(var q=p=n=Infinity,r=-Infinity,s=-Infinity,u=-Infinity,v=0,x=l.length;v<x;v+=1){var t=l[v].elements,y=t[0],A=t[1],t=t[2]||0;y<n&&(n=y);A<p&&(p=A);t<q&&(q=t);y>r&&(r=y);A>s&&(s=A);t>u&&(u=t)}m.min.set(n,p,q);m.max.set(r,s,u);return m}}()}; function cd(a,b,c){var d=Infinity,e=Infinity,g=Infinity,h=-Infinity,k=-Infinity,l=-Infinity;c=c||3;for(var m=0,n=b.length;m<n;m+=c){var p=b[m],q=b[m+1],r=b[m+2];p<d&&(d=p);q<e&&(e=q);r<g&&(g=r);p>h&&(h=p);q>k&&(k=q);r>l&&(l=r)}a.min.set(d,e,g);a.max.set(h,k,l)};f.XE=function(a,b){this.origin=void 0!==a?a:new f.Ea;this.direction=void 0!==b?b:new f.Ea}; f.XE.prototype={constructor:f.XE,set:function(a,b){this.origin.copy(a);this.direction.copy(b);return this},Ab:function(){return(new this.constructor).copy(this)},copy:function(a){this.origin.copy(a.origin);this.direction.copy(a.direction);return this},pC:function(a,b){return Math.sqrt(this.Caa(a,b))},Caa:function(){var a=new f.Ea;return function(b,c){var d=a.Mu(b,this.origin).Cj(this.direction);if(0>d)return Infinity;a.copy(this.direction).nr(d).add(this.origin);c&&c.copy(a);return a.pU(b)}}(),oU:function(){var a= new f.Ea,b=new f.Ea,c=new f.Ea;return function(d,e,g,h){a.copy(d).add(e).nr(0.5);b.copy(e).sub(d).normalize();c.copy(this.origin).sub(a);var k=0.5*d.Md(e),l=-this.direction.Cj(b),m=c.Cj(this.direction),n=-c.Cj(b),p=c.AW(),q=Math.abs(1-l*l),r;0<q?(d=l*n-m,e=l*m-n,r=k*q,0<=d?e>=-r?e<=r?(k=1/q,d*=k,e*=k,l=d*(d+l*e+2*m)+e*(l*d+e+2*n)+p):(e=k,d=Math.max(0,-(l*e+m)),l=-d*d+e*(e+2*n)+p):(e=-k,d=Math.max(0,-(l*e+m)),l=-d*d+e*(e+2*n)+p):e<=-r?(d=Math.max(0,-(-l*k+m)),e=0<d?-k:Math.min(Math.max(-k,-n),k),l= -d*d+e*(e+2*n)+p):e<=r?(d=0,e=Math.min(Math.max(-k,-n),k),l=e*(e+2*n)+p):(d=Math.max(0,-(l*k+m)),e=0<d?k:Math.min(Math.max(-k,-n),k),l=-d*d+e*(e+2*n)+p)):(e=0<l?-k:k,d=Math.max(0,-(l*e+m)),l=-d*d+e*(e+2*n)+p);g&&g.copy(this.direction).nr(d).add(this.origin);h&&h.copy(b).nr(e).add(a);return f.a.Pc(l,6)}}(),WC:function(){var a=new f.Ea;return function(b){return null!==dd(this,b,a)}}(),$t:function(){var a=new f.Ea,b=new f.Ea,c=new f.Ea,d=new f.Ea,e=new f.Ea;return function(g,h,k,l,m){var n=this.origin, p=this.direction;c.Mu(h,g);d.Mu(k,g);e.zt(p,d);h=c.Cj(e);if(0<h){if(l)return;a.Mu(n,g)}else a.Mu(g,n),h=-h;if(0>h)return!1;g=a.Cj(e);if(0>g||g>h)return!1;b.zt(a,c);p=p.Cj(b);if(0>p||g+p>h)return!1;p=d.Cj(b);if(0>=p)return!1;p*=1/h;m&&m.copy(this.origin.Ab().add(this.direction.Ab().nr(p)));return p}}(),rb:function(a){return a.origin.rb(this.origin)&&a.direction.rb(this.direction)}}; function dd(a,b,c){var d,e,g,h;e=1/a.direction.elements[0];h=1/a.direction.elements[1];var k=1/a.direction.elements[2],l=a.origin;0<=e?(d=(b.min.elements[0]-l.elements[0])*e,e*=b.max.elements[0]-l.elements[0]):(d=(b.max.elements[0]-l.elements[0])*e,e*=b.min.elements[0]-l.elements[0]);0<=h?(g=(b.min.elements[1]-l.elements[1])*h,h*=b.max.elements[1]-l.elements[1]):(g=(b.max.elements[1]-l.elements[1])*h,h*=b.min.elements[1]-l.elements[1]);if(d>h||g>e)return null;if(g>d||d!==d)d=g;if(h<e||e!==e)e=h;0<= k?(g=(b.min.elements[2]-l.elements[2])*k,b=(b.max.elements[2]-l.elements[2])*k):(g=(b.max.elements[2]-l.elements[2])*k,b=(b.min.elements[2]-l.elements[2])*k);if(d>b||g>e)return null;if(g>d||d!==d)d=g;if(b<e||e!==e)e=b;return 0>e?null:(c||new f.Ea).copy(a.direction).nr(0<=d?d:e).add(a.origin)};w.w.Mn=w.w.oc.extend({F:{visible:!0,opacity:1,zIndex:1200,zooms:[3,20],alwaysRender:!1,type:"obj3d"},B:function(a){this.CLASS_NAME=this.CLASS_NAME||"AMap.Object3DLayer";arguments.callee.oa.apply(this,arguments);this.objects=this.di=[]},add:function(a){-1==f.a.indexOf(this.di,a)&&(this.di.push(a),a.w=this,a.qD&&a.qD(),this.reDraw(),this.dea=!0)},remove:function(a){-1!==f.a.indexOf(this.di,a)&&(this.di=f.a.Dt(this.di,a),a.w=null,this.reDraw())},clear:function(){for(var a=0,b=this.di.length;a<b;a+=1)this.di[a].w= null;this.objects=this.di=[];this.reDraw()},Zl:function(a,b,c,d,e){for(var g=[],h=0,k=this.di.length;h<k;h+=1){var l=this.di[h];(l=(l.raycast||l.Zl).call(l,a,b,c,d,e))&&(l.length?g.push.apply(g,l):g.push(l))}g.sort(function(a,b){return a.Fd-b.Fd});return g[0]||null},reDraw:function(){this.w&&this.w.set("display")},og:function(a){this.get("map")||this.set("map",a.J,!0);return new f.w.Mn(this,a)}});f.w.Mn=f.w.oc.extend({B:function(a,b){this.ia=a;this.Bp="3D";this.Lz=f.a.Lb(this);a&&this.he(["opacity","visible","zIndex","zooms"],a);this.h=b;this.X("display",b)},Wm:function(){this.ia.dea&&this.ia.di.sort(function(a,b){return a.transparent!==b.transparent?a.transparent?1:-1:a.id>b.id?1:-1});return{visible:this.get("visible"),zIndex:this.get("zIndex"),ed:this.get("zooms"),opacity:this.get("opacity"),K:this.get("container"),di:this.ia.di}},wl:function(a){if(f.Ja.Mn)return new f.Ja.Mn(this,a)}});f.Ja.Mn=f.Ja.oc.extend({ga:[f.ka,f.se],YV:!0,B:function(a,b){this.q=a;this.T=b;this.h=b.h;this.X("display",a);this.xu={}},createProgram:function(a){var b=this.T.Ka,c=a.$g.dm,d=a.$g.le;if(c&&d){c=this.mT(c,d,a);if(c=f.ev.createProgram(b,c[0],c[1]))c.fz=b.getUniformLocation(c,"_opacity"),c.iz=b.getUniformLocation(c,"u_projectionMatrix"),c.hz=b.getUniformLocation(c,"u_modelViewMatrix"),d=a.getWebGLVariableLoaction||a.Ah,a.Th&&(c.RM=b.getUniformLocation(c,"fog"),c.QM=b.getUniformLocation(c,"fogColor")), d&&(b=this.T.Ka,d.call(a,b,c));return c}},hca:function(a){var b=a.type;if(!b)return null;var c=this.xu[b];c||(c=this.createProgram(a),this.xu[b]=c);return c},baa:function(a){return{bda:a.isEnabled(a.DEPTH_TEST),Xca:a.isEnabled(a.BLEND),ada:a.isEnabled(a.CULL_FACE)}},aaa:function(a,b){b.bda?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST);b.Xca?a.enable(a.BLEND):a.disable(a.BLEND);b.ada?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE);a.cullFace(a.BACK)},Lca:function(a,b,c){var d=a.yd;d||(d=b);a=a.Y.Cm.Ve(d); return c.WC(a)?!0:!1},fc:function(a,b,c){b=b.W;var d=c.di;this.Aa=b.Aa;a.clear(a.DEPTH_BUFFER_BIT);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);var e=this.baa(a);a.enable(a.DEPTH_TEST);for(var g=0,h=d.length;g<h;g+=1){var k=d[g];k.VB&&k.VB(this.h.J);k.qE();k.Ul&&k.bN(b.yd);var l=k.Zo;l&&(k.yd=(new f.ge).set(b.yd).multiply(l));if(this.Lca(k,b.yd,b.Zg.KU,this.h.J)&&(l=this.hca(k))){a.useProgram(l);a.uniform1f(l.fz,isNaN(c.opacity)?1:parseFloat(c.opacity));k.update(a, l,b.yd,this.h.J);l.iz&&a.uniformMatrix4fv(l.iz,!1,b.Zg.elements);l.hz&&(k.jea=new f.J_(k.yd.Nj().Lha()),a.uniformMatrix4fv(l.hz,!1,k.yd.elements));if(k.acceptFog||k.Th){var m=this.h.J.view.ul*(1+1.1*Math.cos(b.pitch*Math.PI/180));a.uniform2f(l.RM,0.9*m,1.5*m);m=this.T.Qy.Ry;a.uniform4f(l.QM,m[0],m[1],m[2],1)}k.transparent?a.enable(a.BLEND):a.disable(a.BLEND);(k.render||k.Q).call(k,a,l)}}this.aaa(a,e);this.q.wa||(this.q.wa=!0,f.a.nc(function(){this.q&&(this.q.$c?this.q.ha("renderComplete"):(this.q.$c= !0,this.q.ha("complete")))},this))}});f.Xd=f.ba.extend({B:function(){this.vertices=this.kb=[];this.vertexUVs=this.Yr=[];this.vertexColors=this.Za=[]},qE:function(){this.boundingBox=this.Cm=new f.jv;cd(this.Cm,this.kb)},Zl:function(a){if(!dd(a,this.Cm))return null}});f.Xd.Fk({qE:"updateBoundingBox"});f.Hn={};f.Hn.FE=function(a,b){this.GF=a;this.yG=b;this.update()};f.Hn.FE.prototype={update:function(){var a=this.GF,b=this.yG;this.color=[a[0]*b,a[1]*b,a[2]*b]}};f.Hn.IE=function(a,b,c){this.GF=b;this.yG=c;this.direction=a;this.update()};f.Hn.IE.prototype={update:function(){var a=this.GF,b=this.yG;this.color=[a[0]*b,a[1]*b,a[2]*b]}};f.Xd.uv=f.Xd.extend({B:function(){this.type="mesh";this.boundingBox=this.Cm=null;this.vertices=this.kb=[];this.faces=this.Xh=[];this.vertexUVs=this.Yr=[];this.vertexColors=this.Za=[];this.textureIndices=this.Pu=[]}});f.Xd.Jn=f.Xd.extend({B:function(){this.type="line";this.boundingBox=this.Cm=null;this.vertices=this.kb=[];this.segments=this.Yk=[];this.vertexUVs=this.Yr=[];this.vertexColors=this.Za=[];this.textureIndices=this.Pu=[]}});f.Xd.wv=f.Xd.extend({B:function(){this.type="points";this.boundingBox=this.Cm=null;this.vertices=this.kb=[];this.vertexColors=this.Za=[];this.pointSizes=this.EL=[];this.pointAreas=this.vu=[];this.vertexUVs=this.Yr=[];this.textureIndices=this.Pu=[]}});f.Xd.ss=f.Xd.extend({B:function(){this.type="wideline";this.boundingBox=this.Cm=null;this.vertices=this.kb=[];this.vertexIndices=this.En=[];this.directions=this.$I=[];this.vertexUVs=this.Yr=[];this.vertexColors=this.Za=[];this.textureIndices=this.Pu=[]},Zea:function(){if(this.kb.length){for(var a=[],b=0,c=this.kb.length/3;b<c;b++){var d=3*b;a.push([this.kb[d],this.kb[d+1],this.kb[d+2]])}c=f.hN.parse({ur:a,lX:!!this.lX,$ca:!0,Kha:!1});a=c[0];b=c[2];this.En=c[1];this.xE=[];this.$I=[];c=0;for(d=a.length/ 9;c<d;c++){var e=9*c;this.xE.push(a[e],a[e+1],b[c]);this.$I.push(a[e+2],a[e+3])}if(this.xE.length/3>this.Za.length/4)for(a=this.xE.length/3-this.Za.length/4;0<a--;)this.Za.push.apply(this.Za,this.Za.slice(0,4))}}});f.pc=f.ba.extend({B:function(){this.id=f.pc.count++;this.type="basic";this.DEPTH_TEST=!0;this.transparent=!1;this.textures=this.df=[];this.geometry=this.Y=new f.Xd;Object.defineProperty(this,"needUpdate",{configurable:!1,enumerable:!0,set:function(a){this.VQ=this.UQ=a},get:function(){return this.UQ}});this.Ul=this.needUpdate=!0;this.Zo=new f.ge;this.UD=new f.ge;this.kp=new f.ge},position:function(a,b){a&&(this.qj=a);this.bw=b||0;this.Ul=!0;return this.qj},reDraw:function(){this.w&&this.w.reDraw()}, scale:function(a,b,c){this.UD.scale(a,b,c);this.Ul=!0;this.reDraw()},Ir:function(a,b,c){this.UD.Ir(a,b,c);this.Ul=!0;this.reDraw()},Ju:function(a,b,c,d){this.kp.Ju(a,b,c,d);this.Ul=!0;this.reDraw()},aM:function(a){this.kp.aM(a);this.Ul=!0;this.reDraw()},bM:function(a){this.kp.bM(a);this.Ul=!0;this.reDraw()},cM:function(a){this.kp.cM(a);this.Ul=!0;this.reDraw()},reset:function(){this.Zo.iM();this.kp.iM();this.UD.iM();this.Ul=!0;this.reDraw()},bN:function(){var a=this.w.getMap(),b={x:0,y:0};this.qj&& (b=a.NK(this.qj));this.Zo=(new f.ge).translate(b.x,b.y,-this.bw||0).multiply(this.kp).multiply(this.UD);this.Ul=!1},JW:{vec4:"4fv",mat3:"Matrix3fv",vec3:"3fv",vec2:"2fv","float":"1f","int":"1i",bool:"1i"},Zl:function(){return!1},mZ:function(){if(this.df.length)for(var a=this.w.w.h.T,b=0;b<this.df.length;b+=1)if(!a.df[this.df[b]].hc)return!1;return!0},tf:function(a,b,c,d){if(c.length)return d=d||a.createBuffer(),a.bindBuffer(b,d),a.bufferData(b,c,a.STATIC_DRAW),d},KZ:function(){if(this.df.length)for(var a= this,b=this.w.w.h.T,c=0;c<this.df.length;c+=1){var d=this.df[c];if(!b.df[d]||d.needUpdate)if(b.df[d]={url:d},d instanceof HTMLCanvasElement){var e=b.createTexture(d);b.df[d].hc=e;b.df[d].width=d.width;b.df[d].height=d.height}else e=d.replace(/http[s]{0,1}:/,f.A.Qb+":"),b.FW(d,e,function(c,d,e,l){b.df[c].hc=d;b.df[c].width=e;b.df[c].height=l;a.w.w.set("display")},function(a){b.df[a].status="load failed"})}},qE:function(){this.VQ&&(this.Y.qE(),this.VQ=!1)},update:function(a,b,c,d){this.h=d;this.UQ&& ((this.updateBuffers||this.GZ).call(this,a,b),(this.updateTextures||this.KZ).call(this,a,b),this.needUpdate=!1)},GZ:function(a){var b=this.$g,c=b.attributes,d;for(d in c)if(c.hasOwnProperty(d)){var e=c[d].value.call(this,this),g=d+"Buffer";!e.length&&this[g]&&(a.deleteBuffer(this[g]),this[g]=null);e.length&&(this[g]=this.tf(a,a.ARRAY_BUFFER,new Float32Array(e),this[g]),this[g].size=parseInt(c[d].type.substr(3))||1,this[g].length=e.length/this[g].size)}if(b=b.vertexIndices||b.En)b=b.call(this),!b.length&& this.Mo&&(a.deleteBuffer(this.Mo),this.Mo=null),b.length&&(this.Mo=this.tf(a,a.ELEMENT_ARRAY_BUFFER,new Uint16Array(b),this.Mo),this.Mo.length=b.length)},yT:function(a,b){for(var c=this.w.w.h.T,d=0;8>d;d+=1)d<this.df.length?(a.activeTexture(a["TEXTURE"+d]),a.bindTexture(a.TEXTURE_2D,c.df[this.df[d]].hc)):(a.activeTexture(a["TEXTURE"+d]),a.bindTexture(a.TEXTURE_2D,c.Iq[0]));-1!==b.EZ&&(a.uniform1iv(b.EZ,[0,1,2,3,4,5,6,7]),a.uniform1i(b.Wu,this.df.length))},Q:function(a,b){if((this.texturesAllLoaded|| this.mZ).call(this)&&this.a_vertexBuffer){this.DEPTH_TEST?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST);var c=this.drawMode;if(c&&0===c.indexOf("TRIANGLE")){var d=this.backOrFront;"both"==d?a.disable(a.CULL_FACE):(a.enable(a.CULL_FACE),a.cullFace("front"==d?a.BACK:a.FRONT))}this.yT(a,b);var d=this.$g,e=d.bl,g;for(g in e)if(e.hasOwnProperty(g)){var h=b["u_"+g],k=e[g].value;k.call&&(k=k.call(this,this));if(k||0===k){var l=e[g].type;if(0==l.indexOf("mat"))a["uniform"+this.JW[l]](h,!1,k);else a["uniform"+ this.JW[l]](h,k)}}d=d.attributes;for(g in d)d.hasOwnProperty(g)&&(e=b["a_"+g],-1!==e&&((h=this[g+"Buffer"])?(a.enableVertexAttribArray(e),a.bindBuffer(a.ARRAY_BUFFER,h),a.vertexAttribPointer(e,h.size,a.FLOAT,!1,0,0)):a.disableVertexAttribArray(e)));this.Mo?(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.Mo),a.drawElements(a[c],this.Mo.length,a.UNSIGNED_SHORT,0)):a.drawArrays(a[c],0,this.a_vertexBuffer.length);(this.afterRender||this.ld).call(this,a,b)}},ld:function(a,b){var c=this.$g.attributes,d;for(d in c)if(c.hasOwnProperty(d)){var e= b["a_"+d];-1!==e&&a.disableVertexAttribArray(e)}},$g:{bl:{},attributes:{a_vertex:{type:"vec3",value:function(){return this.Y.kb}}},dm:"\\n\\t\\t\\tattribute vec3 a_vertex;\\n\\t\\t\\tuniform mat4 u_modelViewMatrix;\\n\\t\\t\\tuniform mat4 u_projectionMatrix;\\n\\t\\t\\tvoid main() {\\n\\t\\t\\tgl_Position = u_projectionMatrix * u_modelViewMatrix * vec4( a_vertex, 1.0 );\\n\\t\\t}",le:"void main() {\\n\\t\\t\\tgl_FragColor = vec4( 1.0, 1.0, 1.0, 1.0);\\n\\t\\t}"},Ah:function(a,b){var c=this.$g,d=c.attributes,c=c.bl,e;for(e in c)c.hasOwnProperty(e)&& (b["u_"+e]=a.getUniformLocation(b,e));for(e in d)d.hasOwnProperty(e)&&(b["a_"+e]=a.getAttribLocation(b,e));b.Wu=a.getUniformLocation(b,"u_textureNum");b.EZ=a.getUniformLocation(b,"u_textures")}}); f.pc.extend=function(a){var b=this.prototype.$g,c=a.shader||a.$g;if(c){c.bl=f.extend({},b.bl,c.uniforms||c.bl||{});c.attributes=f.extend({},b.attributes,c.attributes||c.attributes||{});var d=c.vertexShader||c.dm;c.dm=d?d:b.dm;d=c.fragmentShader||c.le;c.le=d?d:b.le;d=c.vertexIndices||c.En;d||null===d||(c.En=b.En);a.shader&&!a.$g&&(a.$g=c,delete a.shader)}return f.ba.extend.call(this,a)}; f.M_=f.pc.extend({B:function(){this.children=[]},add:function(a){a&&a.vy!==this&&(a.vy&&a.vy.remove(a),this.children.push(a),a.vy=this)},remove:function(a){a.vy===this&&(f.a.Dt(this.children,a),a.vy=null)},Zl:function(a,b,c){for(var d=[],e=0,g=this.children.length;e<g;e+=1){var h=this.children[e].Zl(a,b,c);h&&d.push(h)}return d.length?d:null},update:function(a,b){for(var c=0,d=this.children.length;c<d;c+=1)this.children[c].update(a,b)},Q:function(a,b){for(var c=0,d=this.children.length;c<d;c+=1)this.children[c].Q(a, b)}});f.pc.count=0;f.pc.Sca={B:"initialize",update:"update",Zl:"raycast",ld:"afterRender",Q:"render",GZ:"updateBuffers",Ah:"getWebGLVariableLoaction",yT:"bindTextures",KZ:"updateTextures",mZ:"texturesAllLoaded"};f.pc.Fk({scale:"scale",Ir:"setScale",Ju:"setRotate",aM:"rotateX",bM:"rotateY",cM:"rotateZ",reset:"reset"});f.pc.uv=f.pc.extend({B:function(){this.Zk(arguments);this.type="mesh";this.drawMode="TRIANGLES";this.geometry=this.Y=new f.Xd.uv;this.backOrFront="back"},Zl:function(a,b,c){var d=this.yd;d||(d=c);d.oe||(d.oe=d.Nj());b=new f.Ea(d.oe.If(b));d=new f.Ea(d.oe.If(new f.fj(0,0,0,1)));b=b.sub(d).normalize();a.origin.copy(d);a.direction.copy(b);var e=this.Y;if((d=e.Cm)&&!dd(a,d))return null;d=new f.Ea;b=e.kb;var e=e.Xh,g=new f.Ea,h=new f.Ea,k=new f.Ea,l=[],m=!0;"both"==this.backOrFront&&(m=!1);if(e.length)for(var n= 0,p=e.length;n<p;n+=3){var q=3*e[n],r=3*e[n+1],s=3*e[n+2];g.set(b[q],b[q+1],b[q+2]);h.set(b[r],b[r+1],b[r+2]);k.set(b[s],b[s+1],b[s+2]);(q="front"==this.backOrFront?a.$t(g,h,k,m,d):a.$t(g,k,h,m,d))&&l.push({Fd:q,aJ:0,zy:d,index:n/3,object:this})}else for(n=0,p=b.length;n<p;n+=9)q=n,r=n+3,s=n+6,g.set(b[q],b[q+1],b[q+2]),h.set(b[r],b[r+1],b[r+2]),k.set(b[s],b[s+1],b[s+2]),(q="front"==this.backOrFront?a.$t(g,h,k,m,d):a.$t(g,k,h,m,d))&&l.push({Fd:q,aJ:0,zy:d,index:n/9,object:this});l.sort(function(a, b){return a.Fd-b.Fd});if(a=l[0])d=d.Ve(this.Zo),a.zy=d.elements,a.Fd=(new f.Ea(0,0,0)).Ve(c.Nj()).Md(d);return a||null},$g:{bl:{},attributes:{a_color:{type:"vec4",value:function(){return this.Y.Za}},a_textureIndex:{type:"float",value:function(){return this.Y.Pu}},a_uv:{type:"vec2",value:function(){return this.Y.Yr}}},En:function(){return this.Y.Xh},dm:"attribute vec3 a_vertex;\\n\\t\\tattribute vec4 a_color;\\n\\t\\tattribute vec2 a_uv;\\n\\t\\tattribute float a_textureIndex;\\n\\t\\t\\n\\t\\tuniform mat4 u_modelViewMatrix;\\n\\t\\tuniform mat4 u_projectionMatrix;\\n\\n\\t\\tvarying vec4 v_color;\\n\\t\\tvarying vec2 v_uv;\\n\\t\\tvarying float v_textureIndex;\\n\\n\\t\\tvoid main(void) {\\n\\t\\t\\tv_color = a_color;\\n\\t\\t\\tv_uv = a_uv;\\n\\t\\t\\tv_textureIndex = a_textureIndex;\\n\\t\\t\\tvec4 pos = vec4(a_vertex, 1.0);\\n\\t\\t\\tgl_Position = u_projectionMatrix * u_modelViewMatrix * pos;\\n\\t\\t}\\n\\t", le:" precision mediump float;\\n\\t\\tvarying vec4 v_color;\\n\\t\\tvarying vec2 v_uv;\\n\\t\\tvarying float v_textureIndex;\\n\\t\\tuniform int u_textureNum;\\n\\t\\tuniform sampler2D u_textures[8];\\n\\t\\tvoid main(void) {\\n\\t\\t\\tif (u_textureNum == 0) {\\n\\t\\t\\t\\tgl_FragColor = v_color;\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tvec4 smpColor;\\n\\t\\t\\t\\tfloat textureIndex;\\n\\t\\t\\t\\tif (u_textureNum == 1) {\\n\\t\\t\\t\\t\\ttextureIndex = 0.0;\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\ttextureIndex = v_textureIndex;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tvec2 uv = v_uv.xy;\\n\\t\\t\\t\\tif (textureIndex == 0.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[0], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 1.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[1], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 2.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[2], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 3.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[3], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 4.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[4], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 5.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[5], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 6.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[6], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 7.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[7], uv);\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tdiscard;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif (smpColor.a == 0.0) {\\n\\t\\t\\t\\t\\tdiscard;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tgl_FragColor = smpColor;\\n\\t\\t\\t}\\t\\t\\n\\t\\t}\\n\\t"}});f.pc.MN=f.pc.uv.extend({B:function(){this.Zk(arguments);this.type="lightmesh";this.Y.vertexNormals=this.Y.bh=[];this.directionLight=this.ambientLight=null},$g:{bl:{u_ambient:{type:"vec3",value:function(){if(this.h.AmbientLight)return this.h.AmbientLight.color}},u_light:{type:"vec3",value:function(){if(this.h.DirectionLight)return this.h.DirectionLight.color}},u_lightDirection:{type:"vec3",value:function(){var a=this.h;if(this.h.DirectionLight)return a.map.T.pda.elements}},u_normalMatrix:{type:"mat3", value:function(){return this.jea.elements}}},attributes:{a_normal:{type:"vec3",value:function(){return this.Y.bh}}},dm:"\\n\\t\\t\\tattribute vec3 a_vertex;\\n\\t\\t\\tattribute vec4 a_color;\\n\\t\\t\\tattribute vec3 a_normal;\\n\\t\\t\\tattribute vec2 a_uv;\\n\\t\\t\\tattribute float a_textureIndex;\\n\\t\\t\\t\\n\\t\\t\\tuniform mat4 u_modelViewMatrix;\\n\\t\\t\\tuniform mat4 u_projectionMatrix;\\n\\t\\t\\tuniform mediump int u_textureNum;\\n\\t\\t\\tuniform vec3 u_ambient;\\n\\t\\t\\tuniform vec3 u_light;\\n\\t\\t\\tuniform vec3 u_lightDirection;\\n\\t\\t\\tuniform mat3 u_normalMatrix;\\n\\t\\t\\tvarying vec4 v_color;\\n\\t\\t\\tvarying vec2 v_uv;\\n\\t\\t\\tvarying float v_textureIndex;\\n\\n\\t\\t\\tvoid main(void) {\\n\\t\\t\\t\\tvec3 normal = normalize(u_normalMatrix * a_normal);\\n\\t\\t\\t\\tfloat nDotL = max(dot(u_lightDirection, -normal), 0.0);\\n\\t\\t\\t\\tvec3 diffuse = u_light*nDotL;\\n\\t\\t\\t\\tvec3 ll = (u_ambient+diffuse);\\n\\t\\t\\t\\tif(u_textureNum==0){//\\u6ca1\\u6709\\u7eb9\\u7406\\uff0c\\u5728\\u9876\\u70b9\\u7740\\u8272\\u5668\\u8fdb\\u884c\\u5149\\u7167\\u53e0\\u52a0\\n\\t\\t\\t\\t\\tv_color = vec4(ll*a_color.rgb,a_color.a);\\n\\t\\t\\t\\t}else{\\n\\t\\t\\t\\t\\tv_color = vec4(ll,a_color.a);//\\u8bb0\\u5f55\\u5149\\u7167\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\tv_uv = a_uv;\\n\\t\\t\\t\\tv_textureIndex = a_textureIndex;\\n\\t\\t\\t\\tvec4 pos = vec4(a_vertex, 1.0);\\n\\t\\t\\t\\tgl_Position = u_projectionMatrix * u_modelViewMatrix * pos;\\n\\t\\t\\t}\\n\\t\\t", le:" precision mediump float;\\n\\t\\tvarying vec4 v_color;\\n\\t\\tvarying vec2 v_uv;\\n\\t\\tvarying float v_textureIndex;\\n\\t\\tuniform int u_textureNum;\\n\\t\\tuniform sampler2D u_textures[8];\\n\\t\\tvoid main(void) {\\n\\t\\t\\tif (u_textureNum == 0) {\\n\\t\\t\\t\\tgl_FragColor = v_color;\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tvec4 smpColor;\\n\\t\\t\\t\\tfloat textureIndex;\\n\\t\\t\\t\\tif (u_textureNum == 1) {\\n\\t\\t\\t\\t\\ttextureIndex = 0.0;\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\ttextureIndex = v_textureIndex;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tvec2 uv = v_uv.xy;\\n\\t\\t\\t\\tif (textureIndex == 0.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[0], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 1.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[1], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 2.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[2], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 3.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[3], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 4.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[4], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 5.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[5], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 6.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[6], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 7.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[7], uv);\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tdiscard;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif (smpColor.a == 0.0) {\\n\\t\\t\\t\\t\\tdiscard;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tgl_FragColor = vec4(v_color.rgb*smpColor.rgb,v_color.a);;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\t"}});f.pc.NN=f.pc.MN.extend({B:function(a){this.Zk(arguments);this.type="prism";this.F=a;this.uT=this.attributeNeedUpdate=!0},VB:function(a){if(this.uT||this.attributeNeedUpdate)this.yF(this.F,a),this.uT=this.attributeNeedUpdate=!1},yF:function(a,b){var c=a.path;if(c[0]instanceof f.V||c[0]instanceof f.G)c=[c];for(var d=a.height,e=f.a.cC(a.color),g=f.a.cC(a.color2||e),h=0;h<c.length;h+=1)c[h]=this.yda(c[h],b),c[h]=f.Ez.makesureAntiClockwise(c[h]);for(var k=c[0],l=[],m=[],h=1;h<c.length;h+=1)f.Ez.isRingInRing(c[h], k)?l.push(c[h]):m.push(c[h]);for(var c=this.Y,n=0,p=4*k.length,h=0,q=k.length;h<q;h+=1){var r=k[h],s=k[(h+1)%q];c.kb.push(r[0],r[1],0);c.kb.push(r[0],r[1],-d);c.kb.push(s[0],s[1],0);c.kb.push(s[0],s[1],-d);var u=new f.Ea(0,0,-d),r=new f.Ea(s[0]-r[0],s[1]-r[1],0),r=(new f.Ea).zt(r,u).normalize().elements;c.bh.push(r[0],r[1],r[2]);c.bh.push(r[0],r[1],r[2]);c.bh.push(r[0],r[1],r[2]);c.bh.push(r[0],r[1],r[2]);c.Za.push.apply(c.Za,g);c.Za.push.apply(c.Za,g);c.Za.push.apply(c.Za,g);c.Za.push.apply(c.Za, g);var r=4*h,u=r+1,s=(r+2)%p,v=(r+3)%p;c.Xh.push(u,r,s);c.Xh.push(u,s,v)}n+=p;for(h=0;h<l.length;h+=1){for(var x=l[h],p=4*x.length,t=0,q=x.length;t<q;t+=1)r=x[t],s=x[(t+1)%q],c.kb.push(r[0],r[1],0),c.kb.push(r[0],r[1],-d),c.kb.push(s[0],s[1],0),c.kb.push(s[0],s[1],-d),u=new f.Ea(0,0,-d),r=new f.Ea(s[0]-r[0],s[1]-r[1],0),r=(new f.Ea).zt(u,r).normalize().elements,c.bh.push(-r[0],-r[1],-r[2]),c.bh.push(-r[0],-r[1],-r[2]),c.bh.push(-r[0],-r[1],-r[2]),c.bh.push(-r[0],-r[1],-r[2]),c.Za.push.apply(c.Za, g),c.Za.push.apply(c.Za,g),c.Za.push.apply(c.Za,g),c.Za.push.apply(c.Za,g),r=4*t,u=r+1,s=(r+2)%p,v=(r+3)%p,c.Xh.push(n+u,n+s,n+r),c.Xh.push(n+u,n+v,n+s);n+=p}h=p=0;for(q=k.length;h<q;h+=1)r=k[h],c.kb.push(r[0],r[1],-d),c.bh.push(0,0,-1),c.Za.push.apply(c.Za,e);p+=k.length;for(h=0;h<l.length;h+=1){x=l[h];t=0;for(q=x.length;t<q;t+=1)r=x[t],c.kb.push(r[0],r[1],-d),c.bh.push(0,0,-1),c.Za.push.apply(c.Za,e);p+=x.length}l=f.os.tp(k,l);for(h=0;h<l.length;h+=3)c.Xh.push(l[h]+n,l[h+2]+n,l[h+1]+n);n+=p;for(h= 0;h<m.length;h+=1){k=m[h];p=4*k.length;t=0;for(q=k.length;t<q;t+=1)r=k[t],s=k[(t+1)%q],c.kb.push(r[0],r[1],0),c.kb.push(r[0],r[1],-d),c.kb.push(s[0],s[1],0),c.kb.push(s[0],s[1],-d),u=new f.Ea(0,0,-d),r=new f.Ea(s[0]-r[0],s[1]-r[1],0),r=(new f.Ea).zt(r,u).normalize().elements,c.bh.push(r[0],r[1],r[2]),c.bh.push(r[0],r[1],r[2]),c.bh.push(r[0],r[1],r[2]),c.bh.push(r[0],r[1],r[2]),c.Za.push.apply(c.Za,g),c.Za.push.apply(c.Za,g),c.Za.push.apply(c.Za,g),c.Za.push.apply(c.Za,g),r=4*t,u=r+1,s=(r+2)%p,v=(r+ 3)%p,c.Xh.push(n+u,n+r,n+s),c.Xh.push(n+u,n+s,n+v);n+=p;t=0;for(q=k.length;t<q;t+=1)r=k[t],c.kb.push(r[0],r[1],-d),c.bh.push(0,0,-1),c.Za.push.apply(c.Za,e);l=f.os.tp(k);for(t=0;t<l.length;t+=3)c.Xh.push(l[t]+n,l[t+2]+n,l[t+1]+n);n+=k.length}this.needUpdate=!0},rb:function(a,b){return a.rb?a.rb(b):a[0]===b[0]&&a[1]===b[1]},yda:function(a,b){2<a.length&&this.rb(a[a.length-1],a[0])&&a.pop();var c=!1;a[0]instanceof f.V&&(c=!0);for(var d=0;d<a.length;d+=1)c&&(a[d]=b.NK(a[d])),a[d]=a[d].x?[f.a.Pc(a[d].x, 3),f.a.Pc(a[d].y,3)]:[f.a.Pc(a[d][0],3),f.a.Pc(a[d][1],3)];return a}});f.pc.Jn=f.pc.extend({B:function(){this.Zk(arguments);this.type="line";this.drawMode="LINES";this.geometry=this.Y=new f.Xd.Jn},Zl:function(a,b,c,d){var e=this.yd;e||(e=c);e.oe||(e.oe=e.Nj());b=new f.Ea(e.oe.If(b));e=new f.Ea(e.oe.If(new f.fj(0,0,0,1)));b=b.sub(e).normalize();a.origin.copy(e);a.direction.copy(b);var g=this.Y;if((e=g.Cm)&&!dd(a,e))return null;var h=Infinity,e=new f.Ea;b=new f.Ea;var k=new f.Ea,l=new f.Ea,m;if(g.Yk.length)for(var n=0,p=g.Yk.length;n<p;n+=2){var q=new f.Ea,r=new f.Ea, s=3*g.Yk[n],u=3*g.Yk[n+1];k.set(g.kb[s],g.kb[s+1],g.kb[s+2]);l.set(g.kb[u],g.kb[u+1],g.kb[u+2]);s=a.oU(k,l,q,r);s<h&&(h=s,e.copy(q),b.copy(r),m=n/2)}else for(n=0,p=g.kb.length;n<p;n+=6)q=new f.Ea,r=new f.Ea,s=n,u=n+3,k.set(g.kb[s],g.kb[s+1],g.kb[s+2]),l.set(g.kb[u],g.kb[u+1],g.kb[u+2]),s=a.oU(k,l,q,r),s<h&&(h=s,e.copy(q),b.copy(r),m=n/6);d*=2;return h<d*d?(b=b.Ve(this.Zo),a=b.elements,c=(new f.Ea(0,0,0)).Ve(c.Nj()).Md(b),e=e.Ve(this.Zo),d=e.Md(b),{Fd:c,aJ:d,zy:a,index:m,object:this}):null},$g:{bl:{}, attributes:{a_color:{type:"vec4",value:function(){return this.Y.Za}},a_textureIndex:{type:"float",value:function(){return this.Y.Pu}},a_uv:{type:"vec2",value:function(){return this.Y.Yr}}},En:function(){return this.Y.Yk},dm:"attribute vec3 a_vertex;\\n\\t\\tattribute vec4 a_color;\\n\\t\\tattribute vec2 a_uv;\\n\\t\\tattribute float a_textureIndex;\\n\\t\\tuniform mat4 u_modelViewMatrix;\\n\\t\\tuniform mat4 u_projectionMatrix;\\n\\n\\t\\tvarying vec4 v_color;\\n\\t\\tvarying vec2 v_uv;\\n\\t\\tvarying float v_textureIndex;\\n\\n\\t\\tvoid main(void) {\\n\\t\\t\\tv_color = a_color;\\n\\t\\t\\tv_uv = a_uv;\\n\\t\\t\\tv_textureIndex = a_textureIndex;\\n\\t\\t\\tvec4 pos = vec4(a_vertex, 1.0);\\n\\t\\t\\tgl_Position = u_projectionMatrix * u_modelViewMatrix * pos;\\n\\t\\t}\\n\\t\\t", le:" precision mediump float;\\n\\t\\tvarying vec4 v_color;\\n\\t\\tvarying vec2 v_uv;\\n\\t\\tvarying float v_textureIndex;\\n\\t\\tuniform int u_textureNum;\\n\\t\\tuniform sampler2D u_textures[8];\\n\\t\\tvoid main(void) {\\n\\t\\t\\n\\t\\t\\tif (u_textureNum == 0) {\\n\\t\\t\\t\\tgl_FragColor = v_color;\\n\\t\\t\\t} else {\\n\\t\\t\\t\\tvec4 smpColor;\\n\\t\\t\\t\\tfloat textureIndex;\\n\\t\\t\\t\\tif (u_textureNum == 1) {\\n\\t\\t\\t\\t\\ttextureIndex = 0.0;\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\ttextureIndex = v_textureIndex;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tvec2 uv = v_uv.xy;\\n\\t\\t\\t\\tif (textureIndex == 0.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[0], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 1.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[1], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 2.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[2], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 3.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[3], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 4.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[4], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 5.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[5], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 6.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[6], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 7.0) {\\n\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[7], uv);\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tdiscard;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif (smpColor.a == 0.0) {\\n\\t\\t\\t\\t\\tdiscard;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tgl_FragColor = smpColor;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t"}});f.pc.ss=f.pc.extend({B:function(a){this.Zk(arguments);this.type="WideLine";this.drawMode="TRIANGLES";this.geometry=this.Y=new f.Xd.ss;f.a.Kl(a,"object")||(a={});this.width=parseFloat(a.width)||2;this.backOrFront="front";this.Ei=20},update:function(){(this.cL||this.needUpdate)&&this.Y.Zea();f.pc.ss.qc.update.apply(this,arguments)},Ij:function(){return Math.pow(2,this.w.get("map").get("zoom")-this.Ei)},$g:{bl:{u_width:{type:"float",value:function(){return this.width/this.Ij()/2}}},attributes:{a_vertex:{type:"vec3", value:function(){return this.Y.xE}},a_dir:{type:"vec2",value:function(){return this.Y.$I}},a_color:{type:"vec4",value:function(){return this.Y.Za}}},En:function(){return this.Y.En},dm:"\\n      attribute vec3 a_vertex;\\n      attribute vec2 a_dir;\\n      attribute vec4 a_color;\\n\\n      uniform float u_width;\\n      uniform mat4 u_modelViewMatrix;\\n      uniform mat4 u_projectionMatrix;\\n\\n      varying vec4 v_color;\\n\\n      void main() {\\n        v_color = a_color;\\t\\n        vec4 pos = vec4(a_vertex, 1.0);\\n\\n        pos.x = pos.x + u_width * a_dir.x;\\n        pos.y = pos.y + u_width * a_dir.y;\\n\\n        gl_Position = u_projectionMatrix * u_modelViewMatrix * pos;\\n      }\\n    ", le:"\\n      precision mediump float;\\n\\n      varying vec4 v_color;\\n\\n      void main() {\\n        gl_FragColor = v_color;\\t\\t\\n      }\\n    "}});f.pc.wv=f.pc.extend({B:function(){this.Zk(arguments);this.type="points";this.drawMode="POINTS";this.DEPTH_TEST=!1;this.geometry=this.Y=new f.Xd.wv;this.borderColor=null;this.borderWeight=0},Tca:function(a,b,c,d){var e=this.Y;a=b.view.Qia(a);b=e.EL[d];var g=4*d,h=0,k=0,l=d=1;e.vu.length&&(k=e.vu[g],h=e.vu[g+1],d=e.vu[g+2],l=e.vu[g+3]);e=a.add((new f.G(k-0.5,h-0.5)).Sc(b));a=a.add((new f.G(d-0.5,l-0.5)).Sc(b));if(c.x>=e.x&&c.x<=a.x&&c.y>=e.y&&c.y<=a.y)return!0},Zl:function(a,b,c,d,e){var g=this.yd; g||(g=c);g.oe||(g.oe=g.Nj());b=new f.Ea(g.oe.If(b));g=new f.Ea(g.oe.If(new f.fj(0,0,0,1)));b=b.sub(g).normalize();a.origin.copy(g);a.direction.copy(b);var h=this.Y,g=h.kb,k=Infinity;b=new f.Ea;for(var l,m=new f.Ea,n=this.w.w.h.J,p=0,q=g.length;p<q;p+=3){m.set(g[p],g[p+1],g[p+2]);var r=new f.Ea,s=a.pC(m,r);if(!(s>h.EL[p]/2*1.414*d)&&this.Tca(m,n,e,p/3)){var u=a.origin.Md(r);u<k&&(b.copy(r),l=p/3,k=u)}}return void 0!==l?(b=b.Ve(this.Zo),a=b.elements,u=(new f.Ea(0,0,0)).Ve(c.Nj()).Md(b),m.set(g[3*l], g[3*l+1],g[3*l+2]),s=m.Ve(this.Zo).Md(b),{Fd:u,aJ:s,zy:a,index:l,object:this}):null},$g:{bl:{u_hasPointArea:{type:"int",value:function(){return this.a_areaBuffer?1:0}},u_borderWeight:{type:"float",value:function(){return this.borderWeight}},u_borderColor:{type:"vec4",value:function(){return this.borderColor}}},attributes:{a_color:{type:"vec4",value:function(){return this.Y.Za}},a_textureIndex:{type:"float",value:function(){return this.Y.Pu}},a_uv:{type:"vec4",value:function(){return this.Y.Yr}},a_size:{type:"float", value:function(){return this.Y.EL}},a_area:{type:"vec4",value:function(){return this.Y.vu}}},dm:"attribute vec3 a_vertex;\\n\\t\\tattribute vec4 a_color;\\n\\t\\tattribute vec4 a_uv;\\n\\t\\tattribute float a_size;\\n\\t\\tattribute float a_textureIndex;\\n\\t\\tattribute vec4 a_area;\\n\\t\\tuniform mat4 u_modelViewMatrix;\\n\\t\\tuniform mat4 u_projectionMatrix;\\n\\t\\tuniform mediump float u_borderWeight;\\n\\t\\tvarying vec4 v_color;\\n\\t\\tvarying vec4 v_uv;\\n\\t\\tvarying float v_textureIndex;\\n\\t\\tvarying float v_borderFactor;\\n\\t\\tvarying vec4 v_area;\\n\\n\\t\\tvoid main(void) {\\n\\t\\t\\tv_color = a_color;\\n\\t\\t\\tv_uv = a_uv;\\n\\t\\t\\tv_area = a_area;\\n\\t\\t\\tv_textureIndex = a_textureIndex;\\n\\t\\t\\tvec4 pos = vec4(a_vertex, 1.0);\\n\\t\\t\\tgl_Position = u_projectionMatrix * u_modelViewMatrix * pos;\\n\\t\\t\\tgl_PointSize = a_size;\\n\\t\\t\\tv_borderFactor = u_borderWeight/a_size;\\n\\t\\t}\\n\\t\\t", le:" precision mediump float;\\n\\t\\tvarying vec4 v_color;\\n\\t\\tvarying vec4 v_uv;\\n\\t\\tvarying float v_textureIndex;\\n\\t\\tvarying vec4 v_area;\\n\\t\\tvarying float v_borderFactor;\\n\\t\\tuniform vec4 u_borderColor;\\n\\t\\tuniform int u_hasPointArea;\\n\\t\\tuniform int u_textureNum;\\n\\t\\tuniform float u_borderWeight;\\n\\t\\tuniform sampler2D u_textures[8];\\n\\t\\tvoid main(void) {\\n\\t\\t\\tfloat minX = 0.0;\\n\\t\\t\\tfloat maxX = 1.0;\\n\\t\\t\\tfloat minY = 0.0;\\n\\t\\t\\tfloat maxY = 1.0;\\n\\n\\t\\t\\tif (u_hasPointArea == 1) {\\n\\t\\t\\t\\tminX = v_area.x;\\n\\t\\t\\t\\tmaxX = v_area.z;\\n\\t\\t\\t\\tminY = v_area.y;\\n\\t\\t\\t\\tmaxY = v_area.w;\\n\\t\\t\\t\\tif (gl_PointCoord.x < minX || gl_PointCoord.x > maxX || gl_PointCoord.y <minY || gl_PointCoord.y > maxY) {\\n\\t\\t\\t\\t\\tdiscard;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\t\\n\\t\\t\\tif (u_borderWeight!=0.0&&(gl_PointCoord.x <= minX + v_borderFactor || gl_PointCoord.x >= maxX - v_borderFactor || gl_PointCoord.y <= minY + v_borderFactor || gl_PointCoord.y >= maxY - v_borderFactor)) {\\n\\t\\t\\t\\t\\tgl_FragColor = u_borderColor;\\n\\t\\t\\t}else{\\n\\t\\t\\t\\tif (u_textureNum == 0) {\\n\\t\\t\\t\\t\\tgl_FragColor = v_color;\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tvec4 smpColor;\\n\\t\\t\\t\\t\\tfloat textureIndex;\\n\\t\\t\\t\\t\\tif (u_textureNum == 1) {\\n\\t\\t\\t\\t\\t\\ttextureIndex = 0.0;\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\ttextureIndex = v_textureIndex;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tvec2 uv = v_uv.xy;\\n\\t\\t\\t\\t\\tfloat x, y;\\n\\t\\t\\t\\t\\tif (u_hasPointArea == 0) {\\n\\t\\t\\t\\t\\t\\tx = gl_PointCoord.x;\\n\\t\\t\\t\\t\\t\\ty = gl_PointCoord.y;\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\tx = (gl_PointCoord.x - v_area.x) / (v_area.z - v_area.x);\\n\\t\\t\\t\\t\\t\\ty = (gl_PointCoord.y - v_area.y) / (v_area.w - v_area.y);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tuv = vec2(x * (v_uv.z - v_uv.x) + v_uv.x, y * (v_uv.w - v_uv.y) + v_uv.y);\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\tif (textureIndex == 0.0) {\\n\\t\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[0], uv);\\n\\t\\t\\t\\t\\t} else if (textureIndex == 1.0) {\\t\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[1], uv);\\n\\t\\t\\t\\t\\t} else if (textureIndex == 2.0) {\\n\\t\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[2], uv);\\n\\t\\t\\t\\t\\t} else if (textureIndex == 3.0) {\\n\\t\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[3], uv);\\n\\t\\t\\t\\t\\t} else if (textureIndex == 4.0) {\\n\\t\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[4], uv);\\n\\t\\t\\t\\t\\t} else if (textureIndex == 5.0) {\\n\\t\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[5], uv);\\n\\t\\t\\t\\t\\t} else if (textureIndex == 6.0) {\\n\\t\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[6], uv);\\n\\t\\t\\t\\t\\t} else if (textureIndex == 7.0) {\\n\\t\\t\\t\\t\\t\\tsmpColor = texture2D(u_textures[7], uv);\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\tsmpColor = vec4(1, 0, 0, 1);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tif (smpColor.a == 0.0) {\\n\\t\\t\\t\\t\\t\\tdiscard;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tgl_FragColor = smpColor;\\n\\t\\t\\t\\t}\\t\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\t"}});f.pc.X_=f.pc.wv.extend({B:function(){this.Zk(arguments);this.type="roundpoints";this.merge=!1},$g:{bl:{u_merge:{type:"int",value:function(){return this.merge}}},attributes:{},dm:"attribute vec3 a_vertex;\\n\\t\\tattribute vec4 a_color;\\n\\t\\tattribute vec4 a_uv;\\n\\t\\tattribute float a_size;\\n\\t\\tattribute float a_textureIndex;\\n\\t\\tuniform mat4 u_modelViewMatrix;\\n\\t\\tuniform mat4 u_projectionMatrix;\\n\\t\\tuniform mediump float u_borderWeight;\\n\\t\\tvarying vec4 v_color;\\n\\t\\tvarying vec4 v_uv;\\n\\t\\tvarying float v_textureIndex;\\n\\t\\tvarying vec2 v_rs;\\n\\n\\t\\tvoid main(void) {\\n\\t\\t\\tv_color = a_color;\\n\\t\\t\\tv_uv = a_uv;\\n\\t\\t\\tv_textureIndex = a_textureIndex;\\n\\t\\t\\tvec4 pos = vec4(a_vertex, 1.0);\\n\\t\\t\\tgl_Position = u_projectionMatrix * u_modelViewMatrix * pos;\\n\\t\\t\\tgl_PointSize = a_size;\\n\\t\\t\\tv_rs = vec2(a_size/2.0,a_size/2.0-u_borderWeight);//\\u5916\\u534a\\u5f84\\uff0c\\u5185\\u534a\\u5f84\\n\\t\\t}\\n\\t", le:" precision mediump float;\\n\\t\\tvarying vec4 v_color;\\n\\t\\tvarying vec4 v_uv;\\n\\t\\tvarying float v_textureIndex;\\n\\t\\tvarying float v_borderFactor;\\n\\t\\tuniform vec4 u_borderColor;\\n\\t\\tuniform int u_textureNum;\\n\\t\\tuniform int u_merge;\\n\\t\\tuniform float u_borderWeight;\\n\\t\\tuniform sampler2D u_textures[8];\\n\\t\\tvarying vec2 v_rs;\\n\\t\\tvoid main(void) {\\n\\t\\t\\tfloat ro = v_rs.x;\\n\\t\\t\\tfloat ri = v_rs.y;\\n\\t\\t\\tfloat dis2center = distance(gl_PointCoord,vec2(0.5,0.5))*ro*2.0;//\\u8ddd\\u79bb\\u8fb9\\u754c\\u7684\\u50cf\\u7d20\\u8ddd\\u79bb\\n\\t\\t\\tif(dis2center>ro){\\n\\t\\t\\t\\tdiscard;\\n\\t\\t\\t}\\n\\t\\t\\tif(u_borderWeight>0.0){//\\u6709border\\n\\t\\t\\t\\tif(dis2center>ro-1.0){\\n\\t\\t\\t\\t\\tgl_FragColor = vec4(u_borderColor.xyz,u_borderColor.a*(ro-dis2center));\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}else if(dis2center>ri){\\n\\t\\t\\t\\t\\tgl_FragColor=u_borderColor;\\n\\t\\t\\t\\t\\treturn;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\tvec4 color = v_color;\\n\\t\\t\\tif (u_textureNum != 0) {\\n\\t\\t\\t\\tfloat textureIndex;\\n\\t\\t\\t\\tif (u_textureNum == 1) {\\n\\t\\t\\t\\t\\ttextureIndex = 0.0;\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\ttextureIndex = v_textureIndex;\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tvec2 uv = mix(v_uv.xy,v_uv.zw,gl_PointCoord);\\n\\t\\t\\t\\tif (textureIndex == 0.0) {\\n\\t\\t\\t\\t\\tcolor = texture2D(u_textures[0], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 1.0) {\\n\\t\\t\\t\\t\\tcolor = texture2D(u_textures[1], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 2.0) {\\n\\t\\t\\t\\t\\tcolor = texture2D(u_textures[2], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 3.0) {\\n\\t\\t\\t\\t\\tcolor = texture2D(u_textures[3], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 4.0) {\\n\\t\\t\\t\\t\\tcolor = texture2D(u_textures[4], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 5.0) {\\n\\t\\t\\t\\t\\tcolor = texture2D(u_textures[5], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 6.0) {\\n\\t\\t\\t\\t\\tcolor = texture2D(u_textures[6], uv);\\n\\t\\t\\t\\t} else if (textureIndex == 7.0) {\\n\\t\\t\\t\\t\\tcolor = texture2D(u_textures[7], uv);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif(u_merge==1){\\n\\t\\t\\t\\t\\tcolor = vec4(color.rgb * color.a + v_color.rgb * (1.0 - color.a), color.a+v_color.a*(1.0-color.a));\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t\\tif(dis2center>ri-1.0){\\n\\t\\t\\t\\tfloat factor = ri-dis2center;//\\u586b\\u5145\\u8272\\u7684\\u767e\\u5206\\u6bd4\\n\\t\\t\\t\\tif (u_borderWeight == 0.0) {\\n\\t\\t\\t\\t\\tfloat a = color.a*factor;\\n\\t\\t\\t\\t\\tgl_FragColor = vec4(color.rgb, a);\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tfloat a = u_borderColor.a*(1.0-factor) +color.a*factor;\\n\\t\\t\\t\\t\\tgl_FragColor = vec4(u_borderColor.rgb * (1.0-factor) + color.rgb * factor, a);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}else{\\n\\t\\t\\t\\tgl_FragColor=color;\\n\\t\\t\\t}\\n\\t\\t}"}});f.pc.K_=f.pc.ss.extend({B:function(a){this.Zk(arguments);this.type="meshline";this.F=a},VB:function(a){(this.cL||this.needUpdate)&&this.yF(this.F,a)},yF:function(a,b){var c=f.a,d=a.path,e=a.height||0,g=c.S$(a.color||"black"),h=[],k=[];d[0]instanceof f.V||c.Ib(d,function(a,b){d[b]=new f.V(a[0],a[1])});var e=c.isArray(e)?c.map(e,function(a){return-1*a}):c.map(d,function(){return-1*e}),l=e[e.length-1];d.forEach(function(a,d){var p=b.Jb(a);h.push(p.x-c.Tk[0],p.y-c.Tk[1],e[d]||l);k.push.apply(k,g)});this.Y.kb.length&& this.Y.kb.splice(0,this.Y.kb.length);this.Y.Za.length&&this.Y.Za.splice(0,this.Y.Za.length);this.Y.kb.push.apply(this.Y.kb,h);this.Y.Za.push.apply(this.Y.Za,k)},setColor:function(a){this.F.color=a;this.BB()},setHeight:function(a){this.F.height=a;this.BB()},setWidth:function(a){this.width=this.F.width=a;this.BB()},setPath:function(a){this.F.path=a;this.BB();this.VB(this.w.get("map"))},BB:function(){this.cL=this.needUpdate=!0;this.reDraw()}});yc=window.AMap;yc.Vector3=f.Ea;yc.Object3D=f.pc;yc.Object3DLayer=w.w.Mn;yc.Object3DGroup=f.M_;yc.Walls=f.Kz;yc.Object3D.Mesh=f.pc.uv;yc.Object3D.MeshAcceptLights=f.pc.MN;yc.Object3D.Prism=f.pc.NN;yc.Object3D.Line=f.pc.Jn;yc.Object3D.Points=f.pc.wv;yc.Object3D.RoundPoints=f.pc.X_;yc.Object3D.MeshLine=f.pc.K_;yc.Geometry3D={Mesh:f.Xd.uv,Line:f.Xd.Jn,Points:f.Xd.wv};yc.Lights={AmbientLight:f.Hn.FE,DirectionLight:f.Hn.IE}; ')

_jsload_('sync', '(function(){if(f.A.yc){var a=function(){var a=f.A.yc.split("."),b=window;do if(b=b[a.shift()],!b)return null;while(a.length);return b||null},b=function(b){var c=a();if(c){if("function"!==typeof c)throw Error(f.A.yc+" is not a function!");setTimeout(c,1)}else if(b)throw Error("Can not find callback: "+f.A.yc+", try define it before load JsApi!");};document.body&&a()?b():setTimeout(function(){b(!0)},300)}var c=(new Date).getTime(),c=["s=rsv3&product=JsInit&key="+f.A.key,"t="+c];c.push("resolution="+ window.innerWidth+"*"+window.innerHeight);c.push("mob="+(f.l.Z?1:0));c.push("vt="+(f.l.hx?1:0));c.push("dpr="+window.devicePixelRatio);c.push("scale="+f.l.yE||0);c.push("detect="+f.l.ja);c=f.A.ud+"/v3/log/init?"+c.join("&");new f.Sa.bb(c,{callback:"callback"})})(); ')

_jsload_('cvector', 'f.Q.canvas.gj=f.Q.ri.extend({B:function(a,b){arguments.callee.oa.apply(this,arguments);var c=this;this.fQ=function(){c.set("display",0)};this.Df();this.q.X("feature",this,!0)},Fna:function(a,b){return f.H.mf(a,b.rr)||f.H.mf(a,b.eea)},bK:function(){return this.mb.zM},Df:function(){this.Qa=document.createElement("canvas");this.Qa.className="amap-layer amap-vectors";this.wb=this.Qa.getContext("2d");this.Af=this.q.cd?this.q.jb:1;this.mb=new f.Q.canvas.Gc(this.Qa,this.fQ,this.Af)},Dla:function(a,b,c){var d= a.x;a=a.y;return[this.pL*d-b*this.Ze,this.pL*a-c*this.Ze,this.pL*(d+1)+b*this.Ze,this.pL*(a+1)+c*this.Ze]},Aka:function(){500<this.q.or.length&&this.xa.clear();if(!this.xa.Oo()&&0!==this.q.or.length)for(var a in this.q.or)if(this.q.or.hasOwnProperty(a)){var b=this.q.or[a];if(b.Y){var c=b.Y.Qc(),d=[];this.xa.forEach(function(a,b){f.H.mf(a[1],c)&&d.push(b)},this);for(b=0;b<d.length;b+=1)this.xa.remove(d[b])}}this.q.or=[]},fc:function(a,b){if(this.aY||this.ra!==a.W.eb||this.ra.zoom!==a.W.zoom||this.ra.rotation!== a.W.rotation||this.q.Jk||this.h.Jr||this.h.JU){var c=this.W=a.W,d=this.S=c.S,e=this.q;this.zoom=c.zoom;this.hb=c.eb;this.jn=a.S;this.rotation=c.rotation;var g=a.W.Aa;this.ce=c.ce;c=this.Af;this.ra||(this.ra=this.hb,this.ra.zoom=this.zoom,this.ra.rotation=this.rotation,this.ii=this.S);if(this.q.Jk||!a.Hf&&!a.Pe||b.ax&&!a.Z){this.ra=this.hb;this.ra.zoom=this.zoom;this.ra.rotation=this.rotation;this.ii=this.S;this.q.Jk=!1;this.mb.Af=c;this.mb.S=a.W.S/c;this.mb.Ze=a.W.Ze/c;this.mb.jn=a.S;this.mb.Cd=[g.Nb.x, g.Nb.y];var h=this.Qa;h.width=Math.round(2*g.Ub.x)*c;h.height=Math.round(2*g.Ub.y)*c;var h=this.q.hu||0,k=this.q.iu||0,c=Math.max(this.q.Fe,h/this.S)+k,h=Math.max(this.q.af,h/this.S)+k,g=[g.Nb.x,g.Nb.y,g.nd.x,g.nd.y];g[0]-=c*d;g[1]-=h*d;g[2]+=c*d;g[3]+=h*d;c=e.Li(g);d=[[g[0],g[1]],[g[2],g[1]],[g[2],g[3]],[g[0],g[3]],[g[0],g[0]]];this.mb.wb.mC=0;this.mb.wb.Ty=!1;if(this.q.ia.Fh)e=this.q.get("style"),this.mb.YX(c,e)||(this.aY=!0);else{for(var l in c)c.hasOwnProperty(l)&&(c[l].get("visible")||delete c[l]); e=e.fK(c);l=e.length;this.aY=!1;for(g=0;g<l;g+=1)this.mb.YX(e[g][0],null,d)}this.Ne(a)}else this.Ne(a,b,!0)}},Ne:function(){var a=Math.pow(2,this.zoom-this.ra.zoom),b=this.q.cd?this.q.jb:1;this.transform={translate:this.hb.Va(this.ra).vc(this.ii/b).add({x:this.Qa.width/2,y:this.Qa.height/2}),scale:a/b,rotate:0}},$h:function(){return this.Qa}});f.Q.canvas.Gc=f.ba.extend({B:function(a,b,c){this.Qa=a;this.lv=25*c;this.wb=a.getContext("2d");this.Ft=document.createElement("canvas");a=6*c;this.Ft.width=a;this.Ft.height=a;var d=this.Ft.getContext("2d");d.strokeStyle="#fff";d.lineWidth=2*c;d.moveTo(-1,a-1);d.lineTo(a/2,1);d.lineTo(a+1,a-1);d.stroke();this.Ba={};this.Ns=b;this.xX={};this.Af=c},createPattern:function(a){if(!this.xX[a]){var b=document.createElement("img");b.onload=function(){var c=this.wb.createPattern(b,"repeat");this.xX[a]=c};b.src= a}},YX:function(a,b,c){var d=!0,e;for(e in a)if(a.hasOwnProperty(e)){var g=a[e],h=g.name.split("-")[0];"circle"===h?this.Ufa(g,b||g.style):"point"===h?this.fga(g,b)||(d=!1):"polyline"===h?this.jga(g,b||g.style):"polygon"===h||"multipolygon"===h?this.gga(g,b||g.style,c):"text"===h&&this.Yma(g,b||g.style)}return d},Ufa:function(a,b){var c=this.wb,d=b.strokeColor,e=b.strokeWeight,g=b.strokeOpacity,h=b.fillColor,k=b.fillOpacity,l=b.strokeStyle,m=b.strokeDasharray,n,p=2*Math.PI,q,r;c.setLineDash&&c.setLineDash([]); c.save();h&&(c.fillStyle=h);d&&(e&&(c.lineWidth=e*this.Af),c.strokeStyle=d);e=a.Y;e instanceof f.pa.Qf&&(r=[e]);for(var e=0,s=r.length;e<s;e+=1){c.beginPath();q=r[e].Na;q=this.$e(q);var u=0,u=a.fr?a.get("radius")*this.Af:a.get("radius")/(this.jn*Math.cos(Math.PI*a.get("center").P/180))*this.Af;c.arc(q[0],q[1],u,0,p,!0);c.closePath();h&&k!==n&&(n=c.globalAlpha=k);c.fill();d&&(g!==n&&(n=c.globalAlpha=g),"dashed"===l?c.setLineDash?(c.setLineDash(m),c.stroke()):c.oaa(q[0],q[1],u,m):c.stroke())}c.restore()}, fga:function(a,b){b instanceof Array&&(b="number"===typeof a.Ra.style&&b[a.Ra.style]?b[a.Ra.style]:b[0]);var c=this.wb,d,e,g=0,h=0;d=this.Vm(b.url);if(!d)return!1;var k=b.size.width,l=b.size.height,g=b.anchor.x,h=b.anchor.y;e=this.$e(a.Y.Na);var m=b.rotation_;if(0!==m){var n=Math.cos(m),p=Math.sin(m),q=e[0],r=e[1];c.transform(n,p,-p,n,(1-n)*q+p*r,(1-n)*r-p*q)}c.drawImage(d,Math.round(e[0]-g),Math.round(e[1]-h),k,l);0!==m&&c.setTransform(1,0,0,1,0,0);return!0},fca:function(a,b,c){return[(b[0]-a[0])* c+a[0],(b[1]-a[1])*c+a[1]]},jga:function(a,b){var c=this.wb,d,e,g,h,k,l,m,n,p,q;n=[NaN,NaN,0];var r=[NaN,NaN],s=[NaN,NaN];c.globalAlpha=b.strokeOpacity;d=b.strokeStyle;e=b.strokeDasharray;c.lineCap=b.lineCap||"butt";c.lineJoin=b.lineJoin||"round";c.setLineDash&&c.setLineDash([]);c.save();c.beginPath();g=a.Y;g instanceof f.pa.Kn?h=[g]:g instanceof f.pa.vv&&(h=g.We);var u=b.showDir;g=[];k=0;for(l=h.length;k<l;k+=1){m=h[k].Na;var v=[],x=0;p=0;for(q=m.length;p<q;p+=1)if(n=m[p],n=this.$e(n),v.push(n), 0===p)s[0]=n[0],s[1]=n[1],c.moveTo(n[0],n[1]);else if(r[0]=n[0],r[1]=n[1],p===m.length-1||3<=Math.abs(r[0]-s[0])||3<=Math.abs(r[1]-s[1])){if(u){var t=Math.sqrt(Math.pow(r[0]-s[0],2)+Math.pow(r[1]-s[1],2));if(t+x>this.lv){var y=0,y=s,A=r;if(A[0]===y[0])y=A[1]>y[1]?Math.PI:0;else if(A[1]===y[1])y=A[0]>y[0]?Math.PI/2:-Math.PI/2;else{var z=A[0]-y[0],A=A[1]-y[1],y=Math.atan(z/A);0<z&&0<A?y=Math.PI-y:0>z&&0>A?y=-y:0<z&&0>A?y=-y:0>z&&0<A&&(y=Math.PI-y)}for(z=this.lv-x;z<t;)A=this.fca(s,r,z/t),0<A[0]&&A[0]< this.Qa.width&&0<A[1]&&A[1]<this.Qa.height&&g.push(A[0],A[1],y),z+=this.lv;x=(t-(this.lv-x))%this.lv}else x+=t}"dashed"!==d||c.setLineDash?c.lineTo(n[0],n[1]):c.XI(s[0],s[1],n[0],n[1],e);s[0]=r[0];s[1]=r[1]}}"dashed"===d&&c.setLineDash&&c.setLineDash(e);b.isOutline&&(c.strokeStyle=b.outlineColor,c.lineWidth=(b.strokeWeight+2*b.borderWeight)*this.Af,c.stroke());b.strokeColor&&(c.strokeStyle=b.strokeColor,c.lineWidth=b.strokeWeight*this.Af,c.stroke());c.restore();for(d=0;d<g.length;d+=3)c.save(),c.translate(g[d], g[d+1]),c.rotate(g[d+2]),c.drawImage(this.Ft,-this.Ft.width/2,-this.Ft.width/2),c.restore()},gga:function(a,b,c){var d=this.wb,e=b.strokeColor,g=b.strokeWeight,h=b.strokeOpacity,k=b.fillColor,l=b.fillOpacity,m=b.strokeStyle,n=b.strokeDasharray,p,q,r,s,u,v,x,t;q=[NaN,NaN,0];var y=[NaN,NaN],A=[NaN,NaN];d.setLineDash&&d.setLineDash([]);d.save();e&&(d.strokeStyle=e,g&&(d.lineWidth=g*this.Af),d.lineCap="butt",d.lineJoin=b.lineJoin||"miter");k&&(d.fillStyle=k);d.beginPath();this.bv={};b=0;q=a.Y;q instanceof f.pa.bc?r=[q]:q instanceof f.pa.ks&&(r=q.We);a=0;for(g=r.length;a<g;a+=1)if(q=r[a],s=q.Mf,u=s.length,0<u)for(var z=0;z<u;z+=1){var N;v=s[z].Na;2<v.length&&(v=f.Mc.FX(v,c));this.bv[b]=[];x=0;for(t=v.length;x<t;x+=1)if(q=v[x],q=this.$e(q),this.bv[b].push(q),0===x)A[0]=NaN,A[1]=NaN,N=[q[0],q[1]],d.moveTo(q[0],q[1]);else if(y[0]=Math.round(q[0]),y[1]=Math.round(q[1]),y[0]!==A[0]||y[1]!==A[1])d.lineTo(q[0],q[1]),A[0]=y[0],A[1]=y[1];b+=1;N&&d.lineTo(N[0],N[1])}d.closePath();k&&(l!==p&&(p=d.globalAlpha= l),d.fill());if(e){h!==p&&(d.globalAlpha=h);if("dashed"===m)if(d.setLineDash)d.setLineDash(n);else{d.beginPath();for(var I in this.bv)if(this.bv.hasOwnProperty(I))for(k=this.bv[I],l=0,m=k.length;l<m;l+=1)p=l===m-1?0:l+1,c=Math.round(k[l][0]),e=Math.round(k[l][1]),h=Math.round(k[p][0]),p=Math.round(k[p][1]),d.XI(c,e,h,p,n)}d.stroke()}d.restore()},Vm:function(a){var b=this.Ba[a];if("undefined"===typeof b)b=document.createElement("img"),b.src=a,this.Ba[a]=b,b.loaded=!1,f.C.Rj(b,"load",function(){b.loaded= !0;var a=document.createElement("canvas");a.width=b.naturalWidth;a.height=b.naturalHeight;a.getContext("2d").drawImage(b,0,0);b.canvas=a;this.Ns&&this.Ns()},this);else if(b.loaded)return b.canvas||b},$e:function(a){var b=this.S;return[(a[0]-this.Cd[0])/b,(a[1]-this.Cd[1])/b]}}); ')

_cssload_('AMap.IndoorMap', '.amap-indoor-map .label-canvas{position:absolute;top:0;left:0}.amap-indoor-map .highlight-image-con *{pointer-events:none}.amap-indoormap-floorbar-control{position:absolute;margin:auto 0;bottom:165px;right:12px;width:35px;text-align:center;line-height:1.3em;overflow:hidden;padding:0 2px}.amap-indoormap-floorbar-control .panel-box{background-color:rgba(255,255,255,.9);border-radius:3px;border:1px solid #ccc}.amap-indoormap-floorbar-control .select-dock{position:absolute;top:0;left:0;width:100%;box-sizing:border-box;height:30px;border:solid #4196ff;border-width:0 2px;border-radius:2px;pointer-events:none;background:linear-gradient(to bottom,#f6f8f9 0,#e5ebee 50%,#d7dee3 51%,#f5f7f9 100%)}.amap-indoor-map .transition{transition:opacity .2s},.amap-indoormap-floorbar-control .transition{transition:top .2s,margin-top .2s}.amap-indoormap-floorbar-control .select-dock:after,.amap-indoormap-floorbar-control .select-dock:before{content:"";position:absolute;width:0;height:0;left:0;top:10px;border:solid transparent;border-width:4px;border-left-color:#4196ff}.amap-indoormap-floorbar-control .select-dock:after{right:0;left:auto;border-left-color:transparent;border-right-color:#4196ff}.amap-indoormap-floorbar-control.is-mobile{width:37px}.amap-indoormap-floorbar-control.is-mobile .floor-btn{height:35px;line-height:35px}.amap-indoormap-floorbar-control.is-mobile .select-dock{height:35px;top:36px}.amap-indoormap-floorbar-control.is-mobile .select-dock:after,.amap-indoormap-floorbar-control.is-mobile .select-dock:before{top:13px}.amap-indoormap-floorbar-control.is-mobile .floor-list-box{height:105px}.amap-indoormap-floorbar-control .floor-list-item .floor-btn{color:#555;font-family:"Times New Roman",sans-serif,"Microsoft Yahei";font-size:16px}.amap-indoormap-floorbar-control .floor-list-item.selected .floor-btn{color:#000}.amap-indoormap-floorbar-control .floor-btn{height:28px;line-height:28px;overflow:hidden;cursor:pointer;position:relative;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.amap-indoormap-floorbar-control .floor-btn:hover{background-color:rgba(221,221,221,.4)}.amap-indoormap-floorbar-control .floor-minus,.amap-indoormap-floorbar-control .floor-plus{position:relative;text-indent:-1000em}.amap-indoormap-floorbar-control .floor-minus:after,.amap-indoormap-floorbar-control .floor-plus:after{content:"";position:absolute;margin:auto;top:9px;left:0;right:0;width:0;height:0;border:solid transparent;border-width:10px 8px;border-top-color:#777}.amap-indoormap-floorbar-control .floor-minus.disabled,.amap-indoormap-floorbar-control .floor-plus.disabled{opacity:.3}.amap-indoormap-floorbar-control .floor-plus:after{border-bottom-color:#777;border-top-color:transparent;top:-3px}.amap-indoormap-floorbar-control .floor-list-box{max-height:153px;position:relative;overflow-y:hidden}.amap-indoormap-floorbar-control .floor-list{margin:0;padding:0;list-style:none}.amap-indoormap-floorbar-control .floor-list-item{position:relative}.amap-indoormap-floorbar-control .floor-btn.disabled,.amap-indoormap-floorbar-control .floor-btn.disabled *,.amap-indoormap-floorbar-control.with-indrm-loader *{-webkit-pointer-events:none!important;pointer-events:none!important}.amap-indoormap-floorbar-control .with-indrm-loader .floor-nonas{opacity:.5}.amap-indoor-map-moverf-marker{color:#555;background-color:#FFFEEF;border:1px solid #7E7E7E;padding:3px 6px;font-size:12px;white-space:nowrap;display:inline-block;position:absolute;top:1em;left:1.2em}.amap-indoormap-floorbar-control .amap-indrm-loader{-moz-animation:amap-indrm-loader 1250ms infinite linear;-webkit-animation:amap-indrm-loader 1250ms infinite linear;animation:amap-indrm-loader 1250ms infinite linear;border:2px solid #91A3D8;border-right-color:transparent;box-sizing:border-box;display:inline-block;overflow:hidden;text-indent:-9999px;width:13px;height:13px;border-radius:7px;position:absolute;margin:auto;top:0;left:0;right:0;bottom:0}@-moz-keyframes amap-indrm-loader{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes amap-indrm-loader{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes amap-indrm-loader{0%{-moz-transform:rotate(0deg);-ms-transform:rotate(0deg);-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);-ms-transform:rotate(360deg);-webkit-transform:rotate(360deg);transform:rotate(360deg)}}')
_jsload_('AMap.IndoorMap', 'f.z_=f.ba.extend({ga:[f.ka],B:function(a){this.vs=f.extend({size:120,RY:0.7,CU:2,QY:300},a);this.Mh={};this.lm=0;this.mF=this.vs.size},F0:function(a){return{Dn:a,lI:f.a.Jj(),HB:0}},get:function(a,b){if(!this.Bc(a))return b;var c=this.Mh[a];c.lI=f.a.Jj();c.HB+=1;return c.Dn},forEach:function(a,b){for(var c in this.Mh)if(this.Mh.hasOwnProperty(c)&&!1===a.call(b,this.Mh[c].Dn,c))break},AD:function(a,b){return this.get(a,b)},set:function(a,b){this.Bc(a)?this.Mh[a].Dn=b:(this.lm+=1,this.Mh[a]=this.F0(b)); this.lm>this.mF&&this.H0()},Bc:function(a){return this.Mh.hasOwnProperty(a)},Bn:function(a){if(!this.Bc(a))return null;this.lm-=1;var b=this.Mh[a];delete this.Mh[a];return b.Dn},clear:function(){this.hF();this.Mh={};this.lm=0},hF:function(){this.nF&&clearTimeout(this.nF)},H0:function(){if(this.lm>this.mF*this.vs.CU)this.hF(),this.jO();else if(!(10>f.a.Jj()-this.J0)){this.hF();var a=this;this.nF=setTimeout(function(){a.nF=null;a.jO()},this.vs.QY);this.J0=f.a.Jj()}},jO:function(){var a=Math.round(this.mF* this.vs.RY);if(!(this.lm<a))for(var a=this.B0(this.lm-a),b,c,d=0,e=a.length;d<e;d+=1)b=a[d],c=this.Bn(b),this.r("drop",{key:b,Dn:c})},x0:function(a,b){var c=this.Mh[a],d=this.Mh[b],e=c.lI-d.lI;return 0!==e?e:c.HB-d.HB},B0:function(a){var b=[],c;for(c in this.Mh)this.Mh.hasOwnProperty(c)&&b.push(c);return this.C0(b,a,this.x0)},C0:function(a,b,c){if(0>=b)return[];for(var d=0,e=a.length-1,g,h,k;d<e;){g=d;h=e;for(k=a[b];g<=b&&h>=b;){for(;g<=b&&0>c.call(this,a[g],k);)g+=1;for(;h>=b&&0<c.call(this,a[h], k);)h-=1;var l=a[g];a[g]=a[h];a[h]=l;g+=1;h-=1}h<b&&(d=g);g>b&&(e=h)}return a.slice(0,b)}});f.js={ZI:function(a){f.j.Ma(a,"transition")},gL:"function"!==typeof Object.create?function(){function a(){}return function(b){a.prototype=b;b=new a;a.prototype=null;return b}}():Object.create,tT:function(a,b){var c=this.c9;c||(c=this.c9=this.G3());if(!1!==c){this.ZI(a);var d,e=this,g=function k(){clearTimeout(d);e.ZI(a);f.C.I(a,c,k,e)};d=setTimeout(g,b||1E3);f.j.Ga(a,"transition");f.C.Rj(a,c,g,this)}},G3:function(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd", MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a];return!1}};(function(){var a="strokeColor strokeOpacity strokeWeight fillColor fillOpacity strokeStyle strokeDasharray fontSize".split(" "),b=f.ba.extend({B:function(){this.$0=1;this.SH={};this.M1(c);this.QQ=[]},bW:function(a){for(var b=!0,c=13;22>=c;c++){var h=this.lV(a,c);if(h&&(0<h.fontSize||h.Xe)){b=!1;break}}return b},lV:function(a,b){return this.xi(a,b)},jca:function(a,b){return this.xi(a,b)},aca:function(a,b){return this.xi(a,b)},daa:function(b,c){if(c)for(var g in c)c.hasOwnProperty(g)&&0<=a.indexOf(g)&& void 0===b[g]&&(b[g]=c[g]);return b},yC:function(b,c){if(!b)return null;for(var g={},h=0,k=a.length;h<k;h++){var l=a[h];b.hasOwnProperty(l)&&void 0!==b[l]&&(g[l]=b[l])}this.daa(g,c);return g},uka:function(a,b){return void 0===a?b:this.EC(a?this.yC(a,b):null)},FT:function(a){if(!a)return null;a=this.yC(a);return f.extend(a,{Ak:this.mca(a)})},xi:function(a,b){var c=a[0]+"_"+a[1];b=Math.round(b);var h=this.SH[c];if(!h)return 0>this.QQ.indexOf(c)&&this.QQ.push(c),null;for(var c=0,k=h.length;c<k;c++)if(0<= h[c].fu.indexOf(""+b))return h[c].wM;return 20<b&&(h=h[h.length-1],0<=h.fu.indexOf("20"))?(h.fu.push(""+b),h.wM):null},M1:function(a){for(var b in a)a.hasOwnProperty(b)&&this.N1(a[b],b)},N1:function(a,b){for(var c=0,h=a.length;c<h;c++)this.J1(a[c],b)},J1:function(a,b){var c=a.$;if(c){var h=a.StyleItem,c=c.mainkey+"_"+c.subkey;this.SH[c]&&console.error("Style key duplicate",c);this.SH[c]=this.L1(h,b)}else console.warn("Missing group $",a)},L1:function(a,b){for(var c=[],h=0,k=a.length;h<k;h++){var l= this.K1(a[h],b);l&&c.push(l)}return c},K1:function(a,b){var c=a.$;if(c){var h={};h.fu=c.level.split(",");h.yaa=c.desc.split(",");h.wM=this.I1(h,h.yaa,b);h.wM.fu=h.fu;return h}console.warn("Missing $",a)},Zs:function(a){a.trim&&(a=a.trim());return f.a.Vf(a.substr(2,8))},vV:function(){return this.$0++},mca:function(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c);b.sort();for(var h=[],k=0,l=b.length;k<l;k++)h.push(b[k]+":"+a[c]);return h.join(";")||"empty"},NW:function(a,b){return a?b?f.extend({}, a,b,{Ak:b.Ak+";"+a.Ak}):a:b},EC:function(a){return f.extend({},a,{Ak:this.vV()})},I1:function(a,b,c){switch(c){case "PoiStyle":a={Xe:parseInt(b[1],10),fontSize:Math.min(15,parseInt(b[4],10)||0),fillColor:this.Zs(b[5]),strokeColor:this.Zs(b[6]),TO:0===parseInt(b[8],10)};1===a.Xe&&(a.Xe=0);break;case "LineStyle":a={fillColor:"rgba(252,249,242,1)",strokeColor:this.Zs(b[7]),strokeWeight:Math.max(2,Math.round(parseInt(b[2],10)/3))};break;case "RegionStyle":a={fillColor:this.Zs(b[2])};break;case "BuildingStyle":a= {fillColor:this.Zs(b[1]),strokeColor:this.Zs(b[2])};break;default:return console.warn("Unknown style type",c),null}a.Ak=this.vV();return a}}),c={PoiStyle:[{$:{mainkey:"10001",subkey:"1"},StyleItem:[{$:{level:"18,19,20",desc:"50,2,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,7,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"3"},StyleItem:[{$:{level:"19,20",desc:"50,8,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001", subkey:"4"},StyleItem:[{$:{level:"18",desc:"50,25,2,1,0,0xff84638E,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,25,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,59,2,1,0,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"6"},StyleItem:[{$:{level:"18,19,20",desc:"50,3,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"7"},StyleItem:[{$:{level:"18,19,20",desc:"50,4,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"8"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,9,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"9"},StyleItem:[{$:{level:"18,19,20",desc:"50,10,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"10"},StyleItem:[{$:{level:"18,19,20",desc:"50,14,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"11"},StyleItem:[{$:{level:"18,19,20",desc:"50,15,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"12"}, StyleItem:[{$:{level:"18,19,20",desc:"50,17,1,1,12,0xff816B4E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"13"},StyleItem:[{$:{level:"18,19,20",desc:"50,18,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"14"},StyleItem:[{$:{level:"18,19,20",desc:"50,19,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"15"},StyleItem:[{$:{level:"18,19,20",desc:"50,22,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"16"},StyleItem:[{$:{level:"20",desc:"50,24,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"17"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"18"},StyleItem:[{$:{level:"18,19,20",desc:"50,27,1,1,12,0xff84638E,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"19"},StyleItem:[{$:{level:"18,19,20",desc:"50,36,1,1,12,0xff8E3A3D,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"20"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,39,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"21"},StyleItem:[{$:{level:"18,19", desc:"50,44,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,44,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"22"},StyleItem:[{$:{level:"18,19",desc:"50,45,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,45,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"23"},StyleItem:[{$:{level:"18,19",desc:"50,46,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,46,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"24"}, StyleItem:[{$:{level:"18,19",desc:"50,47,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,47,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"25"},StyleItem:[{$:{level:"18,19",desc:"50,48,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,48,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"26"},StyleItem:[{$:{level:"18,19",desc:"50,49,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,49,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"27"},StyleItem:[{$:{level:"18,19",desc:"50,50,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,50,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"28"},StyleItem:[{$:{level:"18,19",desc:"50,51,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,51,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"29"},StyleItem:[{$:{level:"18,19",desc:"50,52,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,52,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"30"},StyleItem:[{$:{level:"18,19",desc:"50,53,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,53,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"31"},StyleItem:[{$:{level:"18,19",desc:"50,54,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,54,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"32"},StyleItem:[{$:{level:"18,19",desc:"50,55,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,55,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"33"},StyleItem:[{$:{level:"18,19",desc:"50,56,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,56,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"34"},StyleItem:[{$:{level:"18,19",desc:"50,57,2,1,0,0xff696F71,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,57,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"35"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,6,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"36"}, StyleItem:[{$:{level:"18,19,20",desc:"50,12,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"37"},StyleItem:[{$:{level:"19,20",desc:"50,13,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"38"},StyleItem:[{$:{level:"18,19,20",desc:"50,16,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"39"},StyleItem:[{$:{level:"17",desc:"50,20,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,20,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001", subkey:"40"},StyleItem:[{$:{level:"17",desc:"50,5,2,1,0,0xff69859F,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,5,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"41"},StyleItem:[{$:{level:"20",desc:"50,28,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"42"},StyleItem:[{$:{level:"18,19,20",desc:"50,29,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"43"},StyleItem:[{$:{level:"18,19,20",desc:"50,31,1,1,12,0xff000000,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"44"},StyleItem:[{$:{level:"18,19,20",desc:"50,32,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"45"},StyleItem:[{$:{level:"18,19,20",desc:"50,33,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"46"},StyleItem:[{$:{level:"18",desc:"50,34,2,1,0,0xff935676,0xffffffff,0x0,0"}},{$:{level:"19,20",desc:"50,34,1,1,12,0xff935676,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"47"},StyleItem:[{$:{level:"18,19,20",desc:"50,35,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"48"},StyleItem:[{$:{level:"19,20",desc:"50,37,1,1,12,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"49"},StyleItem:[{$:{level:"18,19,20",desc:"50,38,2,1,0,0xff4C6776,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"50"},StyleItem:[{$:{level:"18,19,20",desc:"50,42,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"51"},StyleItem:[{$:{level:"18,19,20",desc:"50,41,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"52"},StyleItem:[{$:{level:"20", desc:"50,43,1,1,12,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"53"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,58,2,1,0,0xff696F71,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"54"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,21,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"55"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,30,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"56"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff000000,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"57"},StyleItem:[{$:{level:"18,19,20",desc:"50,23,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"58"},StyleItem:[{$:{level:"18,19,20",desc:"50,40,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"59"},StyleItem:[{$:{level:"18,19,20",desc:"50,11,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"60"},StyleItem:[{$:{level:"16,17",desc:"50,1,0,1,20,0xff6590a6,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"62"},StyleItem:[{$:{level:"17,18,19,20", desc:"50,61,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"63"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,60,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"64"},StyleItem:[{$:{level:"17",desc:"50,62,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,62,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"65"},StyleItem:[{$:{level:"17",desc:"50,63,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,63,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"66"},StyleItem:[{$:{level:"17",desc:"50,64,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,64,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"67"},StyleItem:[{$:{level:"17",desc:"50,65,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,65,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"68"},StyleItem:[{$:{level:"17",desc:"50,66,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,66,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"69"},StyleItem:[{$:{level:"17",desc:"50,67,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,67,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"70"},StyleItem:[{$:{level:"17",desc:"50,68,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,68,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"71"},StyleItem:[{$:{level:"17",desc:"50,69,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,69,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"72"},StyleItem:[{$:{level:"17",desc:"50,70,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"18,19,20",desc:"50,70,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"73"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,71,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"74"},StyleItem:[{$:{level:"17,18,19,20",desc:"50,72,2,1,0,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"75"},StyleItem:[{$:{level:"18,19",desc:"50,73,2,1,0,0xff62686B,0xffffffff,0x0,0"}}, {$:{level:"20",desc:"50,73,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"76"},StyleItem:[{$:{level:"18,19",desc:"50,74,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,74,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"77"},StyleItem:[{$:{level:"18,19",desc:"50,75,2,1,0,0xff62686B,0xffffffff,0x0,0"}},{$:{level:"20",desc:"50,75,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"78"},StyleItem:[{$:{level:"18,19",desc:"50,76,2,1,0,0xff62686B,0xffffffff,0x0,0"}}, {$:{level:"20",desc:"50,76,1,1,12,0xff62686B,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"79"},StyleItem:[{$:{level:"19,20",desc:"50,81,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"80"},StyleItem:[{$:{level:"19,20",desc:"50,89,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"81"},StyleItem:[{$:{level:"19,20",desc:"50,85,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"82"},StyleItem:[{$:{level:"19,20",desc:"50,90,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"83"},StyleItem:[{$:{level:"19,20",desc:"50,83,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"84"},StyleItem:[{$:{level:"19,20",desc:"50,103,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"85"},StyleItem:[{$:{level:"19,20",desc:"50,98,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"86"},StyleItem:[{$:{level:"19,20",desc:"50,86,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"87"},StyleItem:[{$:{level:"19,20", desc:"50,87,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"88"},StyleItem:[{$:{level:"19,20",desc:"50,111,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"89"},StyleItem:[{$:{level:"19,20",desc:"50,88,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"90"},StyleItem:[{$:{level:"19,20",desc:"50,91,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"91"},StyleItem:[{$:{level:"19,20",desc:"50,93,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"92"},StyleItem:[{$:{level:"19,20",desc:"50,113,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"93"},StyleItem:[{$:{level:"19,20",desc:"50,95,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"94"},StyleItem:[{$:{level:"19,20",desc:"50,100,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"95"},StyleItem:[{$:{level:"19,20",desc:"50,97,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"96"},StyleItem:[{$:{level:"19,20", desc:"50,94,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"97"},StyleItem:[{$:{level:"18,19,20",desc:"50,108,1,1,12,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"98"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,2,1,0,0xff69859F,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"99"},StyleItem:[{$:{level:"18,19,20",desc:"50,1,0,1,12,0xff696F71,0xffffffff,0x0,1"}}]},{$:{mainkey:"10001",subkey:"105"},StyleItem:[{$:{level:"16,17,18",desc:"50,1,0,1,14,0xff696F71,0xffffffff,0x0,0"}}]}, {$:{mainkey:"10001",subkey:"106"},StyleItem:[{$:{level:"19,20",desc:"50,1,0,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]},{$:{mainkey:"10001",subkey:"107"},StyleItem:[{$:{level:"16,17,18,19,20",desc:"50,109,1,1,12,0xff4d4e51,0xffffffff,0x0,0"}}]}],LineStyle:[{$:{mainkey:"20001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,10,0,0,0,0xffe68e00,0xffe68e00,0xffe68e00,0xffe68e00"}}]},{$:{mainkey:"20001",subkey:"2"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"88,2,8,0,0,0,0xffababab,0xffababab,0xff5e492f,0xffffe080"}}]}], RegionStyle:[{$:{mainkey:"30001",subkey:"1"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"90,1,0xfffcfbed"}}]},{$:{mainkey:"30001",subkey:"99"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x1a151b2b"}}]},{$:{mainkey:"30001",subkey:"98"},StyleItem:[{$:{level:"19,20",desc:"90,1,0x8c151b2b"}}]}],BuildingStyle:[{$:{mainkey:"30001",subkey:"2"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"3"},StyleItem:[{$:{level:"15,16,17,18,19,20", desc:"99,0xffe6e6e6,0xff858585,0xffcfcfcf,0xffb8b8b8,255"}}]},{$:{mainkey:"30001",subkey:"4"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd6e9 ,0xff6f7c87,0xffacc0d1,0xff99abba,255"}}]},{$:{mainkey:"30001",subkey:"5"},StyleItem:[{$:{level:"17,18,19,20",desc:"99,0xffcce3e8 ,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"6"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffcce3e8,0xff778487,0xffb7ccd0,0xffa3b6ba,255"}}]},{$:{mainkey:"30001",subkey:"7"},StyleItem:[{$:{level:"15,16,17,18,19,20", desc:"99,0xffe5dae8,0xff857f87,0xffcec4d0,0xffb7aeba,255"}}]},{$:{mainkey:"30001",subkey:"8"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfffaeccd,0xff948c79,0xffe1d4b8,0xffc8bda4,255"}}]},{$:{mainkey:"30001",subkey:"9"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff90bae8,0xff546d87,0xff81a7d0,0xff7395ba,255"}}]},{$:{mainkey:"30001",subkey:"10"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff0e3df,0xff8f8d8c,0xffd8ccc8,0xffc0b6b2,255"}}]},{$:{mainkey:"30001",subkey:"11"}, StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffbfd3e9,0xff6f7b87,0xffacbdd1,0xff99a9ba,255"}}]},{$:{mainkey:"30001",subkey:"12"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdae2f4,0xff7f848f,0xffc4cbdb,0xffaeb5c3,255"}}]},{$:{mainkey:"30001",subkey:"13"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xff95e3f5,0xff598791,0xff86ccdc,0xff77b6c4,255"}}]},{$:{mainkey:"30001",subkey:"14"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffc9edf5,0xff778d91,0xffb5d5dc,0xffa1bec4,255"}}]}, {$:{mainkey:"30001",subkey:"15"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff4c4ba,0xff8f726d,0xffdbb0a7,0xffc39d95,255"}}]},{$:{mainkey:"30001",subkey:"16"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xffdbe8b3,0xff7f8768,0xffc5d0a1,0xffafba8f,255"}}]},{$:{mainkey:"30001",subkey:"17"},StyleItem:[{$:{level:"15,16,17,18,19,20",desc:"99,0xfff5cedc,0xff917a82,0xffdcb9c6,0xffc4a5b0,255"}}]}]};f.xz=new b;c=null})();(function(){function a(a){function c(a,b,c){a=a.subarray(b,c);b=0;c="";var d=0;for(b=d=0;b<a.length;)d=a[b],0===d>>>7?(d=String.fromCharCode(a[b]),"0"!==d.charCodeAt(0).toString(16)&&(c+=d),b+=1):252===(d&252)?(d=(a[b]&3)<<30,d|=(a[b+1]&63)<<24,d|=(a[b+2]&63)<<18,d|=(a[b+3]&63)<<12,d|=(a[b+4]&63)<<6,d|=a[b+5]&63,c+=String.fromCharCode(d),b+=6):248===(d&248)?(d=(a[b]&7)<<24,d|=(a[b+1]&63)<<18,d|=(a[b+2]&63)<<12,d|=(a[b+3]&63)<<6,d|=a[b+4]&63,c+=String.fromCharCode(d),b+=5):240===(d&240)?(d=(a[b]&15)<< 18,d|=(a[b+1]&63)<<12,d|=(a[b+2]&63)<<6,d|=a[b+3]&63,c+=String.fromCharCode(d),b+=4):224===(d&224)?(d=(a[b]&31)<<12,d|=(a[b+1]&63)<<6,d|=a[b+2]&63,c+=String.fromCharCode(d),b+=3):192===(d&192)?(d=(a[b]&63)<<6,d|=a[b+1]&63,c+=String.fromCharCode(d),b+=2):(d=String.fromCharCode(a[b]),"0"!==d.charCodeAt(0).toString(16)&&(c+=d),b+=1);return c.trim()}function d(a,b){a=a.toString(2);b=b.toString(2);a=Array(32-a.length+1).join("0")+a;b=Array(32-b.length+1).join("0")+b;var c=k;c.lastIndex=0;if(c=(b+a).toString().match(c)){var d= 0;-1===c[0].indexOf(".")&&(d=parseInt(c,2));return d=d.toString(36).toUpperCase()}return"error"}function e(a){for(var b,e,g,k,r,s={},u={},v=new Uint8Array(a),x=new DataView(a),t=0,t=t+4,t=t+4,y=x.getInt32(t,!0),t=t+4,t=t+4,A=x.getInt32(t,!0),t=t+(4+A),t=t+4,z=x.getUint32(t,!0).toString(2),N=x.getUint32(t+4,!0).toString(2),I=d(z,N),t=t+8,C=c(v,t,t+64),t=t+64,H=c(v,t,t+64),t=t+64,F=x.getInt8(t,!0),t=t+1,B=c(v,t,t+8),t=t+8,D=x.getInt16(t,!0),E=x.getInt16(t+2,!0),t=t+4,G=x.getFloat32(t,!0),K=x.getFloat32(t+ 4,!0),t=t+8,J=x.getFloat32(t,!0),O=x.getFloat32(t+4,!0),t=t+8,M=x.getFloat32(t,!0),T=x.getFloat32(t+4,!0),t=t+8,U=x.getInt32(t,!0),t=t+4,Y=x.getInt32(t,!0),t=t+4,X=x.getInt32(t,!0),t=t+4,ca=[],Z=0;Z<U;Z++)ca.push(x.getInt32(t,!0)),t+=4;for(var P=[],Z=0;Z<X;Z++)P.push(x.getInt32(t,!0)),t+=4;for(var L=[],Z=0;Z<U;Z++){var W=c(v,t,t+48);L.push(W);t+=48}for(var Q=[],Z=0;Z<U;Z++){var V=c(v,t,t+8);Q.push(V);t+=8}for(var R=[],Z=0;Z<Y;Z++){var S=x.getInt32(t,!0)*h+K,$=x.getInt32(t+4,!0)*h+G;R.push([S,$]); t+=8}b={type:"Feature",geometry:{type:"Polygon",coordinates:[R]},properties:{pid:I,name_cn:C,name_en:H,default_floor:F,buildingtype:B,building_poi_style:[D,E],centerPoint:[K,G],left_bottom_Point:[J,O],width:M,height:T,numberofFloor:U,numberofGeoPoints:Y,park_floor_count:X,floor_indexs:ca,park_floors:P,floor_names:L,floor_nonas:Q}};for(var pa=0;pa<y;pa++){var ea=c(v,t,t+8),t=t+8,fa=x.getInt8(t,!0),t=t+1;u[fa]={floor:{},shops:[],pubs:[],cons:[]};for(var ka=x.getInt16(t,!0),la=x.getInt16(t+2,!0),t=t+ 4,ta=x.getInt16(t,!0),ed=x.getInt16(t+2,!0),t=t+4,fd=x.getInt16(t,!0),gd=x.getInt16(t+2,!0),t=t+4,fc=x.getInt32(t,!0),t=t+4,gc=x.getInt32(t,!0),t=t+4,hc=x.getInt32(t,!0),t=t+4,wb=x.getInt32(t,!0),t=t+4,xb=[],Ka=0;Ka<wb;Ka++){for(var hd=x.getInt32(t,!0),t=t+4,ic=[],ia=0;ia<hd;ia++)S=x.getInt32(t,!0)*h+K,$=x.getInt32(t+4,!0)*h+G,ic.push([S,$]),t+=8;xb.push(ic)}var jc="Polygon",kc=xb[0];1<wb&&(jc="MultiPolygon",kc=xb);e={type:"Feature",geometry:{type:jc,coordinates:[kc]},properties:{namecode:ea,index:fa, floor_region_type:[ka,la],unhighlighted_floor_line_style:[ta,ed],highlighted_floor_line_style:[fd,gd],numberofShopCount:fc,numberofPubCount:gc,numberofConCount:hc,floor_area_count:wb}};u[fa].floor=e;for(var lc=[],ua=0,ua=0;ua<fc;ua++){for(var id=c(v,t,t+128),t=t+128,jd=x.getUint32(t,!0).toString(2),kd=x.getUint32(t+4,!0).toString(2),ld=d(jd,kd),t=t+8,md=c(v,t,t+24),t=t+24,nd=c(v,t,t+12),t=t+12,od=x.getInt32(t,!0),t=t+4,pd=x.getFloat32(t,!0),t=t+4,qd=x.getInt8(t,!0),t=t+1,rd=x.getInt16(t,!0),sd=x.getInt16(t+ 2,!0),t=t+4,td=x.getInt16(t,!0),ud=x.getInt16(t+2,!0),t=t+4,vd=x.getInt32(t,!0)*h+K,wd=x.getInt32(t+4,!0)*h+G,t=t+8,mc=x.getInt32(t,!0),t=t+4,nc=[],Ka=0;Ka<mc;Ka++)S=x.getInt32(t,!0)*h+K,$=x.getInt32(t+4,!0)*h+G,nc.push([S,$]),t+=8;g={type:"Feature",geometry:{type:"Polygon",coordinates:[nc]},properties:{name:id,pid:ld,cpid:md,logo:nd,area:od,rank:pd,height:qd,poitype:[rd,sd],regiontype:[td,ud],font_anthor_point:[vd,wd],shop_point_number:mc}};lc.push(g)}u[fa].ZD=lc;for(var oc=[],ua=ua=0;ua<gc;ua++){var xd= c(v,t,t+24),t=t+24,yd=x.getUint32(t,!0).toString(2),zd=x.getUint32(t+4,!0).toString(2),Ad=d(yd,zd),t=t+8,Bd=c(v,t,t+48),t=t+48,Cd=x.getFloat32(t,!0),t=t+4,Dd=x.getInt16(t,!0),Ed=x.getInt16(t+2,!0),t=t+4,S=x.getInt32(t,!0)*h+K,$=x.getInt32(t+4,!0)*h+G,t=t+8;r={type:"Feature",geometry:{type:"Point",coordinates:[S,$]},properties:{cpid:xd,pid:Ad,name:Bd,rank:Cd,poitype:[Dd,Ed]}};oc.push(r)}u[fa].ED=oc;for(var pc=[],ua=0;ua<hc;ua++){var Fd=c(v,t,t+24),t=t+24,Gd=x.getUint32(t,!0).toString(2),Hd=x.getUint32(t+ 4,!0).toString(2),Id=d(Gd,Hd),t=t+8,Jd=c(v,t,t+48),t=t+48,Kd=x.getFloat32(t,!0),t=t+4,Ld=x.getInt16(t,!0),Md=x.getInt16(t+2,!0),t=t+4,S=x.getInt32(t,!0)*h+K,$=x.getInt32(t+4,!0)*h+G,t=t+8;k={type:"Feature",geometry:{type:"Point",coordinates:[S,$]},properties:{cpid:Fd,pid:Id,name:Jd,rank:Kd,poitype:[Ld,Md]}};pc.push(k)}u[fa].gC=pc}for(var t=t+4,Nd=x.getInt32(t,!0),t=t+(4+Nd),Od=x.getInt32(t,!0),t=t+4,qc=[],Z=0;Z<Od;Z++)S=x.getInt32(t,!0)*h+K,$=x.getInt32(t+4,!0)*h+G,qc.push([S,$]),t+=8;b.properties.outside_outline= qc;var La={},ja;for(ja in u)if(u.hasOwnProperty(ja)){La.floor=u[ja].floor;for(ia=0;ia<u[ja].ZD.length;ia++){var Pd=x.getInt16(t,!0),t=t+2,Qd=x.getInt16(t,!0),t=t+2;u[ja].ZD[ia].properties.zoom_min=Pd;u[ja].ZD[ia].properties.zoom_max=Qd}La.shops=u[ja].ZD;for(ia=0;ia<u[ja].ED.length;ia++){var Rd=x.getInt16(t,!0),t=t+2,Sd=x.getInt16(t,!0),t=t+2;u[ja].ED[ia].properties.zoom_min=Rd;u[ja].ED[ia].properties.zoom_max=Sd}La.pubs=u[ja].ED;for(ia=0;ia<u[ja].gC.length;ia++){var Td=x.getInt16(t,!0),t=t+2,Ud=x.getInt16(t, !0),t=t+2;u[ja].gC[ia].properties.zoom_min=Td;u[ja].gC[ia].properties.zoom_max=Ud}La.cons=u[ja].gC;s.floor=La}var t=t+4,Vd=x.getInt32(t,!0),t=t+(4+Vd),Wd=x.getInt8(t,!0),t=t+1;b.properties.vka=Wd;s.building=b;return s}var g=g||{};g.gm=function(){this.io=0};g.gm.prototype.create=function(a){this.ys&&this.io===a||(this.ys=[]);this.io=a;this.pB=this.mh=0};g.gm.prototype.flush=function(){var a=this.mh-this.pB;if(0!==a){for(;a--;)this.co.Sia(this.ys[this.pB++]);this.mh>=this.io&&(this.mh=0);this.pB=this.mh}}; g.gm.prototype.KD=function(){this.flush();this.co=null};g.gm.prototype.mM=function(a){this.KD();this.co=a};g.gm.prototype.Xf=function(a){a||(this.mh=this.pB=0)};g.gm.prototype.caa=function(a,b){var c=this.mh-a-1;for(0>c&&(c+=this.io);b--;)c>=this.io&&(c=0),this.ys[this.mh++]=this.ys[c++],this.mh>=this.io&&this.flush()};g.gm.prototype.Cfa=function(a){this.ys[this.mh++]=a;this.mh>=this.io&&this.flush()};g.gm.prototype.RU=function(a){a=this.mh-a-1;0>a&&(a+=this.io);return this.ys[a]};g.ns=function(){}; g.ns.prototype.mM=function(a){this.co=a};g.ns.prototype.KD=function(){this.co=null};g.ns.prototype.Xf=function(){var a=5;this.Oh=0;for(this.ig=-1;a--;)this.Oh=this.Oh<<8|this.co.wg()};g.ns.prototype.saa=function(a){for(var b=0,c;a--;)this.ig>>>=1,c=this.Oh-this.ig>>>31,this.Oh-=this.ig&c-1,b=b<<1|1-c,0===(this.ig&4278190080)&&(this.Oh=this.Oh<<8|this.co.wg(),this.ig<<=8);return b};g.ns.prototype.Wh=function(a,b){var c=a[b],d=(this.ig>>>11)*c;if((this.Oh^2147483648)<(d^2147483648))return this.ig=d, a[b]+=2048-c>>>5,0===(this.ig&4278190080)&&(this.Oh=this.Oh<<8|this.co.wg(),this.ig<<=8),0;this.ig-=d;this.Oh-=d;a[b]-=c>>>5;0===(this.ig&4278190080)&&(this.Oh=this.Oh<<8|this.co.wg(),this.ig<<=8);return 1};g.Jl=function(a,b){for(;b--;)a[b]=1024};g.fk=function(a){this.YG=[];this.PA=a};g.fk.prototype.Xf=function(){g.Jl(this.YG,1<<this.PA)};g.fk.prototype.Bj=function(a){for(var b=1,c=this.PA;c--;)b=b<<1|a.Wh(this.YG,b);return b-(1<<this.PA)};g.fk.prototype.sga=function(a){for(var b=1,c=0,d=0,e;d<this.PA;++d)e= a.Wh(this.YG,b),b=b<<1|e,c|=e<<d;return c};g.tga=function(a,b,c,d){for(var e=1,g=0,h=0,k;h<d;++h)k=c.Wh(a,b+e),e=e<<1|k,g|=k<<h;return g};g.sv=function(){this.FF=[];this.SG=[];this.XG=[];this.aQ=new g.fk(8);this.uw=0};g.sv.prototype.create=function(a){for(;this.uw<a;++this.uw)this.SG[this.uw]=new g.fk(3),this.XG[this.uw]=new g.fk(3)};g.sv.prototype.Xf=function(){var a=this.uw;for(g.Jl(this.FF,2);a--;)this.SG[a].Xf(),this.XG[a].Xf();this.aQ.Xf()};g.sv.prototype.Bj=function(a,b){return 0===a.Wh(this.FF, 0)?this.SG[b].Bj(a):0===a.Wh(this.FF,1)?8+this.XG[b].Bj(a):16+this.aQ.Bj(a)};g.rz=function(){this.fA=[]};g.rz.prototype.Xf=function(){g.Jl(this.fA,768)};g.rz.prototype.uaa=function(a){var b=1;do b=b<<1|a.Wh(this.fA,b);while(256>b);return b&255};g.rz.prototype.vaa=function(a,b){var c=1,d,e;do if(d=b>>7&1,b<<=1,e=a.Wh(this.fA,(1+d<<8)+c),c=c<<1|e,d!==e){for(;256>c;)c=c<<1|a.Wh(this.fA,c);break}while(256>c);return c&255};g.zz=function(){};g.zz.prototype.create=function(a,b){var c;if(!this.Xz||this.vw!== b||this.eH!==a)for(this.eH=a,this.J7=(1<<a)-1,this.vw=b,this.Xz=[],c=1<<this.vw+this.eH;c--;)this.Xz[c]=new g.rz};g.zz.prototype.Xf=function(){for(var a=1<<this.vw+this.eH;a--;)this.Xz[a].Xf()};g.zz.prototype.Kba=function(a,b){return this.Xz[((a&this.J7)<<this.vw)+((b&255)>>>8-this.vw)]};g.es=function(){this.ym=new g.gm;this.jg=new g.ns;this.uQ=[];this.zQ=[];this.AQ=[];this.BQ=[];this.CQ=[];this.yQ=[];this.at=[];this.ZR=[];this.YR=new g.fk(4);this.IG=new g.sv;this.HH=new g.sv;this.MG=new g.zz;this.XF= this.WF=-1;this.at[0]=new g.fk(6);this.at[1]=new g.fk(6);this.at[2]=new g.fk(6);this.at[3]=new g.fk(6)};g.es.prototype.Nga=function(a){if(0>a)return!1;this.WF!==a&&(this.WF=a,this.XF=Math.max(this.WF,1),this.ym.create(Math.max(this.XF,4096)));return!0};g.es.prototype.Sga=function(a,b,c){var d=1<<c;if(8<a||4<b||4<c)return!1;this.MG.create(b,a);this.IG.create(d);this.HH.create(d);this.K7=d-1;return!0};g.es.prototype.Xf=function(){var a=4;this.ym.Xf(!1);g.Jl(this.uQ,192);g.Jl(this.yQ,192);g.Jl(this.zQ, 12);g.Jl(this.AQ,12);g.Jl(this.BQ,12);g.Jl(this.CQ,12);g.Jl(this.ZR,114);for(this.MG.Xf();a--;)this.at[a].Xf();this.IG.Xf();this.HH.Xf();this.YR.Xf();this.jg.Xf()};g.es.prototype.Bj=function(a,b,c){var d=0,e=0,h=0,k=0,u=0,v=0,x=0;this.jg.mM(a);this.ym.mM(b);for(this.Xf();0>c||v<c;)if(a=v&this.K7,0===this.jg.Wh(this.uQ,(d<<4)+a))x=this.MG.Kba(v++,x),x=7<=d?x.vaa(this.jg,this.ym.RU(e)):x.uaa(this.jg),this.ym.Cfa(x),d=4>d?0:d-(10>d?3:6);else{if(1===this.jg.Wh(this.zQ,d))x=0,0===this.jg.Wh(this.AQ,d)? 0===this.jg.Wh(this.yQ,(d<<4)+a)&&(d=7>d?9:11,x=1):(0===this.jg.Wh(this.BQ,d)?b=h:(0===this.jg.Wh(this.CQ,d)?b=k:(b=u,u=k),k=h),h=e,e=b),0===x&&(x=2+this.HH.Bj(this.jg,a),d=7>d?8:11);else if(u=k,k=h,h=e,x=2+this.IG.Bj(this.jg,a),d=7>d?7:10,a=this.at[5>=x?x-2:3].Bj(this.jg),4<=a)if(b=(a>>1)-1,e=(2|a&1)<<b,14>a)e+=g.tga(this.ZR,e-a-1,this.jg,b);else{if(e+=this.jg.saa(b-4)<<4,e+=this.YR.sga(this.jg),0>e){if(-1===e)break;return!1}}else e=a;if(e>=v||e>=this.XF)return!1;this.ym.caa(e,x);v+=x;x=this.ym.RU(0)}this.ym.flush(); this.ym.KD();this.jg.KD();return!0};g.es.prototype.Mga=function(a){var b,c;if(5>a.size)return!1;b=a.wg();c=b%9;b=~~(b/9);if(!this.Sga(c,b%5,~~(b/5)))return!1;b=a.wg();b|=a.wg()<<8;b|=a.wg()<<16;b+=16777216*a.wg();return this.Nga(b)};g.waa=function(a,b){var c=new g.es,d;if(!c.Mga(a))throw"Incorrect stream properties";d=a.wg();d|=a.wg()<<8;d|=a.wg()<<16;d+=16777216*a.wg();a.wg();a.wg();a.wg();a.wg();if(!c.Bj(a,b,d))throw"Error in data stream";};var h=1E-9,k=RegExp("^[+\\\\-]?[0-1]*[.]?[0-1]*$","gi"); a.getUnifyJson=function(a){var b=[];if(!(a instanceof ArrayBuffer)){var d={status:3,building:{},floor:{},id:""};b.push(d);return b}new Uint8Array(a);a=new DataView(a);var h;h=4;var k=a.getInt16(h,!1);for(h+=2;0<k;){h+=4;var r=a.getUint8(h,!1);h+=1;for(var s=new ArrayBuffer(r),s=new Uint8Array(s),u=0;u<r;u++)s[u]=a.getUint8(h,!1),h+=1;r=c(s,0,r);h+=2;s=a.getInt8(h,!1);h+=1;0!==s&&(d={},d.status=s,d.building={},d.floor={},d.id=r,b.push(d));var v=a.getInt32(h,!1);h+=4;u=a.getInt32(h,!0);h+=4;v-=u;if(0!== u){for(var d=u%8,x=new ArrayBuffer(8*Math.ceil(u/8)),t=new Int32Array(x),y=0;8<=u;){var A=a.getInt32(h,!0),z=a.getInt32(h+4,!0),A=A^2078870821,z=z^292664;t[y]=A;t[y+1]=z;y+=2;h+=8;u-=8}0!==u&&(A=a.getInt32(h,!0),z=a.getInt32(h+4,!0),A^=2078870821,z^=292664,t[y]=A,t[y+1]=z,h+=u);y=new Uint8Array(x);z=y.length;x=z-8+d;t=new Uint8Array(x);for(u=0;u<x;u++)t[u]=y[u];for(u=0;u<d;u++)t[x-d+u]=y[z-1-u];d={data:[],offset:0,Sia:function(a){this.data[this.offset++]=a}};g.waa({data:t,offset:0,wg:function(){return this.data[this.offset++]}}, d);d=d.data;x=d.length;t=new ArrayBuffer(x);y=new Int8Array(t);for(u=0;u<x;u++)y[u]=d[u];d=e(t);d.status=s;d.id=r;b.push(d)}h+=v;k-=1}return b}}f.EN={D7:a};a(f.EN)})();(function(){var a=f.EN,b=new f.ts(function(b){var d;(d=b?b.getUnifyJson:a.getUnifyJson)||console.error("getUnifyJson not found!!");return{pca:function(a,b){setTimeout(function(){try{var c=d(a);b(null,c)}catch(k){b(k.message||k.toString())}},0)}}},{hostWorker:f.MC,clientId:"indoor",lazy:!0,batchSend:!1,libPolyfills:[a.D7]});window.xma=b;f.FN={gx:function(){return b.gx()},P9:function(a){b.$w([a]);return b.pca.apply(b,arguments)}}})();f.w_=f.ba.extend({B:function(a){this.dc(a.map)},dc:function(a){this.map=a},GD:function(a){return this.Wea(a)},Wea:function(a){a=this.hfa(a);var b=[],c;if(a instanceof f.Eg)b=[a];else if(a instanceof f.pa.Xd)c=new f.Eg,c.hM(a),b=[c];else if(this.isArray(a))for(var d,e,g=0,h=a.length;g<h;g+=1)if(d=a[g],e=e||d instanceof f.pa.Xd)c=new f.Eg({zIndex:1,map:this.map,Y:d,style:null}),c.name=d.Sh+"-"+f.a.Lb(c),b[g]=c;else{b=a;break}return b},hfa:function(a){if("FeatureCollection"===a.type){var b=a.features, c=b.length,d;a=Array(c);for(d=0;d<c;d+=1)a[d]=this.BL(b[d])}else a="Feature"===a.type?this.BL(a):"GeometryCollection"===a.type?this.wma(a):this.BL({type:"Feature",Y:a}).Y;return a},BL:function(a){var b=a.geometry,c=null,d=new f.Eg({zIndex:1,map:this.map});a.id&&(d.id=a.id);if(b){var e=b.type;switch(e){case "Point":c=this.dfa(b);d.hw=!0;d.set("radius",2,!0);d.set("center",c.Ig,!0);d.set("strokeWeight",0,!0);d.X("resolution",this.map);break;case "LineString":c=this.afa(b);break;case "Polygon":c=this.efa(b); break;case "MultiPoint":c=this.yma(b);break;case "MultiLineString":c=this.bfa(b);break;case "MultiPolygon":c=this.cfa(b);break;default:throw Error("Bad geometry type: "+e);}c&&(c.Sh=e.toLowerCase(),d.name=c.Sh+"-"+f.a.Lb(d));d.wc=a.properties;d.hM(c)}return d},lE:function(a){a[0][0]||console.log(a);var b=a.length,c,d=[];c=this.map.Jb(new f.V(a[0][0],a[0][1]));for(var e=c.x,g=c.y,h=c.x,k=c.y,l=0;l<b;l+=1)c=this.map.Jb(new f.V(a[l][0],a[l][1])),d[l]=[c.x,c.y],d[l][0]<e&&(e=d[l][0]),d[l][0]>h&&(h=d[l][0]), d[l][1]<g&&(g=d[l][1]),d[l][1]>k&&(k=d[l][1]);d.hf=[e,g,h,k];return d},efa:function(a){var b=[];a=a.coordinates;for(var c=0;c<a.length;c+=1)b[c]=this.lE(a[c]);return new f.pa.bc(b)},dfa:function(a){a=a.coordinates;a=new f.V(a[0],a[1]);var b=this.map.Jb(a),b=new f.pa.Qf([b.x,b.y]);b.Ig=a;return b},cfa:function(a){a=a.coordinates;for(var b=a.length,c=[],d=0;d<b;d+=1){c[d]=[];for(var e=0;e<a[d].length;e+=1)c[d][e]=this.lE(a[d][e])}return new f.pa.ks(c)},afa:function(a){a=this.lE(a.coordinates);return new f.pa.Kn(a)}, bfa:function(a){for(var b=a.coordinates.length,c=[],d=0;d<b;d+=1)c[d]=this.lE(a.coordinates[d]);return new f.pa.vv(c)},isArray:function(a){return f.a.isArray(a)}});(function(){var a={cons:{name:"",rank:0.20000000298023224,zoom_max:20,zoom_min:18},pubs:{name:"",rank:0.5,zoom_max:20,zoom_min:18},shops:{name:"",pid:"0",logo:"",area:1,rank:0.10000000149011612,height:0,shop_point_number:5,zoom_max:20,zoom_min:18}},b;for(b in a)a.hasOwnProperty(b)&&(a[b].jj=b);var c={poitype:{},regiontype:{}},d=f.js.gL;f.x_={U$:function(b,g,h){g={Nn:g,kA:h};for(var k in b)if(b.hasOwnProperty(k)){h=b[k];var l=f.extend(d(g),a[k]);f.a.isArray(h)||(h=[h]);for(var m=0,n=h.length;m<n;m++){var p= h[m],q=h[m].properties,r=d(l),s=void 0;for(s in q)q.hasOwnProperty(s)&&q[s]!==r[s]&&(r[s]=q[s]);q=void 0;for(q in c)c.hasOwnProperty(q)&&r[q]&&(s=r[q].join("-"),c[q][s]||(c[q][s]=[].concat(r[q])),r[q]=c[q][s]);p.properties=r}}return b}}})();f.wz=f.ba.extend({ga:[f.ka],Rg:{loaded:20,be:10,empty:0,T$:-10,pga:-20},o$:{pubs:"public",cons:"connection",shops:"shop"},yl:-9999,B:function(a){this.na=a;this.Bq=new f.z_({size:f.l.size,RY:0.7,CU:2,QY:300});this.Bq.g("drop",function(){});this.v2=f.FN;this.zP=new f.w_({map:a});this.mg=f.xz},dc:function(a){this.na=a;this.zP.dc(a)},forEach:function(){return this.Bq.forEach.apply(this.Bq,arguments)},Bka:function(){this.Bq.clear()},Cda:function(a){for(var b=0,c=a.length;b<c;b++)this.PK(a[b])},Hk:function(a, b){b=b||a.tc||a.yl;var c=this.Um(a,b,!0),d=null;c?d=c.H:a.JT&&(d=a.JT.H);return d?new f.Qe(d):null},xK:function(a){return a.mo&&a.mo>=this.Rg.loaded},$V:function(a,b){return this.GP(a,b)>=this.Rg.loaded},D$:function(a,b,c){var d=b||a.tc;if(d&&d!==this.yl){d=""+d;b=a.ZB;for(var e=[a.ta,a.Kq,a.Lt,a.Nq],g=[a.zC,a.DJ,a.cu],h=[],k=0,l=b.length;k<l;k++){var m=b[k],n=a.Lt[m];n<this.Rg.loaded&&n>=this.Rg.empty||h.push(""+m)}this.eP(e,function(a){a=""+a;return 0<=h.indexOf(""+a)&&a!==d});this.eP(g,function(a){var b= a.split("_"),b=b[0];return 0<=h.indexOf(b)&&0!==a.indexOf(d+"_"+(c?c:""))})}},eP:function(a,b){for(var c=0,d=a.length;c<d;c++)this.y2(a[c],b)},y2:function(a,b){var c=[],d;for(d in a)a.hasOwnProperty(d)&&c.push(d);d=0;for(var e=c.length;d<e;d++)b.call(this,c[d])&&delete a[c[d]]},GP:function(a,b){return a.Lt[b||a.tc||a.yl]||this.Rg.empty},yK:function(a,b){return this.xK(a)&&this.$V(a,b)},d2:function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];f.a.isArray(e)&&(e=new f.G(e[0],e[1]));b.push(this.na.de(e))}return b}, k3:function(a){a=a.Y;if(!a||!a.qV)return null;a=a.Mf;for(var b=[],c=0,d=a.length;c<d;c++)b.push(this.d2(a[c].Na));return b},QU:function(a){a=this.ug(a);if(!a)return null;a=a.Dm;if(!a)return null;a=a.wc;return a.name||a.name_cn},zba:function(a){return(a=this.ug(a))?this.GJ(a):null},GJ:function(a,b){if(!a)return null;if(!a.Pz){var c=a.Dm;if(!c)return null;var c=c.wc,d=f.js.gL(this.a3(a));a.Pz=f.extend(d,{id:c.pid,name:c.name||c.name_cn,lnglat:a.MK,floor_details:{floor_indexs:c.floor_indexs,floor_nonas:c.floor_nonas, floor_names:c.floor_names}})}f.extend(a.Pz,{floor:a.tc});b&&b.floorPath&&(c=(c=this.Um(a,a.tc,!0))&&c.Gk?this.k3(c.Gk):null,f.extend(a.Pz,{floorPath:c}));return a.Pz},kca:function(a,b,c){a=this.Um(a,b,!0);if(!a)return null;a=a.ta;b=null;for(var d=0,e=a.length;d<e;d++)if(a[d].wc.cpid===c){b=a[d];break}return this.BI(b)},a3:function(a){var b=this;return{getAllShops:function(c){var d=b.Um(a,c||a.tc,!0);c=[];if(!d)return c;for(var d=d.ta,e=0,g=d.length;e<g;e++)d[e].wc.cpid&&c.push(b.BI(d[e]));return c}}}, D3:function(a){var b=this;return{setCustomStyle:function(c,d){d=f.extend({autoRefresh:!0},d);a.QF=c?b.mg.FT(c):null;d.autoRefresh&&b.r("featureStyleUpdate",{M:a});return this},getCustomStyle:function(){return b.mg.yC(a.QF)},setCustomLabelStyle:function(c,d){d=f.extend({autoRefresh:!0},d);a.PF=c?b.mg.FT(c):null;d.autoRefresh&&b.r("featureLabelStyleUpdate",{M:a});return this},getCustomLabelStyle:function(){return b.mg.yC(a.PF)},setOptions:function(c,d){d=f.extend({autoRefresh:!0,replace:!0},d);a.Fs= d.replace?c:f.extend({},a.Fs,c);d.autoRefresh&&b.r("featureOptionsUpdate",{M:a});return this},disableIconRender:function(){this.setOptions({disableIconRender:!0},{replace:!1})},enableIconRender:function(){this.setOptions({disableIconRender:!1},{replace:!1})},disableLabelRender:function(){this.setOptions({disableLabelRender:!0},{replace:!1})},enableLabelRender:function(){this.setOptions({disableLabelRender:!1},{replace:!1})},getOptions:function(){return a.Fs}}},BI:function(a){if(!a)return null;if(!a.HS){var b= a.wc,c=b.font_anthor_point?new f.V(b.font_anthor_point[0],b.font_anthor_point[1]):null,d=b.Nn;c||(c=f.H.Zh(a.Y.Qc()),c=this.na.de(new f.G(c[0],c[1])));var e=f.js.gL(this.D3(a));a.HS=f.extend(e,{id:b.cpid,poiId:b.pid,building_id:d,name:b.name||b.name_cn,lnglat:c,category:this.o$[b.jj]})}return a.HS},Um:function(a,b,c){if(!this.yK(a))return null;b=b||a.tc;var d=null;a.ta?d=a.ta[b]:a.ta={};if(!d&&c){c=a.Nq[b];if(!c)return console.warn("Missing geojson of floor",b,a),null;d=a.ta[b]=this.q1(a,b,c);a.Nq[b]= -1}return d},wL:function(a){for(var b=[Infinity,Infinity,-Infinity,-Infinity],c=0,d=a.length;c<d;c++){var e=a[c].Y;e&&f.H.extend(b,e.Qc())}return{ta:a,H:b,Cd:[b[0],b[1]]}},q1:function(a,b,c){b=this.wL(this.CO(c));c=b.ta;"floor"===c[0].wc.jj&&(b.Gk=c[0],b.ta=c.slice(1));a.H?f.H.extend(a.H,b.H):a.H=b.H;return b},M2:function(a){var b=a.wc,c=1,d=a.name.split("-"),d=d[0];switch(d){case "point":if(b.poitype&&this.mg.bW(b.poitype)){a.y0=1;return}break;case "polygon":break;case "multipolygon":break;default:console.warn("Unknown geoType", d)}switch(b.jj){case "building":break;case "floor":c=2;break;case "shops":c=3;break;case "pubs":case "cons":c=3;break;default:console.warn("Unknown category",b.jj)}a.zIndex=c},CO:function(a){a=this.zP.GD(a);for(var b=0,c=a.length;b<c;b++)a[b].mk=b,this.M2(a[b]),a[b].y0&&(a.splice(b,1),b--,c--);a.sort(function(a,b){var c=a.zIndex-b.zIndex;if(0!==c)return c;c=(a.wc.rank||0)-(b.wc.rank||0);return 0!==c?c:a.mk-b.mk});return a},Q3:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(this.R3(a[c]));return b}, s1:function(a){var b=[],c=a.floor.floor;a.building.properties.jj="building";c.properties.jj="floor";b.push(c);a=a.floor;for(var c=["shops","pubs","cons"],d=0,e=c.length;d<e;d++)for(var g=a[c[d]],h=0,k=g.length;h<k;h++)b.push(g[h]);return{type:"FeatureCollection",features:b}},C3:function(a){switch(a){case 2:return Error("Building not found!");default:return Error("Server error")}},R3:function(a){var b=a.id,c=this.ug(b);if(!c)return console.warn("Can not find: ",b),{error:Error("Can not find: "+b), result:c};if(0!==a.status)return{error:this.C3(a.status),result:c};var d=a.floor.floor.properties.index;c.yl||(c.tc=c.yl=d);c.hY=null;a.floor=f.x_.U$(a.floor,b,d);c.Nq||(c.Nq={});if(!c.Dm&&a.building){b=a.building;b.properties.jj="building";var e=this.CO(b);c.JT=this.wL(e);c.Dm=e[0];c.ZB=b.properties.floor_indexs}a.floor&&(c.Lt[d]>=this.Rg.loaded?console.warn("Floor alreay load!",d,c):(c.Nq[d]=this.s1(a,c),c.Lt[d]=this.Rg.loaded));a=c.Dm;if(!a)return console.log("Missing building geojson",c.Nq),c.mo= this.Rg.T$,c;a=a.wc;c.MK||(c.MK=new f.V(a.centerPoint[0],a.centerPoint[1]));c.mo=this.Rg.loaded;return{error:null,result:c}},Q7:function(a,b){b&&(a.qk||(a.qk=[]),a.qk.push(b))},PK:function(a,b,c){c=c||{};"string"===typeof a&&(a={id:a});var d=this.ug(a);d?d!==a&&f.extend(d,a):(d=f.extend({mo:this.Rg.empty,Lt:{}},a),this.I8(d));var e=this.pA(d);if(this.yK(d,e))return b&&setTimeout(function(){b(null,d)},0),!1;e=parseInt(e,10);if(isNaN(e))b&&b(Error("Floor should be an integer!"));else if(d.ZB&&0>d.ZB.indexOf(e))b&& b(Error("Floor out of range, try these: "+d.ZB));else{var g=this;a=!1;this.Q7(d,function(a,d){e===g.yl&&(e=g.pA(d));a||g.yK(d,e)?b&&b(a,d):e===g.pA(d)?c.zga?b&&b(Error("Floor request failed!"),null):g.PK(d,b,f.extend({},c,{zga:!0})):b&&b(Error("Requested floor expired!"),null)});d.mo<this.Rg.be?(d.mo=this.Rg.be,a=!0):d.mo===this.Rg.be?a=!1:this.GP(d,e)<this.Rg.be&&(d.Lt[e]=this.Rg.be,a=!0);a&&this.R0([d])}},ug:function(a){if(0===a)return null;if(!a)return console.warn("Empty building!"),null;var b= a.id;b||"string"!==typeof a||(b=a);return this.Bq.get(b)},Pfa:function(a){this.Bq.Bn(a)},I8:function(a){return this.Bq.set(a.id,a)},pA:function(a){return a.hY||a.tc||a.yl||this.yl},R0:function(a){f.a.isArray(a)||(a=[a]);if(this.ft)for(var b=this.ft,c=0,d=a.length;c<d;c++){for(var e=a[c],g=!1,h=0,k=b.length;h<k;h++)e.id===b[h].id&&(g=!0,b[h]=e);g||b.push(e)}else this.ft=[],this.ft.push.apply(this.ft,a);if(!this.hS){var l=this;this.hS=setTimeout(function(){l.hS=null;l.T4(l.ft);l.ft.length=0},0)}},RF:function(a, b){a&&b&&(b.mo=this.Rg.pga,b.dH=f.a.Jj()+3E3);if(b&&b.qk){var c=b.qk;b.qk=null;for(var d=0,e=c.length;d<e;d++)c[d](a,b)}this.r(a?"loaded_error":"loaded",{error:a,data:b})},B3:function(a){var b=f.A.ud+"/v3/indoor/indoormaps?",c=[];c.push("poiid="+a.id);c.push("floor="+a.floor);c.push("version="+a.version);c.push("s=rsv3");c.push("key="+f.A.key);c.push.apply(c,["from=indoorH5Map","servicetype=unify","platform=JS","logversion=2.0","sdkversion="+f.A.lt,"appname="+f.A.jo]);return b+c.join("&")},G8:function(a){function b(b, c){b?e(b):f.a.isArray(c)?a.wha(d.Q3(c)):e(Error("Indoor parser not return an array"))}this.v2.gx();var c=this.B3(a),d=this,e=a.zU;setTimeout(function(){f.wz.Dga(c,b,a.zU)},0)},x8:function(a){if(a&&a.length){for(var b=[],c=[],d=[],e=[],g=this,h,k=function(a){console.warn&&console.warn("\\u5ba4\\u5185\\u6570\\u636e\\u52a0\\u8f7d\\u89e3\\u6790\\u5931\\u8d25",a);for(var b=0,c=d.length;b<c;b++)g.RF(a,d[b])},l=0,m=a.length;l<m;l++){h=a[l].data;if(h.dH)if(f.a.Jj()<h.dH){g.RF(Error("Holding errored request!"),h);continue}else h.dH= null;e.push(0);b.push(a[l].id);c.push(a[l].floor);d.push(h)}b.length&&this.G8({version:e.join(";"),id:b.join(";"),floor:c.join(";"),zU:k,wha:function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];g.RF(d.error,d.result)}}})}},T4:function(a){f.a.isArray(a)||(a=[a]);if(a.length){for(var b=[],c={},d=0,e=a.length;d<e;d++){var g=a[d];"string"===typeof g&&(g=this.ug(g));var g={data:g,id:g.id,floor:this.pA(g)},h=g.id+"_"+g.floor;c[h]?console.warn("Param duplicate",h):(c[h]=!0,b.push(g))}this.x8(b)}}}); f.extend(f.wz,{Dga:function(a,b,c){var d=this.v8;d||(this.v8=d={});d[a]||(d[a]={tt:[]});var e=d[a].tt;e.push({succ:b,err:c});if(!d[a].Ega){d[a].Ega=!0;var g=new XMLHttpRequest,h=function(b,c){for(var g=0,h=e.length;g<h;g++)e[g][b]&&e[g][b].apply(this,c);d[a]=null;delete d[a]},k=function(){h("err",arguments)},l=function(a){f.FN.P9(a,function(a,b){h("succ",[a,b])})};g.onreadystatechange=function(){4===g.readyState&&(200!==g.status?k(Error("Status code not 200: "+g.status+"_"+g.statusText)):l(this.response))}; g.onerror=k;g.open("GET",a,!0);g.responseType="arraybuffer";g.send()}}});f.fm=f.w.Gc.extend({B:function(a,b){this.eL=!0;f.fm.qc.B.apply(this,arguments);this.jw=!0;this.Bv=new f.D.Hg(new w.D.Hg,b);this.Bv.Oc.set("bubble",!0)},mla:function(){return this.Bv},IB:function(a){f.fm.qc.IB.apply(this,arguments);a.ao=this.Bv},vl:function(a){this.wa||(this.wa=!0,this.ia.r("complete"));return new f.fm.PN(this,a)}});f.fm.oN=w.w.Gc.extend({B:function(){f.fm.oN.qc.B.apply(this,arguments);this.jw=!0},og:function(a){return new f.fm(this,a)},bg:function(){}}); f.fm.PN=f.Q.oc.extend({B:function(){f.fm.PN.qc.B.apply(this,arguments)},fc:function(a){a=this.W=a.W;this.zoom=a.zoom;this.S=a.S},$h:function(){return[]}});f.HN=f.Q.canvas.Gc.extend({ga:[f.ka],B:function(){f.HN.qc.B.apply(this,arguments)},bga:function(a){var b={},c=[],d,e,g;d=0;for(e=a.length;d<e;d++){var h=a[d];g=h.name.split("-")[0];h.style&&(h.style.Ak?"polygon"!==g&&"multipolygon"!==g?console.warn("Not polygon"):(b[h.zIndex]||(b[h.zIndex]={zIndex:h.zIndex,aZ:{}},c.push(b[h.zIndex])),g=b[h.zIndex].aZ,g[h.style.Ak]||(g[h.style.Ak]=[]),g[h.style.Ak].push(h)):console.warn("Style missing uid",h))}c.sort(function(a,b){return a.zIndex-b.zIndex});d=0;for(e= c.length;d<e;d++){g=c[d].aZ;for(var k in g)g.hasOwnProperty(k)&&this.r8(g[k])}},G1:function(a,b){for(var c=null,d=0,e=b.length;d<e;d+=1){var g=this.$e(b[d]),g=[Math.round(g[0])+0.5,Math.round(g[1])+0.5];0<d?a.lineTo(g[0],g[1]):(c=g,a.moveTo(g[0],g[1]))}c&&a.lineTo(c[0],c[1])},F1:function(a,b){for(var c=0,d=b.length;c<d;c+=1)this.G1(a,b[c].Na)},E1:function(a,b){for(var c=0,d=b.length;c<d;c+=1)this.F1(a,b[c].Mf)},r8:function(a,b){b||(b=a[0].style);var c=this.wb,d=b.strokeColor,e=b.strokeWeight,g=b.strokeOpacity, h=b.fillColor,k=b.fillOpacity,l=b.strokeStyle,m=b.strokeDasharray,n,p;c.save();d&&(c.strokeStyle=d,e&&(c.lineWidth=e),c.lineCap="butt",c.lineJoin=b.lineJoin||"miter");h&&(c.fillStyle=h);c.beginPath();for(var e=0,q=a.length;e<q;e++){p=a[e].Y;if(p instanceof f.pa.bc||p.qV)p=[p];else if(p instanceof f.pa.ks||p.UU)p=p.We;else{console.warn("Unknown geometry",p);continue}this.E1(c,p)}c.closePath();h&&(k!==n&&(n=c.globalAlpha=k),c.fill());d&&(g!==n&&(c.globalAlpha=g),"dashed"===l&&c.setLineDash&&c.setLineDash(m), c.stroke());c.restore()},LD:function(a){return this.bga(a)}});f.y_=f.ba.extend({ga:[f.ka],B:function(a,b){this.na=a;this.pb=b;this.f4=f.a.bind(this.Ns,this);this.mg=f.xz;this.HY(1);this.via=!0;this.CY();this.EY();this.YF=!1},HY:function(a){this.Af=a;this.rl=Math.log(this.Af)/Math.log(2)},CY:function(a){this.g4=a||new f.G(0,0)},EY:function(a){this.EQ=a||new f.G(0,0)},Oga:function(a){this.YF=a},yla:function(){return this.Af},R4:function(a){return this.na.Jb(a)},Ns:function(){},gB:function(a){a.canvas=a.canvas||a.qa;this.mb&&this.mb.Qa===a.canvas||(this.mb=new f.HN(a.canvas, this.f4));!1!==a.Tf?f.j.am(this.mb.Qa,a.width,a.height,!0):a.width!==a.canvas.width?console.warn("width not match"):a.height!==a.canvas.height&&console.warn("height not match");this.mb.Cd=a.Cd;this.mb.S=a.S},HF:function(a,b,c,d){d=f.extend({split:!0,tM:!0,margin:{x:0,y:0}},d);c=c||a.tc;this.zfa(a,c,b,d);if(!a.Kq)return null;var e=a.Kq[c];if(!e)return null;var e=e.mN[b],g=this.pb.Um(a,c,!0);if(!g)return null;c=e.labels;var h=e.Lf;h<e.total&&(c=c.slice(0,e.Lf));if(!c||!c.length)return null;var k=d.H|| g.H,g=d.Cd||g.Cd,l=Math.pow(2,20-b),m=d.margin,n=Math.ceil((k[2]-k[0])/l)+2*m.x,k=Math.ceil((k[3]-k[1])/l)+2*m.y,g=[g[0]-m.x*l,g[1]-m.y*l];b={yr:new f.Kh,zoom:b,S:l,Cd:g,width:n,height:k};d.canvas&&(b.qa=d.canvas);b=this.RH(b,{split:d.split,Kt:d.split?50:0,xC:d.split?50:0});k=0;for(g=b.length;k<g;k++){var p;d.Do&&f.a.isArray(d.Do)&&d.Do[k]&&(b[k].qa=d.Do[k].qa,f.j.am(b[k].qa,b[k].width,b[k].height,!0));b[k].qa?(p=b[k].qa,!0===d.Tf&&f.j.am(p,b[k].width,b[k].height,!0)):this.ew||(p=this.aA(),f.j.am(p, b[k].width,b[k].height,!0),b[k].qa=p);l=p?p.getContext("2d"):null;this.o8(c,f.extend({},b[k],{Sx:!d.dL,canvas:p,je:l}));h<e.total?f.extend(b[k],{status:0,Lf:h,total:e.total}):(b[k].status=1,b[k].yr=null)}d.dL&&(a.Kq=null);return b},mP:function(a,b,c){c=f.extend({},c);var d=a.wc;return"label"===c.up&&(!(20===d.zoom_max&&20<b-this.rl)&&d.zoom_max&&b-this.rl>d.zoom_max||d.zoom_min&&b-this.rl<d.zoom_min)?!1:this.Py(a,b,c)?!0:!1},eG:function(a,b,c){if(a.filter)return a.filter(b,c);for(var d=[],e=0,g=a.length;e< g;e++)!1!==b.call(c,a[e],e)&&d.push(a[e]);return d},N2:function(a,b){if(!a)return a;var c=this.eG(a,function(a){return this.mP(a.M,b,{up:"label"})?(a=a.M.Zf)&&(a.fontSize||a.Xe)?!0:!1:!1},this);return c.length===a.length?a:c},nP:function(a,b){if(!a)return a;var c=this.eG(a,function(a){return 0>a.name.indexOf("polygon")||!this.mP(a,b,{up:"polygon"})||!a.style?!1:!0},this);return c.length===a.length?a:c},XO:function(a,b,c,d){d=f.extend({split:!0,margin:{x:10,y:10}},d);var e=d.H||a.H,g=d.Cd||a.Cd,h= Math.pow(2,20-c),k=d.margin,l=Math.ceil((e[2]-e[0])/h)+2*k.x,e=Math.ceil((e[3]-e[1])/h)+2*k.y,g=[g[0]-k.x*h,g[1]-k.y*h];c=this.RH({zoom:c,S:h,Cd:g,width:l,height:e},{split:d.split});g=0;for(h=c.length;g<h;g++)c[g].qa=d.canvas||this.aA(),this.gB(f.extend({},c[g],{canvas:c[g].qa,Tf:d.Tf})),this.mb.LD(b||a.ta);return c},i2:function(a,b,c){var d=this.pb.wL(a);return d?this.XO(d,a,b,c):null},ZO:function(a,b,c,d){c=c||a.tc;a=this.pb.Um(a,c,!0);return a&&a.Gk?(c=this.nP([a.Gk],b))&&c.length?this.XO(a,c, b,d):null:null},RH:function(a,b){b=f.extend({Kt:0,xC:0,maxWidth:b.split?f.l.Z?512:1536:9999999,maxHeight:b.split?f.l.Z?512:1536:9999999},b);for(var c=b.maxHeight,d=a.width,e=a.height,g=a.S,h=a.Cd,k=Math.ceil(d/b.maxWidth),l=Math.round(d/k),c=Math.ceil(e/c),m=Math.round(e/c),n=[],p=0;p<k;p++)for(var q=0;q<c;q++){var r=p*l,s=Math.min(d,(p+1)*l),u=q*m,v=Math.min(e,(q+1)*m),x=[h[0]+r*g,h[1]+u*g],t=[h[0]+s*g,h[1]+v*g];n.push(f.extend({},a,{width:s-r+2*b.Kt,height:v-u+2*b.xC,Cd:[x[0]-b.Kt*g,x[1]-b.xC*g], td:new f.Qe([x[0]-b.Kt*g,x[1]-b.xC*g,t[0]+b.Kt*g,t[1]+b.Kt*g])}))}return n},L2:function(a,b){return this.eG(a,function(a){a.VO||(a.VO=new f.Qe(a.Y.Qc()));return b.td.mf(a.VO)?!0:!1})},YO:function(a,b,c,d){c=c||a.tc;var e=this.pb.Um(a,c,!0);if(!e)return null;var g=this.nP(e.ta,b);if(!g||!g.length)return null;this.r("willRenderFloorPolygonFeatures",{zoom:b,floor:c,pka:a,ta:g});d=f.extend({split:!0,tM:!0,margin:{x:10,y:10}},d);c=d.H||e.H;var e=d.Cd||e.Cd,h=Math.pow(2,20-b),k=d.margin,l=Math.ceil((c[2]- c[0])/h)+2*k.x;c=Math.ceil((c[3]-c[1])/h)+2*k.y;e=[e[0]-k.x*h,e[1]-k.y*h];b={zoom:b,S:h,Cd:e,width:l,height:c};d.canvas&&(b.qa=d.canvas);b=this.RH(b,{split:d.split});c=0;for(e=b.length;c<e;c++)h=this.L2(g,b[c]),h.length&&(f.extend(b[c],{status:0,ta:h,Lf:0,total:h.length}),d.Do&&f.a.isArray(d.Do)&&d.Do[c]&&(b[c].qa=d.Do[c].qa,f.j.am(b[c].qa,b[c].width,b[c].height,!0)),d.tM||!b[c].qa?this.Y8(b[c],a,b[c].total+1):(this.gB(f.extend({},b[c],{Tf:d.Tf})),this.mb.LD(h)));return b},S2:function(a){a.xm&&(a= a.xm);var b=a.ta.slice(0,a.Lf);this.QO(a);a.qa=this.aA();this.gB({Tf:!0,canvas:a.qa,width:a.width,height:a.height,zoom:a.zoom,Cd:a.Cd,S:a.S});this.mb.LD(b);return a.qa},QO:function(a){a.Lf>=a.total&&(a.status=1,a.ta=null)},m3:function(){this.tP||(this.tP=f.a.bind(this.S2,this));return this.tP},Y8:function(a,b,c){c||(c=f.l.Z?300:1E3);b=a.Lf;c=Math.min(b+c,a.total);var d=a.ta;b>=c||!d?a.status=1:(a.Lf=c,a.qa?"function"!==typeof a.qa&&(this.gB(f.extend({},a,{Tf:!1})),this.mb.LD(d.slice(b,c)),this.QO(a)): a.qa=this.m3(),b=!0,a.Lf<a.total?(a.sm||(a.sm=0),a.Lf-a.sm<a.total/5&&(b=!1)):a.status=1,b&&!0!==a.XW&&a.sm!==a.Lf&&(a.sm=a.Lf,this.r("render",{type:"floor"})))},oA:function(a,b){return a+"_"+b},pV:function(a,b){if(!a)return null;if(a.zoom===b)return a;f.a.isArray(a)||(a=[a]);for(var c=[],d=0,e=a.length;d<e;d++)c.push(f.extend({},a[d],{xm:a[d],width:Math.round(a[d].width*Math.pow(2,b-a[d].zoom)),height:Math.round(a[d].height*Math.pow(2,b-a[d].zoom))}));return c},R2:function(a,b,c){if(!c)return null; a=a.tc;b=Math.round(b);var d=b-2,e,g;for(e=b;20>=e;e++)if(g=this.oA(a,e),c[g])return c[g];for(e=b;e>=d;e--)if(g=this.oA(a,e),c[g])return c[g];return null},aA:function(){this.sF||(this.sF=1);var a=document.createElement("canvas");a.id="amap_indoor_c_"+this.sF;this.sF++;return a},JF:function(a,b){var c=this.aA();this.kQ=c;c.width=Math.max(300,a);c.height=Math.max(300,b);c.eA={x:0,y:0,Jo:0};return c},l5:function(a,b,c){a=a.eA;a.x+=b;a.Jo=Math.max(a.Jo,c)},Q2:function(a,b){var c=this.kQ;c||(c=this.JF(a, b));for(var d=c.eA,d=[{x:d.x,y:d.y,Jo:Math.max(d.Jo,b)},{x:0,y:d.y+d.Jo,Jo:b}],e=0,g=d.length;e<g;e++){var h=d[e];if(h.x+a<c.width&&h.y+b<c.height)return f.extend(c.eA,h),c}return this.JF(a,b)},R1:function(a,b){var c=this.lQ;this.lQ||(c=this.lQ=(this.kQ||this.JF(100,12)).getContext("2d"));var d=this.AS(c,b);return[Math.ceil(c.measureText(a).width)+1,d.fontSize+3]},AS:function(a,b){var c=b.fontSize*this.Af,d=b.strokeColor,e=b.fillColor;a.lineWidth=2;a.font="400 "+c+\'px "Microsoft YaHei"\';a.textBaseline= "bottom";a.textAlign="start";a.strokeStyle=d;a.fillStyle=e;return{fontSize:c}},G4:function(a){var b=[a.width,a.height],c=a.style,d=a.text,e=[3,3],e=[b[0]+e[0],b[1]+e[1]],g=this.Q2(e[0],e[1]);if(!g)return console.error("No canvas got!"),null;var h=g.getContext("2d"),k=g.eA;this.AS(h,c);h.textBaseline="bottom";c.strokeColor&&h.strokeText(d,k.x,k.y+b[1],b[0]);c.fillColor&&h.fillText(d,k.x,k.y+b[1],b[0]);f.extend(a,{x:k.x,y:k.y,style:null,text:null});a.qa=g;this.l5(g,e[0],e[1]);return g},r3:function(){this.DQ|| (this.DQ=f.a.bind(this.G4,this));return this.DQ},k2:function(a,b){if(!b.fontSize)return{qa:null,width:0,height:0};var c=this.R1(a,b),c={style:b,text:a,width:c[0],height:c[1],sL:c[0],rL:c[1]};c.qa=this.r3();return c},j2:function(a,b){b=b||a.tc;var c=this.pb.Um(a,b,!0);if(!c)return null;var d=[],e=[];a.Dm&&(d.push(a.Dm),c.Gk&&(a.Dm.DF=f.H.Zh(c.Gk.Y.Qc())));c.Gk&&d.push(c.Gk);d.push.apply(d,c.ta);for(var c=0,g=d.length;c<g;c++){var h=d[c],k=h.wc,l=h.Y.Qc();if(!k.poitype||!this.mg.bW(k.poitype)){if(!h.DF&& k.font_anthor_point){var m=this.R4(k.font_anthor_point);h.DF=[m.x,m.y]}k.rank||k.building_poi_style&&(k.rank=10);e.push({coords:h.DF||f.H.Zh(l),By:k.rank||0,M:h,wc:h.wc})}}e.sort(function(a,b){var c=b.By-a.By;if(0!==c)return c;var c=a.M.Zf,d=b.M.Zf,e=0,g=0;c&&d&&(c.Xe&&(e=1),d.Xe&&(g=1));return g-e});return{mN:{},labels:e}},Z8:function(a,b,c,d){d||(d=f.l.Z?300:1E3);b=a.mN[c];var e=b.Lf;d=Math.min(e+d,b.total);var g=b.labels;if(e>=d||!g)b.status=1;else{for(;e<d;e++){var h=g[e].M;if(!g[e].oz)g[e].oz= h.Wja={};else if(g[e].oz[c])continue;this.Py(h,c,{up:"label"});var k=h.wc.name||h.wc.name_cn,l=h.Zf;if(l){k=this.k2.call(this,k,l);h=l.fu||[c];l.Xe&&(k.Xe=l.Xe);for(var l=0,m=h.length;l<m;l++)g[e].oz[parseInt(h[l],10)+this.rl]=k}else console.warn("No style",g[e])}b.Lf=d;c=!0;b.Lf<b.total?(b.sm||(b.sm=0),b.Lf-b.sm<b.total/5&&(c=!1)):b.status=1;c&&!0!==a.XW&&b.sm!==b.Lf&&(b.sm=b.Lf,this.r("render",{type:"label"}))}},x1:function(a,b){var c=a.mN,d=c[b];d||(d=this.N2(a.labels,b),d=c[b]={total:d.length, labels:d,status:0,Lf:0});d.Lf===d.total&&(d.status=1)},zfa:function(a,b,c){if(b=b||a.tc){a.Kq||(a.Kq={});var d=a.Kq;d[b]||(d[b]=this.j2(a,b));this.x1(d[b],c);this.Z8(f.extend({},d[b],{XW:!0}),a,c,999999999);return d[b]}},Xv:function(a,b,c,d){var e=a.tc;if(!e)return null;var g=Math.round(b)+this.rl,e=d.Qt?d.Qt.call(this,e,g):null,h=d.Vx,k=e&&h?h[e]:null;(!k||k.jF)&&c&&(k=d.qx.call(this,a,g,k?{Do:k}:null))&&(k.jF&&(k.jF=null),e&&(h[e]=k));return k?g===b?k:this.pV(k,b):d.FU?(a=this.R2(a,b,h),this.pV(a, b)):null},Yba:function(a,b,c){b=b.zoom;a.cu||(a.cu={});return this.Xv(a,b,c,{Vx:a.cu,Qt:this.oA,qx:function(a,b,c){return this.HF(a,b,a.tc,c)}})},QJ:function(){var a;this.Sn&&(a=this.Sn.GA);return a||0},Zba:function(a,b){this.d4();var c=Math.round(b.zoom)+this.rl;a.cu||(a.cu={});this.HF(a,c,a.tc);c=this.d8();if(0<this.QJ())return[];if(b.Aa){for(var d=[],e=0,g=c.length;e<g;e++){var h=c[e].Na;h&&b.Aa.contains(new f.G(h[0],h[1]))&&d.push(c[e])}c=d}return c},Tba:function(a,b,c){b=b.zoom;a.DJ||(a.DJ={}); return this.Xv(a,b,c,{FU:!0,Vx:a.DJ,Qt:function(b,c){return b+"_"+c+(a.lB?"_sel":"")},qx:function(a,b){return this.ZO(a,b,a.tc)}})},AU:function(a,b){if(a){b=f.extend({ox:!0},b);var c=[a.zC];b.ox&&(c.push(a.cu),a.Kq=null);for(var d=0,e=c.length;d<e;d++){var g=c[d];if(g)for(var h in g)g.hasOwnProperty(h)&&(g[h].jF=!0)}}},Sba:function(a,b,c){b=b.zoom;a.zC||(a.zC={});return(a=this.Xv(a,b,c,{FU:!0,Vx:a.zC,Qt:this.oA,qx:function(a,b,c){return this.YO(a,b,a.tc,c)}}))?a:null},Rba:function(a,b,c,d){return this.Xv(a, b.zoom,!0,{Vx:{},Qt:null,qx:function(a,b){return this.i2(d.ta,b,f.extend({dL:!0,split:!1,canvas:d.canvas},d.F))}})},bG:function(a,b,c,d){var e=b.Aa,g=e.Nb,h=e.nd;return this.Xv(a,b.zoom,!0,{Vx:{},Qt:null,qx:function(a,b){return d.sK.call(this,a,b,a.tc,f.extend({dL:!0,margin:{x:0,y:0},split:!1,canvas:c,H:[g.x,g.y,h.x,h.y],Cd:[g.x,g.y],tM:!1},d.F))}})},Naa:function(a,b,c,d){return this.bG(a,b,c,{sK:this.HF,F:d})},Laa:function(a,b,c,d){return this.bG(a,b,c,{sK:this.ZO,F:d})},Kaa:function(a,b,c,d){return this.bG(a, b,c,{sK:this.YO,F:d})},fG:function(a,b,c,d,e,g,h){c*=e;d*=e;e=h.call(this,{MZ:c,Jo:d,OC:c/2,Ut:d/2,S:e});h=0;for(var k=e.length;h<k;h++){var l=[b[0]+e[h][0],b[1]+e[h][1]],l=[l[0],l[1],l[0]+c,l[1]+d];if(!g||(!a||a.contains(new f.Qe(l)))&&!g.search(l).length)return l}return null},A3:function(a,b,c){var d=Math.ceil((a[0]-b[0])/c);b=Math.ceil((a[1]-b[1])/c);var e=Math.round((a[2]-a[0])/c);a=Math.round((a[3]-a[1])/c);return{width:e,height:a,x:d,y:b}},d4:function(){this.ew=!0;this.tG=[]},d8:function(){this.ew= !1;var a=this.tG;this.tG=null;return a},w1:function(a,b,c){b=a.wc;if(!b)return console.warn(a),null;var d=b.name||b.name_cn,e=b.pid,g=a.coords,h=[];a.FK&&h.push({source:a,td:a.FK});a.qK&&h.push({dda:!0,source:a.SC?a.SC:a,td:a.qK});a=[];for(var k=[],l=0,m=h.length;l<m;l++){var n=h[l].source;a.push(n.qa||n.Kca);n=[Math.round((h[l].td[0]-g[0])/c),Math.round((h[l].td[1]-g[1])/c),n.width,n.height,n.x||0,n.y||0,n.sL||n.width,n.rL||n.height];h[l].dda&&(n.rQ=!0);k.push(n)}return{Na:g,name:d,Vk:e,Ika:b.cpid, Ba:a,vb:k}},aG:function(a,b,c,d,e,g,h){if(this.ew){if(c.qa){"function"===typeof c.qa&&(c.qa(c.xm||c,{td:d,S:e,Cd:g}),c.xm&&(c=f.extend({},c,c.xm)));var k=this.w1(c,d,e);k&&this.tG.push(k)}}else{k=this.A3(d,g,e);if(c.qa){"function"===typeof c.qa&&(c.qa(c.xm||c,{td:d,S:e,Cd:g,Ad:k,canvas:a}),c.xm&&(c=f.extend({},c,c.xm)));if(c.qa){var l=!0;if(h){var m=new f.Qe(0,0,a.width,a.height),n=new f.Qe(k.x,k.y,k.x+c.width,k.y+c.height);m.contains(n)||(l=!1)}l&&b.drawImage(c.qa,c.x||0,c.y||0,c.sL||c.width,c.rL|| c.height,k.x,k.y,c.width,c.height)}return k}if(c.qk){var p=this,k=c.qk,q=Array.prototype.slice.call(arguments,0);q.push(1);k.push(function(a,b){a||(f.extend(q[1],b),p.aG.apply(this,q))})}}},Is:function(a,b,c){return[a[0]-b[0]*c,a[1]-b[1]*c,a[2]+b[0]*c,a[3]+b[1]*c]},s8:function(a,b){if(a.M.Zf){var c=a.M.Zf.TO,d=a.coords,e=this.JJ(a.M,"labelSizeOffset")||this.EQ,g=Math.max(0<a.width?1:0,a.width+e.Ae()),h=Math.max(0<a.height?1:0,a.height+e.Hd()),e=g-a.width,k=h-a.height,d=this.fG(b.Sx?b.td:null,d,g, h,b.S,c?b.yr:null,function(a){return[[-a.OC,-a.Ut],[0,-a.Ut],[-a.MZ,-a.Ut]]});if(!d)return!1;c&&b.td.mf(new f.Qe(d))&&b.yr.Wx(this.Is(d,[1,1],b.S),a);d=this.Is(d,[e/2*-1,k/2*-1],b.S);a.FK=d;this.aG(b.canvas,b.je,a,d,b.S,b.Cd,b.Sx);return!0}},n8:function(a,b){var c=a.SC;if(!c)return!1;if(a.M.Zf){var d=a.M.Zf.TO,e=a.coords,g=this.JJ(a.M,"iconSizeOffset")||this.g4,h=Math.max(0<c.width?1:0,c.width+g.Ae()),k=Math.max(0<c.height?1:0,c.height+g.Hd()),g=h-c.width,l=k-c.height,m=this.fG(b.Sx?b.td:null,e,h, k,b.S,d?b.yr:null,function(a){return[[-a.OC,-a.Ut]]});if(!m)return!1;var n=this.JJ(a.M,"labelSizeOffset")||this.EQ,p=Math.max(0<a.width?1:0,a.width+n.Ae()),q=Math.max(0<a.height?1:0,a.height+n.Hd()),n=p-a.width,r=q-a.height,s=null;0<p*q&&(s=this.fG(b.Sx?b.td:null,e,p,q,b.S,d?b.yr:null,function(a){return[[-a.OC,(0+k/2)*a.S],[(0+h/2)*a.S,-a.Ut],[-a.MZ-(0+h/2)*a.S,-a.Ut],[-a.OC,-a.Jo-(0+k/2)*a.S]]}));e=[];m&&(d&&b.td.mf(new f.Qe(m))&&b.yr.Wx(this.Is(m,[0,0],b.S),c),m=this.Is(m,[g/2*-1,l/2*-1],b.S),a.qK= m,c.wc=a.wc,c.qK=m,c.coords=a.coords,c.rQ=!0,this.ew&&s||e.push([c,m]));s&&(d&&b.td.mf(new f.Qe(s))&&b.yr.Wx(this.Is(s,[0,0],b.S),a),s=this.Is(s,[n/2*-1,r/2*-1],b.S),a.FK=s,e.push([a,s]));this.ew&&1<e.length&&console.warn("More than one image with _imageRenderingHolded");c=0;for(d=e.length;c<d;c++)this.aG(b.canvas,b.je,e[c][0],e[c][1],b.S,b.Cd,b.Sx)}},KP:function(a){return f.A.qb+"/images/indoor_icon/"+(1<this.Af?"36/"+a+"@2x":"18/"+a)+".png"},B2:function(a,b){var c=this.KP(a),d=document.createElement("img"); d.crossOrigin="Anonymous";d.onload=function(){d.loaded=!0;b(null,this);d.onload=d.onerror=null};d.onerror=function(a){b(a,this);d.onload=d.onerror=null};d.src=c},p3:function(a){this.Sn||(this.Sn={GA:0});var b=this.Sn[a];if(!b){var b=this.Sn[a]={status:1,Xe:a,width:18*this.Af,height:18*this.Af,Kca:this.KP(a),qk:[]},c=this;this.Sn.GA++;this.B2(a,function(a,e){c.Sn.GA--;if(!a&&(b.qa=e,b.sL=e.width,b.rL=e.height,b.qk)){var g=b.qk;b.qk=null;for(var h=0,k=g.length;h<k;h++)g[h].call(c,null,b)}c.Sn.GA||c.r("render", {type:"icon"})})}return b},o8:function(a,b){if(a.length)for(var c=0,d=a.length;c<d;c++)if(a[c].oz){var e=a[c].oz[b.zoom];if(e){!this.YF&&e.Xe&&(e.SC=this.p3(e.Xe));var g=!this.YF&&e.SC?this.n8:this.s8;a[c].VR||(a[c].VR=new f.G(a[c].coords[0],a[c].coords[1]));b.td.contains(a[c].VR)&&(a[c].M&&this.Py(a[c].M,b.zoom,{up:"label"}),g.call(this,f.extend({xm:e},a[c],e),b))}}},jba:function(a){if(a.Fs){var b=a.Fs;b.disableIconRender&&a.Zf&&a.Zf.Xe&&(a.Zf=f.extend({},a.Zf,{Xe:null}));b.disableLabelRender&&a.Zf&& (a.Zf=f.extend({},a.Zf,{fontSize:0}))}},JJ:function(a,b){return a&&a.Fs?a.Fs[b]:null},Py:function(a,b,c){c.up||console.warn("triggerType not set");f.extend({up:"polygon"},c);b-=this.rl;c=a.wc;var d=c.poitype||c.building_poi_style;d&&(a.Zf=this.mg.lV(d,b));a.PF&&(a.Zf=this.mg.NW(a.Zf,a.PF));if(c.highlighted_floor_line_style)(d=this.pb.ug(c.Nn))?a.style=this.mg.aca(d.lB?c.highlighted_floor_line_style:c.unhighlighted_floor_line_style,b):console.warn("Can not load: ",c);else if(c=c.regiontype||c.floor_region_type)a.style= this.mg.jca(c,b);a.QF&&(a.style=this.mg.NW(a.style,a.QF));this.jba(a);if(!a.style&&!a.Zf)return!1;1!==this.Af&&a.style&&a.style.strokeWeight&&(a.style=this.mg.EC(a.style),a.style.strokeWeight*=this.Af);return!0}});f.GN=f.ba.extend({ga:[f.ka,f.se],F:{visible:!0,zooms:[18,20],floorBarContainerStyle:null,floorListContainerStyle:null},B:function(a){f.a.Bb(this,a);this.f={};this.IH();this.setOptions(this.F);this.CP()},setOptions:function(a){this.zg(a)},show:function(){this.setOptions({visible:!0})},hide:function(){this.setOptions({visible:!1})},visibleChanged:function(){var a=this.get("visible");f.j.Ha(this.f.K,{display:a?"block":"none"});a&&(a=this.f.K.gl)&&this.Jw(a)},floorDataChanged:function(){var a=this.get("floorData"); this.a8(a)},E4:function(){return!!this.get("visible")},pq:function(a,b){this.map=a;b.appendChild(this.f.K);this.ze=b;this.vk()},zr:function(){this.Bk();this.ze.removeChild(this.f.K);this.f={};this.map=this.ze=null},vk:function(){this.Fa={};for(var a="click mouseover mouseout mousedown mouseup touchstart touchend touchcancel mousewheel".split(" "),b=0,c=a.length;b<c;b++)this.Fa[a[b]]=f.event.U(this.f.K,a[b],this.N3,this)},CF:function(a){if(a){var b=this;setTimeout(function(){a.call(b,b.Qz)},0)}},CP:function(a){if(this.Qz)this.CF(a); else{var b=function(a){a.JA&&(clearTimeout(a.JA),a.JA=null);a.HQ&&a.PG&&(a.PG.apply(this,arguments),a.HQ=!1)},c={"mousewheel DOMMouseScroll":{"*":function(a,b){f.C.stopPropagation(b);var c=0;b.wheelDelta?(c=120,f.l.ky&&(c=120===Math.abs(b.wheelDelta)?400:240),c=b.wheelDelta/c,window.opera&&9.5>parseFloat(window.opera.version())&&(c=-c)):b.detail&&(c=-b.detail);this.i5(c)}},mousedown:{"floor-nav":function(a){a.OG=!1;var b=arguments,c=this;a.JA=setTimeout(function(){a.JA=null;a.OG=!0;a.QG&&(a.QG.apply(c, b),a.HQ=!0)},1E3)}},mouseup:{"floor-nav":function(){b.apply(this,arguments)}},mouseover:{"floor-nav":function(a){f.j.Ga(a,"hover")}},mouseout:{"floor-nav":function(a){f.j.Ma(a,"hover");b.apply(this,arguments)}},click:{"floor-plus":function(a){a.OG||this.TQ(1)},"floor-minus":function(a){a.OG||this.TQ(-1)},"floor-nonas":function(a){this.T2(a.parentNode)}}};if(f.l.Z&&f.l.Me){var d=this;this.nt=!0;f.gb.load("AMap.IndoorMapTouch",function(){d.Qz=c;d.s4();d.CF(a)})}else this.Qz=c,this.CF(a)}},N3:function(a){var b= a.target||a.target||a.srcElement,c=a.type;if(b){var d=[b,a];this.CP(function(a){for(var g in a)if(a.hasOwnProperty(g)&&!(0>g.split(" ").indexOf(c))){var h=a[g],k;for(k in h)("*"===k||f.j.El(b,k))&&h[k].apply(this,d)}})}},jG:function(a,b){var c=this.f.K.U2,d=c.indexOf(a);if(0>d)console.warn("Can not found floor: ",a,c);else if(d+=b,!(0>d||d>=c.length))return{id:d,Lq:c[d]}},TQ:function(a){(a=this.jG(this.f.K.gl,a))&&this.XH(a.Lq)},i5:function(a){0<a?this.YH(null,!0):this.ZH(null,!0)},T2:function(a){a.Qn!== this.f.K.gl&&this.XH(a.Qn)},XH:function(a){this.d9("floorChanged",{Lq:a,wq:this.f.K.nm})},d9:function(a,b){this.r(a,b)},Bk:function(){this.Pw();if(this.Fa)for(var a in this.Fa)this.Fa.hasOwnProperty(a)&&f.event.removeListener(this.Fa[a])},D1:function(){var a=document.createElement("div");a.className="floor-btn floor-nav floor-plus";a.innerHTML="+";a.QG=function(){this.YH()};a.PG=function(){this.Pw()};return a},z1:function(){var a=document.createElement("div");a.className="floor-btn floor-nav floor-minus"; a.innerHTML="-";a.QG=function(){this.ZH()};a.PG=function(){this.Pw()};return a},Pja:function(){return this.f.K.gl},Oja:function(){return this.f.K.nm},jA:function(a){var b=null;this.gG(function(c){if(c.Qn===a)return b=c,!1});return b},BY:function(a,b,c){if(this.f.K.nm===a){a=this.jA(b);if(!a)return!1;this.T0(a,!c);c&&this.Jw(b)}},T0:function(a,b){if(!a)return!1;var c=this.O2(a,"amap-indrm-loader");b?c&&c.parentNode.removeChild(c):c||(c=document.createElement("div"),c.className="amap-indrm-loader", a.appendChild(c));this.sl(a,"with-indrm-loader",!b);this.sl(this.f.K,"with-indrm-loader",!b);return!0},O2:function(a,b){var c=null;this.vP(a,function(a){if(f.j.El(a,b))return c=a,!1},b);return c},vP:function(a,b,c){a=Array.prototype.slice.call(a.childNodes,0);for(var d=0,e=a.length;d<e;d++){var g=a[d];if(g&&(!c||f.j.El(g,c))&&!1===b.call(this,g,d))break}},gG:function(a){this.vP(this.f.Eo,a,"floor-list-item")},Xga:function(a,b){this.f.K.nm!==a?console.warn("building id not match"):(this.gG(function(a){this.sl(a, "selected",a.Qn===b)}),this.f.K.gl=b,this.c8(),this.Jw(b))},T7:function(a){var b=a.offsetLeft,c=a.offsetTop;do if(a=a.offsetParent)b+=a.offsetLeft,c+=a.offsetTop;else break;while(1);return{left:b,top:c}},Sz:function(a){if(!a.getBoundingClientRect)return this.T7(a);a=a.getBoundingClientRect();var b=document.documentElement;return{top:a.top+b.scrollTop,left:a.left+b.scrollLeft}},Rz:function(a){return a.offsetHeight||a.clientHeight||0},y4:function(a){var b=document.body;if(b.contains)return b.contains(a); for(;a;){if(a===b)return!0;a=a.parentNode}return!1},YH:function(a,b){if(f.j.El(this.f.K,"can-scroll-up")){var c=this.f.K;a||(a=c.vS||c.gl);var d=this.jG(a,1);if(d&&(this.Jw(d.Lq),!b)){this.Pw();var e=this;e.zB=setTimeout(function(){e.YH(d.Lq)},170)}}},ZH:function(a,b){if(f.j.El(this.f.K,"can-scroll-down")){var c=this.f.K;a||(a=c.vS||c.gl);var d=this.jG(a,-1);if(d&&(this.Jw(d.Lq),!b)){var e=this;this.Pw();e.zB=setTimeout(function(){e.ZH(d.Lq)},170)}}},Pw:function(){this.zB&&(clearTimeout(this.zB), this.zB=null)},Kja:function(a){return f.js.ZI(a)},vO:function(a,b){if(!f.l.Z)return f.js.tT(a,b)},OP:function(a){return this.Sz(a).top-this.Sz(this.f.Eo).top},NP:function(a,b){var c=this.jA(a);if(!c)return!1;var d=this.Rz(this.f.Eo),e=this.Rz(this.f.CJ),g=this.Rz(c),c=this.OP(c)-e/2+g/2;b=f.extend({$K:this.nt?-g:0,WK:d-e+(this.nt?g:0)},b);return{wda:d,c$:e,$K:b.$K,WK:b.WK,gZ:c}},Jw:function(a){if(this.E4()){var b=this.jA(a);if(!b)console.warn("Can not find floor: ",a);else if(this.y4(b)){var b=this.f.Eo, c=this.NP(a),d=this.nt||c.wda>c.c$;this.sl(this.f.K,"can-scroll",d);this.f.K.vS=a;d&&(a=c.gZ,d=c.$K,c=c.WK,a<d?a=d:a>c&&(a=c),d=-parseInt(b.style.marginTop,10)||0,5<Math.abs(d-a)&&(this.vO(b),b.style.marginTop=-a+"px"),d=-parseInt(b.style.marginTop,10)||0,this.sl(this.f.K,"can-scroll-down",d<c),this.sl(this.f.K,"can-scroll-up",0<d));this.uS()}}},uS:function(a){if(!this.nt){arguments.length||(a=this.f.K.gl);var b=this.jA(a);if(!b)return!1;var c=this.f.CJ,d=this.f.Eo;this.vO(this.f.gM);var e=this.Sz(c).top- this.Sz(this.f.K).top,b=e+this.OP(b)+(parseInt(d.style.marginTop,10)||0);this.f.gM.style.top=b+"px";this.f.gM.style.display=b>this.Rz(c)+e+5||b<e-15?"none":""}},c8:function(){var a=this.f.K,b=a.gl,c=a.d5;this.sl(this.f.CX,"disabled",b===a.b5);this.sl(this.f.QW,"disabled",b===c)},sl:function(a,b,c){a&&(c?f.j.Ga:f.j.Ma).call(f.j,a,b)},IH:function(){if(this.f.K){var a=this.f.K;a.innerHTML="";a.className="amap-indoormap-floorbar-control";a.nm=null}else this.f.K=f.j.create("div",null,"amap-indoormap-floorbar-control")}, a8:function(a){var b=this.f.K;a?(a.id!==b.nm&&this.r1(a),b.gl=a.tc,this.Xga(b.nm,b.gl)):this.IH()},zS:function(a,b){b?a.setAttribute("title",b):a.removeAttribute("title")},r1:function(a){this.IH();var b=this.f.K;this.sl(b,"is-mobile",!!f.l.Z);this.sl(b,"touch-scroll",this.nt);var c=a.lba,d=c.mba,e=c.EJ.length,g=e>(this.nt?Infinity:5),h=document.createDocumentFragment(),k=f.j.create("div",h,"panel-box");this.zS(b,c.name_cn);this.f.gM=f.j.create("div",k,"select-dock");g&&(this.f.CX=this.D1(),k.appendChild(this.f.CX)); var l=document.createElement("ul");l.className="floor-list";for(var m=e-1;0<=m;m--){var n=document.createElement("li");n.className="floor-list-item";n.innerHTML=\'<div class="floor-btn floor-nonas">\'+c.nba[m]+"</div>";n.Qn=c.EJ[m];0===m?b.d5=n.Qn:m===e-1&&(b.b5=n.Qn);this.zS(n,d[m]);l.appendChild(n)}b.$ja=0;b.Zja=e-1;b.U2=[].concat(c.EJ);c=document.createElement("div");c.className="floor-list-box";c.appendChild(l);k.appendChild(c);g&&(this.f.QW=this.z1(),k.appendChild(this.f.QW));b.nm=a.id;b.appendChild(h); this.f.Eo=l;this.f.CJ=c;this.V0()},V0:function(){var a={floorBarContainer:this.f.K,floorListContainer:this.f.CJ},b;for(b in a)if(a.hasOwnProperty(b)){var c=this.get(b+"Style");c&&this.W0(a[b],c)}},W0:function(a,b){if(a)for(var c in b)b.hasOwnProperty(c)&&(a.style[c]=b[c])}});w.w.v_=w.w.oc.extend({B:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.CLASS_NAME="AMap.IndoorMap";if(!f.l.Ll)return null;this.Cb=a;this.Rp=!1},mapChanged:function(){var a=this;if(!this.Rp&&void 0===this.Z4){var b="3D"===this.get("map").get("viewMode")&&f.l.bm?"3D":"2D",c=function(){var c="3D"===b?w.w.Gp:w.w.u_;a.B=a.initialize=c.prototype.B;f.a.Wga(a,c.prototype);c.call(a,a.Cb);a.Cb=null;a.Rp=!0};"3D"===b?f.gb.load("AMap.IndoorMap3D",c):c();this.Z4=!0}}}); window.AMap.IndoorMap=w.w.v_; w.w.LE={F:{visible:!0,opacity:1,zIndex:11,featureszIndex:null,zooms:[17,25],hideFloorBar:!1,bubble:"true",alwaysShow:!1,disableIconRender:!1,disableLabelRender:!1,disableHoverMarker:!1,autoLoadBuildingsInTile:!0},B:function(a){var b=this;this.CLASS_NAME="AMap.IndoorMap";this.LAYER_NAME="IndoorLayer";if(!f.l.Ll)return null;this.GH=!f.l.Z;this.Os=f.j.create("div");this.iQ=f.j.create("div",this.Os,"floor-outline-image-con");this.gw=f.j.create("div",this.Os,"floor-image-con");this.vG=f.j.create("div", this.Os,"highlight-image-con");this.vA=f.j.create("div",this.Os,"label-image-con");this.constructor.qc.B.call(this,this.Os,a);this.CLASS_NAME="AMap.IndoorMap";f.e.cb(this.CLASS_NAME,a);f.j.Ga(this.Os,"amap-indoor-map");this.Se=new w.D.ab({offset:new f.G(0,0),content:" ",noSelect:!0,visible:!1});this.Se.la=!0;this.na=this.Wv();this.Xc=null;this.pb=this._dataMgr=new f.wz(this.na);this.pb.g("loaded",function(){b.ql()},this);this.pb.g("featureStyleUpdate",this.fR,this);this.pb.g("featureLabelStyleUpdate", this.dR,this);this.pb.g("featureOptionsUpdate",this.eR,this);this.yO=1;this.lh=void 0;this.mg=f.xz;this.w2=this.mg.EC({strokeColor:"rgba(224,180,135,1)",fillColor:"rgba(224,180,135,0.5)"});this.Rp=!0;this.na&&this.mapChanged();this.qI=this.getRenderLabels;f.a.Lb(this)},setzIndex:function(a){this.constructor.qc.setzIndex.apply(this,arguments);this.jl&&this.jl.setzIndex(this.get("featureszIndex")||a)},aX:function(a){this.ZA(a.KT)},TZ:function(){return!!this.get("autoLoadBuildingsInTile")},showIndoorMap:function(a, b,c,d){f.e.add(this.CLASS_NAME,"showIndoorMap");var e=this;if(this.aC()){var g=arguments[arguments.length-1],h=null;g&&"function"===typeof g&&(h=g);h===b&&(b=null);h===c&&(c=null);this.yM(a,b,function(a,b,g){if(!a){var n=(e.get("zooms")||[18,20])[0],n=Math.max(e.na.get("zoom"),n),p=b.MK,q=null;c&&(q=e.pb.kca(b,b.tc,c));q&&q.lnglat&&(p=q.lnglat);d||e.na.setZoomAndCenter(n,p,!0);e.aC()&&e.ql();e.lq(b);q&&(g.shop=q)}f.event.N(e,"floor_complete",g);h&&h(a,g)},{xZ:!1})}},showFloor:function(a,b){f.e.add(this.CLASS_NAME, "showFloor");if(!this.uj)return!1;this.showIndoorMap(this.uj,a,void 0,b)},showFloorBar:function(){f.e.add(this.CLASS_NAME,"showFloorBar");this.set("hideFloorBar",!1)},hideFloorBar:function(){f.e.add(this.CLASS_NAME,"hideFloorBar");this.set("hideFloorBar",!0)},hideFloorBarChanged:function(){this.fq()},featureszIndexChanged:function(){this.jl&&this.jl.setzIndex(this.get("featureszIndex")||this.get("zIndex"))},visibleChanged:function(){var a=this.constructor.qc.visibleChanged;a&&a.apply(this,arguments); this.CH()},disableLabelRenderChanged:function(){this.ql()},hideLabels:function(){f.e.add(this.CLASS_NAME,"hideLabels");this.set("disableLabelRender",!0)},showLabels:function(){f.e.add(this.CLASS_NAME,"showLabels");this.set("disableLabelRender",!1)},cursorChanged:function(){this.PH(this.get("cursor"))},PH:function(a){this.ve&&this.ve.Bv.Oc.set("cursor",a)},getSelectedBuildingId:function(){f.e.add(this.CLASS_NAME,"getSelectedBuildingId");return this.uj||null},getSelectedBuilding:function(a){f.e.add(this.CLASS_NAME, "getSelectedBuilding");var b=this.uj||null;return b?(b=this.pb.ug(b))?this.pb.GJ(b,a):null:null},bg:function(){this.Xc&&(this.Xc.Gb=[]);this.fP()},fR:function(a){this.refreshFloorStyle(a.M.wc.Nn,{ox:!1})},dR:function(a){this.refreshFloorStyle(a.M.wc.Nn,{ox:!0})},eR:function(a){this.refreshFloorStyle(a.M.wc.Nn,{ox:!0})},refreshFloorStyle:function(a,b){if(this.pb){b=f.extend({ox:!0},b);if(a)this.kd.AU(this.pb.ug({id:a}),b);else{var c=this;this.pb.forEach(function(a){c.kd.AU(a,b)})}this.Wz();this.ql()}}, iconSizeOffsetChanged:function(){this.kd&&(this.kd.CY(this.get("iconSizeOffset")),this.refreshFloorStyle())},disableIconRenderChanged:function(){this.kd&&(this.kd.Oga(this.get("disableIconRender")),this.refreshFloorStyle())},labelSizeOffsetChanged:function(){this.kd&&(this.kd.EY(this.get("labelSizeOffset")),this.refreshFloorStyle())},mapChanged:function(){if(this.Rp){var a=this.Wv();this.Xc&&this.na===a||(this.constructor.qc.mapChanged.apply(this,arguments),this.fP(),this.na=a,this.Xc=this.b3(),this.nk()? this.Y0():!this.na||this.Xc||this.dT||(this.dT=!0,this.na.g("coreMapCreated",function(){this.dT=!1;this.mapChanged()},this,!0)))}},fP:function(){this.na&&(this.na.I("mousemove",this.TG,this),this.na.I("zoomchange",this.UG,this),this.na.I("movestart",this.MQ,this),this.na.I("mapmove",this.NQ,this),this.na.I("moveend",this.LQ,this),this.na.I("dragstart",this.KQ,this),this.na.I("dragend",this.JQ,this),this.na.I("click",this.KA,this),this.na.I("dblclick",this.IQ,this));this.wi&&(this.na&&this.na.removeControl(this.wi), this.wi=null);this.ve&&(this.ve.clear(),this.i8(),this.ve=null);this.kd&&this.kd.I("render",this.iB,this);this.lh=!0;f.hh&&(f.hh.I("vecTileParsed.builds.found",this.aX,this),f.hh.DY(!1,this.na));this.Gs(null);this.Se.setMap(null);this.fq();this.Xc=this.na=null;this.Wz()},Y0:function(){this.na.g("zoomchange",this.UG,this);this.na.g("moveend",this.LQ,this);this.na.g("mapmove",this.NQ,this);this.na.g("movestart",this.MQ,this);this.na.g("dragstart",this.KQ,this);this.na.g("dragend",this.JQ,this);this.na.g("click", this.KA,this);this.na.g("dblclick",this.IQ,this);this.na.g("mousemove",this.TG,this);this.UG();this.CH();this.Dv();this.pb.dc(this.na);"IndoorLayer"===this.LAYER_NAME&&(this.jl=new f.fm.oN({zIndex:this.get("featureszIndex")||this.getzIndex(),map:this.na,innerLayer:!0}),this.ve=this.jl.w,this.M0());f.hh&&this.TZ()&&f.hh.g("vecTileParsed.builds.found",this.aX,this);this.cursorChanged();this.kd=new f.y_(this.na,this.pb);this.kd.HY(f.l.cd?2:1);this.kd.via=this.GH;this.kd.g("render",this.iB,this);this.fq(); this.O3();this.disableHoverMarkerChanged();this.iconSizeOffsetChanged();this.labelSizeOffsetChanged();this.disableIconRenderChanged()},disableHoverMarkerChanged:function(){this.Se&&this.Se.setMap(this.lh||this.get("disableHoverMarker")?null:this.na)},i8:function(){this.LG(!1);var a=this.jl;setTimeout(function(){a.setMap(null)},0);this.ve=this.jl=null},M0:function(){this.jl.setMap(this.na);this.ve=this.jl.w;this.LG(!0)},LG:function(a){if(this.ve){var b=this.ve.Bv,c=this.get("indoorEvents")||[];f.a.isArray(c)? (0>c.indexOf("click")&&c.push("click"),f.l.Z||(0>c.indexOf("mouseover")&&c.push("mouseover"),0>c.indexOf("mouseout")&&c.push("mouseout"))):c=c.split(" ");a=a?b.g:b.I;for(var d=0,e=c.length;d<e;d++)a.call(b,c[d],this.J3,this)}},UG:function(){if(this.nk()){var a=this.na.get("zoom");if(f.l.Z){var b=this,c=a+this.kd?this.kd.rl:0;this.pb.forEach(function(a){b.W1(a.id,c)})}this.ve&&this.ve.Q&&Math.floor(a)===a&&this.ve.Q.zoom!==a&&(this.ve.Q.zoom=a,this.ve.Q.S=this.na.get("resolution",a));this.fq({IV:!0}); this.CH()}},oQ:function(a,b){if(!a)return console.log(!1),!1;"object"!==typeof a&&(a=this.pb.ug({id:a}));var c=this.nG(),d=this.pb.Hk(a);if(b&&this.na&&"IndoorLayer"===this.LAYER_NAME){var e=this.na.view.getResolution();b=b.Sc(e);c=new f.Qe(c.Nb.add(b),c.nd.Va(b))}return c&&d?c.mf(d,0):!1},W1:function(a,b){var c=this.pb.ug({id:a});this.oQ(c)||this.PO(a,b)},PO:function(a,b){var c=this.pb.ug({id:a});c&&this.pb.D$(c,void 0,b)},tS:function(){this.NH&&clearTimeout(this.NH);var a=this;a.NH=setTimeout(function(){a.NH= null;a.Qs=!1},300)},NQ:function(){this.Qs=!0;this.tS()},MQ:function(){this.Qs=!0;this.tS()},LQ:function(){this.fq({IV:!0});this.Qs=!1},Z0:function(){var a=this.getVisibleBuildingIds();a&&1===a.length&&this.setSelectedBuildingId(a[0])},KQ:function(){this.tQ=!0},JQ:function(){this.tQ=!1},e4:function(){this.eQ=!0;var a=this;setTimeout(function(){a.eQ=!1},0)},KA:function(){this.eQ||(this.r("map_click"),this.x2({id:0},200))},IQ:function(){this.JI()},x2:function(a,b){var c=this;this.JI();this.hA=setTimeout(function(){c.hA= null;c.lq(a)},b||300)},JI:function(){this.hA&&(clearTimeout(this.hA),this.hA=null)},CH:function(){var a=!this.nk()||!this.get("visible");if(!a&&this.na)var a=this.na.get("zoom"),b=this.get("zooms"),a=a<b[0]||a>b[1];this.lh!==a&&(this.Wz(),this.lh=a,f.hh&&f.hh.DY(!this.lh,this.na),this.disableHoverMarkerChanged(),this.LG(!this.lh),this.fq(),this.lh&&(this.Gs(null),this.DB(null)),this.iB());this.Dv()},setSelectedBuildingId:function(a){f.e.add(this.CLASS_NAME,"setSelectedBuildingId");this.lq({id:a})}, lq:function(a){this.JI();if(this.uj!==a.id){if(this.uj){var b=this.pb.ug(this.uj);b&&(b.lB=!1,this.PO(b.id))}this.r("selectedBuildingIdChanged",{oldId:this.uj,newId:a.id});this.uj=a.id;if(a=this.pb.ug(a.id))a.lB=!0;this.ql()}this.fq()},Dv:function(){if(this.na&&!f.l.Z)for(var a=this.na.get("zoom"),b=[this.na],c=!this.lh&&this.Cw&&0<this.Cw.length,d=0,e=b.length;d<e;d++)if(b[d]){var g=b[d].get("zooms");g&&(c?20>g[1]&&(b[d].set("zooms",[g[0],20]),b[d].iX=g[1]):18<g[1]&&a<g[1]&&b[d].set("zooms",[g[0], b[d].iX||g[1]]))}},l3:function(a){if(!this.uj)return!1;var b=this.pb.ug(this.uj);return!b||!b.Nq||a&&a.IV&&!this.oQ(b,new f.G(30,30))?!1:{id:b.id,tc:b.tc||b.yl,lba:this.t1(b.Dm.wc)}},t1:function(a){return f.extend({},a,{EJ:a.floor_indexs,nba:a.floor_nonas,mba:a.floor_names})},o4:function(){var a=this.wi;a&&(a.g("floorChanged",function(a){this.yM(a.wq,a.Lq,function(){})},this),a.g("visible",function(){a&&this.r("floorBarVisibleChanged",{bla:a,visible:a.get("visible")})},this))},getFloorBar:function(){return this.wi}, getFeaturesLayer:function(){return this.jl},fq:function(a){!this.nk()||this.get("hideFloorBar")||this.lh?this.wi&&this.wi.hide():(a=this.l3(a),this.wi||(this.wi=new f.GN(this.get(f.l.Z?"floorBarOptionsForMobile":"floorBarOptions")),this.o4(),this.na.addControl(this.wi)),this.wi.set("floorData",a),a?this.wi.show():this.wi.hide())},a7:function(a){var b=a.kq;if(!b)return null;var c=b.wc;if(!c)return null;var d=null;c.cpid&&(d=this.pb.BI(b));return{building_id:c.Nn,floor:c.kA,lnglat:a.nf||a.lnglat,shop:d}}, TG:function(a){a=a.nf||a.lnglat;a&&this.lw&&a.rb(this.lw)||(this.lw=a,this.dP(a))},dP:function(a,b){function c(){d.SF=null;d.$G&&a?(d.Se.show(),d.Se.setPosition(a)):d.Se.hide()}this.SF&&clearTimeout(this.SF);this.Se.get("visible")&&this.Se.hide();var d=this;b?c():this.SF=setTimeout(c,100)},Gs:function(a,b,c){this.get("disableIndoorMouseoverHighlight")&&(a=null);var d=null;this.Ws=null;a&&(a.wc?a.wc.pid||("floor"===a.wc.jj&&(a=this.pb.QU(a.wc.Nn))&&(d=a),a=null):a=null);a&&!d&&(d=a.wc.name||a.wc.name_cn); if(d)for(var e=["\\u8f85\\u52a9\\u9762"],g=0,h=e.length;g<h;g++){if(0<=d.indexOf(e[g])){a=d=null;break}}else a=null;if(a)switch(a.wc.jj){case "shops":this.Ws=a}this.Se&&(d?(this.$G!==d&&(this.$G=d,this.Se.setContent(\'<div class="amap-indoor-map-moverf-marker">\'+d+"</div>")),this.dP(c.nf||c.lnglat,!0)):(this.$G=null,this.Se.hide(),this.Se.setContent("")));this.w8(b)},w8:function(a){this.gN&&f.a.Sg(this.gN);this.gN=f.a.nc(function(){this.gN=null;this.lS(a)},this)},J3:function(a){if(this.lh)console.warn("Layer is hidden"); else{var b=this.a7(a);if(!b)this.Gs(null),b=null;else if(b.building_id){a.Nja=!0;a.type||(a.type=a.type);var c=b.building_id,d="click"===a.type,e="mouseover"===a.type,g="mouseout"===a.type;if(d||e)d&&this.e4(),this.uj!==c&&this.lq({id:b.building_id});e?(this.PH("default"),this.Gs(a.kq,c,a,b)):g&&(this.PH(this.get("cursor")),this.Gs(null))}f.event.N(this,a.type,b||a)}},iB:function(a){this.OH&&clearTimeout(this.OH);var b=this;this.OH=setTimeout(function(){b.OH=null;b.ql()},a||100)},og:function(){if(!this.Rp)return null; var a=this.constructor.qc.og.apply(this,arguments),b=this;setTimeout(function(){b.mapChanged()},0);return a},Wv:function(){return this.get("map")},b3:function(){var a=this.Wv();return a?a.map:null},Mja:function(){var a=this.Wv();return a?f.hh.GU(a):null},Lja:function(a,b){var c=this.na.view.getResolution(),d=this.na.Jb(this.na.get("center")),e=b.Zh(),g=this.na.get("size"),h=Math.abs(d.y-e.y)/c;return Math.abs(d.x-e.x)/c>3*g.width||h>3*g.height},AP:function(){if(this.lh||!this.nk())return[];var a= this.nG(),b=[],c=[];a&&this.pb.forEach(function(c){if(this.pb.xK(c)){var d=this.pb.Hk(c);d&&a.mf(d,0)&&b.push(c.id)}},this);if(c.length)for(var d=0,e=c.length;d<e;d++)this.pb.Pfa(c[d]);return b},ql:function(){this.Zr||(this.ND=f.a.nc(this.yS,this),this.Zr=!0)},EP:function(a){return a.yl||a.tc||1},nk:function(){return!(!this.na||!this.Xc)},m9:function(a){if(this.nk()){var b=this;setTimeout(function(){a.call(b)},0)}else this.Dw||(this.Dw=[]),this.Dw.push(a)},O3:function(){if(this.Dw){var a=this.Dw; this.Dw=null;for(var b=0,c=a.length;b<c;b++)a[b].call(this)}},ZA:function(a){this.nk()&&!this.lh&&(a||this.TZ()&&(a=f.hh.yba(this.na)),a&&a.length&&this.pb.Cda(a))},yM:function(a,b,c,d){d=f.extend({xZ:!0},d);var e=this;if(this.nk()){var g=!1,h=this.wi,k=this.pb.ug(a);h&&(k&&this.pb.$V(k,b)||(g=!0),g&&h.BY(a,b,!0));var l=function(b,e){var g;g=b?{status:1,error:b}:{status:0,building:this.pb.GJ(e)};f.extend(g,{id:a});!1!==d.xZ&&f.event.N(this,"floor_complete",g);c&&c.call(this,b,e,g)};this.pb.PK({id:a, hY:b},function(c,d){!c&&b&&(d.tc=b);g&&h.BY(a,b,!1);c?l.call(e,c,d):(e.Gs(null),e.ql(),e.lq(d),l.call(e,null,d))})}else{var m=Array.prototype.slice.call(arguments,0);this.m9(function(){this.yM.apply(this,m)})}},t8:function(a){return!this.nk()||a&&a.qna&&(a=this.Xc,a.Ng||a.Bi||a.hg&&this.Qs)?!1:!0},yS:function(){this.Xc&&this.Xc.set("display")},aC:function(){var a=this.na;if(a&&a.map){if(this.get("alwaysShow"))return!0;a.getLayers();for(var b in a.map.Ya)if(f.w.ik&&a.map.Ya[b]instanceof f.w.ik)return!0; return!1}},render:function(a){if(this.aC())if(this.ND&&f.a.Sg(this.ND),this.Zr=!1,this.ZA(),this.t8()){var b=this.Js();b.Mt=a;this.pS=this.yO++;this.j9(b.ko,b);this.k8(b.ko,b);this.Jv(this.iQ);this.Jv(this.gw);this.Jv(this.vG);this.Jv(this.vA);this.DB(b.ko);this.Dv()}else this.iB(500)},Wz:function(){this.mw=null},getRenderLabels:function(){if(!this.nk()||this.get("disableLabelRender")||this.lh||0<this.kd.QJ())return this.Wz(),[];var a=this.Js(),b=[];if(this.mw&&this.mw.result.Y6===this.get("opacity")&& (this.mw.Fia===a.key||this.Qs||this.tQ))b=this.mw.result;else{var c=a.ko,b=[];b.LT=[];for(var d=0,e=c.length;d<e;d++){var g=c[d];g.tc||(g.tc=this.EP(g));var h=this.kd.Zba(g,a),k=this.get("opacity");f.a.Ib(h,function(a){a.floor=g.tc;a.opacity=k});b.push.apply(b,h);b.LT.push(g.Dm.Y)}b&&0<b.length&&0===this.kd.QJ()&&(b.Y6=this.get("opacity"),this.mw={Fia:a.key,result:b})}b.VW=this.AP();return b},getVisibleBuildingIds:function(){f.e.add(this.CLASS_NAME,"getVisibleBuildingIds");return this.Cw||[]},getBuildingInfoById:function(a){return this.pb.zba(a)}, DB:function(a){var b=[];if(a&&!this.lh)for(var c=0,d=a.length;c<d;c++)this.pb.xK(a[c])&&b.push(a[c].id);b.sort();a=this.Cw||[];this.Cw=b;f.hh&&f.hh.Qga(b,this.na);a.join(",")!==b.join(",")&&(this.r("visibleBuildingChanged",{oldIds:a,newIds:this.Cw}),this.Z0())},Js:function(){for(var a=this.AP(),b=[],c=[],d=[],e=0,g=a.length;e<g;e++){var h=this.pb.ug(a[e]);h?(b.push(h),d.push(h.id),c.push(h.id+"_"+h.tc+(h.lB?"_sel":""))):console.warn("Can not find bld: ",a[e])}c.sort();var k;this.nk()?(a=this.nG(), e=this.na.get("zoom"),k=this.na.get("viewMode")):(a=new f.Qe(0,0,0,0),e=0);return{Bp:k,ko:b,rka:d,Aa:a,zoom:e,key:e+";"+[a.Nb,a.nd].join()+";"+c.join(",")}},j9:function(a){var b,c,d=[];b=0;for(c=a.length;b<c;b++)d.push(a[b].id+"_"+a[b].tc);b=d.sort().join(";");if(this.ve.l9!==b){this.ve.l9=b;this.ve.clear();var e=this;this.ve.UH&&f.a.EI(this.ve.UH);this.ve.UH=f.a.Ly(function(){e.ve&&(e.ve.UH=null,e.Z7(a))})}},Z7:function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];if(e=this.pb.Um(e,e.tc,!0))e.Gk&& b.push(e.Gk),b.push.apply(b,e.ta)}this.ve.oq(b)},nG:function(){var a=this;if(!this.na)return null;var b=this.na.get("coordsBound");if("IndoorLayer3D"===this.LAYER_NAME){if(!b)return{};b.mf=function(c){var d=[],e=c.nd;c=c.Nb;var g=[new f.G(c.x,c.y),new f.G(e.x,c.y),new f.G(e.x,e.y),new f.G(c.x,e.y),new f.G(c.x,c.y)];f.a.Ib(b.path,function(b){b=new f.G(b[0],b[1]);d.push(a.na.p20ToLngLat(b))});f.a.Ib(g,function(b,c){g[c]=a.na.p20ToLngLat(b)});return f.nv.doesRingRingIntersect(d,g)||f.nv.isRingInRing(g, d)}}return b},e2:function(a,b){if(0===(this.na.get("rotateEnable")?parseInt(this.na.get("rotation"),10)%360:0))return this.na.Je(a,b);var c=this.na;a=a.Ab();var d=c.cU(a),e=c.get("center");-180>e.O-d.O?a.x-=f.a.fb:180<e.O-d.O&&(a.x+=f.a.fb);d=c.get("centerCoords");d=a.Va(d).vc(1<<20-b);c=c.get("size").Tu().vc(2);e=d.x*Math.cos(0)-Math.sin(0)*d.y;d=Math.sin(0)*d.x+Math.cos(0)*d.y;return c.add(new f.G(e,d))},mS:function(a,b,c){if(!a)console.warn("Empty image");else if(f.a.isArray(a))for(var d=0,e=a.length;d< e;d++)this.mS(a[d],b,c);else if(!a.td||c.Eia.mf(a.td,0)){var g=a.qa;"function"===typeof g&&(g=g(a));g&&(g.ec=this.pS,d=a.Cd,d=this.e2(new f.G(d[0],d[1])),a={position:"absolute",width:Math.round(a.width)+"px",height:Math.round(a.height)+"px",left:Math.ceil(d.x)+"px",top:Math.ceil(d.y)+"px"},f.extend(g.style,a),g.parentNode!==b&&(b.appendChild(g),c.ru&&!f.l.Z&&(g.style.opacity=c.ru,f.js.tT(g,1E3),setTimeout(function(){g.style.opacity=1},0))))}},qS:function(a,b,c){f.j.am(a,b||a.width,c||a.height,!0)}, l8:function(a,b,c){this.mq?c.Tf&&this.qS(this.mq):(this.mq=document.createElement("canvas"),this.gw.appendChild(this.mq));this.mt?c.Tf&&this.qS(this.mt):(this.mt=document.createElement("canvas"),this.vA.appendChild(this.mt));c=[{Jq:this.kd.Laa,K:this.gw,VI:[a,b,this.mq,{Tf:c.Tf}]},{Jq:this.kd.Kaa,K:this.gw,VI:[a,b,this.mq,{Tf:!1}]},{disable:this.get("disableLabelRender")||b.Mt&&b.Mt.VL,Jq:this.kd.Naa,K:this.vA,VI:[a,b,this.mt,{Tf:c.Tf}]}];this.EH(a,b,c)},EH:function(a,b,c){for(var d=0,e=c.length;d< e;d++)if(!c[d].disable){var g=c[d].VI||[a,b,!0];c[d].BU&&g.push.apply(g,c[d].BU);(g=c[d].Jq.apply(this.kd,g))&&this.mS(g,c[d].K,{qka:a.id,ru:c[d].ru,Eia:b.Aa,zoom:b.zoom})}},lS:function(a,b){"string"===typeof a&&(a=this.pb.ug(a));b||(b=this.Js());var c=!0;a&&!this.Qs&&this.Ws||(c=!1);this.Ws&&c&&(this.kd.Py(this.Ws,b.zoom+this.kd.rl,{up:"polygon"}),this.Ws.style||(c=!1));c?(this.bQ||(this.bQ=document.createElement("canvas")),c=this.get("shopHighlightCoverStyle")||this.w2,c.Ak||(c.Ak="highlight"), c=[{Jq:this.kd.Rba,BU:[{canvas:this.bQ,ta:[f.extend(new f.Eg,this.Ws,{style:c})]}],K:this.vG,ru:0.1}],this.EH(a,b,c)):this.Jv(this.vG,-1)},m8:function(a,b){var c=[{Jq:this.kd.Tba,K:this.iQ},{Jq:this.kd.Sba,K:this.gw,ru:0.1},{disable:this.get("disableLabelRender")||b.Mt&&b.Mt.VL,Jq:this.kd.Yba,K:this.vA,ru:0.1}];this.EH(a,b,c);f.l.Z||this.lS(a,b)},n9:function(a,b){var c=this.na.view.getResolution(b.zoom),d=8E5;"undefined"!==typeof screen&&screen.width&&screen.height&&(d=screen.width*screen.height* 1.3);for(var e=0,g=a.length;e<g;e++){var h=this.pb.Hk(a[e]);if(h){var k=h.Bh()/c,h=h.zh()/c;if(k*h>d)return!0}}return!1},k8:function(a,b){var c=this.GH;c&&this.n9(a,b)&&(c=!1);for(var d=0,e=a.length;d<e;d++){var g=a[d];g.tc||(g.tc=this.EP(g));c?this.m8(g,b):this.l8(g,b,{Tf:0===d})}},Jv:function(a,b){if(a){b=b||this.pS;for(var c=Array.prototype.slice.call(a.childNodes,0),d=c.length-1;0<=d;d-=1){var e=c[d];e&&e.ec!==b&&a.removeChild(e)}}}};w.w.u_=w.w.ej.extend(w.w.LE); ')

_jsload_('AMap.IndoorMap3D', 'w.w.Gp=w.w.Mn.extend(f.extend({},w.w.LE,{F:{visible:!0,opacity:1,zIndex:11,featureszIndex:null,zooms:[17,20],hideFloorBar:!1,bubble:"true",alwaysShow:!1,disableIconRender:!1,disableLabelRender:!1,disableHoverMarker:!1,autoLoadBuildingsInTile:!0},Tk:[215440491,106744817],setOpacity:function(a){this.get("opacity")!==a&&(w.w.Gp.qc.setOpacity.call(this,a),this.ql())},B:function(a){if(!f.l.Ll)return null;this.LAYER_NAME="IndoorLayer3D";w.w.Gp.qc.B.call(this,a);this.GH=!f.l.Z;this.CLASS_NAME="AMap.IndoorMap"; f.e.cb(this.CLASS_NAME,a);this.Se=new w.D.ab({offset:new f.G(0,0),content:" ",noSelect:!0,visible:!1,cursor:a.cursor,bubble:!0});this.Se.la=!0;this.na=this.Wv();this.Xc=null;this.pb=new f.wz(this.na);this.pb.g("loaded",this.ql,this);this.pb.g("featureStyleUpdate",this.fR,this);this.pb.g("featureLabelStyleUpdate",this.dR,this);this.pb.g("featureOptionsUpdate",this.eR,this);this.yO=1;this.lh=void 0;this.mg=f.xz;this.mg.EC({strokeColor:"rgba(224,180,135,1)",fillColor:"rgba(224,180,135,0.5)"});this.Rp= !0;this.sP=29;this.GS={fillColor:[0.8862745098039215,0.7803921568627451,0.7215686274509804,1],strokeColor:[0.8313725490196079,0.6862745098039216,0.5450980392156862,1]};this.NA=[];this.na&&this.mapChanged();this.qI=this.getRenderLabels;f.a.Lb(this)},KA:function(a){w.w.LE.KA.call(this);if(this.na&&17<=this.na.getZoom()){var b=this.na.getObject3DByContainerPos(a.ub||a.pixel,[this]);b&&(b=b.object)&&b.BG&&b.qm&&(this.r("click",this.Z6(a,b.qm)),f.l.Z&&this.lq({id:b.qm.wq}))}},Z6:function(a,b){return{type:"click", building_id:b.wq,floor:b.kA,lnglat:a.lnglat,shop:"shops"!==b.jj?null:{building_id:b.wq,category:"shop",id:b.cpid,lnglat:a.lnglat,name:b.name,poiId:b.Vk}}},ql:function(){var a=this;if(this.aC()){this.ZA();var b=this.Js(),c=f.a.Ib,d=f.a.keys;b.ko.length?(c(b.ko,function(b){var g=a.uj===b.id;c(d(b.ta),function(d){if(b.ta[d]){var k=parseInt(d)===b.tc,l=b.ta[d].Gk;l&&(k?(l.wc.wq=b.id,a.pF(l,!0),g?a.P0(l):a.jS(l)):(a.jS(l),a.iS(l)));c(b.ta[d].ta,function(c){c.wc.wq=b.id;if(k)switch(c.Y.Sh){case "multipolygon":case "polygon":a.pF(c); break;case "point":a.O0(c)}else a.iS(c)})}})}),this.DB(b.ko),this.Dv(),this.yS()):this.clear()}},P0:function(a){var b=this,c=a.ww;if(c&&c[0].WA)f.a.Ib(c,function(a){b.add(a.WA)});else{var d=f.a.Dr("rgba(226,131,0,1)");a=this.DP(a);var e=[],g=null;f.a.Ib(a,function(a,k){e[k]=new f.pc.ss({width:f.l.cd?8:4});g=e[k].Y;f.a.Ib(a,function(a){g.kb.push(a.x,a.y,0);g.Za.push.apply(g.Za,d)});b.add(e[k]);c[k].WA=e[k];e[k].BG=e[k].transparent=!0})}},jS:function(a){var b=this;(a=a.ww)&&a[0].WA&&f.a.Ib(a,function(a){b.remove(a.WA)})}, iS:function(a){var b=this;(a=a.ww)&&a.length&&f.a.Ib(a,function(a){b.remove(a.zm);b.remove(a)})},DP:function(a){function b(a){f.a.Ib(a,function(a,b){d[b]=[];f.a.Ib(a.Na,function(a){d[b].push(new f.G(a[0]-c.Tk[0],a[1]-c.Tk[1]))})})}var c=this,d=[];"multipolygon"===a.Y.Sh?f.a.Ib(a.Y.We,function(a){b(a.Mf)}):b(a.Y.Mf);return d},pF:function(a,b){var c=this;if(a.ww)f.a.Ib(a.ww,function(a){c.add(a);c.add(a.zm)});else{var d=this.Js();this.kd.Py(a,d.zoom+this.kd.rl,{up:"polygon"});if(a.style&&a.style.fillColor&& /rgba\\(([^)]+)\\)/.test(a.style.fillColor)){var e=f.a.Dr(a.style.fillColor),g=f.a.Dr(a.style.strokeColor),d=this.DP(a),h=[],k=[],l=void 0,m=void 0;f.a.Ib(d,function(d,p){h[p]=new f.pc.NN({path:d,height:b?0:c.sP,color:e});h[p].BG=!0;k[p]=b?new f.pc.ss({width:f.l.cd?4:2}):new f.pc.Jn;h[p].transparent=k[p].transparent=!0;m=k[p].Y;l=d.length;f.a.Ib(d,function(a,d){m.kb.push(a.x,a.y,b?0:-1*(c.sP+1));m.Za.push.apply(m.Za,g);b||m.Yk.push(d,(d+1)%l)});c.add(h[p]);c.add(k[p]);h[p].zm=k[p];h[p].qm=a.wc});a.ww= h}}},O0:function(a){var b=a.Y.hf;a.Y.Mf=[{Na:[[b[0],b[1]],[b[2],b[1]],[b[2],b[3]],[b[0],b[3]]]}];this.pF(a)},TG:function(a){function b(){l.get("cursor")&&l.LA&&(l.na.setDefaultCursor(l.LA),l.LA=void 0)}function c(){l.Se.hide()}function d(b){var c=void 0,c="floor"===b.qm.jj?l.pb.QU(b.qm.Nn):b.qm.name||b.qm.name_cn;f.a.ga(["\\u8f85\\u52a9\\u9762"],c)||(l.Se.K2!==c&&(l.Se.setContent(\'<div class="amap-indoor-map-moverf-marker">\'+c+"</div>"),l.Se.K2=c),l.Se.setPosition(a.lnglat),l.Se.show())}function e(a){void 0=== a.Xu&&(a.Xu=a.Y.Za,a.zm.Xu=a.zm.Y.Za,g(a,l.GS.fillColor),g(a.zm,l.GS.strokeColor),l.NA.push(a),l.reDraw())}function g(a,b){var c=a.Y.Za.length/4;for(a.Y.Za=[];0<=c--;)a.Y.Za.push.apply(a.Y.Za,b);a.cL=!0}function h(a){for(var b=l.NA.length-1;0<=b;b--){var c=l.NA[b];c!==a&&(c.Y.Za=c.Xu,c.zm.Y.Za=c.zm.Xu,c.needUpdate=c.zm.needUpdate=!0,l.reDraw(),delete c.Xu,delete c.zm.Xu,l.NA.splice(b,1))}}var k=this,l=this,m=a.lnglat;if(!(m&&this.lw&&m.rb(this.lw))&&(this.TF&&clearTimeout(this.TF),this.TF=setTimeout(function(){var a= k.Js();k.DB(a.ko);k.Dv();k.TF=null},150),this.lw=m,this.na&&17<=this.na.getZoom()))if(m=this.na.getObject3DByContainerPos(a.ub||a.pixel,[this])){if((m=m.object)&&m.BG&&"prism"===m.type)switch(this.lq({id:m.qm.wq}),m.qm.jj){case "shops":e(m);d(m);l.get("cursor")&&void 0===l.LA&&(l.LA=l.na.getDefaultCursor(),l.na.setDefaultCursor(l.get("cursor")));break;case "floor":b();d(m);break;default:b(),c()}else b(),c();h(m)}else b(),h(),c()},og:function(){var a=this;if(!this.Rp)return null;setTimeout(function(){a.mapChanged()}, 0);return w.w.Gp.qc.og.apply(this,arguments)}})); ')

_cssload_('AMap.ControlBar', '.amap-controlbar{position:absolute;width:auto;height:auto}.amap-luopan{width:184px}.amap-controlbar{transform:scale(0.5);-ms-transform:scale(0.5);-webkit-transform:scale(0.5);-o-transform:scale(0.5);-moz-transform:scale(0.5);transform-origin:100% 0;-ms-transform-origin:100% 0;-webkit-transform-origin:100% 0;-o-transform-origin:100% 0;-moz-transform-origin:100% 0}.amap-luopan,.amap-luopan-bg{height:184px;background:url('+offlineMap.baseUrl+'theme/v1.3/controlbar/ctb.png) -44px -60px no-repeat}.amap-luopan-bg-active{background:url('+offlineMap.baseUrl+'theme/v1.3/controlbar/ctb.png) -254px -60px no-repeat}.amap-compass{top:92px;left:50%;position:absolute;margin:-48px;width:96px;height:96px;z-index:0;background:url('+offlineMap.baseUrl+'theme/v1.3/controlbar/ctb.png) -462px -52px no-repeat}.amap-compass-min{top:0;left:0;margin:0}.amap-compass-black{background:url('+offlineMap.baseUrl+'theme/v1.3/controlbar/ctb.png) -462px -158px no-repeat}.amap-pointers{position:absolute;width:60px;height:96px;top:0;left:18px;border:none;z-index:2;background:url('+offlineMap.baseUrl+'theme/v1.3/controlbar/ctb.png) -562px -52px no-repeat}.amap-pitchDown,.amap-pitchUp{width:60px;height:45px;position:absolute;margin-left:-30px;left:50%;z-index:1;background:url('+offlineMap.baseUrl+'theme/v1.3/controlbar/ctb.png) -605px -98px no-repeat}.amap-controlbar-disable{opacity:.4}.amap-pitch-active{background:url('+offlineMap.baseUrl+'theme/v1.3/controlbar/ctb.png) -605px -47px no-repeat}.amap-pitchUp{top:7px}.amap-pitchDown{top:132px;transform:rotateZ(180deg);-ms-transform:rotateZ(180deg);-webkit-transform:rotateZ(180deg);-o-transform:rotateZ(180deg);-moz-transform:rotateZ(180deg)}.amap-rotateLeft,.amap-rotateRight{width:42px;height:104px;top:38px;position:absolute;z-index:2;background:url('+offlineMap.baseUrl+'theme/v1.3/controlbar/ctb.png) -603px -154px no-repeat}.amap-rotate-active{background:url('+offlineMap.baseUrl+'theme/v1.3/controlbar/ctb.png) -557px -153px no-repeat}.amap-rotateLeft{left:10px}.amap-rotateRight{right:10px;transform:rotateY(180deg);-ms-transform:rotateY(180deg);-webkit-transform:rotateY(180deg);-o-transform:rotateY(180deg);-moz-transform:rotateY(180deg)}.amap-controlbar-zoom{width:70px;height:184px;margin:20px 0 0 56px;background:url('+offlineMap.baseUrl+'theme/v1.3/controlbar/ctb.png) -154px -292px no-repeat}.amap-controlbar-zoom-bg{width:70px;height:184px;z-index:0;position:absolute;background:url('+offlineMap.baseUrl+'theme/v1.3/controlbar/ctb.png) -47px -292px no-repeat}.amap-controlbar-zoom-add,.amap-controlbar-zoom-sub{width:70px;height:70px;position:absolute;z-index:1}.amap-controlbar-zoom-add{margin-top:15px;background:url('+offlineMap.baseUrl+'theme/v1.3/controlbar/ctb.png) -236px -269px no-repeat}.amap-controlbar-zoom-add-active{background:url('+offlineMap.baseUrl+'theme/v1.3/controlbar/ctb.png) -236px -375px no-repeat}.amap-controlbar-zoom-sub{margin-top:105px;background:url('+offlineMap.baseUrl+'theme/v1.3/controlbar/ctb.png) -237px -327px no-repeat}.amap-controlbar-zoom-sub-active{background:url('+offlineMap.baseUrl+'theme/v1.3/controlbar/ctb.png) -236px -439px no-repeat}')
_jsload_('AMap.ControlBar', 'f.h_=f.ba.extend({ga:[f.ka],B:function(a){this.CLASS_NAME="AMap.ControlBar";f.e.cb(this.CLASS_NAME,a);this.ye(a||{});this.f={};this.f.K=f.j.create("div",null,"amap-controlbar");this.f.hn=f.j.create("div",this.f.K,"amap-luopan");this.f.Jc=f.j.create("div",this.f.hn,"amap-luopan-bg");this.f.yq=f.j.create("div",this.f.hn,"amap-compass");this.f.Oma=f.j.create("div",this.f.yq,"amap-pointers");this.f.Xi=f.j.create("div",this.f.hn,"amap-pitchUp");this.f.Wi=f.j.create("div",this.f.hn,"amap-pitchDown");f.j.Ga(this.f.Wi, "amap-controlbar-disable");f.j.Ga(this.f.Xi,"amap-controlbar-disable");this.f.rn=f.j.create("div",this.f.hn,"amap-rotateLeft");this.f.sn=f.j.create("div",this.f.hn,"amap-rotateRight");this.f.K.oncontextmenu=this.YY;this.f.K.ontouchstart=this.YY;this.f.pz=f.j.create("div",this.f.K,"amap-controlbar-zoom");this.f.fh=f.j.create("div",this.f.pz);this.f.dh=f.j.create("div",this.f.pz,"amap-controlbar-zoom-add");this.f.eh=f.j.create("div",this.f.pz,"amap-controlbar-zoom-sub");this.bk();this.pM||(this.f.pz.style.display= "none");this.$D||(this.f.hn.style.width=this.f.hn.style.height="96px",this.f.hn.style.backgroundImage="none",this.f.Jc.style.display="none",this.f.Xi.style.display="none",this.f.Wi.style.display="none",this.f.rn.style.display="none",this.f.sn.style.display="none",f.j.Ga(this.f.yq,"amap-compass-black"),f.j.Ga(this.f.yq,"amap-compass-min"),this.f.pz.style.marginLeft="13px")},bk:function(){for(var a in this.position)this.position.hasOwnProperty(a)&&(this.f.K.style[a]=this.position[a])},YY:function(a){f.C.preventDefault(a)}, ye:function(a){this.pM=f.l.Z?!1:!0;this.$D=f.l.Z?!1:!0;this.position=a.position||{right:"20px",top:"20px"};this.Sh="controlbar";this.pM=void 0===a.showZoomBar?this.pM:a.showZoomBar;this.$D=void 0===a.showControlButton?this.$D:a.showControlButton},pq:function(a,b){f.l.NB&&(this.map=a,b.appendChild(this.f.K),this.ze=b,this.aN(a.getRotation(),a.getPitch()),this.NR(),this.vk())},zr:function(){f.l.NB&&(this.Bk(),this.ze.removeChild(this.f.K),this.map=this.ze=null)},R5:function(a){f.j.Ma(this.f.Wi,"amap-controlbar-disable"); f.j.Ma(this.f.Xi,"amap-controlbar-disable");0===a.pitch?(f.j.Ma(this.f.Wi,"amap-pitch-active"),f.j.Ga(this.f.Wi,"amap-controlbar-disable")):a.pitch===this.map.get("maxPitch")&&(f.j.Ma(this.f.Xi,"amap-pitch-active"),f.j.Ga(this.f.Xi,"amap-controlbar-disable"));this.aN(this.map.getRotation(),a.pitch)},z6:function(a){this.aN(a.rotation,this.map.getPitch())},aN:function(a,b){b=b/90*60;this.$D||(b=0);this.f.yq.style.transform=this.f.yq.style.WebkitTransform="rotateX(-"+b+"deg) rotateZ("+a+"deg)"},NR:function(){var a= this.map.getZoom(),b=this.map.get("zooms");f.j.Ma(this.f.dh,"amap-controlbar-disable");f.j.Ma(this.f.eh,"amap-controlbar-disable");a===b[1]&&f.j.Ga(this.f.dh,"amap-controlbar-disable");a===b[0]&&f.j.Ga(this.f.eh,"amap-controlbar-disable")},vk:function(){this.Fa={Dma:f.event.addListener(this.map,"pitch",this.R5,this),cna:f.event.addListener(this.map,"rotate",this.z6,this),$ia:f.event.addListener(this.map,"zoomchange",this.NR,this),Ima:f.event.U(this.f.Xi,"mousedown",this.Y5,this),Ema:f.event.U(this.f.Wi, "mousedown",this.S5,this),dna:f.event.U(this.f.rn,"mousedown",this.n6,this),hna:f.event.U(this.f.sn,"mousedown",this.t6,this),Kma:f.event.U(this.f.Xi,"mouseover",this.a6,this),Gma:f.event.U(this.f.Wi,"mouseover",this.U5,this),fna:f.event.U(this.f.rn,"mouseover",this.p6,this),jna:f.event.U(this.f.sn,"mouseover",this.v6,this),Jma:f.event.U(this.f.Xi,"mouseout",this.Z5,this),Fma:f.event.U(this.f.Wi,"mouseout",this.T5,this),ena:f.event.U(this.f.rn,"mouseout",this.o6,this),ina:f.event.U(this.f.sn,"mouseout", this.u6,this),reset:f.event.U(this.f.yq,"click",this.FR,this),hoa:f.event.U(this.f.dh,"mouseover",this.N6,this),joa:f.event.U(this.f.eh,"mouseover",this.T6,this),goa:f.event.U(this.f.dh,"mouseout",this.M6,this),ioa:f.event.U(this.f.eh,"mouseout",this.S6,this),dh:f.event.U(this.f.dh,"mousedown",this.K6,this),eh:f.event.U(this.f.eh,"mousedown",this.Q6,this),Zma:f.event.U(this.f.yq,"touchend",this.FR,this)};f.l.Me&&f.extend(this.Fa,{Lma:f.event.U(this.f.Xi,"touchstart",this.b6,this),Hma:f.event.U(this.f.Wi, "touchstart",this.V5,this),gna:f.event.U(this.f.rn,"touchstart",this.q6,this),kna:f.event.U(this.f.sn,"touchstart",this.w6,this),dh:f.event.U(this.f.dh,"touchstart",this.P6,this),eh:f.event.U(this.f.eh,"touchstart",this.V6,this)})},N6:function(){var a=this.map.getZoom(),b=this.map.get("zooms");a!==b[1]&&f.j.Ga(this.f.dh,"amap-controlbar-zoom-add-active")},T6:function(){var a=this.map.getZoom(),b=this.map.get("zooms");a!==b[0]&&f.j.Ga(this.f.eh,"amap-controlbar-zoom-sub-active")},M6:function(){f.j.Ma(this.f.dh, "amap-controlbar-zoom-add-active")},S6:function(){f.j.Ma(this.f.eh,"amap-controlbar-zoom-sub-active")},K6:function(){f.j.Ga(this.f.fh,"amap-controlbar-zoom-bg");this.f.fh.style.transform=this.f.fh.style.WebkitTransform="rotateZ(0deg)";this.Fa.Via=f.event.U(this.f.dh,"mouseup",this.L6,this)},L6:function(){f.j.Ma(this.f.fh,"amap-controlbar-zoom-bg");f.event.removeListener(this.Fa.Via);this.map.zoomIn()},P6:function(){f.j.Ga(this.f.fh,"amap-controlbar-zoom-bg");f.j.Ga(this.f.dh,"amap-controlbar-zoom-add-active"); this.f.fh.style.transform=this.f.fh.style.WebkitTransform="rotateZ(0deg)";this.Fa.Wia=f.event.U(this.f.dh,"touchend",this.O6,this)},O6:function(){f.j.Ma(this.f.fh,"amap-controlbar-zoom-bg");f.j.Ma(this.f.dh,"amap-controlbar-zoom-add-active");f.event.removeListener(this.Fa.Wia);this.map.zoomIn()},Q6:function(){f.j.Ga(this.f.fh,"amap-controlbar-zoom-bg");this.f.fh.style.transform=this.f.fh.style.WebkitTransform="rotateZ(180deg)";this.Fa.Xia=f.event.U(this.f.eh,"mouseup",this.R6,this)},R6:function(){f.j.Ma(this.f.fh, "amap-controlbar-zoom-bg");f.event.removeListener(this.Fa.Xia);this.map.zoomOut()},V6:function(){f.j.Ga(this.f.fh,"amap-controlbar-zoom-bg");f.j.Ga(this.f.eh,"amap-controlbar-zoom-sub-active");this.f.fh.style.transform=this.f.fh.style.WebkitTransform="rotateZ(180deg)";this.Fa.Yia=f.event.U(this.f.eh,"touchend",this.U6,this)},U6:function(){f.j.Ma(this.f.fh,"amap-controlbar-zoom-bg");f.j.Ma(this.f.eh,"amap-controlbar-zoom-sub-active");f.event.removeListener(this.Fa.Yia);this.map.zoomOut()},FR:function(){this.map.bha({pitch:0, rotation:0},300)},a6:function(){this.map.getPitch()!==this.map.get("maxPitch")&&f.j.Ga(this.f.Xi,"amap-pitch-active")},Z5:function(){f.j.Ma(this.f.Xi,"amap-pitch-active")},U5:function(){0!==this.map.getPitch()&&f.j.Ga(this.f.Wi,"amap-pitch-active")},T5:function(){f.j.Ma(this.f.Wi,"amap-pitch-active")},p6:function(){f.j.Ga(this.f.rn,"amap-rotate-active")},o6:function(){f.j.Ma(this.f.rn,"amap-rotate-active")},v6:function(){f.j.Ga(this.f.sn,"amap-rotate-active")},u6:function(){f.j.Ma(this.f.sn,"amap-rotate-active")}, Y5:function(){if(!this.Ee&&this.map.get("pitch")!==this.map.get("maxPitch")&&this.map.get("pitchEnable")){this.f.Jc.style.transform=this.f.Jc.style.WebkitTransform="rotateZ(180deg)";f.j.Ga(this.f.Jc,"amap-luopan-bg-active");var a=this;a.map.set("pitch",1+parseFloat(a.map.get("pitch")));a.Ee=f.a.nc(function c(){a.map.set("pitch",1+parseFloat(a.map.get("pitch")));a.Ee=f.a.nc(c)});this.Fa.BX=f.event.U(document,"mouseup",this.d6,this)}},d6:function(){f.j.Ma(this.f.Jc,"amap-luopan-bg-active");this.Ee&& (f.a.Sg(this.Ee),this.Ee=null,f.event.removeListener(this.Fa.BX),delete this.Fa.BX)},S5:function(){if(!this.Ee&&0!==this.map.get("pitch")&&this.map.get("pitchEnable")){this.f.Jc.style.transform=this.f.Jc.style.WebkitTransform="rotateZ(0deg)";f.j.Ga(this.f.Jc,"amap-luopan-bg-active");var a=this;a.map.set("pitch",-1+parseFloat(a.map.get("pitch")));a.Ee=f.a.nc(function c(){a.map.set("pitch",-1+parseFloat(a.map.get("pitch")));a.Ee=f.a.nc(c)});this.Fa.zX=f.event.U(document,"mouseup",this.X5,this)}},X5:function(){f.j.Ma(this.f.Jc, "amap-luopan-bg-active");this.Ee&&(f.a.Sg(this.Ee),this.Ee=null,f.event.removeListener(this.Fa.zX),delete this.Fa.zX)},n6:function(){if(!this.Ge&&this.map.get("rotateEnable")){this.f.Jc.style.transform=this.f.Jc.style.WebkitTransform="rotateZ(90deg)";f.j.Ga(this.f.Jc,"amap-luopan-bg-active");var a=this;a.map.set("rotation",-2+parseFloat(a.map.get("rotation")));a.Ge=f.a.nc(function c(){a.map.set("rotation",-2+parseFloat(a.map.get("rotation")));a.Ge=f.a.nc(c)});this.Fa.pY=f.event.U(document,"mouseup", this.s6,this)}},s6:function(){f.j.Ma(this.f.Jc,"amap-luopan-bg-active");this.Ge&&(f.a.Sg(this.Ge),this.Ge=null,f.event.removeListener(this.Fa.pY),delete this.Fa.pY)},t6:function(){if(!this.Ge&&this.map.get("rotateEnable")){this.f.Jc.style.transform=this.f.Jc.style.WebkitTransform="rotateZ(270deg)";f.j.Ga(this.f.Jc,"amap-luopan-bg-active");var a=this;a.map.set("rotation",2+parseFloat(a.map.get("rotation")));a.Ge=f.a.nc(function c(){a.map.set("rotation",2+parseFloat(a.map.get("rotation")));a.Ge=f.a.nc(c)}); this.Fa.rY=f.event.U(document,"mouseup",this.y6,this)}},y6:function(){f.j.Ma(this.f.Jc,"amap-luopan-bg-active");this.Ge&&(f.a.Sg(this.Ge),this.Ge=null,f.event.removeListener(this.Fa.rY),delete this.Fa.rY)},b6:function(){if(!this.Ee&&this.map.get("pitch")!==this.map.get("maxPitch")&&this.map.get("pitchEnable")){this.f.Jc.style.transform=this.f.Jc.style.WebkitTransform="rotateZ(180deg)";f.j.Ga(this.f.Jc,"amap-luopan-bg-active");f.j.Ga(this.f.Xi,"amap-pitch-active");var a=this;a.map.set("pitch",1+parseFloat(a.map.get("pitch"))); a.Ee=f.a.nc(function c(){a.map.set("pitch",1+parseFloat(a.map.get("pitch")));a.Ee=f.a.nc(c)});this.Fa.AX=f.event.U(document,"touchend",this.c6,this)}},c6:function(){f.j.Ma(this.f.Jc,"amap-luopan-bg-active");this.Ee&&(f.a.Sg(this.Ee),this.Ee=null,f.event.removeListener(this.Fa.AX),delete this.Fa.AX,f.j.Ma(this.f.Xi,"amap-pitch-active"))},V5:function(){if(!this.Ee&&0!==this.map.get("pitch")&&this.map.get("pitchEnable")){this.f.Jc.style.transform=this.f.Jc.style.WebkitTransform="rotateZ(0deg)";f.j.Ga(this.f.Jc, "amap-luopan-bg-active");f.j.Ga(this.f.Wi,"amap-pitch-active");var a=this;a.map.set("pitch",-1+parseFloat(a.map.get("pitch")));a.Ee=f.a.nc(function c(){a.map.set("pitch",-1+parseFloat(a.map.get("pitch")));a.Ee=f.a.nc(c)});this.Fa.yX=f.event.U(document,"touchend",this.W5,this)}},W5:function(){f.j.Ma(this.f.Wi,"amap-pitch-active");f.j.Ma(this.f.Jc,"amap-luopan-bg-active");this.Ee&&(f.a.Sg(this.Ee),this.Ee=null,f.event.removeListener(this.Fa.yX),delete this.Fa.yX)},q6:function(){if(!this.Ge&&this.map.get("rotateEnable")){this.f.Jc.style.transform= this.f.Jc.style.WebkitTransform="rotateZ(90deg)";f.j.Ga(this.f.rn,"amap-rotate-active");f.j.Ga(this.f.Jc,"amap-luopan-bg-active");var a=this;a.map.set("rotation",-2+parseFloat(a.map.get("rotation")));a.Ge=f.a.nc(function c(){a.map.set("rotation",-2+parseFloat(a.map.get("rotation")));a.Ge=f.a.nc(c)});this.Fa.oY=f.event.U(document,"touchend",this.r6,this)}},r6:function(){f.j.Ma(this.f.rn,"amap-rotate-active");f.j.Ma(this.f.Jc,"amap-luopan-bg-active");this.Ge&&(f.a.Sg(this.Ge),this.Ge=null,f.event.removeListener(this.Fa.oY), delete this.Fa.oY)},w6:function(){if(!this.Ge&&this.map.get("rotateEnable")){this.f.Jc.style.transform=this.f.Jc.style.WebkitTransform="rotateZ(-90deg)";f.j.Ga(this.f.sn,"amap-rotate-active");f.j.Ga(this.f.Jc,"amap-luopan-bg-active");var a=this;a.map.set("rotation",2+parseFloat(a.map.get("rotation")));a.Ge=f.a.nc(function c(){a.map.set("rotation",2+parseFloat(a.map.get("rotation")));a.Ge=f.a.nc(c)});this.Fa.qY=f.event.U(document,"touchend",this.x6,this)}},x6:function(){f.j.Ma(this.f.sn,"amap-rotate-active"); f.j.Ma(this.f.Jc,"amap-luopan-bg-active");this.Ge&&(f.a.Sg(this.Ge),this.Ge=null,f.event.removeListener(this.Fa.qY),delete this.Fa.qY)},Bk:function(){if(this.Fa)for(var a in this.Fa)this.Fa.hasOwnProperty(a)&&f.event.removeListener(this.Fa[a])},hide:function(){f.e.add(this.CLASS_NAME,"hide");this.Bb({visible:!1});f.event.N(this,"hide")},show:function(){f.e.add(this.CLASS_NAME,"show");this.Bb({visible:!0});f.event.N(this,"show")}});window.AMap.ControlBar||(window.AMap.ControlBar=f.h_); ')

_jsload_('AMap.Scale', 'f.Z_=f.ba.extend({ga:[f.ka,f.se],ah:".amap-scalecontrol{position:absolute;z-index:150}.amap-scale-text{text-align:center;font-size:10px}.amap-scale-line{position:relative;height:8px}.amap-scale-line div{-webkit-box-sizing:content-box!important;-moz-box-sizing:content-box!important;box-sizing:content-box!important}.amap-scale-edgeleft,.amap-scale-middle,.amap-scale-edgeright{position:absolute;background-color:#333;overflow:hidden}.amap-scale-edgeleft,.amap-scale-edgeright{width:1px;_width:3px;height:6px;_height:8px;border:solid 1px #fff}.amap-scale-middle{height:2px;_height:4px;left:2px;top:2px;border-top:solid 1px #fff;border-bottom:solid 1px #fff}", B:function(a){this.CLASS_NAME="AMap.Scale";f.e.cb(this.CLASS_NAME,a);this.position="LB";this.offset=new f.G(2,20);this.visible=!0;this.f={};this.f.K=f.j.create("div",null,"amap-scalecontrol");this.f.text=f.j.create("div",this.f.K,"amap-scale-text");this.f.LK=f.j.create("div",this.f.K,"amap-scale-line");this.f.Yka=f.j.create("div",this.f.LK,"amap-scale-edgeleft");this.f.Zaa=f.j.create("div",this.f.LK,"amap-scale-edgeright");this.f.Uda=f.j.create("div",this.f.LK,"amap-scale-middle");this.Bb(a)},pq:function(a, b){this.map=a;b.appendChild(this.f.K);this.ze=b;this.vk()},zr:function(){this.Bk();this.ze.removeChild(this.f.K);this.map=this.ze=null},Bb:function(a){for(var b in a)"_"!==b.substr(0,1)&&void 0!==this[b]&&(this[b]=a[b]);this.position&&this.offset&&this.Kw(this.position,this.offset);this.visible?f.j.Ha(this.f.K,{visibility:"visible"}):f.j.Ha(this.f.K,{visibility:"hidden"})},VJ:function(a){return this[a]},Kw:function(a,b){switch(a){case "LT":f.j.Ha(this.f.K,{left:b.Ae()+"px",top:b.Hd()+"px",right:"", bottom:""});break;case "RT":f.j.Ha(this.f.K,{right:b.Ae()+"px",top:b.Hd()+"px",left:"",bottom:""});break;case "LB":f.j.Ha(this.f.K,{left:b.Ae()+"px",bottom:b.Hd()+"px",right:"",top:""});break;case "RB":f.j.Ha(this.f.K,{right:b.Ae()+"px",bottom:b.Hd()+"px",left:"",top:""})}this.ze&&(this.ze.removeChild(this.f.K),this.ze.appendChild(this.f.K))},M8:function(a,b){this.f.text.innerHTML=a;f.j.Ha(this.f.text,{width:b+8+"px"}).Ha(this.f.Uda,{width:b+"px"}).Ha(this.f.Zaa,{left:b+1+"px"})},sS:[[1E7,"10000"], [5E6,"5000"],[2E6,"2000"],[1E6,"1000"],[5E5,"500"],[2E5,"200"],[1E5,"100"],[1E5,"100"],[5E4,"50"],[2E4,"20"],[1E4,"10"],[5E3,"5"],[2E3,"2"],[1E3,"1"],[500,"500"],[200,"200"],[200,"200"],[100,"100"],[50,"50"],[20,"20"],[10,"10"]],vk:function(){this.pl();this.Fa={XZ:f.event.addListener(this.map,"zoomend",this.pl,this),cea:f.event.addListener(this.map,"moveend",this.pl,this)};this.X("lang",this.map)},langChanged:function(){this.pl()},Bk:function(){if(this.Fa)for(var a in this.Fa)this.Fa.hasOwnProperty(a)&& f.event.removeListener(this.Fa[a]);this.cj("lang")},pl:function(){var a=Math.round(this.map.get("zoom")),b=this.map.getResolution(),b=this.sS[a][0]/b,c=this.sS[a][1],c=13>=a?"en"==this.map.getLang()?c+" KM":"zh_en"==this.map.getLang()?c+" \\u516c\\u91cc/KM":c+" \\u516c\\u91cc":"en"==this.map.getLang()?c+" M":"zh_en"==this.map.getLang()?c+" \\u7c73/M":c+" \\u7c73";this.M8(c,b)},show:function(){f.e.add(this.CLASS_NAME,"show");this.Bb({visible:!0});f.event.N(this,"show")},hide:function(){f.e.add(this.CLASS_NAME, "hide");this.Bb({visible:!1});f.event.N(this,"hide")},Rt:function(){var a=[0,0,0,0];if(this.f.K){var b=f.j.me(this.f.K,"width"),c=f.j.me(this.f.K,"height"),b=this.offset.Ae()+parseFloat(b),c=this.offset.Hd()+parseFloat(c);-1!==this.position.indexOf("T")&&(a[0]=c);-1!==this.position.indexOf("R")&&(a[1]=b);-1!==this.position.indexOf("B")&&(a[2]=c);-1!==this.position.indexOf("L")&&(a[3]=b)}return a}});window.AMap.Scale=f.Z_; ')

_jsload_('AMap.MouseTool', 'f.L_=f.ba.extend({ga:[f.ka],B:function(a){this.CLASS_NAME="AMap.MouseTool";this.gd=[];this.sa={};this.ol={};this.h=a;this.mj(a);var b=this;window.AMap.plugin("AMap.RangingTool",function(){b.rj=new f.ON(a);f.event.N(b,"rangingtool-loaded")});window.AMap.plugin("AMap.AutoPanby",function(){b.wO=new f.a_(a)})},mj:function(a){this.h=a;this.sa={Sd:[],tfa:[],sfa:[],Jfa:[],C$:[],xga:[],ima:[],Sma:[],Tma:[]}},kf:function(){return Math.round(1E5*Math.random())},tl:function(){for(;0<this.gd.length;)f.event.removeListener(this.gd.shift()); this.rj&&this.rj.turnOff()},marker:function(a){f.e.add(this.CLASS_NAME,"marker");this.h.set("allBubble",!0);this.tl();a=a||{bubble:!0};var b=this,c=this.h,d=this.sa.Sd;this.gd.push(f.event.addListener(c,"click",function(e){a.position=e.lnglat;e=new w.D.ab(a);e.setMap(c);f.event.N(b,"draw",{obj:e});d.push(e)},c))},polyline:function(a){f.e.add(this.CLASS_NAME,"polyline");this.h.set("allBubble",!0);this.tl();a=a||{};var b=this,c=this.h,d=this.sa.tfa,e=c.getStatus().doubleClickZoom,g=!1,h=!1;this.gd.push(f.event.addListener(c, "click",function(b){if(!1===g)g=new w.D.Fb({path:[b.lnglat,b.lnglat],strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray||[10,5],zIndex:a.zIndex||10,extData:a.extData||{},bubble:!0}),c.setStatus({doubleClickZoom:!1}),g.setMap(c),d.push(g);else{var e=g.getPath();if(h){var m=e.pop();e.push(b.lnglat,m)}else e.push(b.lnglat);g.setPath(e)}},c));this.gd.push(f.event.addListener(c,"mousemove", function(a){if(g){var b=g.getPath();b.pop();b.push(a.lnglat);h=!0;g.setPath(b)}},c,c));this.gd.push(f.event.addListener(c,"dblclick",function(){if(g){var a=g.getPath();h&&a.pop();g.setPath(a);2<=g.getPath().length?f.event.N(b,"draw",{obj:g}):g.setMap(null)}h=g=!1;c.setStatus({doubleClickZoom:e})},c));this.gd.push(f.event.addListener(c,"rightclick",function(){if(g){var a=g.getPath();a.pop();g.setPath(a);2<=g.getPath().length?(d.push(g),f.event.N(b,"draw",{obj:g})):g.setMap(null)}h=g=!1;c.setStatus({doubleClickZoom:e})}, c))},polygon:function(a){f.e.add(this.CLASS_NAME,"polygon");this.h.set("allBubble",!0);this.tl();a=a||{};var b=this,c=this.h,d=this.sa.sfa,e=c.getStatus().doubleClickZoom,g=!1;this.gd.push(f.event.addListener(c,"click",function(b){if(!1===g)g=new w.D.bc({path:[b.lnglat,b.lnglat],strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray|| [10,5],zIndex:a.zIndex||10,extData:a.extData||{},bubble:void 0!==a.bubble?a.bubble:!0}),c.setStatus({doubleClickZoom:!1}),g.setMap(c),d.push(g);else{var e=g.getPath(),l=e.pop();e.push(b.lnglat,l);g.setPath(e)}},c,this));this.gd.push(f.event.addListener(c,"mousemove",function(a){if(g){var b=g.getPath();b.pop();b.push(a.lnglat);g.setPath(b)}},c,this));this.gd.push(f.event.addListener(c,"dblclick",function(){if(g){var a=g.getPath();a.pop();g.setPath(a);2<g.getPath().length?f.event.N(b,"draw",{obj:g}): g.setMap(null)}g=!1;c.setStatus({doubleClickZoom:e})},this));this.gd.push(f.event.addListener(c,"rightclick",function(){if(g){var a=g.getPath();a.pop();g.setPath(a);2<g.getPath().length?(d.push(g),f.event.N(b,"draw",{obj:g})):g.setMap(null)}g=!1;c.setStatus({doubleClickZoom:e})},this))},rectangle:function(a){f.e.add(this.CLASS_NAME,"rectangle");this.h.set("allBubble",!0);this.tl();a=a||{};var b=this,c=this.h,d=this.sa.Jfa,e=c.getStatus().dragEnable,g,h;this.gd.push(f.event.addListener(c,"mousedown", function(b){g||(h=b.lnglat,g=new w.D.bc({path:[b.lnglat],strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray||[10,5],zIndex:a.zIndex||10,extData:a.extData||{},bubble:void 0!==a.bubble?a.bubble:!0}),g.setMap(c),d.push(g));c.setStatus({dragEnable:!1})},this));this.gd.push(f.event.addListener(c,"mousemove",function(a){g&& (a=a.lnglat,a=[h,new f.V(a.O,h.P),a,new f.V(h.O,a.P)],g.setPath(a))},this));this.gd.push(f.event.addListener(c,"mouseup",function(){g&&(f.event.N(b,"draw",{obj:g}),g=!1);c.setStatus({dragEnable:e})},this))},circle:function(a){f.e.add(this.CLASS_NAME,"circle");this.h.set("allBubble",!0);this.tl();a=a||{};var b=this,c=this.h,d=this.sa.C$;c.getStatus();var e;this.gd.push(f.event.addListener(c,"mousedown",function(g){function h(a){c.getSize();c.getSize();a=m.Md(a.lnglat);e.setRadius(a)}function k(){for(b.wO.Nha();0< l.length;)f.event.removeListener(l.shift());d.push(e);f.event.N(b,"draw",{obj:e});e=null;c.setStatus({dragEnable:!0});c.I("mousemove",h,this);f.C.I(document,"mouseup",k,this);c.I("mouseup",k,this)}if(!e){c.setStatus({dragEnable:!1});var l=[],m=g.lnglat;e=new w.D.Pf({center:g.lnglat,radius:1,strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray|| [10,5],zIndex:a.zIndex||10,extData:a.extData||{},bubble:void 0!==a.bubble?a.bubble:!0});b.wO.Oha();e.setMap(c);l.push(f.event.addListener(c,"mousemove",h,this));l.push(f.event.addListener(c,"mouseup",k,this));l.push(f.event.U(document,"mouseup",k,this))}},this))},rule:function(a){function b(a){f.event.N(this,"draw",{obj:a.polyline})}f.e.add(this.CLASS_NAME,"rule");this.h.set("allBubble",!0);this.tl();this.z4=!0;this.rj?(a&&this.rj.Bb(a),this.rj.turnOn(),this.LH||(this.LH=f.event.addListener(this.rj, "end",b,this))):f.event.Yw(this,"rangingtool-loaded",function(){this.z4&&(a&&this.rj.Bb(a),this.rj.turnOn(),this.LH||(this.LH=f.event.addListener(this.rj,"end",b,this)))},this);return this.rj},measureArea:function(a){function b(a){var b=document.createElement("div");b.style.cssText="position:relative;background-color:#FFFFFF;border:1px solid #4B4B4B;border-radius:3px 3px 3px 3px;box-shadow:2px 2px 8px #999999;padding:2px 7px;white-space:nowrap;";var g=a.getArea();b.innerHTML=1E5<g?(1E-6*g).toFixed(2)+ "\\u5e73\\u65b9\\u516c\\u91cc":g.toFixed(1)+"\\u5e73\\u65b9\\u7c73";a=new w.D.ab({position:a.getPath()[0],content:b,offset:new f.G(8,8),bubble:!0});a.la=!0;a.id=c.kf();e[a.id]=a;a.setMap(d)}f.e.add(this.CLASS_NAME,"measureArea");this.h.set("allBubble",!0);this.tl();a=a||{};var c=this,d=this.h,e,g=d.getStatus().doubleClickZoom,h=!1;this.gd.push(f.event.addListener(d,"click",function(b){if(!1===h)h=new w.D.bc({path:[b.lnglat,b.lnglat],strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8, strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray||[10,5],zIndex:a.zIndex||10,extData:a.extData||{},bubble:!0}),h.la=!0,h.id=c.kf(),d.setStatus({doubleClickZoom:!1}),e=c.ol[h.id]={},e[h.id]=h,h.setMap(d);else{var g=h.getPath(),m=g.pop();g.push(b.lnglat,m);h.setPath(g)}},this));this.gd.push(f.event.addListener(d,"mousemove",function(a){if(h){var b=h.getPath();b.pop();b.push(a.lnglat); h.setPath(b)}},this));this.gd.push(f.event.addListener(d,"dblclick",function(){if(h){var a=h.getPath();a.pop();h.setPath(a);2<h.getPath().length?(b(h),f.event.N(c,"draw",{obj:h})):h.setMap(null)}h=!1;d.setStatus({doubleClickZoom:g})},this));this.gd.push(f.event.addListener(d,"rightclick",function(){if(h){var a=h.getPath();a.pop();h.setPath(a);2<h.getPath().length?(b(h),f.event.N(c,"draw",{obj:h})):h.setMap(null)}h=!1;d.setStatus({doubleClickZoom:g})},this))},rectZoomIn:function(a){f.e.add(this.CLASS_NAME, "rectZoomIn");this.h.set("allBubble",!0);this.tl();a=a||{};var b=this.h,c=b.getStatus().dragEnable,d,e,g;this.gd.push(f.event.addListener(b,"mousedown",function(c){d=g=null;e=c.lnglat,g=c.pixel,d=new w.D.bc({path:[c.lnglat],strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,dragEnable:!1,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray||[10,5],zIndex:a.zIndex||10, bubble:!0}),d.la=!0,b.setStatus({dragEnable:!1}),d.setMap(b)},this));this.gd.push(f.event.U(document,"mousemove",function(a){d&&(a=f.C.Gj(a,b.K),b.so(a),a=b.so(a),a=[e,new f.V(a.O,e.P),a,new f.V(e.O,a.P),e],d.setPath(a))},this));this.gd.push(f.event.U(document,"mouseup",function(a){b.setStatus({dragEnable:c});d&&1<d.getPath().length&&(a=f.C.Gj(a,b.K),b.so(a),b.so(a),(3<Math.abs(a.x-g.x)||3<Math.abs(a.y-g.y))&&b.setFitView([d]));d&&d.setMap(null);d=null},this))},rectZoomOut:function(a){f.e.add(this.CLASS_NAME, "rectZoomOut");this.h.set("allBubble",!0);this.tl();a=a||{};var b=this.h,c=b.getStatus().dragEnable,d,e,g,h,k,l;this.gd.push(f.event.addListener(b,"mousedown",function(c){k||(e=c.lnglat,l=c.pixel,k=new w.D.bc({path:[c.lnglat],strokeColor:a.strokeColor||"#1791fc",strokeOpacity:a.strokeOpacity||0.8,strokeWeight:a.strokeWeight||2,fillColor:a.fillColor||"#1791fc",fillOpacity:a.fillOpacity||0.35,strokeStyle:a.strokeStyle||"solid",strokeDasharray:a.strokeDasharray||[10,5],zIndex:a.zIndex||10,bubble:!0}), k.la=!0,b.setStatus({dragEnable:!1}),k.setMap(b))},this));this.gd.push(f.event.addListener(b,"mousemove",function(a){k&&(g=a.lnglat,h=new f.V(g.O,e.P),d=new f.V(e.O,g.P),k.setPath([e,h,g,d,e]))},this));this.gd.push(f.event.U(document,"mouseup",function(a){b.setStatus({dragEnable:c});if(k&&1<k.getPath().length&&(a=f.C.Gj(a,b.K),b.so(a),b.so(a),!a.rb(l))){b.getBounds();a=(e.O+h.O)/2;var d=(e.P+h.P)/2;b.setZoomAndCenter(b.get("zoom")-1,new f.V(a,d))}k&&k.setMap(null);k=l=null},this))},close:function(a){f.e.add(this.CLASS_NAME, "close");this.h.set("allBubble",!1);this.tl();var b;if(a){for(b in this.sa)if(this.sa.hasOwnProperty(b))for(;0<this.sa[b].length;)a=this.sa[b].shift(),a.setMap(null);for(b in this.ol)if(this.ol.hasOwnProperty(b)){for(var c in this.ol[b])this.ol[b].hasOwnProperty(c)&&(a=this.ol[b][c],a.setMap(null),this.ol[b][c]=null,delete this.ol[b][c]);this.ol[b]=null;delete this.ol[b]}this.rj&&this.rj.turnOff(!0)}}});window.AMap.MouseTool=f.L_; ')

_jsload_('cmng', 'f.w.zv=f.ba.extend({B:function(){this.jb=2;this.yN=f.l.yj?16:12;this.xga={road:0,region:0,building:1,poilabel:1,roadlabel:1};this.Or=[new f.ff,new f.ff,new f.ff,new f.ff,new f.ff,new f.ff,new f.ff];this.Aia=[{type:"roadlabel",show:!0,Wg:1},{type:"poilabel",show:!0,Wg:1},null,{type:"region",show:!0,Wg:0},{type:"road",show:!0,Wg:0},{type:"building",show:!0,Wg:0},null];this.Mm=0},jC:function(a,b,c,d,e){if("first"!==b)if(c&&c.wa&&c.Fc)c.Fc.wa||(c.Fc.sc=c.sc,c.Fc.qa=c.Fc.QB=c.Fc.wa=!0);else{c&&(c.lc=d); var g;switch(e){case "roadlabel":g=0;break;case "poilabel":g=1;break;case "labels":g=2;break;case "region":g=3;break;case "road":g=4;break;case "building":g=5;break;case "allbase":g=6}d=this.Or[g].iia;c&&c.tg&&(d=this.Or[g].push);"groupcomplete"===b?d.call(this.Or[g],["groupcomplete",g,c,a]):"tileComplete"===b?d.call(this.Or[g],["co",7,c,a]):(d.call(this.Or[g],["co",g,c,a]),""!==b&&d.call(this.Or[g],[b,g,c,a]));this.Mm>g&&(this.Mm=g);this.mha()}},uX:function(){var a=new Date,b=!1;do if(b=this.parse(), new Date-a>=this.yN)break;while(!b);this.oX=b?null:f.a.nc(this.uX,this)},mha:function(){this.oX||(this.oX=f.a.nc(this.uX,this))},eU:function(){return document.createElement("canvas")},parse:function(){var a,b=!1,c=this.Mm,d=this.Or[this.Mm];if(d.Oo())6===c&&(b=!0),this.Mm=(this.Mm+1)%7;else{a=d.gea();var e=a[3],g=e.ja?512:256;if("groupcomplete"===a[0])e.set("display",0);else{var h=a[2],k=h.lc,l,m=h.key+(18<k?"/"+k:"");if(e.xa.Bc(m))if("co"===a[0])if(3===a[1])this.KL(e,h,g),h.Pa.region&&e.mb.MD(h.Pa.region, 0,h.ma.z);else if(4===a[1])this.KL(e,h,g),h.Pa.road&&e.mb.fY(h.Pa.road,h.ma.z);else if(5===a[1]&&h.Pa&&h.Pa.building)if(a=f.hh&&f.hh.dW(e.h.J),e.od){if(h.xe=h.Pa.building,18<k)for(a=h.ma,l=Math.pow(2,k-18),g=0;g<l;g+=1)for(m=0;m<l;m+=1){var n=e.xa.get(k+"/"+(l*a.x+g)+"/"+(l*a.y+m));n&&(n.xe=h.xe)}}else this.KL(e,h,g),e.mb.MD(h.Pa.building,1,h.ma.z,void 0,a);else{if(7===a[1])if(18<k){a=h.ma;l=Math.pow(2,k-18);for(n=0;n<l;n+=1)for(var p=0;p<l;p+=1){var q=e.xa.get(k+"/"+(l*a.x+n)+"/"+(l*a.y+p));if(q&& (q.wa=q.qa=!0,h.sc)){q.sc=this.eU();q.sc.width=q.sc.height=g;q.sc.getContext("2d").drawImage(h.sc,-n*g,-p*g);e.dv&&0===(q.ma.x+q.ma.y)%2&&q.sc.getContext("2d").drawImage(e.dv,0,0);q.status="loaded";if(!f.l.Z&&!e.h.cc&&q.sc.toDataURL){var r=document.createElement("img");r.src=q.sc.toDataURL();q.sc=r}q.QB=!0}}e.xa.Bn(m)}else h.sc&&(e.dv&&0===(h.ma.x+h.ma.y)%2&&h.sc.getContext("2d").drawImage(e.dv,0,0),h.QB=!0,h.Fc&&(h.Fc.QB=h.Fc.qa=!0),f.l.Z||e.h.cc||!h.sc.toDataURL||(r=document.createElement("img"), r.src=h.sc.toDataURL(),h.sc=r)),h.dD&&(h.dD.je=null,h.dD=null),h.wa=h.qa=!0,h.Fc&&(h.Fc.wa=h.Fc.qa=!0)}else f.C_.Yea(h,a[0],this.Aia[a[1]].type,e)}d.Oo()&&(6===c&&(b=!0),this.Mm=(this.Mm+1)%7)}return b},KL:function(a,b,c){a.mb||(a.mb=new f.Q.canvas.Vc.Gc(a),a.mb.T=a.h.T);var d=18<b.lc?Math.pow(2,18-b.lc):1;b.sc||(b.sc=this.eU(),b.sc.width=b.sc.height=c/d,b.QB=!1);b.sc&&(a.mb.Qa=b.sc,a.mb.Ze=d)}});f.w.zv.Eh=new f.w.zv; ')

_jsload_('labelcanvas', 'f.C_={lna:f.l.Z?1:2,Kna:f.l.Z?44:22,Hla:f.l.Z?22:11,wT:f.l.Z?15:7,GK:f.l.cd?360:256,Yea:function(a,b,c,d){for(var e=0;e<b.length;e+=1)this.$ea(a,b[e],d,c);return b},$ea:function(a,b,c,d){var e=c.ja,g=f.l.ky&&f.l.dM?"800":"400";if("roadlabel"===d)if(d=b.Ud[0],g=this.tV(a,d[0],d[1],d[2],d[3],d[4],g,d[5],null,c.ja),b.Ba.push(g),b.ke=g.ke,1<d[0].length||d[6]){a=Math.ceil(g.Qi/2);c=g.Qi;b.vb.length&&b.kx&&(e=(c+(e?16:10))/b.vb[0][2],b.vb[0][0]*=e,b.vb[0][2]*=e);if(e=d[5])c=Math.min(e,c),a=Math.min(Math.floor(e/ 2),a);d=d[2];b.vb.push([-a,-Math.ceil(d/2),c,d,g.uL,g.vL,g.Qi,g.ke])}else d=g.Qi,a=-Math.floor(g.ke/2),b.vb.push([-Math.floor(d/2),a,g.Qi,g.Ym-1,g.uL,g.vL,g.Qi,g.Ym]);else{if(f.A.hea)return null;b.dn=1;if(b.Ud&&0<b.Ud.length)for(e=0;e<b.Ud.length;e+=1)d=b.Ud[e],g=this.tV(a,d[0],d[1],d[2],d[3],d[4],null,d[5],d[7],c.ja),b.kx&&g.Qi>b.kx&&(b.vb[0][0]=-Math.ceil(g.Qi/2)-10,b.vb[0][2]=g.Qi+20),b.ke=g.ke,d[5]&&(d[8][0]=-Math.min(g.Qi/2,d[5]/2)),b.Ba.push(g),b.vb.push([d[8][0],d[8][1],d[7]?g.Qi:Math.min(d[8][2], g.Qi),g.Ym,g.uL,g.vL,g.Qi,g.Ym])}return b},Kka:function(){return document.createElement("img")},xV:function(a){return Math.min(Math.max(100*(a-this.wT),400),500)+""},tV:function(a,b,c,d,e,g,h,k,l,m){k=a.dD;k||(k=f.j.create("canvas"),a.dD=k,k.width=k.height=this.GK,k.jX=k.kX=0,k.je=k.getContext("2d"),k.je.lineWidth=2);var n=k.je;h=h||this.xV(d);a=m?2:1;var p=l?2*a:0,q=d+5*a,r=k.jX,s=k.kX;r+((d+2)*b.length+2)>this.GK&&(r=0,s+=k.maxHeight,s>this.GK&&(k.maxHeight=0));k.maxHeight=Math.max(k.maxHeight|| 0,q);n.font=h+" "+d+"px "+c;d=parseInt(n.font);if(100<d||!d)d=parseInt(n.font.split(" ")[1]);g&&(c=m?3:2,n.lineWidth!==c&&(n.lineWidth=c),n.strokeStyle!==g&&(n.strokeStyle=g),n.strokeText(b,r+p,s+d));g=Math.ceil(n.measureText(b).width);l&&(n.fillStyle!==l&&(n.fillStyle=l),n.fillRect(r,s,g+4*a,d+(m?6:3)+f.l.Z));n.fillStyle!==e&&(n.fillStyle=e);n.fillText(b,r+p,s+d);b=k;g=l?g+6*a:g;k.jX=r+g+1;k.kX=s;b.ke=d;b.DE=g;b.Ym=Math.max(q,d+(m?6:3)+f.l.Z);b.uL=r;b.vL=s;b.Qi=g;return b}};f.Q.canvas.bF=f.Q.canvas.Lh.extend({B:function(a,b){arguments.callee.oa.apply(this,arguments);a.h.J.en&&this.cx(a,b);this.Oj=!1;this.cq=f.w.zv.Eh;a.h.g("zoomend",this.Ii,this);a.h.g("moveend",this.Ii,this)}});f.l.Uy&&!f.FI&&(f.FI=function(){function a(a,h,k,l){var m=a.dd,n=a.Ca.slice(1),p=a.li,q=a.Rd,r=k?15:7,s,u=[];e=[];for(var v=[],x=0,t=n.length;x<t;x+=1){var y=n[x][0];s=n[x][1].split("&");var A=parseInt(s[1]);if(!q){var z="Microsoft YaHei",N=b(s[2]),I=null;A>=r&&(z="SimHei");"roadlabel"===m&&(z="Arial Narrow,Arial");s[3]&&(I=b(s[3]));y.font=z;y.IU=N;y.strokeColor=I;y.uca=b(s[4]);y.br=s[5]}s=s[0];h&&(A*=c);y.fontSize=Math.round(A);y.Xe=s;for(A=0;A<y.length;A+=1){N=y[A];N.Ou=N[0];s=N[1];var C=d,z="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM", C=C||"v5",H=I=void 0;"v5"<C?(I=z.length,H=512):(I=27,z=z.substr(0,27),H=333);for(var F=C=void 0,B=void 0,D=void 0,E=void 0,F=[],B=NaN,D=0,E=s.length;D<E;D++)C=s[D],C=z.indexOf(C),isNaN(B)?B=C*I:(F.push(B+C-H),B=NaN);s=F;if(!(0>s[0]||256<=s[0]||0>s[1]||256<=s[1])){I=z=0;H=1;z=256*p.x;I=256*p.y;H=p.S;s={Na:[(z+s[0])*H,(I+s[1])*H],name:"aw"===N[0]?"\\u2191":N[0].replace("^",""),Ad:s,Ba:[],vb:[],visible:!0,Wj:!0};if("roadlabel"===m){s.Tb=n[x][3];var z=s,I=y,F=q,G=p,H=h,C=k,D=l,E=!1;z.Oi=!0;B="";if((B= I.Xe)&&N[3]){E=void 0;if("v4"===d){var E=D+offlineMap.domain+"icons/"+(C||H?"b":"n")+(10>G.z?"39":"18")+"/1/",G=N.Ou,K=!1;153===B&&(0===G.indexOf("G")?(B="153g",K=!0):0===G.indexOf("S")&&(B="153s",K=!0));if(151===B||150===B)K=!1,0===G.indexOf("G")&&(B=150,K=!0),0===G.indexOf("S")&&(B=151,K=!0);152===B&&(B=151);!0===K&&(E=D+offlineMap.domain+"theme/v1.3/icons/"+(C||H?"b/":"n/"));D=E+B+".png";e.push(D);z.Ba.push(D);E=N[3];H&&(E[0]*=c,E[1]*=c,E[2]*=c,E[3]*=c)}else if("v5"<=d){D=D+offlineMap.domain+"style_icon/icon-normal-"+ (C||H?"big":"small")+".png";z.Ba.push(D);B=parseInt(B)-1;D=Math.floor(B/10);E=B%10;B=K=G=0;H?(G=48,K=40,B=28):C?(G=K=40,B=28):(G=K=24,B=20);var J=z.name.length*(H?14:10),E=[-J/2,-G/2*1.1,J,1.1*G,K*E,K*D,K,K];z.kx=B;z.ke=7}z.vb.push(E);E=!0}B=void 0;F?N[4]&&(B=F.u,z.Ba.push(B),H=F.b[N[4][0]],z.ke=I.fontSize,z.vb.push([-Math.floor(H[2]/2),-Math.floor(H[3]/2)+1,H[2],H[3],H[0],H[1],H[2],H[3]])):(D=F=0,B=I.strokeColor,E&&(I.fontSize=Math.min(18,I.fontSize)),E&&"v4"===d?(C?(F=44,D=13):(F=21,D=9),H&&(F*= c,D*=c),B=""):z.kx=H?28:16,z.Ud||(z.Ud=[]),z.Ud.push([z.name,I.font,E&&!H?9:I.fontSize,I.IU,B,F,D,E]));z.Er=N[2]?"\\u2191"!==N[0]&&(15>N[2]%90||75<N[2]%90)?90*Math.floor((N[2]+15)/90):N[2]:0}else if("poilabel"===m){s.Wk=0>n[x][2]?0:n[x][2];n[x][3]?2E4<s.Wk?20008<s.Wk?s.Tl=4:20007<s.Wk?s.Tl=5:20004<s.Wk?s.Tl=7:20002<s.Wk&&(s.Tl=8):s.Tl=10===a.li.z?9:n[x][3]:s.Tl=3;s.Tb=n[x][4];s.Fq=n[x][5];z=s;I=y;H=q;K=p;C=h;F=k;J=l;z.dn=1;B=N.Ou.split("^");D=N[2];E=I.Xe;G=!1;if(E&&N[3]){G=void 0;if("v4"===d)G=J+offlineMap.domain+"icons/"+ (F||C?"b":"n")+(10>K.z?"39":"18")+"/1/"+E+".png",z.Ba.push(G),e.push(G),G=N[3],"334"===E&&C&&(G[0]=G[1]=-7,G[3]=G[2]=15),"445"===E&&C&&(G[0]=-3,G[1]=-6,G[3]=13,G[2]=6),"301"===E&&C&&(G[1]=G[0],G[3]=G[2]),C&&(G[0]=Math.round(G[0]*c),G[1]=Math.round(G[1]*c),G[2]=Math.round(G[2]*c),G[3]=Math.round(G[3]*c));else if("v5"<=d){G=J+offlineMap.domain+"style_icon/icon-"+("1"===I.br?"biz-":"normal-")+(F||C?"big":"small")+".png";z.Ba.push(G);var E=parseInt(E)-1,G=Math.floor(E/10),K=E%10,O=J=0;C?(J=48,O=40):J= F?O=40:O=24;G=[-J/2,-J/2,J,J,O*K,O*G,O,O];if(151===E||152===E||153===E)z.kx=C?20:10}z.Xe=E;z.br=parseInt(I.br,10);z.ke=7;z.vb.push(G);G=!0}if(0<D.length)for(var M=void 0,K=0;K<D.length;K+=1)if(H)N[6]&&(z.Ba.push(H.u),M=H.b[N[6][K]],z.ke=I.fontSize,C&&(D[K][0]=Math.round(D[K][0]*c),D[K][1]=Math.round(D[K][2]*c)),J=D[K][0],O=G?Math.min(D[K][2],M[2]):M[2],"v4"!==d||"375"!==E&&"3751"!==E||(O=Math.min(D[K][2],14),J=-Math.floor(O/2)),z.vb.push([J,D[K][1]-(C?4:2),O,M[3],M[0],M[1],M[2],M[3]]));else{var T= 0;z.Ud||(z.Ud=[]);var U=I.fontSize,M=B[K],J=D[K][0],U=D[K][1]+K,O=D[K][2],Y=D[K][3];"v4"!==d||"375"!==E&&"3751"!==E||(U=12,T=15,O=Math.min(T,O),C&&(Math.round(U*c),T=Math.round(T*c)),U=-5);C&&(J=Math.round(J*c),U=Math.round(U*c),O=Math.round(O*c),Y=Math.round(Y*c));U-=F?3:1;z.Ud.push([M,I.font,I.fontSize,I.IU,I.strokeColor,T,0,I.uca,[J,U,O,Y]])}N[4]&&(z.Vk=N[4]);N[5]&&(z.Hl=N[5]);s.Hl&&v.push(s.Hl)}u.push(s)}}}a.Ca=u;v.length&&(a.Lk=v);return[a,e]}function b(a){if(!a)return"";for(var b=[],c=0,d=a.length;c< d;c+=2)b.push(parseInt(a.substr(c,2),16));b.push((b.shift()/255).toFixed(2));return"rgba("+b.join(",")+")"}var c,d,e=[];return{parseLabel:function(b,e){function k(a){var b=a.Ca;q&&b&&1<b.length&&b.slice(1).forEach(function(b){if(b&&null===b[1]){var c=b.length-1,d=q[b[c]];b[1]=d.browserStyle[d.levelStyleMapping[l]];"4"!==b[c].charAt(0)&&"roadlabel"===a.dd&&(b[1]=b[1][1])}})}d=b.Ed;var l=b.eu,m=b.Eu;c=b.lY;var n=b.Z,p=b.Afa,q=null,r=[];b.Nc&&(q=b.Nc.stylemaps);for(var s=0,u=b.Rc.length;s<u;s+=1){var v= b.Rc[s];k(v);v=a(v,m,n,p);r.push.apply(r,v[1])}delete b.Nc;e(null,{data:b,icons:r.length?r:null})},postStyle:function(){}}},f.ju.Mj("label",f.FI),f.qi&&f.qi.Mj(null,f.FI,function(a){a||(f.qi.Cia=!0)})); ')

_jsload_('AMap.PolyEditor', 'f.R_=f.ba.extend({ga:[f.ka],B:function(a,b){this.h=a;this.hd=b;this.qb=f.A.qb;this.CLASS_NAME="AMap.PolyEditor"},gU:function(){this.Xa||this.Sp();for(var a=0;a<this.Xa.length;a+=1)for(var b=this.Xa[a],c=0;c<b.length;c+=1)b[c].setMap(this.h),b[c].nl&&b[c].nl.setMap(this.h)},VX:function(){if(this.Xa){for(var a=0;a<this.Xa.length;a+=1)for(var b=this.Xa[a],c=0;c<b.length;c+=1)b[c].setMap(null),b[c].Uh(),b[c].nl&&(b[c].nl.setMap(null),b[c].nl.Uh());delete this.Xa}},open:function(){f.e.add(this.CLASS_NAME, "open");this.gU();this.hd.g("setPath",this.wX,this)},wX:function(){this.VX();this.gU()},close:function(){f.e.add(this.CLASS_NAME,"close");this.VX();this.hd.I("setPath",this.wX,this);f.event.N(this,"end",{type:"end",target:this.hd})},Sp:function(){this.Xa=[];var a=this.hd.getPath();if(a.length){a[0]instanceof f.V&&(a=[a]);this.Wp=a;for(var b=0;b<a.length;b+=1){var c=a[b];this.Xa[b]=[];for(var d=0,e=0,g=0,d=0,g=c.length;d<g;d+=1)e=this.Kg(c[d],d,b),e.g("click",this.iH,this),this.Xa[b].push(e);d=0;for(e= g-1;d<g;e=d,d+=1)if(0!==d||w.D.bc&&this.hd instanceof w.D.bc)c=this.Xa[b][e],e=this.Xa[b][d],this.$z(c,e,b),this.CB(c,e)}}},Kg:function(a,b,c){var d=new w.D.ab({position:a,draggable:!0,icon:new w.D.Gg({size:new f.Uc(11,11),imageOffset:new f.G(0,0),image:this.qb+"/images/dd-via.png"}),offset:new f.G(-6,-6),cursor:"pointer",zIndex:this.hd.get("zIndex")+1E3});d.la=!0;d.bka=a;d.fw=b;d.pj=c;d.g("dragging",this.sk,this);d.g("dragend",function(a){this.hl(a);var b={target:this.hd};b.lnglat=a.target.getPosition(); a=this.h.lngLatToContainer(b.lnglat);b.pixel=new f.G(a.x,a.y,1);f.event.N(this,"adjust",b)},this);return d},cB:function(a){var b=a.fw;a.setMap(null);this.Xa[a.pj].splice(b,1);this.Wp[a.pj].splice(b,1);this.Hr(this.Wp,!0);this.$S(this.Xa[a.pj]);a.I("dragging",this.sk,this).I("dragend",this.hl,this).I("click",this.iH,this)},hl:function(){this.hd.$aa=!0;this.hd.r("edit")},sk:function(a){a=a.target;a.Hc=!0;a.rw&&a.rw.setPosition(this.oG(a.dt,a));a.nl&&a.nl.setPosition(this.oG(a,a.Xs));this.Wp[a.pj][a.fw]= a.getPosition();this.Hr(this.Wp,!0)},iH:function(a){if(a.target.Hc||this.Wp[a.target.pj].length<=(this.hd instanceof w.D.Fb?2:3))a.target.Hc=!1;else{var b=a.target;this.cB(b);var c={target:this.hd};c.lnglat=a.target.getPosition();a=this.h.lngLatToContainer(c.lnglat);c.pixel=new f.G(a.x,a.y,1);f.event.N(this,"removenode",c);this.CB(b.dt,b.Xs);b.rw&&b.rw.setMap(null);b.nl&&b.nl.setMap(null);b.dt&&b.Xs?this.$z(b.dt,b.Xs,b.pj):b.dt?b.Xs||(b.dt.nl=null):b.Xs.rw=null;this.hl()}},$S:function(a){for(var b= 0,c=a.length;b<c;b+=1)a[b].fw=b},Hr:function(a){this.hd&&(this.hd instanceof w.D.Fb?a=a[0]:1!==a.length||a[0]instanceof f.V||(a=a[0]),this.hd.setPath(a,!0))},$z:function(a,b,c){var d=this.oG(a,b),e=this.Kg(d),g,h,k;e.setOpacity(0.5);e.pj=c;a.nl=b.rw=e;h=function(){var c=b.fw;e.fw=c;e.Hc=!0;e.I("click",g,this).g("click",this.iH,this);d=e.getPosition();this.Wp[e.pj].splice(c,0,d);this.Hr(this.Wp,!0);this.Xa[e.pj].splice(c,0,e);e.setOpacity(1);this.$S(this.Xa[e.pj]);this.CB(a,e);this.CB(e,b)};k=function(c){e.Hc= !1;e.I("dragstart",h,this);e.I("dragend",k,this);if(e.getMap()){var d={target:this.hd};d.lnglat=c.target.getPosition();c=this.h.lngLatToContainer(d.lnglat);d.pixel=new f.G(c.x,c.y,1);f.event.N(this,"addnode",d);this.$z(a,e,e.pj);this.$z(e,b,e.pj)}};g=function(a){h.call(this);k.call(this,a);this.hl()};e.g("click",g,this).g("dragstart",h,this).g("dragend",k,this);e.setMap(this.h)},CB:function(a,b){a&&(a.Xs=b);b&&(b.dt=a)},oG:function(a,b){var c=this.h,d=c.Xb(a.getPosition()),e=c.Xb(b.getPosition()); return c.Ag(d.add(e).vc(2))}});window.AMap.PolyEditor=f.R_; ')

_jsload_('AMap.DistrictSearch', 'f.i_=f.ba.extend({ga:[f.ka],B:function(a){this.CLASS_NAME="AMap.DistrictSearch";f.e.cb(this.CLASS_NAME,a);this.url=f.A.ud+"/v3/config/district";this.mj(a)},mj:function(a){a||(a={});this.F=f.extend(a,{extensions:a.extensions||"base",key:f.A.key,s:"rsv3",output:"json"})},setLevel:function(a){f.e.add(this.CLASS_NAME,"setLevel");this.F.level=a},setExtensions:function(a){f.e.add(this.CLASS_NAME,"setExtensions");this.F.extensions=a},setSubdistrict:function(a){f.e.add(this.CLASS_NAME,"setSubdistrict");this.F.subdistrict= a},search:function(a,b){f.e.add(this.CLASS_NAME,"search");var c=[],d=this.F,e;for(e in d)d.hasOwnProperty(e)&&c.push(e+"="+d[e]);c.push("keywords="+this.da(a));c=this.url+(0<c.length?"?"+c.join("&"):"");c=new f.Sa.bb(c,{callback:"callback"});c.g("complete",function(a){this.ac(a,b)},this);c.g("error",function(a){this.Mb(a,b)},this)},ac:function(a,b){var c="1"===a.status&&this.Dd(a.districts)&&0<a.districts.length,d="ok"===a.info.toLowerCase()&&this.Dd(a.districts)&&0===a.districts.length;c?(c={info:a.info, districtList:this.SR(a.districts)},w.event.N(this,"complete",c),b&&"function"===typeof b&&b("complete",c)):(d?w.event.N(this,"error",{info:"NO_DATA",districtList:[]}):w.event.N(this,"error",{info:a.info,districtList:[]}),b&&"function"===typeof b&&b("no_data",{}))},Mb:function(a,b){w.event.N(this,"error",a);b&&"function"===typeof b&&b("error",a.info)},SR:function(a){var b,c,d,e,g,h=[];for(b=0;b<a.length;b+=1){if("all"===this.F.extensions){c=a[b].polyline;if("string"===typeof c&&0<c.length){a[b].boundaries= [];g=this.da(c).split("|");for(var k=0,l=g.length;k<l;k+=1){d=this.da(g[k]).split(";");h=[];for(c=0;c<d.length;c+=1)e=d[c].split(","),h.push(new f.V(parseFloat(e[0]),parseFloat(e[1])));a[b].boundaries.push(h)}}else a[b].boundaries=[];delete a[b].polyline}"string"===typeof a[b].center&&0<a[b].center.length&&(c=a[b].center.split(","),a[b].center=new f.V(c[0],c[1]));c=a[b].districts;this.Dd(c)&&0<c.length&&(a[b].districtList=this.SR(c));delete a[b].districts}return a},Dd:function(a){return"[object Array]"=== Object.prototype.toString.call(a)},da:function(a){return"string"===typeof a?a:""},$d:function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}});window.AMap.DistrictSearch=f.i_; ')

_jsload_('imagelayer', 'f.Q.Gd.uz=f.Q.oc.extend({B:function(a,b){this.aD=!0;arguments.callee.oa.apply(this,arguments);this.xb=document.createElement("div")},$h:function(){this.xb.aD=!0;return this.xb},eD:function(a){function b(){!c.q.wa&&c.q&&(c.q.wa=!0,c.q.$c?c.q.ha("renderComplete"):(c.q.$c=!0,c.q.ha("complete")))}var c=this,c=this;switch(this.q.ia.CLASS_NAME){case "AMap.GroundImage":case "AMap.ImageLayer":if(!this.dg||a!==this.dg){if(!this.Hb){var d=document.createElement("img");this.xb.appendChild(d);this.Hb=d}this.Hb.onload= this.Hb.onerror=b;this.Hb.src=a}break;case "AMap.CanvasLayer":this.dg&&a===this.dg||(this.Hb=a,this.dg&&this.xb.removeChild(this.dg),this.xb.appendChild(a),b());break;case "AMap.VideoLayer":if(!this.dg||a!==this.dg)if(this.Hb||(d=document.createElement("video"),this.xb.appendChild(d),this.Hb=d),f.j.Gy(this.Hb),this.Hb.loop=this.q.ia.get("loop"),this.Hb.autoplay=this.q.ia.get("autoplay"),this.Hb.onloadeddata=this.Hb.onerror=b,a instanceof Array)for(d=0;d<a.length;d+=1){var e=document.createElement("source"); e.src=a[d];this.Hb.appendChild(e)}else e=document.createElement("source"),e.src=a,this.Hb.appendChild(e)}this.dg=a},fc:function(a,b){var c=a.W,d=c.eb,c=c.S;this.eD(b.dg);var e=b.H,g=new f.G(e[0],e[1]),e=new f.G(e[2],e[3]),h=d.Va(g).vc(c),d=h.x,h=h.y,c=e.Va(g).vc(c);this.aV(this.Hb,-d,-h,c.x,c.y,b.opacity);this.Ne(a)},Ne:function(){this.transform={translate:{x:0,y:0},scale:1,rotate:0}}});f.w.rv=f.w.oc.extend({B:function(a,b){arguments.callee.oa.apply(this,arguments);this.he("__source__ zooms loop visible bounds options".split(" "),a);this.set("display");this.UB=this.Vy=this.aD=!0},__source__Changed:function(){this.Vy=!0;this.set("display")},boundsChanged:function(){this.UB=!0},optionsChanged:function(){this.H=null;this.set("display")},opacityChanged:function(){var a=this.get("opacity");this.opacity=Math.min(Math.max(0,a),1);(a=this.xb)&&a.childNodes&&this.kM(a.childNodes[0]);this.h&& this.h.J&&"3D"==this.h.J.view.type&&this.set("display")},loopChanged:function(){if("AMap.VideoLayer"===this.ia.CLASS_NAME){var a=this.ia.getElement();a&&(a.loop=this.get("loop"))}},autoplayChanged:function(){if("AMap.VideoLayer"===this.ia.CLASS_NAME){var a=this.ia.getElement();a&&(a.autoplay=this.get("autoplay"))}},Wm:function(){return{H:this.KJ(),dg:this.get("__source__"),ed:this.get("zooms"),visible:this.get("visible"),opacity:this.get("opacity")}},vl:function(a){if(f.Q.Gd.uz)return new f.Q.Gd.uz(this, a)},wl:function(a){return new f.Ja.uz(this,a)}}); ')
	
_jsload_('AMap.RangingTool', 'f.ON=f.ba.extend({ga:[f.ka],ah:".amap-ranging-label{_width:10px;font-size:12px;line-height:14px;background:#fff;border:solid 1px #ccc;padding:3px 7px 3px 2px;white-space:nowrap}.amap-ranging-label span{height:12px;vertical-align:center;display:inline-block;white-space:nowrap;margin-left:5px}.amap-ranging-label span img{margin-top:-2px;_margin-bottom:3px;+margin-top:2px}.amap-ranging-label span .delimg{margin-bottom:-3px;_margin-bottom:0;+margin-top:-1px}",B:function(a,b){this.CLASS_NAME="AMap.RangingTool"; f.e.cb(this.CLASS_NAME,b);this.Rf={Ln:0,Ip:1,Av:2};if(!a)throw"\\u521b\\u5efaAMap.RangingTool\\u5b9e\\u4f8b\\u5fc5\\u987b\\u4f20\\u5165\\u5730\\u56fe\\u5bf9\\u8c61\\u4f5c\\u4e3a\\u7b2c\\u4e00\\u4e2a\\u53c2\\u6570: new AMap.RangingTool(mapObj);";this.h=a;b=b||{};for(var c=f.A.qb+"/images/pldot.png",d=new f.Uc(12,12),e=new f.G(6,6),g=[],h=new f.G(-6,6),k=0;3>k;k+=1)g.push({icon:new w.D.Gg({size:d,imageOffset:new f.G(-12*k,0),image:c,anchor:e}),offset:new f.G(-6,-6),cursor:"pointer",bubble:!0,draggable:!1,zIndex:120}); this.startMarkerOptions=g[0];this.midMarkerOptions=g[2];this.endMarkerOptions=g[1];this.lineOptions=this.tmpLineOptions={strokeColor:"#1791fc",strokeOpacity:0.8,strokeWeight:2,bubble:!0,draggable:!1};this.startLabelText="\\u8d77\\u70b9</div>";this.midLabelText="{d}\\u516c\\u91cc</div>";this.endLabelText="\\u5171{d}\\u516c\\u91cc</div>";this.startLabelOffset=this.midLabelOffset=this.endLabelOffset=h;this.WI=1E3;1===b.d&&(this.WI=1,this.midLabelText="{d}\\u7c73</div>",this.endLabelText="\\u5171{d}\\u7c73</div>"); this.Gaa="<img src=\'"+f.A.qb+"/images/remove.png\' />";this.Faa="<img class=\'delimg\' src=\'"+f.A.qb+"/images/destroy.png\' />";this.YK(this,b);this.kl=null;this.Pg=this.Rf.Ln},Bb:function(a){this.YK(this,a)},YK:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c],"tmpLineOptions"===c||"lineOptions"===c)&&(a[c].bubble=!0)},sia:function(a,b){var c={position:[void 0,"setPosition"],draggable:[!1,"setDraggable"],angle:[0,"setRotation"],content:[void 0,"setContent"],icon:[void 0,"setIcon"],offset:[void 0, "setOffset"],cursor:["default","setCursor"],zIndex:[100,"setzIndex"],opacity:[1,"setOpacity"]},d;for(d in c)if(c.hasOwnProperty(d)){var e=b[d]||c[d][0];if(void 0!==e)a[c[d][1]](e)}},turnOn:function(){f.e.add(this.CLASS_NAME,"turnOn");this.Pg===this.Rf.Ln&&(this.WQ(),this.KO=this.h.getStatus().doubleClickZoom,this.h.setStatus({doubleClickZoom:!1}));f.event.N(this,"turnon")},turnOff:function(a){f.e.add(this.CLASS_NAME,"turnOff");this.Pg===this.Rf.Ip?(this.V7(),this.h.setStatus({doubleClickZoom:this.KO})): this.Pg===this.Rf.Av&&(this.aq(),this.gT(),this.h.setStatus({doubleClickZoom:this.KO}));a&&this.f8();f.event.N(this,"turnoff")},WQ:function(){this.h.g("click",this.lH,this,!0);this.Pg=this.Rf.Ip},V7:function(){this.h.I("click",this.lH,this);this.Pg=this.Rf.Ln},W7:function(){this.h.g("click",this.YQ,this);this.h.g("mousemove",this.Xn,this);this.h.g("rightclick",this.aq,this,!0);this.h.g("dblclick",this.aq,this,!0);this.F4=f.event.U(document,"keydown",this.QA,this);this.Pg=this.Rf.Av},gT:function(){this.h.I("click", this.lH,this);this.h.I("click",this.YQ,this);this.h.I("mousemove",this.Xn,this);this.h.I("rightclick",this.aq,this);this.h.I("dblclick",this.aq,this,!0);f.event.removeListener(this.F4);this.Pg=this.Rf.Ln},o9:function(){this.gT();this.WQ();this.Pg=this.Rf.Ip},lH:function(a){this.h.set("allBubble",!0);var b={va:this.kl},c={qj:a.lnglat};b.tm=c;this.kl&&(this.kl.next=b);this.Oea=this.h.get("dragEnable");this.h.set("dragEnable",!1);this.kl=b;this.Gw(c,this.startMarkerOptions);this.gt(c,this.startLabelText, this.startLabelOffset,this.Ks(c,b));this.W7();f.event.N(this,"addnode",{position:a.lnglat,marker:c.yb})},YQ:function(a){var b=this.kl,c=b.tm,d={qj:a.lnglat,va:c};c&&c.qj.rb(a.lnglat)?this.aq():(c.next=d,b.tm=d,this.Gw(d,this.midMarkerOptions),this.gt(d,this.midLabelText,this.midLabelOffset,this.Ks(d,b)),this.oS(b),this.zk&&this.zk.setPath([a.lnglat,a.lnglat]),f.event.N(this,"addnode",{position:a.lnglat,marker:d.yb}))},Xn:function(a){var b=this.kl,c=b.tm.qj;this.zk||(this.zk=new w.D.Fb(this.tmpLineOptions), this.zk.name="tmpLine",this.zk.setMap(this.h));this.zk.la=!0;this.zk.setPath([c,a.lnglat]);c=this.zk.getLength();b.Re&&(c+=b.Re.getLength());f.event.N(this,"move",{position:a.lnglat,distance:c,target:this})},QA:function(a){27===a.keyCode&&this.aq()},aq:function(){this.h.set("allBubble",!1);var a=this.kl,b=a.tm;this.h.set("dragEnable",this.Oea);this.endMarkerOptions.bubble=!1;b.va?(this.Gw(b,this.endMarkerOptions),this.gt(b,this.endLabelText,this.endLabelOffset,this.Ks(b,a),this.QP(a))):this.dB(a); this.o9();this.zk&&(this.zk.setMap(null),this.zk=null);a.Re?(a.Re.setOptions({bubble:!1}),f.event.N(this,"end",{polyline:a.Re,points:a.Re.getPath(),distance:a.Re.getLength()})):f.event.N(this,"cancel")},oS:function(a){for(var b=[],c=a.tm;c;)b.unshift(c.qj),c=c.va;2>b.length?this.dB(a):a.Re?a.Re.setPath(b):(a.Re=new w.D.Fb(this.lineOptions),a.Re.la=!0,a.Re.name="recrdLine",a.Re.setPath(b),a.Re.setMap(this.h));f.event.N(this,"update")},Gw:function(a,b){var c=!a.yb;this.YK(b,{position:a.qj});c?(a.yb= new w.D.ab(b),a.yb.name="marker",a.yb.setMap(this.h),a.yb.la=!0):(this.sia(a.yb,b),f.event.bC(a.yb));a.yb.g("click",f.C.stopPropagation)},gt:function(a,b,c,d,e){var g=document.createElement("div"),h=0;a.ok&&(a.ok.setMap(null),delete a.ok);if(b.match("{d}")){for(var k=a.va;k;)h+=k.qj.distance(k.next.qj),k=k.va;h=(h/this.WI).toFixed(1===this.WI?1:2);b=b.replace("{d}",h)}g.className="amap-ranging-label";h=document.createElement("span");h.innerHTML=b;g.appendChild(h);d&&g.appendChild(this.RP(this.Gaa, d));e&&g.appendChild(this.RP(this.Faa,e));a.ok=new w.D.ab({content:g,position:a.qj,offset:c,cursor:"pointer",zIndex:110,bubble:!0});a.ok.la=!0;a.yb.name="label";a.ok.setMap(this.h)},i9:function(a){var b=a.tm;if(b){for(this.gt(b,this.endLabelText,this.endLabelOffset,this.Ks(b,a),this.QP(a));b.va;)b=b.va,this.gt(b,this.midLabelText,this.midLabelOffset,this.Ks(b,a));this.gt(b,this.startLabelText,this.startLabelOffset,this.Ks(b,a))}},RP:function(a,b){var c=document.createElement("span");c.innerHTML=a; f.C.g(c,"click",function(){b()});f.C.g(c,"mousedown",function(a){f.C.stopPropagation(a)});f.l.Z&&f.l.Me&&(f.C.g(c,"touchstart",function(a){f.C.stopPropagation(a)}),f.C.g(c,"touchend",function(a){f.C.stopPropagation(a)}),f.C.g(c,"touchmove",function(a){f.C.stopPropagation(a)}));return c},Ks:function(a,b){var c=this;return function(d){c.Pg!==c.Rf.Av&&c.Ew(a,b);d&&f.C.stopPropagation(d)}},QP:function(a){var b=this;return function(c){b.Pg!==b.Rf.Av&&b.dB(a);c&&f.C.stopPropagation(c)}},Ew:function(a,b){a.va? a.va.next=a.next:a.next&&this.Gw(a.next,this.startMarkerOptions);a.next?a.next.va=a.va:a.va&&(this.Gw(a.va,this.endMarkerOptions),b.tm=a.va);a.va=a.next=null;a.yb&&(a.yb.setMap(null),a.yb=null);a.ok&&(a.ok.setMap(null),a.ok=null);this.oS(b);this.i9(b);f.event.N(this,"removenode",{polyline:b.Re,points:b.Re?b.Re.getPath():[],distance:b.Re?b.Re.getLength():null,target:this})},dB:function(a){var b=a.tm;a.Re&&(a.Re.setMap(null),a.Re=null);for(;b;)b.yb&&(b.yb.setMap(null),b.yb=null),b.ok&&(b.ok.setMap(null), b.ok=null),b=b.va;a.va&&(a.va.next=a.next);a.next?a.next.va=a.va:this.kl=a.va;a.tm=a.va=a.next=null},f8:function(){for(;this.kl;)this.dB(this.kl)}});window.AMap.RangingTool=f.ON; ')

_jsload_('AMap.AutoPanby', 'f.a_=f.ba.extend({B:function(a){this.CLASS_NAME="AMap.AutoPanby";this.gd=[];this.sa={};this.h=a;this.Rf={Ln:0,Ip:1,Av:2};this.Pg=this.Rf.Ln;this.pJ=!1},Oha:function(){this.Pg===this.Rf.Ln&&(this.Pg=this.Rf.Ip,f.event.addListener(this.h,"mousemove",this.nX,this));f.event.N(this,"turnon")},Nha:function(){this.Pg===this.Rf.Ip&&(this.ZY(),f.event.removeListener(this.nX),this.Pg=this.Rf.Ln);f.event.N(this,"turnoff")},nX:function(a){this.Yaa();this.ZY();if(this.Pg===this.Rf.Ip){var b=a.pixel.x;a=a.pixel.y; var c=this.h.getSize().width,d=this.h.getSize().height,e=0,g=0;20>b&&20<a&&20<d-a&&(e=20,this.Ao(),this.Hm(e,g));20>b&&20>a&&20<d-a&&(g=e=20,this.Ao(),this.Hm(e,g));20>b&&20<a&&20>d-a&&(e=20,g=-20,this.Ao(),this.Hm(e,g));20>c-b&&20<a&&20<d-a&&(e=-20,this.Ao(),this.Hm(e,g));20>c-b&&20>a&&20<d-a&&(e=-100,g=20,this.Ao(),this.Hm(e,g));20>c-b&&20<a&&20>d-a&&(g=e=-20,this.Ao(),this.Hm(e,g));20>a&&20<c-b&&20<b&&(g=20,this.Ao(),this.Hm(e,g));20>d-a&&20<c-b&&20<b&&(g=-20,this.Ao(),this.Hm(e,g))}},Ao:function(){this.pJ= !0},Yaa:function(){this.pJ=!1},Hm:function(a,b){this.pJ&&(this.h.panBy(a,b),this.MS=setTimeout(f.a.bind(function(){this.Hm(a,b)},this),100))},ZY:function(){this.MS&&clearTimeout(this.MS)}}); ')

_jsload_('AMap.Heatmap', '(function(a){function b(a){a||(a={});Array.prototype.slice.call(arguments,1).forEach(function(b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])})}var c={defaultRadius:30,defaultRenderer:"canvas2d",defaultGradient:{"0.25":"rgb(0,0,255)","0.55":"rgb(0,255,0)","0.85":"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:0.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},d=function(){function a(b){this._coordinator={};this._data=[];this._radi= [];this._min=0;this._max=1;this._xField=b.xField||b.defaultXField;this._yField=b.yField||b.defaultYField;this._valueField=b.valueField||b.defaultValueField;b.radius&&(this._cfgRadius=b.radius)}var d=c.defaultRadius;b(a.prototype,{_organiseData:function(a,b){var c=a[this._xField],e=a[this._yField],g=this._radi,h=this._data,k=this._max,l=this._min,t=a[this._valueField]||1,y=a.radius||this._cfgRadius||d;h[c]||(h[c]=[],g[c]=[]);h[c][e]?h[c][e]+=t:(h[c][e]=t,g[c][e]=y);return h[c][e]>k?(b?this.setDataMax(h[c][e]): this._max=h[c][e],!1):{x:c,y:e,value:t,radius:y,min:l,max:k}},_unOrganizeData:function(){var a=[],b=this._data,c=this._radi,d;for(d in b)if(b.hasOwnProperty(d))for(var e in b[d])b[d].hasOwnProperty(e)&&a.push({x:d,y:e,radius:c[d][e],value:b[d][e]});return{min:this._min,max:this._max,data:a}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(a){if(0<a.length)for(var b=a.length;b;)b-=1,this.addData.call(this,a[b]);else(a=this._organiseData(a, !0))&&this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[a]});return this},setData:function(a){var b=a.data,c=b.length;this._data=[];this._radi=[];for(var d=0;d<c;d+=1)this._organiseData(b[d],!1);this._max=a.max;this._min=a.min||0;this._onExtremaChange();this._coordinator.emit("renderall",this._getInternalData());return this},removeData:function(){},setDataMax:function(a){this._max=a;this._onExtremaChange();this._coordinator.emit("renderall",this._getInternalData());return this}, setDataMin:function(a){this._min=a;this._onExtremaChange();this._coordinator.emit("renderall",this._getInternalData());return this},setCoordinator:function(a){this._coordinator=a},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}});return a}(),e=function(){function a(b){var c=[],d=b.min,g=b.max,h=b.radi;b=b.data;for(var k=Object.keys(b),l=k.length;1<=l;)for(var l=l-1,m=k[l],n=Object.keys(b[m]),z=n.length;1<= z;){var z=z-1,N=n[z],I=b[m][N],B=h[m][N];e&&(B=e);c.push({x:m,y:N,value:I,radius:B})}return{min:d,max:g,data:c}}function c(a){a=a.gradient||a.defaultGradient;var b=document.createElement("canvas"),d=b.getContext("2d");b.width=256;b.height=1;var b=d.createLinearGradient(0,0,256,1),e;for(e in a)a.hasOwnProperty(e)&&b.addColorStop(e,a[e]);d.fillStyle=b;d.fillRect(0,0,256,1);return d.getImageData(0,0,256,1).data}function d(a){var b=a.container,e=this.shadowCanvas=document.createElement("canvas"),g=this.canvas= a.canvas||document.createElement("canvas");this._renderBoundaries=[2E3,2E3,0,0];var h=getComputedStyle(a.container)||{};g.className="heatmap-canvas";this._width=g.width=e.width=+h.width.replace(/px/,"");this._height=g.height=e.height=+h.height.replace(/px/,"");this.shadowCtx=e.getContext("2d");this.ctx=g.getContext("2d");g.style.cssText=e.style.cssText="position:absolute;left:0;top:0;";b.appendChild(g);this.canvas=g;this.JY=e;this._palette=c(a);this._templates={};this._setStyles(a)}var e=null;b(d.prototype, {_resetSize:function(a,b){var c=this._sizeScale||1;a=Math.ceil(a*c);b=Math.ceil(b*c);this._width=this.canvas.width=this.JY.width=a;this._height=this.canvas.height=this.JY.height=b},renderPartial:function(a){this._drawAlpha(a);this._colorize()},renderAll:function(b){this._clear();this._drawAlpha(a(b));this._colorize()},_updateGradient:function(a){this._palette=c(a)},updateConfig:function(a){a.gradient&&this._updateGradient(a);this._setStyles(a)},setDimensions:function(a,b){this._width=a;this._height= b;this.canvas.width=this.shadowCanvas.width=a;this.canvas.height=this.shadowCanvas.height=b},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height);this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(a){this._blur=0===a.blur?0:a.blur||a.defaultBlur;a.backgroundColor&&(this.canvas.style.backgroundColor=a.backgroundColor);this._opacity=255*(a.opacity||0);this._maxOpacity=0===a.maxOpacity?0:255*(a.maxOpacity||a.defaultMaxOpacity);this._minOpacity=255*(a.minOpacity|| a.defaultMinOpacity);this._useGradientOpacity=!!a.useGradientOpacity;a.radius&&(this._reSetRadius=a.radius);this._noColorize=a._noColorize;this._sizeScale=a._sizeScale},_drawAlpha:function(a){var b=this._min=a.min,c=this._max=a.max;a=a.data||[];for(var d=a.length,e=1-this._blur,g=this._sizeScale||1;1<=d;){var d=d-1,h=a[d],k=h.x,l=h.y,m=h.radius,h=Math.min(h.value,c),k=k-m,l=l-m,n=this.shadowCtx,p;if(this._templates[m])p=this._templates[m];else{p=this._templates;var B=m,H=m,F=e,C=document.createElement("canvas"), D=C.getContext("2d");C.width=C.height=2*H;1===F?(D.beginPath(),D.arc(H,H,H,0,2*Math.PI,!1),D.fillStyle="rgba(0,0,0,1)",D.fill()):(F=D.createRadialGradient(H,H,H*F,H,H,H),F.addColorStop(0,"rgba(0,0,0,1)"),F.addColorStop(1,"rgba(0,0,0,0)"),D.fillStyle=F,D.fillRect(0,0,2*H,2*H));p[B]=p=C}n.globalAlpha=(h-b)/(c-b);1!==g?(h=2*m*g,n.drawImage(p,k*g,l*g,h,h)):n.drawImage(p,k,l);k<this._renderBoundaries[0]&&(this._renderBoundaries[0]=k);l<this._renderBoundaries[1]&&(this._renderBoundaries[1]=l);k+2*m>this._renderBoundaries[2]&& (this._renderBoundaries[2]=k+2*m);l+2*m>this._renderBoundaries[3]&&(this._renderBoundaries[3]=l+2*m)}},getColorByAlpha:function(a){var b=4*a;if(!b)return[0,0,0,0];var c=this._opacity,d=this._maxOpacity,e=this._minOpacity,g=this._useGradientOpacity,h=this._palette;return[h[b],h[b+1],h[b+2],g?h[b+3]:0<c?c:a<d?a<e?e:a:d]},_colorize:function(){if(!this._noColorize){var a=this._renderBoundaries[0],b=this._renderBoundaries[1],c=this._renderBoundaries[2]-a,d=this._renderBoundaries[3]-b,e=this._width,g=this._height, h=this._opacity,k=this._maxOpacity,l=this._minOpacity,m=this._useGradientOpacity;0>a&&(a=0);0>b&&(b=0);a+c>e&&(c=e-a);b+d>g&&(d=g-b);for(var c=this.shadowCtx.getImageData(a,b,c,d),d=c.data,e=d.length,g=this._palette,n=3;n<e;n+=4){var p=d[n],B=4*p;B&&(p=0<h?h:p<k?p<l?l:p:k,d[n-3]=g[B],d[n-2]=g[B+1],d[n-1]=g[B+2],d[n]=m?g[B+3]:p)}c.data=d;this.ctx.putImageData(c,a,b);this._renderBoundaries=[1E3,1E3,0,0]}},getValueAt:function(a){a=this.shadowCtx.getImageData(a.x,a.y,1,1).data[3];return a/255*Math.abs(this._max- this._min)>>0},getDataURL:function(){return this.canvas.toDataURL()},resetRadius:function(a){e=a},resetSizeScale:function(a){this._sizeScale=a||1}});return d}(),g=function(){var a=!1;"canvas2d"===c.defaultRenderer&&(a=e);return a}(),h={merge:function(){for(var a={},b=arguments.length,c=0;c<b;c+=1){var d=arguments[c],e;for(e in d)d.hasOwnProperty(e)&&(a[e]=d[e])}return a}},k=function(){function a(b){var c=b._renderer,d=b._coordinator,e=b._store;d.on("renderpartial",c.renderPartial,c);d.on("renderall", c.renderAll,c);d.on("extremachange",function(a){if(b._config.onExtremaChange)b._config.onExtremaChange({min:a.min,max:a.max,gradient:b._config.gradient||b._config.defaultGradient})});e.setCoordinator(d)}function e(b){b=this._config=h.merge(c,b||{});this._coordinator=new k;if(b.plugin){var m=b.plugin;if(c.plugins[m])m=c.plugins[m],this._renderer=new m.renderer(b),this._store=new m.store(b);else throw Error("Plugin \'"+m+"\' not found. Maybe it was not registered.");}else this._renderer=new g(b),this._store= new d(b);a(this)}var k=function(){function a(){this.cStore={}}b(a.prototype,{on:function(a,b,c){var d=this.cStore;d[a]||(d[a]=[]);d[a].push(function(a){return b.call(c,a)})},emit:function(a,b){var c=this.cStore;if(c[a])for(var d=c[a].length,e=0;e<d;e+=1)(0,c[a][e])(b)}});return a}();b(e.prototype,{addData:function(){this._store.addData.apply(this._store,arguments);return this},removeData:function(){this._store.removeData&&this._store.removeData.apply(this._store,arguments);return this},setData:function(){this._store.setData.apply(this._store, arguments);return this},clear:function(){this._renderer._clear()},setDataMax:function(){this._store.setDataMax.apply(this._store,arguments);return this},setDataMin:function(){this._store.setDataMin.apply(this._store,arguments);return this},configure:function(a){this._config=h.merge(this._config,a);a.radius&&this._renderer.resetRadius(a.radius);this._renderer.updateConfig(this._config);this._coordinator.emit("renderall",this._store._getInternalData());return this},repaint:function(){this._coordinator.emit("renderall", this._store._getInternalData());return this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(a){return this._store.getValueAt?this._store.getValueAt(a):this._renderer.getValueAt?this._renderer.getValueAt(a):null},resetSize:function(a,b){this._renderer._resetSize(a,b)}});return e}();a.h337={create:function(a){return new k(a)},register:function(a,b){c.plugins[a]=b}}})(window); f.s_=f.ba.extend({ga:[f.ka,f.se],B:function(a,b){this.CLASS_NAME="AMap.Heatmap";f.e.cb(this.CLASS_NAME,b);b=b||{};this.options={visible:b.visible||!0,radius:b.radius||30,radiusUnit:b.radiusUnit||"px",gradient:b.gradient||{"0.5":"blue","0.65":"rgb(117,211,248)","0.7":"rgb(0, 255, 0)","0.9":"#ffea00",1:"red"},blur:b.blur,opacity:b.opacity||[0,1],zooms:b.zooms||[3,20],zIndex:b.zIndex||17,renderOnZooming:b.renderOnZooming,"3d":f.extend({heightScale:1,heightBezier:[0.5,0,1,0.5],gridSize:2,drawGridLine:!1}, b["3d"])};this.ye={radius:this.options.radius,blur:this.options.blur,maxOpacity:this.options.opacity[1],minOpacity:this.options.opacity[0],gradient:this.options.gradient};this.yV();if(this.isCanavs=this.U1())this.kv=JSON.stringify({data:[]}),this.setMap(a)},Yja:function(a,b,c){a=new AMap.LngLat(a,b);b=this.options.map.getZoom();a=this.options.map.lngLatToContainer(a,b);return{x:a.x,y:a.y,value:c}},U1:function(){return document.createElement("canvas").getContext("2d")?!0:!1},YC:function(a){return(a= a||this.options.map)&&"3D"===a.getViewMode_()},RJ:function(){return!this.YC()&&this.options.map.map?this.options.map.map.Oa:null},mO:function(){if(!this.Ac){var a=this.RJ(),b=this.options.map.getSize().getWidth(),c=this.options.map.getSize().getHeight();this.Ac=document.createElement("div");this.Ac.id="_amap_heatmap_div_";this.Ac.className="amap-layer";this.Ac.style.cssText="position:absolute;top:0;left:0;";this.Ac.style.zIndex=this.options.zIndex;this.Ac.style.width=b+"px";this.Ac.style.height=c+ "px";this.ye.container=this.Ac;this.options.visible&&(a&&a.w.appendChild(this.Ac),this.Mi=window.h337.create(this.ye))}},yA:function(){var a=this.options.zooms[1],b=this.options.zooms[0],c=this.options.map.getZoom();return parseInt(c)>=parseInt(b)&&parseInt(c)<=parseInt(a)},vQ:function(){return this.Mi&&this.Dg&&this.Dg.data&&this.Dg.data.length&&this.options.map&&this.options.visible&&this.yA()},wk:function(){if(this.vQ())if(this.si)this.si.AH();else return this.iA();else this.Vz()},iA:function(a){this.Im&& this.Im.length||this.paa();this.Iy=this.options.map.get("centerCoords");var b=this.options.map.get("zoom",null,!0);this.mga=b;var c={max:this.Dg.max},d=[],e,g=this.options.radius;if(this.si){if(!a||!a.vx){console.warn("Not dataState passed in!!");return}b=a.vx;a=b.size;e=b.Sj.Nb;b=b.tn}else e=this.options.map.getBounds(),a=this.options.map.getSize(),e=this.options.map.Jb(e.Hj()),b=Math.pow(2,20-b);this.lga=a;this.Mi.resetSize(a.width,a.height);for(var h=0;h<this.Im.length;h+=1){var k=this.Im[h],l= (k.x-e.x)/b,m=(k.y-e.y)/b;l>-g&&l<a.width+g&&m>-g&&m<a.height+g&&d.push({x:(k.x-e.x)/b,y:(k.y-e.y)/b,value:k.count})}this.si||this.QS();c.data=d;this.rfa=d.length;this.si||(this.Ac.style.top="0px",d=this.options.map.get("rotation"),this.Ac.style[f.j.rf]=d?"rotate3d(0,0,1,"+-d+"deg)":"",this.Ac.style.left="0px",this.Ac.style.zIndex=this.options.zIndex,(d=this.RJ())&&this.Ac.parentNode!==d.w&&d.w.appendChild(this.Ac));this.Mi.setData(c)},yV:function(){var a=this.ye.gradient,b=[],c=[],d;for(d in a)a.hasOwnProperty(d)&& b.push({stop:parseFloat(d),color:a[d]});b.sort(function(a,b){return a.stop-b.stop});for(d=0;d<b.length;d+=1)a=f.a.cC(b[d].color),c.push(b[d].stop),c.push(a[0],a[1],a[2]);this.ye.qca=c},y3:function(){return this.options.radius},y8:function(a){this.Mi._renderer.resetSizeScale(a)},X2:function(a,b){var c=this.Mi._renderer;if(a===c.shadowCanvas.width&&b===c.shadowCanvas.height)return c.shadowCtx.getImageData(0,0,a,b);console.warn("resize for AlphaImageData",c.shadowCanvas.width,a);c.canvas.width=a;c.canvas.height= b;c.ctx.drawImage(c.shadowCanvas,0,0,a,b);return c.ctx.getImageData(0,0,a,b)},Cba:function(a){return this.Mi._renderer.getColorByAlpha(a)},Vz:function(){this.Mi.setData({data:[]});this.Mi.clear();this.Im=[];this.r("clear")},Bs:function(){if(this.Mi){var a=f.extend({},this.ye,{_noColorize:!!this.si});this.Mi.configure(a);this.r("reConfigure")}},F2:function(){return!!(this.kv&&this.options.map&&this.options.visible&&this.isCanavs&&this.yA())},QS:function(){this.Mi&&this.options.map&&this.Ac&&(this.iT? this.Ac.style.visibility="hidden":!0===this.options.visible&&!0===this.yA()?"visible"!==this.Ac.style.visibility&&(this.Bs(),this.Ac.style.visibility="visible"):"hidden"!==this.Ac.style.visibility&&(this.Bs(),this.Ac.style.visibility="hidden"))},renderChanged:function(){if(this.options.map.map)if(this.options.map.map.Bi&&!this.options.renderOnZooming||!1===this.options.visible)this.Ac.style.visibility="hidden";else if(this.options.map.map.hg&&this.Iy)this.Br();else{var a=this.options.map;if(a){var b= a.get("centerCoords"),c=a.getSize();b.rb(this.Iy)&&this.mga===a.getZoom()&&c.rb(this.lga)||this.wk()}}},Br:function(){var a=this.options.map;if(a){var b=a.get("centerCoords");if(!b.rb(this.Iy)){var a=Math.pow(2,20-a.get("zoom",null,!0)),c=(this.Iy.x-b.x)/a;this.Ac.style.top=(this.Iy.y-b.y)/a+"px";this.Ac.style.left=c+"px"}}},setOptions:function(a){f.e.add(this.CLASS_NAME,"setOptions");if(this.isCanavs){a=a||{};var b=this.options;this.options.radius=a.radius||b.radius;this.options.radiusUnit=a.radiusUnit|| b.radiusUnit;this.options.gradient=a.gradient||b.gradient;this.options.opacity=a.opacity||b.opacity;this.options.zooms=a.zooms||b.zooms;this.options.zIndex=a.zIndex||b.zIndex;this.options.visible="boolean"===typeof a.visible?a.visible:b.visible;this.options["3d"]=f.extend({},this.options["3d"],a["3d"]);this.ye={radius:this.options.radius,blur:this.options.blur,maxOpacity:this.options.opacity[1],minOpacity:this.options.opacity[0],gradient:this.options.gradient};this.yV();this.Mi&&this.F2()&&(this.Bs(), this.wk());this.QS()}},getOptions:function(){f.e.add(this.CLASS_NAME,"getOptions");if(this.isCanavs){var a={},b;for(b in this.options)this.options.hasOwnProperty(b)&&"map"!==b&&"visible"!==b&&(a[b]=this.options[b]);return a}},setDataSet:function(a){f.e.add(this.CLASS_NAME,"setDataSet");if("string"===typeof a.data){var b=this;new f.Sa.bb(a.data,{callback:"callback",callbackFunction:function(c){a.data="function"===typeof a.dataParser?a.dataParser(c):c;b.BS(a)}})}else this.BS(a)},BS:function(a){this.isCanavs&& (this.kv=JSON.stringify({data:[]}),this.Dg=null,a?(this.Dg=a,this.kv=JSON.stringify(a),this.Im=null,this.Mi&&this.options.map&&(this.Bs(),this.wk())):this.Vz())},paa:function(){this.Im=[];if(this.Dg)for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=0,c=this.Dg.data.length;b<c;b+=1){var d=this.Dg.data[b],d=this.BW(d.lng,d.lat,d.count);this.Im.push(d);f.H.wC(a,[d.x,d.y])}},BW:function(a,b,c){a=this.options.map.Jb([a,b]);a.count=c;return a},getDataSet:function(){f.e.add(this.CLASS_NAME,"getDataSet"); if(this.isCanavs)return this.Dg},addDataPoint:function(a,b,c){f.e.add(this.CLASS_NAME,"addDataPoint");if(this.isCanavs){c||isNaN(c)||(c=1);if(this.Dg){var d=JSON.parse(this.kv);d.data.push({lng:a,lat:b,count:c});this.Dg=d}else this.Dg={},this.Dg.data=[],this.Dg.data.push({lng:a,lat:b,count:c});this.Im&&this.Im.push(this.BW(a,b,c));this.kv=JSON.stringify(this.Dg);this.Bs();this.wk()}},oT:function(){if(this.options.map){var a=this.RJ();a&&a.w.appendChild(this.Ac)}},TX:function(a){if(this.YC(a))this.options.map= null,this.si&&this.si.setMap(null);else{var b=this.Ac;b&&b.parentNode.removeChild(b);a.I("complete",this.oT,this);this.cj("render",a);this.options.map=null}},E9:function(a){this.YC(a)?(this.si||(this.si=new w.w.DN(this,this.options)),this.si&&(this.options.map=a,this.Ac||this.mO(),this.si.setMap(a))):(this.options.map=a,this.Ac||this.mO(),a.g("complete",this.oT,this,!0),this.X("render",a))},setMap:function(a){f.e.add(this.CLASS_NAME,"setMap");if(this.isCanavs){var b=this.options.map;a?a!==b&&(b&& this.TX(b),this.E9(a)):b&&this.TX(b)}},hide:function(){f.e.add(this.CLASS_NAME,"hide");this.isCanavs&&(this.options.visible=!1,this.r("reConfigure"),this.Ac&&(this.iT=!0,this.Ac.style.visibility="hidden"))},show:function(){f.e.add(this.CLASS_NAME,"show");this.isCanavs&&(this.options.visible=!0,this.r("reConfigure"),this.Ac&&this.yA()&&(this.iT=!1,this.Ac.style.visibility="visible",this.Bs(),this.wk()))},getMap:function(){f.e.add(this.CLASS_NAME,"getMap");if(this.isCanavs)return this.options.map}, setzIndex:function(a){f.e.add(this.CLASS_NAME,"setzIndex");this.YC()?this.si&&this.si.setzIndex(a):this.Ac&&(this.Ac.style.zIndex=this.options.zIndex);this.options.zIndex=a},getzIndex:function(){f.e.add(this.CLASS_NAME,"getzIndex");return this.options.zIndex}});window.AMap.Heatmap=f.s_;w.w.DN=window.AMap.GLCustomLayer.extend({F:{vertexShader:"precision mediump float;attribute highp vec3 a_position;varying vec4 v_color;uniform vec4 u_ceil;uniform highp vec4 u_params;uniform lowp int u_heightFuncType;uniform highp vec4 u_bezier;uniform highp mat4 u_modelViewMatrix;uniform highp mat4 u_projectionMatrix;uniform vec4 u_gradient[8];vec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3){    float t2 = t * t;    float one_minus_t = 1.0 - t;    float one_minus_t2 = one_minus_t * one_minus_t;    return (P0 * one_minus_t2 * one_minus_t + P1 * 3.0 * t * one_minus_t2 + P2 * 3.0 * t2 * one_minus_t + P3 * t2 * t);}vec2 toBezier(float t, vec4 p){\\treturn toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));}float fade(float low, float high, float value) {\\tif(value<low||value>high){return 0.0;}\\treturn (value-low)/(high-low);}vec4 getColor(float intensity) { \\tint s=0;\\tvec3 color = vec3(0);\\tfor(int gn=0;gn<8;gn+=1){\\t\\tif(u_gradient[gn].x>=intensity){\\t\\t\\ts=gn;\\t\\t\\tbreak;\\t\\t}\\t}\\tif(s<8){\\t\\tif(s==0){\\t\\t\\tcolor = mix(vec3(0,0,1),u_gradient[0].yzw,fade(0.0, u_gradient[0].x, intensity));\\t\\t}else{\\t\\t\\tcolor = mix(u_gradient[s-1].yzw,u_gradient[s].yzw,fade(u_gradient[s-1].x, u_gradient[s].x, intensity));\\t\\t}\\t}\\treturn vec4(color.xyz,intensity);}void main(void) {   float alpha = a_position.z / 255.0;\\tfloat fh; \\tfh = toBezier(alpha,u_bezier).y; \\tfloat x = a_position.x*u_ceil.x+u_ceil.z;\\tfloat y = a_position.y*u_ceil.y+u_ceil.w;\\tvec4 pos =  vec4(x , y, fh * -50.0 * u_params.x, 1.0);\\tv_color = getColor(alpha);\\tgl_Position = u_projectionMatrix * u_modelViewMatrix *  pos;\\tgl_PointSize = 1.0;}", fragmentShader:"precision mediump float;varying vec4 v_color;void main(void) {\\tif(v_color.a==0.0){\\t\\tdiscard;\\t}\\tgl_FragColor = v_color;}",type:"heatMap3DLayer"},B:function(a,b){if(!f.l.Ll)return null;this.Th=!0;this.fg=a;this.fg.g("clear",this.AH,this);this.fg.g("reConfigure",this.U7,this);w.w.DN.qc.B.call(this,null,b)},getWebGLVariableLoaction:function(a,b){b.iI=a.getAttribLocation(b,"a_position");b.lka=a.getAttribLocation(b,"a_color");b.VM=a.getUniformLocation(b,"u_params");b.Sha=a.getUniformLocation(b, "u_ceil");b.Rha=a.getUniformLocation(b,"u_bezier");b.Wha=a.getUniformLocation(b,"u_gradient");b.Xha=a.getUniformLocation(b,"u_heightFuncType")},c3:function(a,b){var c=this.fg.Dg.data;if(!c||!c.length)return null;var d=a.get("zoom",null,!0),e=Math.pow(2,20-d),g=a.getBounds(),h=b*e,k=[Infinity,Infinity,-Infinity,-Infinity],l=!1,m,n=g.path,p=[],g=0;for(m=n.length;g<m;g++){var q=n[g][0];0>q&&(q=-80<q?0:170);p.push([q,n[g][1]])}g=0;for(m=c.length;g<m;g++)n=c[g],n=[parseFloat(n.lng),parseFloat(n.lat)], f.Mc.md(n,p,!1)&&(f.H.wC(k,n),l=!0);if(!l)return null;c=a.Jb([k[0],k[3]]);g=a.Jb([k[2],k[1]]);k=c.x;c=c.y;l=g.x;g=g.y;k-=3*h;c-=3*h;l+=3*h;g+=3*h;h=new f.Qe(k,c,l,g);k=[Math.ceil((l-k)/e),Math.ceil((g-c)/e)];return{zoom:d,tn:e,size:new f.Uc(k[0],k[1]),Sj:h}},AH:function(){var a=this.get("map");a&&a.map&&a.map.set("display")},U7:function(){this.jk=null;this.XP=!1;this.nS()},nS:function(){this.FH&&clearTimeout(this.FH);var a=this;this.FH=setTimeout(function(){a.FH=null;a.AH()},100)},Y2:function(a,b){this.fg.y8(1/ b.VZ);this.fg.iA({vx:a});if(!(0>=this.fg.rfa)){for(var c=this.fg.X2(b.Fn,b.$r),d=c.data,e=d.length/4,g=new Uint8Array(e),h=0;h<e;h++)g[h]=d[4*h+3];return{width:c.width,height:c.height,tY:g}}},onRender:function(a,b){if(this.fg&&this.fg.vQ()&&this.fg.options.visible){var c=this.fg.options["3d"].gridSize,d=this.get("map"),e=!1,g=d.view.qw,h=this.c3(d,this.fg.y3()+10,c,c);if(h){if(this.jk){var k=this.jk.vx,l=k.Sj;k.tn===h.tn&&l.Nb.rb(h.Sj.Nb)&&l.nd.rb(h.Sj.nd)&&(e=!0);!d.map.Bi&&d.map.hg&&(e=!0)}if(!e){c= this.v1(h,c,c);d=this.Y2(h,c);if(!d)return;this.P1(c,d);c=this.o1(c);this.jk={vx:h,ex:c}}this.iA(a,b);g||this.nS()}else this.jk=null}},v1:function(a,b,c){return{tn:a.tn,Sj:a.Sj,Fn:Math.ceil(a.size.width/b),$r:Math.ceil(a.size.height/c),VZ:b,Uia:c,VD:null}},J8:function(a,b,c){a.VD[b[1]*a.Fn+b[0]]=c},HP:function(a,b){return a.VD[b[1]*a.Fn+b[0]]},Fja:function(a){for(var b=[[0,0],[a.Fn,0],[a.Fn,a.$r],[0,a.$r]],c=[],d=a.Sj.Nb.y,e=a.Sj.Nb.x,g=a.VZ,h=a.Uia,k=0,l=b.length;k<l;k++){var m=b[k];c.push.apply(c, [m[0]*g*a.tn+e-f.a.Wc.x,m[1]*h*a.tn+d-f.a.Wc.y,0,1])}return{kb:new Float32Array(c),az:new Uint16Array([0,1,2,0,2,3]),tda:[]}},o1:function(a){for(var b=[],c=a.Sj.Nb.y,d=a.Sj.Nb.x,e=Math.floor(a.Fn)||1,g=Math.floor(a.$r)||1,h=e+1,k=g+1,l=(a.Sj.nd.x-d)/e,m=(a.Sj.nd.y-c)/g,b=new Float32Array(h*k*3),n=0,p=0;p<k;p++)for(var q=0;q<h;q++){b[n]=q;b[n+1]=p;var r=0,r=this.HP(a,[q,p])||0;b[n+2]=r;n+=3}n=0;a=new Uint32Array(e*g*6);for(p=0;p<g;p++)for(q=0;q<e;q++){var k=q+h*(p+1),r=q+1+h*(p+1),s=q+1+h*p;a[n]=q+ h*p;a[n+1]=s;a[n+2]=k;a[n+3]=k;a[n+4]=s;a[n+5]=r;n+=6}a=new Uint32Array(a.buffer,0,n);return{kb:b,az:a,Bga:l,Aga:m,b$:c-f.a.Wc.y,a$:d-f.a.Wc.x}},m1:function(a,b,c,d){a.bindBuffer(a.ARRAY_BUFFER,d);a.bufferData(a.ARRAY_BUFFER,c,a.STATIC_DRAW);return d},n1:function(a,b,c,d){a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d);a.bufferData(a.ELEMENT_ARRAY_BUFFER,c,a.STATIC_DRAW);return d},N7:function(a,b){this.Pn||(this.Pn=a.createBuffer());this.q2||(this.q2=a.createBuffer());this.OF||(this.OF=a.createBuffer());this.s2|| (this.s2=a.createBuffer());var c=this.get("map").get("zoom",null,!0),d=Math.abs(c-this.jk.vx.zoom),e=this.fg.options["3d"];a.uniform4fv(b.VM,[Math.pow(2,20-c)*this.fg.options["3d"].heightScale,1,1,1]);a.uniform4fv(b.Sha,[this.jk.ex.Bga,this.jk.ex.Aga,this.jk.ex.a$,this.jk.ex.b$]);a.uniform1f(b.fz,Math.max(0.3,0.9-d*d/4));c=e.heatToHeight;a.uniform1i(b.Xha,c?1:0);a.uniform4fv(b.Rha,e.heightBezier||[0,0,0,0]);a.uniform4fv(b.Wha,this.fg.ye.qca);if(!this.XP){for(e=0;256>e;e++)this.fg.Cba(e);if(c)for(e= 0;256>e;e++)c(e/256);this.XP=!0}},l1:function(a,b,c){this.m1(a,b,c.kb,this.Pn);this.n1(a,b,c.az,this.OF)},hka:function(a,b){for(var c=[],d=0;d<a;)c.push(d),d+=b;c.push(a);return c},P1:function(a,b){if(a.Fn===b.width&&a.$r===b.height)a.VD=b.tY;else{console.warn("Repos score!!",a,b);var c=Math.min(a.Fn,b.width),d=Math.min(a.$r,b.height),e=b.width,g=b.tY;a.VD=new Uint8Array(a.Fn*a.$r);for(var h=0;h<c;h+=1)for(var k=0;k<d;k+=1){var l=k*e+h;0<g[l]&&this.J8(a,[h,k],g[l])}}},Eja:function(a,b,c,d,e){function g(){l.length&& m.push({kb:l,az:r,tda:u});l=[];q={};r=[];s={};u=[];n=0}function h(a,b){var c=a+"_"+b,d=q[c];if(0<=d)return d;d=n++;l[d]=[a,b];return q[c]=d}function k(a,b){n+4>=p&&g();var c=[h(a,b),h(a+1,b),h(a+1,b+1),h(a,b+1)];r.push.apply(r,[c[0],c[1],c[2],c[0],c[2],c[3]]);if(v)for(var d=0,e=c.length;d<e;d++){var k=[c[d],d<e-1?c[d+1]:c[0]];k[0]>k[1]&&(k=[k[1],k[0]]);var l=k[0]+"_"+k[1];s[l]||(u.push.apply(u,k),s[l]=1)}}for(var l=[],m=[],n=0,p=65E3,q={},r=[],s={},u=[],v=this.fg.options["3d"].drawGridLine;b<c;b+= 1)for(var x=d;x<e;x+=1)this.HP(a,[b,x])&&k(b,x);q=s=null;g();return m.length?m:null},iA:function(a,b){this.jk&&(a.getExtension("OES_element_index_uint"),a.enable(a.BLEND),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA),a.enable(a.DEPTH_TEST),a.clear(a.DEPTH_BUFFER_BIT),this.N7(a,b),a.enableVertexAttribArray(b.iI),a.bindBuffer(a.ARRAY_BUFFER,this.Pn),a.vertexAttribPointer(b.iI,3,a.FLOAT,!1,0,0),this.I2(a,b),a.disableVertexAttribArray(b.iI),a.disable(a.DEPTH_TEST), a.disable(a.BLEND))},I2:function(a,b){var c=this.jk.ex;this.l1(a,b,c);c.az.length&&(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.OF),a.drawElements(a.TRIANGLES,c.az.length,a.UNSIGNED_INT,0))}}); ')

_jsload_('AMap.Geocoder', 'f.BN=f.ba.extend({ga:[f.ka],B:function(a){this.L=a||{};this.url=f.A.ud+"/v3/geocode";this.CLASS_NAME="AMap.Geocoder";f.e.cb(this.CLASS_NAME,a)},getLocation:function(a,b){f.e.add(this.CLASS_NAME,"getLocation");if(a){var c=["key="+f.A.key,"s=rsv3"];this.Un(this.L,{city:"city"},c);c=new f.Sa.bb(this.url+"/geo"+(0<c.length?"?"+c.join("&"):""),{callback:"callback",uC:{address:a}});c.g("complete",function(a){this.V2(a,b)},this);c.g("error",function(a){this.Mb(a,b)},this)}else f.event.N(this,"error",{info:"NO_PARAMS"}), b&&"function"===typeof b&&b("error","NO_PARAMS")},setCity:function(a){f.e.add(this.CLASS_NAME,"setCity");this.L.city=a},setLang:function(a){f.e.add(this.CLASS_NAME,"setLang");this.L.lang=a||"zh_cn"},getLang:function(){return this.L.lang},getAddress:function(a,b){f.e.add(this.CLASS_NAME,"getAddress");a=f.a.za(a);var c=[],d=["key="+f.A.key,"s=rsv3","language="+this.L.lang];if(a instanceof Array){for(var e=0,g=a.length;e<g;e+=1)c.push(a[e]+"");c=c.join("|");d.push("batch=true")}else c=a+"";d.push("location="+ c);this.Un(this.L,{radius:"radius",extensions:"extensions"},d);c=new f.Sa.bb(this.url+"/regeo"+(0<d.length?"?"+d.join("&"):""),{callback:"callback",rt:!0,dd:"REGEO"});c.g("complete",function(a){this.D8(a,b)},this);c.g("error",function(a){this.Mb(a,b)},this)},Un:function(a,b,c){for(var d in a)"undefined"!==typeof a[d]&&"undefined"!==typeof b[d]&&c.push(b[d]+"="+a[d])},Yc:function(a){a=a.split(",");return new f.V(a[0],a[1])},da:function(a){return"object"===typeof a||"undefined"===typeof a?"":a},zb:function(a){a= parseInt(a,10);return isNaN(a)?0:a},V2:function(a,b){var c;if(parseInt(a.status,10))if(c={info:a.info,resultNum:a.count,geocodes:[]},a.geocodes.length){for(var d=0,e=a.geocodes.length;d<e;d+=1){var g=a.geocodes[d],g={location:this.Yc(g.location),formattedAddress:this.da(g.formatted_address),adcode:this.da(g.adcode),level:this.da(g.level),addressComponent:{neighborhood:this.da(g.neighborhood.name),neighborhoodType:this.da(g.neighborhood.type),building:this.da(g.building.name),buildingType:this.da(g.building.type), province:this.da(g.province),city:this.da(g.city),district:this.da(g.district),township:this.da(g.township),citycode:this.da(g.citycode),street:this.da(g.street),streetNumber:this.da(g.number)}};c.geocodes.push(g)}f.event.N(this,"complete",c);b&&"function"===typeof b&&b("complete",c)}else c.info="NO_DATA",f.event.N(this,"complete",c),b&&"function"===typeof b&&b("no_data",{});else c={info:a.info},f.event.N(this,"error",c),b&&"function"===typeof b&&b("error",a.info)},Xea:function(a){var b=[];if(a)for(var c= 0;c<a.length;c+=1)a[c].id&&b.push({name:this.da(a[c].name),id:this.da(a[c].id),location:this.Yc(a[c].location)});return b},H1:function(a){var b=[];if(a)for(var c=0,d=a.length;c<d;c+=1)b.push(this.GO(a[c]));return b},GO:function(a){var b={addressComponent:{citycode:this.da(a.addressComponent.citycode),adcode:this.da(a.addressComponent.adcode),businessAreas:this.Xea(a.addressComponent.businessAreas),neighborhoodType:this.da(a.addressComponent.neighborhood.type),neighborhood:this.da(a.addressComponent.neighborhood.name), building:this.da(a.addressComponent.building.name),buildingType:this.da(a.addressComponent.building.type),street:this.da(a.addressComponent.streetNumber.street),streetNumber:this.da(a.addressComponent.streetNumber.number),province:this.da(a.addressComponent.province),city:this.da(a.addressComponent.city),district:this.da(a.addressComponent.district),township:this.da(a.addressComponent.township)},formattedAddress:this.da(a.formatted_address),roads:[],crosses:[],pois:[]};a.roads&&(b.roads=this.q7(a.roads)); if(a.roadinters){var c=a.roadinters;this.Dd(c)||(c=[a.roadinters.roadinter]);b.crosses=this.g7(c)}a.pois&&(b.pois=this.pH(a.pois));a.aois&&(b.aois=this.b7(a.aois));return b},D8:function(a,b){var c;if(parseInt(a.status,10)){c={info:a.info};if(a.regeocode){if(""===this.da(a.regeocode.formatted_address)){c.info="NO_DATA";f.event.N(this,"complete",c);b&&"function"===typeof b&&b("no_data",{});return}c.regeocode=this.GO(a.regeocode)}else a.regeocodes&&(c.regeocodes=this.H1(a.regeocodes));f.event.N(this, "complete",c);b&&"function"===typeof b&&b("complete",c)}else c={info:a.info},f.event.N(this,"error",c),b&&"function"===typeof b&&b("error",a.info)},pH:function(a){for(var b=[],c=0;c<a.length;c+=1){var d=a[c];b[c]={id:d.id,name:d.name,type:d.type,address:this.da(d.address),distance:this.zb(d.distance),tel:this.da(d.tel),location:this.Yc(d.location),direction:this.da(d.direction),businessArea:this.da(d.businessarea)}}return b},b7:function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];b.push({adcode:this.da(e.adcode), area:this.da(e.area),id:this.da(e.id),location:this.Yc(e.location),name:this.da(e.name),type:this.da(e.type)})}return b},Dd:function(a){return"[object Array]"===Object.prototype.toString.call(a)},g7:function(a){for(var b=[],c=0;c<a.length;c+=1){var d=a[c];b[c]={distance:this.zb(d.distance),direction:this.da(d.direction),first_id:this.da(d.first_id),first_name:this.da(d.first_name),second_name:this.da(d.second_name),second_id:this.da(d.second_id),location:this.Yc(d.location)}}return b},q7:function(a){for(var b= [],c=0;c<a.length;c+=1){var d=a[c];b[c]={id:d.id,name:d.name,distance:this.zb(d.distance),direction:this.da(d.direction),location:this.Yc(d.location)}}return b},Mb:function(a,b){w.event.N(this,"error",a);b&&"function"===typeof b&&b("error",a.info)}});window.AMap.Geocoder=f.BN; ')

_jsload_('AMap.MapType', 'f.E_=f.ba.extend({ah:".amap-maptypecontrol{z-index:150;position:absolute;top:12px;right:12px;z-index:304}.amap-maptype-wrap{position:absolute;top:0;right:0;width:64px;height:64px}.amap-maptype-con{position:absolute;top:0;right:0;width:60px;height:60px;background:#fff;border:solid 1px #ccc;cursor:pointer}.amap-maptype-win{position:absolute;top:1px;right:1px;width:56px;height:56px;overflow:hidden;background:#ccc;border:solid 1px #ccc}.amap-maptype-title{position:absolute;bottom:0;left:0;width:60px;height:20px;color:#333;text-align:center;font-size:12px;line-height:20px;background:#fff}.amap-maptype-title:hover{background-color:#eee}.amap-maptype-list{position:absolute;top:64px;right:0;width:100px;background:#fff;border:solid 1px #ccc;overflow:hidden}.amap-maptype-list p{width:100px;height:20px;margin:0;cursor:pointer;background:#fff}.amap-maptype-lsit p:hover{background:#eee}.amap-maptype-check{display:inline-block;width:15px;height:15px;margin-left:2px;background:url(../../theme/v1.3/maptype-bg.png) no-repeat -30px 4px}.amap-maptype-checked{background-position:0 4px}.amap-maptype-check-hover{background-position:-15px 4px}.amap-maptype-label{display:inline-block;width:60px;height:15px;color:#333;font-size:12px;line-height:15px;margin-left:10px}", ga:[f.ka],B:function(a){this.CLASS_NAME="AMap.MapType";f.e.cb(this.CLASS_NAME,a);this.lU=0;this.PY=this.Ku=!1;this.visible=!0;a&&("undefined"!==typeof a.defaultType&&(this.lU=a.defaultType),"undefined"!==typeof a.showTraffic&&(this.Ku=a.showTraffic),"undefined"!==typeof a.showRoad&&(this.PY=a.showRoad));this.Xo=[{title:"\\u5730\\u56fe",w:new w.w.Wa,re:["traffic"]},{title:"\\u536b\\u661f",w:new w.w.Wa.SN,re:["traffic","road"]}];this.re={traffic:{title:"\\u8def\\u51b5",w:new w.w.Wa.WN,show:this.Ku},road:{title:"\\u8def\\u7f51", w:new w.w.Wa.QN,show:this.PY}};this.faa()},pq:function(a,b){this.map=a;this.ze=b;b.appendChild(this.f.K);this.vk();this.DS(this.lU);this.SO()},zr:function(){this.Bk();this.ze.removeChild(this.f.K);this.map=this.ze=null},faa:function(){this.wo=-1;var a={};a.K=f.j.create("div",null,"amap-maptypecontrol");a.Ria=f.j.create("div",a.K,"amap-maptype-wrap");a.RI=f.j.create("div",a.Ria,"amap-maptype-con");a.jN=f.j.create("div",a.RI,"amap-maptype-win");a.title=f.j.create("div",a.RI,"amap-maptype-title");a.list= f.j.create("div",a.K,"amap-maptype-list");for(var b in this.re)if(this.re.hasOwnProperty(b)){var c=f.j.create("p",a.list,"amap-maptype-item");c.ut=f.j.create("span",c,"amap-maptype-check");this.re[b].show&&f.j.Ga(c.ut,"amap-maptype-checked");c.oda=f.j.create("span",c,"amap-maptype-label");c.oda.innerHTML=this.re[b].title;this.re[b].Gd=c}a.list.style.width="60px";this.f=a},NO:function(){for(var a in this.re)if(this.re.hasOwnProperty(a)){var b=this.re[a],c=b.w.get("zooms"),d=this.map.getZoom();b.map= this.map;b.Gd.title=d>c[1]||d<c[0]?"\\u5f53\\u524d\\u7ea7\\u522b\\u4e0d\\u63d0\\u4f9b"+b.title+"\\u6570\\u636e":""}},vk:function(){this.Fa={hma:f.event.addListener(this.map,"mapmove",this.fB,this),XZ:f.event.addListener(this.map,"zoomend",this.fB,this),$ia:f.event.addListener(this.map,"zoomchange",this.NO,this),cea:f.event.addListener(this.map,"moveend",this.fB,this),Gka:f.event.U(this.f.RI,"click",this.z5,this),Fka:f.event.U(this.f.K,"mouseover",this.B5,this),Eka:f.event.U(this.f.K,"mouseout",this.A5,this)}; for(var a in this.re)if(this.re.hasOwnProperty(a)){var b=this.re[a];b.map=this.map;this.Fa["subclick"+a]=f.event.U(b.Gd,"click",this.H5,b);this.Fa["submouseover"+a]=f.event.U(b.Gd,"mouseover",this.J5,b);this.Fa["submouseout"+a]=f.event.U(b.Gd,"mouseout",this.I5,b)}this.NO()},Bk:function(){if(this.Fa)for(var a in this.Fa)this.Fa.hasOwnProperty(a)&&f.event.removeListener(this.Fa[a])},z5:function(){this.DS((this.wo+1)%this.Xo.length)},H5:function(){f.j.Ma(this.Gd.ut,"amap-maptype-check-hover");this.show? (f.j.Ma(this.Gd.ut,"amap-maptype-checked"),this.w.setMap(null),this.show=!1):(f.j.Ga(this.Gd.ut,"amap-maptype-checked"),this.w.setMap(this.map),this.show=!0)},J5:function(){this.show||f.j.Ga(this.Gd.ut,"amap-maptype-check-hover")},I5:function(){f.j.Ma(this.Gd.ut,"amap-maptype-check-hover")},B5:function(){this.J2()},A5:function(){this.SO()},SO:function(){this.VF=60;this.UF=20;this.uO()},J2:function(a){this.VF=100;this.UF=20*this.Xo[this.wo].re.length;this.uO(a)},uO:function(a){this.KS();var b=this; this.JG=setInterval(function(){var c=Number(f.j.me(b.f.list,"width").replace("px","")),d=Number(f.j.me(b.f.list,"height").replace("px","")),e=b.VF-c,g=b.UF-d;0!==e||0!==g?(e=5<e?c+5:-5>e?c-5:b.VF,g=5<g?d+5:-5>g?d-5:b.UF,b.f.list.style.width=e+"px",b.f.list.style.height=g+"px"):(clearInterval(b.JG),a&&a.call(b))},50)},KS:function(){this.JG&&clearInterval(this.JG)},NJ:function(a){var b=[];if(this.Xo[a]){b.push(this.Xo[a].w);a=this.Xo[a].re;a=f.a.isArray(a)?a.join():"";for(var c in this.re)this.re.hasOwnProperty(c)&& -1!==a.indexOf(c)&&this.re[c].show&&b.push(this.re[c].w)}return b},DS:function(a){a!==this.wo&&(this.map.remove(this.NJ(this.wo)),-1==this.wo?this.map.setLayers(this.NJ(a)):this.map.add(this.NJ(a)),this.wo=a,this.fB(),this.p8())},fB:function(){var a=this.Xo[(this.wo+1)%this.Xo.length];this.f.title.innerHTML=a.title;var b=Number(f.j.me(this.f.jN,"width").replace("px","")),c=Number(f.j.me(this.f.jN,"height").replace("px",""))||56,d=this.map.getSize().width,e=this.map.getSize().height;if(!(0>=b||0>= c||0>=d||0>=e)){var g=this.map.Xb(this.map.getCenter()),g=g.add(new f.G(d/2-14-b/2,14+c/2-e/2)),g=this.map.Ag(g);this.u8(this.f.jN,g,this.map,a.w,b,c)}},p8:function(){this.KS();var a=this.Xo[this.wo].re;if(0===a.length)this.f.list.style.display="none";else{this.f.list.style.display="block";this.f.list.style.height=20*a.length+"px";var a=a.join(","),b;for(b in this.re)this.re.hasOwnProperty(b)&&(-1!==a.indexOf(b)?this.re[b].Gd.style.display="block":this.re[b].Gd.style.display="none")}},u8:function(a, b,c,d,e,g){a.Ai||(a.Ai=[]);var h=d.getZooms(),k=Math.ceil(c.getZoom()),k=Math.min(Math.max(k,h[0]),h[1]);b=c.Xb(b,k);c=Math.floor((b.y-g/2)/256);for(var h=Math.floor((b.x+e/2)/256),l=Math.floor((b.y+g/2)/256),m=0,n=Math.floor((b.x-e/2)/256);n<=h;n+=1)for(var p=c;p<=l;p+=1){a.Ai.length<=m&&a.Ai.push(f.j.create("img",a));var q=a.Ai[m];q.style.visibility="inherit";q.style.position="absolute";q.style.left=256*n-b.x+e/2+"px";q.style.top=256*p-b.y+g/2+"px";var r=d.getTileUrl(n,p,k);q.src=r;m+=1}for(;m< a.Ai.length;)a.Ai[m].style.visibility="hidden",m+=1},Bb:function(a){(this.visible=a.visible)?f.j.Ha(this.f.K,{visibility:"visible"}):f.j.Ha(this.f.K,{visibility:"hidden"})},hide:function(){f.e.add(this.CLASS_NAME,"hide");this.Bb({visible:!1});f.event.N(this,"hide")},show:function(){f.e.add(this.CLASS_NAME,"show");this.Bb({visible:!0});f.event.N(this,"show")},Rt:function(){return this.visible?[120,80,0,0]:[0,0,0,0]}});window.AMap.MapType=f.E_; ')

_jsload_('AMap.OverView', 'f.N_=f.ba.extend({ga:[f.ka],ah:".amap-overviewcontrol{z-index:150;width:120px;height:120px;background:#fff;position:absolute;right:0;bottom:0}.amap-overview-main{width:115px;height:115px;position:absolute;left:5px;top:5px;overflow:hidden}.amap-overviewcontrol,.amap-overview-main{border-top:solid 1px #ccc;border-left:solid 1px #ccc}.amap-overview-map{position:absolute}.amap-overview-button{width:17px;height:17px;position:absolute;right:0;bottom:0;background:url(../../theme/v1.3/mapcontrols.png);background-position:-40px -386px;cursor:pointer}.amap-overview-win{width:62px;height:35px;background:#91a3d8;opacity:.25;border:solid 2px #44b;filter:alpha(opacity=25);position:absolute;top:40px;left:26px;cursor:move}", B:function(a){this.CLASS_NAME="AMap.OverView";f.e.cb(this.CLASS_NAME,a);this.Nca();this.f={};this.f.K=f.j.create("div",null,"amap-overviewcontrol");this.f.Rl=f.j.create("div",this.f.K,"amap-overview-main");this.f.map=f.j.create("div",this.f.Rl,"amap-overview-map");this.f.kN=f.j.create("div",this.f.Rl,"amap-overview-win");this.f.Dp=f.j.create("div",this.f.Rl,"amap-overview-win");this.f.button=f.j.create("div",this.f.K,"amap-overview-button");this.Bb(a||{})},Nca:function(){this.Sh="overview";this.visible= !0;this.Mk=!1;this.ed=[3,18];this.height=this.width=120;this.Nr=null},pq:function(a,b){this.map=a;b.appendChild(this.f.K);this.ze=b;this.vk();this.fl&&(this.Mk?f.j.Ha(this.fl,{right:this.width+"px"}):f.j.Ha(this.fl,{right:"17px"}))},zr:function(){this.Bk();this.ze.removeChild(this.f.K);this.map=this.ze=null},Bb:function(a){for(var b in a)"_"!==b.substr(0,1)&&void 0!==this[b]&&(this[b]=a[b]);b=this.Mk;this.Nr=void 0!==a.tileLayer?a.tileLayer:this.Nr;this.Mk=void 0!==a.isOpen?a.isOpen:this.Mk;this.visible= void 0!==a.visible?a.visible:this.visible;this.width&&this.height&&f.j.Ha(this.f.K,{width:this.width+"px",height:this.height+"px"}).Ha(this.f.Rl,{width:this.width-5+"px",height:this.height-5+"px"}).Ha(this.f.map,{width:this.width-5+"px",height:this.height-5+"px"});this.Mk||f.j.Ha(this.f.K,{width:"17px",height:"17px"}).Ha(this.f.button,{backgroundPosition:"-40px -405px"});!b&&this.Mk&&this.open();this.visible?f.j.Ha(this.f.K,{visibility:"visible"}):f.j.Ha(this.f.K,{visibility:"hidden"})},VJ:function(a){return this[a]}, vk:function(){this.Rw();this.Fa={button:f.event.U(this.f.button,"click",this.x5,this),Xna:f.event.U(this.f.Dp,"mousedown",this.$p,this),Yna:f.event.U(document,"mousemove",this.Yp,this),boa:f.event.U(document,"mouseup",this.Zp,this),aoa:f.event.U(this.f.Dp,"touchstart",this.$p,this),$na:f.event.U(document,"touchmove",this.Yp,this),Zna:f.event.U(document,"touchend",this.Zp,this),dma:f.event.addListener(this.map,"moveend",this.Rw,this),fma:f.event.addListener(this.map,"zoomend",this.Rw,this),ema:f.event.addListener(this.map, "resize",this.Rw,this)}},Bk:function(){if(this.Fa)for(var a in this.Fa)this.Fa.hasOwnProperty(a)&&f.event.removeListener(this.Fa[a])},x5:function(){this.Mk?this.close():this.open()},$p:function(a){f.C.stopPropagation(a).preventDefault(a);a=f.C.Gj("touchstart"===a.type?a.touches[0]:a,this.f.map);this.x=a.Ae();this.y=a.Hd();this.cD=+f.j.me(this.f.Dp,"left").replace("px","");this.Yb=+f.j.me(this.f.Dp,"top").replace("px","");this.Gq=!0},Yp:function(a){if(this.Gq){this.tW="touchmove"===a.type?a.touches[0]: a;var b=f.C.Gj(this.tW,this.f.map);a=b.Ae()-this.x;var b=b.Hd()-this.y,c=this.cD+a,d=this.Yb+b;this.mJ=a;this.nJ=b;f.j.Ha(this.f.Dp,{left:c+"px",top:d+"px"})}},Zp:function(){if(this.Gq){var a=f.C.Gj(this.tW,this.f.map),b=a.Ae()-this.x,c=a.Hd()-this.y,d=this.cD,e=this.Yb,g=this;f.l.Me&&(b=this.mJ,c=this.nJ);var h=this.cD+b,k=this.Yb+c,l=Math.round(b/10),m=Math.round(c/10),n=setInterval(function(){f.j.Ha(g.f.kN,{left:d+"px",top:e+"px"});if(Math.abs(h-d)<Math.abs(l)||Math.abs(k-e)<Math.abs(m))window.clearInterval(n), f.j.Ha(g.f.kN,{left:h+"px",top:k+"px"}),g.map.panBy(Math.round(-b/Math.pow(2,g.mU)),Math.round(-c/Math.pow(2,g.mU)));d+=l;e+=m},15);this.Gq=!1}},open:function(){f.e.add(this.CLASS_NAME,"open");var a=17,b=17,c=Math.round((this.width-17)/10),d=Math.round((this.height-17)/10),e,g=this;e=setInterval(function(){a+=c;b+=d;f.j.Ha(g.f.K,{width:a+"px",height:b+"px"});g.fl&&f.j.Ha(g.fl,{right:a+"px"});if(a>=g.width||b>=g.height)window.clearInterval(e),f.j.Ha(g.f.K,{width:g.width+"px",height:g.height+"px"}).Ha(g.f.button, {backgroundPosition:"-40px -386px"}),g.fl&&f.j.Ha(g.fl,{right:g.width+"px"}),g.Mk=!0,g.f.K.removeChild(g.f.Rl),g.f.K.insertBefore(g.f.Rl,g.f.button)},15);f.event.N(this,"open")},close:function(){f.e.add(this.CLASS_NAME,"close");var a=this.width,b=this.width,c=Math.round((this.width-17)/10),d=Math.round((this.height-17)/10),e,g=this;e=setInterval(function(){a-=c;b-=d;f.j.Ha(g.f.K,{width:a+"px",height:b+"px"});g.fl&&f.j.Ha(g.fl,{right:a+"px"});if(17>=a||17>=b)window.clearInterval(e),f.j.Ha(g.f.K,{width:"17px", height:"17px"}).Ha(g.f.button,{backgroundPosition:"-40px -405px"}),g.fl&&f.j.Ha(g.fl,{right:"17px"}),g.Mk=!1,g.f.K.removeChild(g.f.Rl),g.f.K.insertBefore(g.f.Rl,g.f.button)},15);f.event.N(this,"close")},getTileLayer:function(){f.e.add(this.CLASS_NAME,"getTileLayer");return this.Nr},setTileLayer:function(a){f.e.add(this.CLASS_NAME,"setTileLayer");this.Nr=a;this.map&&this.Rw()},show:function(){f.e.add(this.CLASS_NAME,"show");this.Bb({visible:!0});f.event.N(this,"show")},hide:function(){f.e.add(this.CLASS_NAME, "hide");this.Bb({visible:!1});f.event.N(this,"hide")},Rw:function(){var a=this.map.getSize(),b=this.map.getCenter(),c=this.ed,d=this.t3(a.width,a.height,this.width-5,this.height-5);a.width*a.height*Math.pow(2,2*d)*4>this.width*this.height&&(d-=1);var e=this.map.getZoom()+d;this.mU=d;var g=0,h=0;e>=c[0]&&e<=c[1]?(g=Math.round(Math.pow(2,d)*a.width),h=Math.round(Math.pow(2,d)*a.height)):e=c[0];this.z8(g,h);this.q8(b,e)},q8:function(a,b){this.Ai||(this.Ai=[]);for(var c=this.map.Xb(a,b),d=this.width- 5,e=this.height-5,g=Math.floor((c.y-e/2)/256),h=Math.floor((c.x+d/2)/256),k=Math.floor((c.y+e/2)/256),l=0,m=Math.floor((c.x-d/2)/256);m<=h;m+=1)for(var n=g;n<=k;n+=1){this.Ai.length<=l&&this.Ai.push(f.j.create("img",this.f.map));var p=this.Ai[l];f.j.Ha(p,{visibility:"inherit",position:"absolute",left:256*m-c.x+d/2+"px",top:256*n-c.y+e/2+"px"});p.src=this.Ls(m,n,b);l+=1}for(;l<this.Ai.length;)f.j.Ha(this.Ai[l],{visibility:"hidden"}),l+=1},t3:function(a,b,c,d){a=Math.log(c/a)/Math.LN2;b=Math.log(d/ b)/Math.LN2;return Math.floor(Math.min(a,b))},z8:function(a,b){var c={};0<a&&0<b?(c.width=a+"px",c.height=b+"px",c.left=Math.round((this.width-5-a)/2)+"px",c.top=Math.round((this.height-5-b)/2)+"px",c.display="block"):c.display="none";f.j.Ha([this.f.kN,this.f.Dp],c);this.f.Rl.removeChild(this.f.Dp);this.f.Rl.appendChild(this.f.Dp)},Ls:function(a,b,c){this.Nr||(this.Nr=new w.w.Wa({getTileUrl:f.A.Qb+"://webrd01.is.autonavi.com/appmaptile?lang="+this.map.get("lang")+"&size=1&scale=1&style=7&x=[x]&y=[y]&z=[z]"})); return this.Nr.getTileUrl(a,b,c)},Rt:function(){return[0,this.Mk?this.width+5:22,this.Mk?this.height+5:22,0]}});window.AMap.OverView||(window.AMap.OverView=f.N_); ')

_jsload_('AMap.ToolBar', 'f.f0=f.ba.extend({ga:[f.ka],ah:\'.amap-toolbar{z-index:150}.amap-toolbar{position:absolute;width:52px;overflow:visible}.amap-pancontrol{width:52px;height:52px;background:url(../../theme/v1.3/map_view.png) 0 -140px;position:absolute;_background:url(../../theme/v1.3/map_view.gif)}.amap-pan-left,.amap-pan-top,.amap-pan-right,.amap-pan-bottom{position:absolute;cursor:pointer}.amap-pan-left,.amap-pan-right{width:12px;height:18px;top:17px}.amap-pan-top,.amap-pan-bottom{width:18px;height:12px;left:17px}.amap-pan-left{left:8px}.amap-pan-right{left:32px}.amap-pan-top{top:8px}.amap-pan-bottom{top:31px}.amap-pan-left:hover,.amap-pan-top:hover,.amap-pan-right:hover,.amap-pan-bottom:hover{background:url(../../theme/v1.3/map_view.png);_background:url(../../theme/v1.3/map_view.gif)}.amap-pan-left:hover{background-position:-52px -110px}.amap-pan-top:hover{background-position:-70px -112px}.amap-pan-right:hover{background-position:-61px -110px}.amap-pan-bottom:hover{background-position:-84px -110px}.amap-pan-left-hover{_background:url(../../theme/v1.3/map_view.gif);background-position:-52px -110px}.amap-pan-top-hover{_background:url(../../theme/v1.3/map_view.gif);background-position:-70px -112px}.amap-pan-right-hover{_background:url(../../theme/v1.3/map_view.gif);background-position:-61px -110px}.amap-pan-bottom-hover{_background:url(../../theme/v1.3/map_view.gif);background-position:-84px -110px}.amap-zoomcontrol{width:24px;position:absolute;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none}.amap-zoom-plus,.amap-zoom-minus,.amap-zoom-cursor,.amap-zoom-label-street,.amap-zoom-label-city,.amap-zoom-label-province,.amap-zoom-label-country{background:url(../../theme/v1.3/map_view.png);_background:url(../../theme/v1.3/map_view.gif);cursor:pointer}.amap-zoom-ruler,.amap-zoom-mask{background:url(../../theme/v1.3/toolbar_rbg.png);cursor:pointer}.amap-zoom-ruler{overflow:visible}.amap-zoom-plus,.amap-zoom-minus{width:24px;height:21px}.amap-zoom-plus{background-position:0 -217px}.amap-zoom-plus:hover{background-position:0 -194px}.amap-zoom-minus{background-position:-26px -224px}.amap-zoom-minus:hover{background-position:-26px -195px}.amap-zoom-plus2:hover{background-position:-50px -194px;cursor:default}.amap-zoom-minus2:hover{background-position:-50px -223px;cursor:default}.amap-zoom-ruler{width:12px;height:147px;position:relative;left:6px;background-position:0 0}.amap-zoom-mask,.amap-zoom-cursor,.amap-zoom-labels,.amap-zoom-label-street,.amap-zoom-label-city,.amap-zoom-label-province,.amap-zoom-label-country{position:absolute}.amap-zoom-mask{width:12px;height:106px;background-position:-14px 0}.amap-zoom-cursor{width:24px;height:20px;left:-6px;top:106px;background-position:-127px -164px}.amap-zoom-cursor:hover{background-position:-127px -141px}.amap-zoom-labels{display:none}.amap-zoom-label-street,.amap-zoom-label-city,.amap-zoom-label-province,.amap-zoom-label-country{width:39px;height:31px;left:20px}.amap-zoom-label-street{top:0;background-position:-87px -140px}.amap-zoom-label-city{top:54px;background-position:-87px -171px}.amap-zoom-label-province{top:92px;background-position:-87px -203px}.amap-zoom-label-country{top:129px;background-position:-87px -235px}.amap-locate{position:absolute;width:18px;height:18px;background:url(../../theme/v1.3/map_view.png);_background:url(../../theme/v1.3/map_view.gif);background-position:-130px -185px;cursor:pointer}.amap-geo{width:30px;height:30px;cursor:pointer;bottom:18px;right:7px}.amap-toolbar-geo{position:absolute}.amap-touch-toolbar .amap-zoomcontrol{position:absolute;right:4px;bottom:-80px;z-index:500;width:35px;background-color:white;background-color:rgba(255,255,255,0.9);border-radius:3px;border:1px solid #ccc;box-shadow:1px 1px 10px 0 #ccc}.amap-touch-toolbar .amap-zoomcontrol:after{position:absolute;content:"";height:1px;background:#ddd;top:48px;width:60%;margin:auto;left:0;right:0}.amap-toolbar-geo-secc{background-image:url(../../theme/v1.3/markers/b/loc.png)!important;background-size:22px 22px!important;background-position-x:6px!important}.amap-touch-toolbar .amap-geo{background:#fff url(../../theme/v1.3/markers/b/loc_gray.png) 50% 50% no-repeat;width:35px;height:35px;border:1px solid #ccc;border-radius:3px;right:4px}.amap-touch-toolbar .amap-locate-loading{background-image:url(../../theme/v1.3/loading.gif)}.amap-zoom-touch-plus{margin-bottom:5px}amap-zoom-touch-plus,.amap-zoom-touch-minus{width:100%;height:43px;background-color:white;background-color:rgba(255,255,255,0.5)}.amap-zoom-touch-plus>div,.amap-zoom-touch-minus>div{margin:auto;font-size:26px;line-height:43px;font-family:verdana;text-align:center;color:#666;height:100%;cursor:pointer}.amap-zoom-touch>div{opacity:.2}\', B:function(a){this.CLASS_NAME="AMap.ToolBar";f.e.cb(this.CLASS_NAME,a);this.ye(a||{});this.f={};this.f.K=f.j.create("div",null,"amap-toolbar");this.f.tr=f.j.create("div",this.f.K,"amap-pancontrol");this.f.left=f.j.create("div",this.f.tr,"amap-pan-left");this.f.top=f.j.create("div",this.f.tr,"amap-pan-top");this.f.right=f.j.create("div",this.f.tr,"amap-pan-right");this.f.bottom=f.j.create("div",this.f.tr,"amap-pan-bottom");this.f.Be=f.j.create("div",this.f.K,"amap-locate");this.f.zoom=f.j.create("div", this.f.K,"amap-zoomcontrol");this.f.ei=f.j.create("div",this.f.zoom,"amap-zoom-plus");this.f.yg=f.j.create("div",this.f.zoom,"amap-zoom-ruler");this.f.ag=f.j.create("div",this.f.zoom,"amap-zoom-minus");this.f.jD=f.j.create("div",this.f.yg,"amap-zoom-mask");this.f.cursor=f.j.create("div",this.f.yg,"amap-zoom-cursor");this.f.labels=f.j.create("div",this.f.yg,"amap-zoom-labels");this.f.street=f.j.create("div",this.f.labels,"amap-zoom-label-street");this.f.city=f.j.create("div",this.f.labels,"amap-zoom-label-city"); this.f.KX=f.j.create("div",this.f.labels,"amap-zoom-label-province");this.f.country=f.j.create("div",this.f.labels,"amap-zoom-label-country");(this.ho=(this.b9=f.l.Z)||a&&a.liteStyle)?(this.$ga(),this.position="RB",this.offset=new f.G(10,110)):f.j.Ha(this.f.tr,{position:"relative"}).Ha(this.f.Be,{position:"relative",left:"17px"}).Ha(this.f.zoom,{position:"relative",left:"14px"});this.Bb(a);this.mI&&this.aI()},ye:function(a){this.wia=a.useNative||!1;this.Sh="toolbar";this.MY=this.Be=this.direction= this.yg=this.visible=!0;this.position="LT";this.offset=new f.G(10,10);this.mI=!1;this.timeout=a.timeout||5E3;this.Hda=f.A.qb+"/theme/v1.3/small_loading.gif";this.gn=new w.D.ab({position:this.gg,offset:new f.G(-11,-11),content:"<div style=\'width:23px;height:23px;overflow:hidden;\'><img style=\'position:relative;cursor:pointer;\' width=\'23px\' height=\'23px\' src=\'"+f.A.Xg+"/loc.png\'></div>"});this.gn.la=!0},pq:function(a,b){this.map=a;b.appendChild(this.f.K);this.ze=b;this.jT();this.vk();var c=this;setTimeout(function(){c.map&& c.OR()},0)},zr:function(){this.Bk();this.ze.removeChild(this.f.K);this.map=this.ze=null;this.$H()},$ga:function(){var a=f.j.create("div",this.f.ei);a.innerHTML="&#43;";f.j.Ma(this.f.ei,"amap-zoom-plus");f.j.Ga(this.f.ei,"amap-zoom-touch-plus");f.j.Ma(this.f.Be,"amap-locate");f.j.Ga(this.f.Be,"amap-geo amap-toolbar-geo");a=f.j.create("div",this.f.ag);a.innerHTML="&#8722;";f.j.Ma(this.f.ag,"amap-zoom-minus");f.j.Ga(this.f.ag,"amap-zoom-touch-minus");f.j.Ga(this.f.K,"amap-touch-toolbar")},aha:function(a){a.direction= !1;!0!==a.locate&&(a.locate=!1);a.ruler=!1;return a},Bb:function(a){a=a||{};this.ho&&(a=this.aha(a));for(var b in a)a.hasOwnProperty(b)&&"_"!==b.substr(0,1)&&void 0!==this[b]&&(this[b]=a[b]);this.offset=void 0!==a.offset?a.offset:this.offset;this.position=void 0!==a.position?a.position:this.position;this.yg=void 0!==a.ruler?a.ruler:this.yg;this.Be=void 0!==a.locate?a.locate:this.Be;this.direction=void 0!==a.direction?a.direction:this.direction;this.mI=void 0!==a.autoPosition?a.autoPosition:this.mI; void 0!==a.locationMarker&&(this.gn.getMap===this.map&&(this.gn.setMap(null),a.locationMarker.setPosition(this.gn.getPosition()),a.locationMarker.setMap(this.map)),this.gn=a.locationMarker);this.X4();this.position&&this.offset&&this.Kw(this.position,this.offset);this.direction?f.j.Ha(this.f.tr,{display:"block"}):f.j.Ha(this.f.tr,{display:"none"});this.Be?f.j.Ha(this.f.Be,{display:"block"}):f.j.Ha(this.f.Be,{display:"none"});!this.yg||this.map&&270>this.map.getSize().getHeight()?f.j.Ha(this.f.yg,{display:"none"}): f.j.Ha(this.f.yg,{display:"block"});this.visible?f.j.Ha(this.f.K,{visibility:"visible"}):f.j.Ha(this.f.K,{visibility:"hidden"})},VJ:function(a){return this[a]},Kw:function(a,b){switch(a){case "LT":f.j.Ha(this.f.K,{left:b.Ae()+"px",top:b.Hd()+"px",right:"",bottom:""});break;case "RT":f.j.Ha(this.f.K,{right:b.Ae()+"px",top:b.Hd()+"px",left:"",bottom:""});break;case "LB":f.j.Ha(this.f.K,{left:b.Ae()+"px",bottom:b.Hd()+"px",right:"",top:""});break;case "RB":f.j.Ha(this.f.K,{right:b.Ae()+"px",bottom:b.Hd()+ "px",left:"",top:""})}this.ze&&(this.ze.removeChild(this.f.K),this.ze.appendChild(this.f.K))},OR:function(){this.ed=null;this.jT();this.QH(this.map.get("zoom"))},vk:function(){this.QH(this.map.get("zoom"));this.Fa={ed:f.event.addListener(this.map,"zooms",this.OR,this),left:f.event.U(this.f.left,"click",this.K5,this),top:f.event.U(this.f.top,"click",this.D6,this),right:f.event.U(this.f.right,"click",this.j6,this),bottom:f.event.U(this.f.bottom,"click",this.u5,this),Be:f.event.U(this.f.Be,"click",this.N5, this),Ama:f.event.U(this.f.K,"mousedown",function(a){f.C.preventDefault(a)},this),Vka:f.event.U(this.f.cursor,"mousedown",this.$p,this),Oka:f.event.U(this.f.cursor,"mouseover",this.F5,this),Nka:f.event.U(this.f.cursor,"mouseout",this.G5,this),Tka:f.event.U(document,"mousemove",this.Yp,this),Uka:f.event.U(document,"mouseup",this.Zp,this),cursor:f.event.U(this.f.cursor,"click",this.E5,this),ei:f.event.U(this.f.ei,"click",this.e6,this),ag:f.event.U(this.f.ag,"click",this.P5,this),nna:f.event.U(this.f.yg, "mouseover",this.CR,this),koa:f.event.U(this.f.zoom,"mouseout",this.BR,this),Ula:f.event.U(this.f.labels,"mouseover",this.CR,this),Tla:f.event.U(this.f.labels,"mouseout",this.BR,this),yg:f.event.U(this.f.yg,"click",this.B6,this),street:f.event.U(this.f.street,"click",this.C6,this),city:f.event.U(this.f.city,"click",this.y5,this),KX:f.event.U(this.f.KX,"click",this.f6,this),country:f.event.U(this.f.country,"click",this.D5,this),XZ:f.event.addListener(this.map,"zoomend",this.pl,this),Lna:f.event.U(this.f.K, "touchstart",f.a.DU,f.C.stopPropagation),resize:f.event.addListener(this.map,"resize",this.i6,this)};f.l.Dh&&(this.Fa.Wla=f.event.U(this.f.left,"mouseover",this.M5,this),this.Fa.Jna=f.event.U(this.f.top,"mouseover",this.F6,this),this.Fa.bna=f.event.U(this.f.right,"mouseover",this.m6,this),this.Fa.tka=f.event.U(this.f.bottom,"mouseover",this.w5,this),this.Fa.Vla=f.event.U(this.f.left,"mouseout",this.L5,this),this.Fa.Ina=f.event.U(this.f.top,"mouseout",this.E6,this),this.Fa.ana=f.event.U(this.f.right, "mouseout",this.l6,this),this.Fa.ska=f.event.U(this.f.bottom,"mouseout",this.v5,this))},F5:function(){this.f.cursor.style.top=parseInt(this.f.cursor.style.top)-2+"px"},G5:function(){this.f.cursor.style.top=parseInt(this.f.cursor.style.top)+2+"px"},Bk:function(){if(this.Fa)for(var a in this.Fa)this.Fa.hasOwnProperty(a)&&f.event.removeListener(this.Fa[a])},K5:function(){this.map.panBy(this.map.getSize().width/2-1,0)},u5:function(){this.map.panBy(0,-this.map.getSize().height/2+1)},j6:function(){this.map.panBy(-this.map.getSize().width/ 2+1,0)},M5:function(){this.f.left.className+=" amap-pan-left-hover"},m6:function(){this.f.right.className+=" amap-pan-right-hover"},F6:function(){this.f.top.className+=" amap-pan-top-hover"},w5:function(){this.f.bottom.className+=" amap-pan-bottom-hover"},L5:function(){this.f.left.className=this.f.left.className.replace(" amap-pan-left-hover","")},l6:function(){this.f.right.className=this.f.right.className.replace(" amap-pan-right-hover","")},E6:function(){this.f.top.className=this.f.top.className.replace(" amap-pan-top-hover", "")},v5:function(){this.f.bottom.className=this.f.bottom.className.replace(" amap-pan-bottom-hover","")},D6:function(){this.map.panBy(0,this.map.getSize().height/2-1)},X4:function(){navigator.geolocation||(this.Be=!1)},jT:function(){this.ed||(this.ed=this.map?this.map.get("zooms"):[3,18]);this.MY=5<this.ed[0]||17>this.ed[1]?!1:!0},N5:function(){this.gg?this.$H():this.aI()},fka:function(a,b){var c=f.A.ud+"/v3/assistant/coordinate/convert?coordsys=gps&s=rsv3&output=json",c=c+"&locations="+a.toString()+ "&key="+f.A.key,c=new f.Sa.bb(c,{callback:"callback"});c.g("complete",b,this);c.g("error",b,this)},aI:function(){if(navigator.geolocation){this.ho||(this.f.be||(this.f.be=f.j.create("img",this.f.Be),this.f.be.src=this.Hda,f.j.Ha(this.f.be,{margin:(this.ho?10:4)+"px"})),this.f.Be.appendChild(this.f.be));f.j.Ga(this.f.Be,"amap-locate-loading");var a=this;f.gb.load("AMap.Geolocation",function(){a.geolocation||(a.geolocation=new f.dl({useNative:this.wia,showButton:!1,showMarker:!1,showCircle:!1,panToLocation:!1, maximumAge:6E5}));a.geolocation.getCurrentPosition(function(b,c){f.j.Ma(a.f.Be,"amap-locate-loading");"complete"===b?(a.Y4(c),f.event.N(a,"location-success",c)):(a.W4(),f.event.N(a,"location-failed",c))})})}},$H:function(){this.ho?f.j.Ma(this.f.Be,"amap-toolbar-geo-secc"):f.j.Ha(this.f.Be,{backgroundPosition:"-130px -185px"});this.W3();this.gg=null},T8:function(){var a=this;if(this.gg)if(this.yb=this.gn,this.yb.setMap(this.map),this.gn instanceof w.D.ab&&this.gn.setPosition(this.gg),this.Cv&&(this.Da= new w.D.fe({isCustom:!0,content:"<span style=\'display: block; width:80px;background: #fff;border: 1px solid blue;font-size: 12px;border-radius: 3px;\'>\\u5b9a\\u4f4d\\u7cbe\\u5ea6:"+this.Cv+"\\u7c73</span>",offset:new f.G(25,0)}),this.yb.g("mouseover",function(){a.Da.open(a.map,a.yb.getPosition())}),this.yb.g("mouseout",function(){a.Da.close()})),this.Cv){this.tb=new w.D.Pf({center:this.gg,radius:this.Cv,strokeColor:"#0093FF",strokeOpacity:0.3,strokeWeight:1,fillColor:"#02B0FF",fillOpacity:0.25});this.tb.la= !0;this.tb.setMap(this.map);var b=this.map.getSize(),b=Math.min(b.width,b.height)/4,b=Math.floor(Math.LOG2E*Math.log(b*Math.cos(this.gg.getLat()*Math.PI/180)*12756274*Math.PI/256/this.Cv));this.map.setZoomAndCenter(b,this.gg)}else this.map.setCenter(this.gg);f.event.N(this,"location",{type:"location",lnglat:this.gg})},W3:function(){this.yb&&(this.yb.setMap(null),this.yb=null);this.tb&&(this.tb.setMap(null),this.tb=null);this.gn.setMap(null)},S8:function(){this.MY&&this.f.labels&&f.j.Ha(this.f.labels, {display:"block"})},V3:function(){this.f.labels&&f.j.Ha(this.f.labels,{display:"none"})},gv:function(a,b){var c=b-a;c&&f.event.N(this,"zoomchanged",{type:0===c?void 0:0<c?"zoomin":"zoomout"})},QH:function(a){var b=+f.j.me(this.f.yg,"height").replace("px",""),c=this.ed;a>c[1]&&(a=c[1]);a<c[0]&&(a=c[0]);b=c[0]===c[1]?0:Math.floor((b-10)*(c[1]-a)/(c[1]-c[0]));f.j.Ha(this.f.jD,{height:b+"px"});f.j.Ha(this.f.cursor,{top:b+"px"});this.ho?(a===c[1]?f.j.Ga(this.f.ei,"amap-zoom-touch"):f.j.Ma(this.f.ei,"amap-zoom-touch"), a===c[0]?f.j.Ga(this.f.ag,"amap-zoom-touch"):f.j.Ma(this.f.ag,"amap-zoom-touch")):(a===c[1]?f.j.Ga(this.f.ei,"amap-zoom-plus2"):f.j.Ma(this.f.ei,"amap-zoom-plus2"),a===c[0]?f.j.Ga(this.f.ag,"amap-zoom-minus2"):f.j.Ma(this.f.ag,"amap-zoom-minus2"))},WP:function(){var a=+f.j.me(this.f.yg,"height").replace("px",""),b=this.ed,c=+f.j.me(this.f.jD,"height").replace("px","");return b[1]-Math.round((b[1]-b[0])*c/(a-10))},$p:function(a){this.map&&this.map.getStatus().zoomEnable&&(f.C.stopPropagation(a).preventDefault(a), this.y=f.C.Gj(a,this.f.zoom).Hd(),this.Yb=+f.j.me(this.f.cursor,"top").replace("px",""),this.Gq=!0)},Yp:function(a){if(this.Gq){f.C.stopPropagation(a).preventDefault(a);a=f.C.Gj(a,this.f.zoom).Hd()-this.y;a=this.Yb+a;var b=+f.j.me(this.f.yg,"height").replace("px","");0<=a&&a<b-10&&(f.j.Ha(this.f.cursor,{top:a+"px"}),f.j.Ha(this.f.jD,{height:a+2+"px"}))}},Zp:function(){if(this.Gq){var a=this.map.get("zoom"),b=this.WP();this.map.setZoom(b);this.gv(a,b);this.Gq=!1}},E5:function(a){f.C.stopPropagation(a).preventDefault(a)}, pl:function(){this.QH(this.map.get("zoom"))},e6:function(a){f.C.stopPropagation(a).preventDefault(a);this.map.zoomIn();f.event.N(this,"zoomchanged",{type:"zoomin"})},P5:function(a){f.C.stopPropagation(a).preventDefault(a);this.map.zoomOut();f.event.N(this,"zoomchanged",{type:"zoomout"})},CR:function(){this.nW=!0;this.S8()},BR:function(){this.nW=!1;var a=this;setTimeout(function(){a.nW||a.V3()},1E3)},B6:function(a){if(this.map&&this.map.getStatus().zoomEnable){a=f.C.Gj(a,this.f.yg).y;var b=+f.j.me(this.f.yg, "height").replace("px","");a>b-10&&(a=b-10);f.j.Ha(this.f.cursor,{top:a+"px"}).Ha(this.f.jD,{height:a+"px"});a=this.map.get("zoom");b=this.WP();this.map.setZoom(b);this.gv(a,b)}},C6:function(a){this.map&&this.map.getStatus().zoomEnable&&(f.C.stopPropagation(a).preventDefault(a),this.map.setZoom(17),a=this.map.get("zoom"),this.gv(a,17))},y5:function(a){this.map&&this.map.getStatus().zoomEnable&&(f.C.stopPropagation(a).preventDefault(a),this.map.setZoom(11),a=this.map.get("zoom"),this.gv(a,11))},f6:function(a){this.map&& this.map.getStatus().zoomEnable&&(f.C.stopPropagation(a).preventDefault(a),this.map.setZoom(7),a=this.map.get("zoom"),this.gv(a,7))},D5:function(a){this.map&&this.map.getStatus().zoomEnable&&(f.C.stopPropagation(a).preventDefault(a),this.map.setZoom(3),a=this.map.get("zoom"),this.gv(a,3))},i6:function(){this.Bb({locate:this.Be})},Y4:function(a){try{this.gg=a.position,this.Cv=a.accuracy,this.f.be&&this.f.be.parentNode&&this.f.be.parentNode.removeChild(this.f.be),this.ho?f.j.Ga(this.f.Be,"amap-toolbar-geo-secc"): f.j.Ha(this.f.Be,{backgroundPosition:"-130px -211px"}),this.T8({locations:this.gg+""})}catch(b){}},W4:function(){this.gg=null;try{this.f.Be.removeChild(this.f.be),this.ho||f.j.Ha(this.f.Be,{backgroundPosition:"-130px -185px"})}catch(a){}},getOffset:function(){f.e.add(this.CLASS_NAME,"getOffset");return this.offset},setOffset:function(a){f.e.add(this.CLASS_NAME,"setOffset");this.Bb({offset:a})},hideRuler:function(){f.e.add(this.CLASS_NAME,"hideRuler");this.Bb({ruler:!1})},showRuler:function(){f.e.add(this.CLASS_NAME, "showRuler");this.Bb({ruler:!0})},hideDirection:function(){f.e.add(this.CLASS_NAME,"hideDirection");this.Bb({direction:!1})},showDirection:function(){f.e.add(this.CLASS_NAME,"showDirection");this.Bb({direction:!0})},hideLocation:function(){f.e.add(this.CLASS_NAME,"hideLocation");this.Bb({locate:!1})},showLocation:function(){f.e.add(this.CLASS_NAME,"showLocation");this.Bb({locate:!0})},hide:function(){f.e.add(this.CLASS_NAME,"hide");this.Bb({visible:!1});f.event.N(this,"hide")},show:function(){f.e.add(this.CLASS_NAME, "show");this.Bb({visible:!0});f.event.N(this,"show")},doLocation:function(){f.e.add(this.CLASS_NAME,"doLocation");this.gg&&this.$H();this.aI()},getLocation:function(){f.e.add(this.CLASS_NAME,"getLocation");return this.gg},Rt:function(){var a=[0,0,0,0];if(this.f.K){var b=f.j.me(this.f.K,"width"),c=f.j.me(this.f.K,"height"),b=this.offset.Ae()+parseFloat(b),c=this.offset.Hd()+parseFloat(c)+5;-1!==this.position.indexOf("T")&&(a[0]=c);-1!==this.position.indexOf("R")&&(a[1]=b);-1!==this.position.indexOf("B")&& (a[2]=c);-1!==this.position.indexOf("L")&&(a[3]=b)}return a}});window.AMap.ToolBar||(window.AMap.ToolBar=f.f0); ')

_jsload_('AMap.CircleEditor', 'f.sN=f.ba.extend({ga:[f.ka],B:function(a,b,c,d){this.CLASS_NAME="AMap.CircleEditor";f.e.cb(this.CLASS_NAME,d);this.h=a;this.tb=b;this.tb.setOptions({draggable:c||!1});this.qb=f.A.qb;d&&d.oC&&(this.oC=!0)},open:function(){f.e.add(this.CLASS_NAME,"open");this.sd&&this.Eb||this.Sp();this.sd&&this.sd.setMap(this.h);if(this.Eb)for(var a=0,b=this.Eb.length;a<b;a+=1)this.Eb[a].setMap(this.h);this.xw=this.tb.getOptions.draggable;this.tb.g("dragstart",this.$Q,this);this.tb.g("dragging",this.ZQ,this);this.tb.g("setCenter", this.jx,this);this.tb.g("setRadius",this.Cy,this)},jx:function(){var a=this.tb.getCenter(),b=this.sd.getPosition(),b=a.Va(b);this.Eb[0].setPosition(this.Eb[0].getPosition().add(b));this.sd.setPosition(a)},Cy:function(){var a=this.tb.getCenter(),b=this.tb.getRadius(),c=b*Math.cos(Math.PI/4);this.Eb[0].setPosition(a.offset(c,c));this.Eb[0].setLabel({content:"\\u534a\\u5f84:"+b+"\\u7c73"})},close:function(){f.e.add(this.CLASS_NAME,"close");this.sd&&(this.sd.setMap(null),delete this.sd);if(this.Eb){for(var a= 0,b=this.Eb.length;a<b;a+=1)this.Eb[a].setMap(null);delete this.Eb}this.tb.setOptions({draggable:this.xw});this.tb.I("dragstart",this.$Q,this);this.tb.I("dragging",this.ZQ,this);this.tb.I("setCenter",this.jx,this);this.tb.I("setRadius",this.Cy,this);this.r("end",{type:"end",target:this.tb})},$Q:function(a){this.aO=a.lnglat},ZQ:function(a){var b=a.lnglat.Va(this.aO);this.aO=a.lnglat;this.sd.setPosition(this.sd.getPosition().add(b));this.Eb[0].setPosition(this.Eb[0].getPosition().add(b))},Sp:function(){this.IF(); this.KF()},IF:function(){var a=this.tb.getCenter();this.oC?(this.sd=new w.D.ab({position:a,visible:!1}),this.sd.la=!0):this.sd=this.Kg(a)},KF:function(){var a=this.tb.getCenter(),a=this.$v(a);this.Eb=[];this.Eb.push(this.Kg(a,!0))},$v:function(a){var b=this.tb.getRadius()*Math.cos(Math.PI/4);return a.offset(b,b)},Kg:function(a,b){var c=new w.D.ab({position:a,draggable:!0,icon:new w.D.Gg({size:new f.Uc(11,11),imageOffset:new f.G(0,0),image:this.qb+"/images/dd-via.png"}),offset:new f.G(-6,-6),zIndex:this.tb.get("zIndex")+ 1E3});c.la=!0;b&&(c.setLabel({content:"\\u534a\\u5f84:"+this.tb.getRadius()+"\\u7c73",offset:new AMap.Pixel(15,-4)}),c.setTitle("\\u62d6\\u62fd\\u4fee\\u6539\\u534a\\u5f84"));this.Hv(c);return c},Hv:function(a){a.g("dragstart",this.AR,this).g("dragging",this.sk,this).g("dragend",this.Wn,this)},ZS:function(a){a.I("dragstart",this.AR,this).I("dragging",this.sk,this).I("dragend",this.Wn,this)},AR:function(){},hl:function(){this.tb.$aa=!0;this.tb.r("edit")},sk:function(a){a=a.target;var b=a.getPosition();a=== this.sd?this.aH(b):this.Hw(b)},Wn:function(){this.hl();this.r("dragend",{type:"dragend",target:this.tb})},aH:function(a){if(!this.oC){var b=this.Eb[0].getPosition().add(a.Va(this.tb.getCenter()));this.Eb[0].setPosition(b);this.tb.setCenter(a,!0);this.r("move",{type:"move",lnglat:a,target:this.tb})}},Hw:function(a){var b=this.tb.getCenter();a=Math.round(b.distance(a));this.tb.setRadius(a,!0);this.Eb[0].setLabel({content:"\\u534a\\u5f84:"+a+"\\u7c73"});this.r("adjust",{type:"adjust",radius:a,target:this.tb})}}); window.AMap.CircleEditor=f.sN; ')	
	
_cssload_('AMap.BezierCurveEditor', '.amap-bzcv-node{cursor:pointer;width:15px;height:15px}.amap-bzcv-node.amap-bzcv-middNode,.amap-bzcv-node.amap-bzcv-pathNode{background:url('+offlineMap.domain+'/images/dd-via.png) 50% 50% no-repeat}.amap-bzcv-node.amap-bzcv-ctrlNode{background:url('+offlineMap.domain+'/images/point.png) 50% 50% no-repeat}.amap-bzcv-node.amap-bzcv-mobile{width:25px;height:25px;background-color:rgba(0,0,0,.2);border-radius:13px}')
_jsload_('AMap.BezierCurveEditor', '(function(a){var b=a.ba.extend({ga:[a.ka],B:function(b,d,e,g){this.Cb=a.extend({getMarkerOptions:function(b){return{content:\'<div class="\'+(a.l.Z?"amap-bzcv-mobile ":"")+"amap-bzcv-node amap-bzcv-"+b+\'"></div>\',offset:a.l.Z?new a.G(-13,-13):new a.G(-8,-8)}},getCtrlLineOptions:function(){return{lineCap:"round",strokeDasharray:[10,10],strokeColor:"red",strokeOpacity:0.5,strokeWeight:3,strokeStyle:"dashed"}}},g);this.h=b;this.hd=e;d&&this.Hr(d)},Hr:function(a){this.RO();this.o2(a)},FC:function(){if(!this.Te)return[]; for(var a=[],b=0,e=this.Te.length;b<e;b++)a.push(this.v3(this.Te[b]));return a},JD:function(){this.Hr(this.FC())},v3:function(a){var b=a.getPosition();if(a.Ph){for(var e=[],g=0,h=a.Ph.length;g<h;g++)e.push(a.Ph[g].getPosition());b.controlPoints=e.length?e:null}return b},o2:function(a){this.Te=[];for(var b=0,e=a.length;b<e;b++)this.n2(b,a[b])},RO:function(){if(this.Te){for(var a=0,b=this.Te.length;a<b;a++)this.zs(this.Te[a]);this.Te=null}},j8:function(a){if(this.Te&&!(2>=this.Te.length))for(var b= this.Te,e=0,g=b.length;e<g;e++)if(b[e]===a)return b.splice(e,1),this.zs(a),this.JD(),this.r("_pathChanged"),!0},zs:function(a){a.r("_clearNode");a.setMap(null);a.Uh();var b,e;if(a.Ph){b=0;for(e=a.Ph.length;b<e;b++)this.zs(a.Ph[b]);a.Ph=null}if(a.Xp){b=0;for(e=a.Xp.length;b<e;b++)this.zs(a.Xp[b]);a.Xp=null}a.Nz&&(a.Nz.stop(),a.Nz=null)},Y1:function(a){this.zs(a)},n2:function(a,b){function e(a){this.r("addCtrlNode",a);this.L0(g)}var g=this.Kg("pathNode",{position:b});g.OA=a;g.Vja=!0;this.Te[a]=g;g.g("dragstart", this.Q5,this);g.g("click",function(a){this.j8(g)&&this.r("removePathNode",a)},this);g.g("rightclick",e,this);g.g("longpress",e,this);0<a&&(b.controlPoints?this.h2(a,g):this.l2(a,g))},L0:function(a){a.Ph||(a.Ph=[]);var b=this.Te[a.OA-1];if(b){var e=a.Ph.length;if(0===e)b=this.mG(b,a,0.5);else if(1===e)b=this.s3(b.getPosition(),a.Ph[0].getPosition(),a.getPosition());else return;this.WO(e,e+1,b,a.OA,function(){this.JD();this.r("_pathChanged")})}},s3:function(a,b,e){var g=this.h;a=g.Xb(a);b=g.Xb(b);e= g.Xb(e);return g.Ag(e.add(a.Va(b)))},h8:function(a){var b=this.Te[a.p2];if(b&&b.Ph)for(var b=b.Ph,e=0,g=b.length;e<g;e++){if(b[e]===a){b.splice(e,1);this.zs(a);this.JD();this.r("_pathChanged");break}}else console.warn("ctrlNode owner missing!!!")},l2:function(a,b){var e=this.Te[a-1];e&&(e=this.mG(e,b,0.5),e=this.Kg("middNode",{position:e,opacity:0.5}),e.CG=!0,e.c5=a,e.g("dragstart",this.O5,this),e.g("click",function(a){this.kH(a);this.jH(a)},this),b.Xp=[e])},mG:function(a,b,e){return this.MP(a.getPosition(), b.getPosition(),e)},MP:function(a,b,e){var g=this.h;a=g.Xb(a);b=g.Xb(b);return g.Ag(a.add(b.Va(a).Sc(e)))},O5:function(a){a=a.target;a.Hc=!0;a.g("dragging",this.kH,this);a.g("dragend",this.jH,this)},kH:function(a){a=a.target;a.CG&&this.c2(a);a.r("_posChanged");this.r("_pathChanged")},c2:function(b){if(b.CG){var d=b.c5,e=this.Te[d];this.Te.splice(d,0,b);b.CG=!1;a.a.Dt(e.Xp,b)}else console.warn("No middnode!")},jH:function(a){var b=a.target;b.Hc=!1;b.I("dragging",this.kH,this);b.I("dragend",this.jH, this);b.r("_posChanged");this.r("addPathNode",a);this.JD();this.r("_pathChanged")},h2:function(a,b){var e=b.getPosition().controlPoints;if(e){b.Ph=[];for(var g=0,h=e.length;g<h;g++)this.WO(g,h,e[g],a)}},Q5:function(a){a=a.target;a.Hc=!0;a.g("dragging",this.ER,this);a.g("dragend",this.DR,this)},ER:function(a){a=a.target;this.gS(a);a.r("_posChanged");this.r("_pathChanged")},DR:function(a){var b=a.target;b.Hc=!1;this.gS(b);b.I("dragging",this.ER,this);b.I("dragend",this.DR,this);b.r("_posChanged");this.r("pathNodeDragEnd", a);this.r("_pathChanged")},gS:function(a){a=[a,this.Te[a.OA+1]];for(var b=0,e=a.length;b<e;b++)this.b8(a[b])},b8:function(a){if(a&&a.Xp){var b=this.Te[a.OA-1];b&&a.Xp[0].setPosition(this.mG(b,a,0.5))}},WO:function(a,b,e,g,h){var k=this.Te[g],l=[];0===a&&this.Te[g-1]&&l.push(this.Te[g-1]);a===b-1&&l.push(k);var m=this.Kg("ctrlNode",{position:e});m.Xja=l;m.Tja=!0;m.p2=g;m.g("dragstart",this.C5,this);m.g("click",function(a){this.r("removeCtrlNode",a);this.h8(m)},this);if(l)for(b=0,e=l.length;b<e;b++)this.g2(m, l[b],h);return k.Ph[a]=m},Kg:function(b,d){var e=new w.D.ab(a.extend({map:this.h,position:null,draggable:!0,zIndex:this.hd.get("zIndex")+1E3},this.Cb.getMarkerOptions(b),d));e.la=!0;return e},g2:function(b,d,e){function g(){h.setPath([b.getPosition(),d.getPosition()])}var h=new w.D.Fb(a.extend({map:this.h},this.Cb.getCtrlLineOptions()));h.la=!0;e?this.U0(h,b,d,e):g();e=[b,d];for(var k=0,l=e.length;k<l;k++)e[k].g("_posChanged",function(){g()},this),e[k].g("_clearNode",function(){this.Y1(h)},this)}, U0:function(b,d,e,g){var h=d.getPosition(),k=e.getPosition(),l=new a.pi(0,1,function(a,b,c){return c/300},0.1);l.kn=function(a){1<=a&&(a=1);d.setPosition(this.MP(k,h,a));b.setPath([d.getPosition(),e.getPosition()]);1<=a&&(l.stop(),d.Nz=null,g.call(this))};l.Xk(this);d.Nz=l},C5:function(a){a=a.target;a.Hc=!0;a.g("dragging",this.bR,this);a.g("dragend",this.aR,this)},bR:function(a){a.target.r("_posChanged");this.r("_pathChanged")},aR:function(a){var b=a.target;b.Hc=!1;b.I("dragging",this.bR,this);b.I("dragend", this.aR,this);b.r("_posChanged");this.r("ctrlNodeDragEnd",a);this.r("_pathChanged")},Et:function(){this.RO();this.Uh()}});a.b_=a.ba.extend({ga:[a.ka],B:function(b,d,e){this.CLASS_NAME="AMap.BezierCurveEditor";a.e.cb(this.CLASS_NAME,e);this.Cb=a.extend({},e);this.h=b;this.hd=d;this.qb=a.A.qb},hU:function(){this.RL();var c=this.hd.getPath();this.ll=new b(this.h,c,this.hd,this.Cb);this.ll.g("_pathChanged",function(){this.hd.setPath(this.ll.FC(),!0)},this);this.ll.g("removePathNode",function(b){a.event.N(this, "removenode",a.extend({},b,{target:this.hd,type:"removenode"}))},this);this.ll.g("addPathNode",function(b){a.event.N(this,"addnode",a.extend({},b,{target:this.hd,type:"addnode"}))},this);this.ll.g("removeCtrlNode",function(b){a.event.N(this,"removeCtrlNode",a.extend({},b,{target:this.hd,type:"removeCtrlNode"}))},this);this.ll.g("addCtrlNode",function(b){a.event.N(this,"addCtrlNode",a.extend({},b,{target:this.hd,type:"addCtrlNode"}))},this);this.ll.g("pathNodeDragEnd",function(b){a.event.N(this,"adjust", a.extend({},b,{target:this.hd,type:"adjust"}))},this);this.ll.g("ctrlNodeDragEnd",function(b){a.event.N(this,"adjust",a.extend({},b,{target:this.hd,type:"adjust"}))},this)},RL:function(){this.ll&&this.ll.Et()},open:function(){a.e.add(this.CLASS_NAME,"open");this.hU();this.hd.g("setPath",this.TR,this)},TR:function(){this.RL();this.hU()},close:function(){a.e.add(this.CLASS_NAME,"close");this.RL();this.hd.I("setPath",this.TR,this);a.event.N(this,"end",{type:"end",target:this.hd})}})})(f); window.AMap.BezierCurveEditor=f.b_; ')

_jsload_('AMap.EllipseEditor', 'f.l_=f.ba.extend({ah:".amap-ellipse-drag{width:15px;height:15px;background:url(../../../images/dd-via.png) 50% 50% no-repeat;cursor:pointer}.amap-ellipse-drag.mobile{width:25px;height:25px;background-color:rgba(0,0,0,.15);border-radius:13px}",ga:[f.ka],B:function(a,b){this.CLASS_NAME="AMap.EllipseEditor";f.e.cb(this.CLASS_NAME);this.h=a;this.Ld=b;this.qb=f.A.qb},open:function(){var a=this;f.e.add(this.CLASS_NAME,"open");this.sd&&this.Eb||this.Sp();this.sd&&this.sd.setMap(this.h);this.Eb&&this.Eb.forEach(function(b){b.set("map", a.h)});this.xw=this.Ld.getOptions.draggable;this.Ld.setOptions({draggable:!1});this.Ld.g("setCenter",this.jx,this);this.Ld.g("setPath",this.Cy,this)},cT:function(){var a=this,b=this.Ld.getCenter(),c=this.$v(b);this.Eb.forEach(function(b,e){var g=0===e?"\\u6a2a\\u8f74\\u534a\\u5f84":"\\u7eb5\\u8f74\\u534a\\u5f84";b.set("position",c[e]);b.set("label",{content:g+":"+a.Ld.get("radius")[e]+"\\u7c73",offset:f.l.Z?new f.G(27,0):new f.G(15,-6)});b.set("title","\\u62d6\\u62fd\\u4fee\\u6539"+g)})},jx:function(){var a=this.Ld.getCenter(); this.sd.setPosition(a);this.sd.setLabel({content:"\\u5706\\u5fc3\\u5750\\u6807: "+parseFloat(a.O.toFixed(6))+", "+parseFloat(a.P.toFixed(6))});this.cT()},Cy:function(){this.cT()},close:function(){f.e.add(this.CLASS_NAME,"close");this.sd&&(this.sd.setMap(null),delete this.sd);if(this.Eb){for(var a=0,b=this.Eb.length;a<b;a+=1)this.Eb[a].setMap(null);delete this.Eb}this.Ld.I("setCenter",this.jx,this);this.Ld.I("setRadius",this.Cy,this);this.Ld.setOptions({draggable:this.xw});this.r("end",{type:"end",target:this.Ld})}, Sp:function(){this.IF();this.KF()},IF:function(){var a=this.Ld.getCenter();this.sd=this.Kg(a)},KF:function(){var a=this.Ld.getCenter(),a=this.$v(a);this.Eb=[];this.Eb.push(this.Kg(a[0],!0));this.Eb.push(this.Kg(a[1],!0))},$v:function(a){var b=this.Ld.get("radius"),c=b[1];return[a.offset(b[0],0),a.offset(0,c)]},PP:function(a){var b=this.Ld.get("center");return a.P===b.P?0:1},Kg:function(a,b){var c=new w.D.ab({position:a,draggable:!0,content:"<div class=\'amap-ellipse-drag"+(f.l.Z?" mobile":"")+"\'></div>", offset:f.l.Z?new f.G(-13,-13):new f.G(-8,-7),zIndex:this.Ld.get("zIndex")+1E3});c.la=!0;if(b){var d=this.PP(a),e=0===d?"\\u6a2a\\u8f74\\u534a\\u5f84":"\\u7eb5\\u8f74\\u534a\\u5f84";c.setLabel({content:e+":"+this.Ld.getRadius()[d]+"\\u7c73",offset:f.l.Z?new f.G(27,0):new f.G(15,-6)});c.setTitle("\\u62d6\\u62fd\\u4fee\\u6539"+e)}else d=this.Ld.get("center"),c.setLabel({content:"\\u5706\\u5fc3\\u5750\\u6807: "+parseFloat(d.O.toFixed(6))+", "+parseFloat(d.P.toFixed(6)),offset:f.l.Z?new f.G(-22,27):new f.G(-22,15)});this.Hv(c); return c},Hv:function(a){a.g("dragging",this.sk,this).g("dragend",this.Wn,this)},ZS:function(a){a.I("dragging",this.sk,this).I("dragend",this.Wn,this)},hl:function(){this.Ld.r("edit")},sk:function(a){a=a.target;var b=a.getPosition();a===this.sd?this.aH(b):this.Hw(b,a)},Wn:function(){this.hl();this.r("dragend",{type:"dragend",target:this.Ld})},aH:function(a){this.Ld.setCenter(a);this.r("move",{type:"move",lnglat:a,target:this.Ld})},Hw:function(a,b){var c=this.Ld.get("center"),d=this.Ld.get("radius"), e=void 0,g=void 0,g=void 0;b===this.Eb[0]?(g=new f.V(a.O,c.P),e=0):(g=new f.V(c.O,a.P),e=1);g=c.Md(g);d[e]=parseFloat(g.toFixed(2));this.Ld.setRadius(d);this.r("adjust",{type:"adjust",radius:d,target:this.Ld})}});window.AMap.EllipseEditor=f.l_; ')
	
_jsload_('AMap.RectangleEditor', 'f.U_=f.ba.extend({ah:".amap-rectangle-drag{width:15px;height:15px;background:url(../../../images/dd-via.png) 50% 50% no-repeat;cursor:pointer}.amap-rectangle-drag.mobile{width:25px;height:25px;background-color:rgba(0,0,0,.15);border-radius:13px}",ga:[f.ka],B:function(a,b){this.CLASS_NAME="AMap.RectangleEditor";f.e.cb(this.CLASS_NAME);this.h=a;this.kg=b;this.qb=f.A.qb},open:function(){var a=this;f.e.add(this.CLASS_NAME,"open");this.sd&&this.Eb||this.Sp();this.Eb&&this.Eb.forEach(function(b){b.set("map", a.h)});this.xw=this.kg.getOptions.draggable;this.kg.g("dragging",this.aT,this);this.kg.g("setBounds",this.aT,this)},close:function(){f.e.add(this.CLASS_NAME,"close");this.sd&&(this.sd.setMap(null),delete this.sd);if(this.Eb){for(var a=0,b=this.Eb.length;a<b;a+=1)this.Eb[a].setMap(null);delete this.Eb}this.kg.setOptions({draggable:this.xw});this.kg.I("dragstart",this.h6,this);this.kg.I("dragging",this.g6,this);this.r("end",{type:"end",target:this.kg})},h6:function(a){this.hO=a.lnglat},g6:function(a){var b= a.lnglat.Va(this.hO);this.hO=a.lnglat;this.sd.setPosition(this.sd.getPosition().add(b));this.Eb.forEach(function(a){return a.setPosition(a.getPosition().add(b))})},Sp:function(){var a=this.kg.get("bounds");this.Eb=[];this.Eb.push(this.Kg(a.Rb));this.Eb.push(this.Kg(a.Kb))},$v:function(a){var b=this.kg.get("radius"),c=b[1];return[a.offset(b[0],0),a.offset(0,c)]},PP:function(a){var b=this.kg.get("center");return a.P===b.P?0:1},Kg:function(a){this.kg.get("bounds");var b=new w.D.ab({position:a,draggable:!0, title:"\\u62d6\\u62fd\\u4fee\\u6539",content:"<div class=\'amap-rectangle-drag"+(f.l.Z?" mobile":"")+"\'></div>",offset:f.l.Z?new f.G(-13,-13):new f.G(-8,-7),zIndex:this.kg.get("zIndex")+1E3});b.la=!0;b.setLabel({content:parseFloat(a.O.toFixed(6))+", "+parseFloat(a.P.toFixed(6)),offset:f.l.Z?new f.G(27,0):new f.G(15,-6)});this.Hv(b);return b},Hv:function(a){a.g("dragging",this.sk,this).g("dragend",this.Wn,this)},ZS:function(a){a.I("dragging",this.sk,this).I("dragend",this.Wn,this)},hl:function(){this.kg.r("edit")}, sk:function(a){a=a.target;var b=a.getPosition();this.Hw(b,a)},Wn:function(){this.hl();this.r("dragend",{type:"dragend",target:this.kg})},aT:function(){var a=this,b=this.kg.getBounds();[b.Rb,b.Kb].forEach(function(b,d){a.Eb[d].set("position",b);a.Eb[d].setLabel({content:parseFloat(b.O.toFixed(6))+", "+parseFloat(b.P.toFixed(6))})})},Hw:function(a,b){var c=null,c=c=null,d=!1;b===this.Eb[0]?(c=this.Eb[1],c=c.get("position"),a.P>=c.P-1E-4&&(a.P=c.P-1E-4,d=!0),a.O>=c.O-1E-4&&(a.O=c.O-1E-4,d=!0),c=new f.Wd(a, c)):(c=this.Eb[0],c=c.get("position"),a.P<=c.P+1E-4&&(a.P=c.P+1E-4,d=!0),a.O<=c.O+1E-4&&(a.O=c.O+1E-4,d=!0),c=new f.Wd(c,a));this.kg.setBounds(c);this.r("adjust",{type:"adjust",bounds:c,target:this.kg});d&&b.setPosition(a)}});window.AMap.RectangleEditor=f.U_; ')

_jsload_('AMap.MarkerClusterer', 'f.g_=f.ba.extend({B:function(a,b){this.CLASS_NAME="AMap.Cluster";this.oj=a;this.h=a.getMap();this.il=a.getGridSize()*b;this.sw=a.getMinClusterSize();this.xs=a.isAverageCenter();this.Vs=a.Vs;this.Ig=null;this.Xa=[];this.yb=this.marker=new w.D.ab;this.yb.la=!0},nT:function(a){if(!this.Ig)this.Ig=a.ui;else if(this.xs){var b=this.Xa.length+1;this.Ig=new f.G((this.Ig.x*(b-1)+a.ui.x)/b,(this.Ig.y*(b-1)+a.ui.y)/b)}a.ZC=!0;a.NI=this;this.Xa.push(a)},Qfa:function(a){-1!==this.Xa.indexOf(a)&&(a.ZC=!1,a.NI= null);return this.Xa.length},wk:function(){for(var a=[],b=[],c=0,d=this.Xa.length;c<d;c+=1)this.Xa[c].eB?a.push(this.Xa[c]):b.push(this.Xa[c]);this.h.remove(a);this.Xa=b;d=b.length;d<this.sw||this.h.getZoom()>this.Vs?(this.h.add(this.Xa),this.UX()):(this.h.remove(this.Xa),this.qia())},remove:function(){this.h.remove(this.Xa);this.UX();this.yb.off("click",this.sD,this);this.Xa=this.Ig=this.h=this.oj=this.yb=null},Zh:function(){return this.Ig},hda:function(a){return Math.abs(a.ui.x-this.Ig.x)<=this.il&& Math.abs(a.ui.y-this.Ig.y)<=this.il},qia:function(){this.oj.kS?this.oj.kS.call(null,{markers:this.Xa,count:this.Xa.length,marker:this.yb}):this.Zfa();this.yb.setPosition(this.h.Ag(this.Ig,20));f.event.addListener(this.yb,"click",this.sD,this);this.yb.setMap(this.h)},Zfa:function(){var a=this.oj.getStyles().length,a=(0,this.oj.AF)(this.Xa,a),a=this.ffa(a.text,this.oj.getStyles()[a.index-1]);this.yb.setContent(a.content);this.yb.setOffset(a.offset)},UX:function(){this.yb.setMap(null)},ffa:function(a, b){var c=document.createElement("div");c.style.width=b.size.width+"px";c.style.height=b.size.height+"px";c.innerHTML=a;c.style.backgroundImage="url("+b.url+")";c.style.textAlign="center";c.style.lineHeight=b.size.height+"px";c.style.backgroundPosition=b.imageOffset?b.imageOffset.x+"px "+b.imageOffset.y+"px":"0 0";c.style.color=b.textColor||"#000";c.style.fontSize=b.textSize?b.textSize+"px":"12px";c.style.cursor="pointer";var d=b.offset||new f.G(0,0);return{content:c,offset:d}},disperse:function(){f.e.add(this.CLASS_NAME, "disperse");if(this.h&&this.yb){var a=this.h.YU(this.Xa,0,new f.G(40,40)),b=this.h.getZoom();a[0]<=b&&(a[0]=b+1);this.h.setZoomAndCenter(a[0],a[1])}},sD:function(){var a=this.oj.GB;this.oj.r("click",{cluster:this,lnglat:this.yb.getPosition(),target:this.oj,markers:this.Xa,map:this.oj.h});a&&!this.oj.stopDisperse&&(this.oj.stopDisperse=void 0,this.disperse())}}); f.F_=f.ba.extend({ga:[f.ka],B:function(a,b,c){this.CLASS_NAME="AMap.MarkerClusterer";f.e.cb(this.CLASS_NAME,c);c=c||{};this.il=c.gridSize||60;this.sw=c.minClusterSize||2;this.Vs=c.maxZoom||18;this.xs=!0;this.kS=c.renderCluserMarker||null;void 0!==c.averageCenter&&(this.xs=c.averageCenter);this.GB=!0;void 0!==c.zoomOnClick&&(this.GB=c.zoomOnClick);if(c.styles)for(var d=0;d<c.styles.length;d+=1)c.styles[d].size=f.a.mn(c.styles[d].size);this.LS=c.styles||this.g3();this.h=null;this.Xa=[];this.ti=[];this.MA= [];this.setMap(a);b&&this.addMarkers(b)},addMarker:function(a){f.e.add(this.CLASS_NAME,"addMarker");this.dS(a)&&this.Zz()},addMarkers:function(a){this.h.p20ToLngLat(f.a.Wc);f.e.add(this.CLASS_NAME,"addMarkers");for(var b=!1,c=0,d=a.length;c<d;c+=1)this.dS(a[c])&&(b=!0);b&&this.Zz()},removeMarker:function(a){f.e.add(this.CLASS_NAME,"removeMarker");this.cB(a)&&(this.wk(),a=f.a.indexOf(this.Xa,a),-1!==a&&this.Xa.splice(a,1))},removeMarkers:function(a){f.e.add(this.CLASS_NAME,"removeMarkers");for(var b= !1,c=0,d=a.length;c<d;c+=1)var e=this.cB(a[c]),b=b||e;if(b){this.wk();a=[];for(c=0;c<this.Xa.length;c+=1)this.Xa[c].eB||a.push(this.Xa[c]);this.Xa=a}},clearMarkers:function(){f.e.add(this.CLASS_NAME,"clearMarkers");this.gP();this.Xa=[]},getClustersCount:function(){f.e.add(this.CLASS_NAME,"getClustersCount");return this.ti.length},getMap:function(){f.e.add(this.CLASS_NAME,"getMap");return this.h},setMap:function(a){f.e.add(this.CLASS_NAME,"setMap");this.h!==a&&(this.gP(),this.g9(),this.h=a,this.k1(), this.Zz())},getMarkers:function(){f.e.add(this.CLASS_NAME,"getMarkers");for(var a=[],b=0,c=this.Xa.length;b<c;b+=1)a.push(this.Xa[b]);return a},setMarkers:function(a){f.e.add(this.CLASS_NAME,"setMarkers");this.clearMarkers();this.addMarkers(a)},getGridSize:function(){f.e.add(this.CLASS_NAME,"getGridSize");return this.il},setGridSize:function(a){f.e.add(this.CLASS_NAME,"setGridSize");this.il!==a&&(this.il=a,this.$n())},getMinClusterSize:function(){f.e.add(this.CLASS_NAME,"getMinClusterSize");return this.sw}, setMinClusterSize:function(a){f.e.add(this.CLASS_NAME,"setMinClusterSize");this.sw!==a&&(this.sw=a,this.$n())},getMaxZoom:function(){f.e.add(this.CLASS_NAME,"getMaxZoom");return this.Vs},setMaxZoom:function(a){f.e.add(this.CLASS_NAME,"setMaxZoom");this.Vs!==a&&(this.Vs=a,this.$n())},isAverageCenter:function(){f.e.add(this.CLASS_NAME,"isAverageCenter");return this.xs},setAverageCenter:function(a){f.e.add(this.CLASS_NAME,"setAverageCenter");this.xs!==a&&(this.xs=a,this.$n())},Rla:function(){return this.GB}, vna:function(a){this.GB=a},getStyles:function(){f.e.add(this.CLASS_NAME,"getStyles");return this.LS},setStyles:function(a){f.e.add(this.CLASS_NAME,"setStyles");this.LS=a;this.$n()},ila:function(){return this.AF},rna:function(a){this.AF=a},Mba:function(a){if("3D"==this.h.view.type)return a;var b=this.h.Xb(a.Kx()),c=this.h.Xb(a.Mx());a=c.x-2*this.il;c=c.y+2*this.il;b=this.h.Ag(new f.G(b.x+2*this.il,b.y-2*this.il));a=this.h.Ag(new f.G(a,c));return new f.Wd(a,b)},dS:function(a){if(a.iD!==this)return a.ZC= !1,a.eB=!1,a.iD=this,a.getDraggable()&&(a.As=f.event.addListener(a,"dragend",this.$n,this)),this.Xa.push(a),!0},Mfa:function(a){a.remove()},cB:function(a){if(a&&a.iD===this){a.eB=!0;a.As&&(f.event.removeListener(a.As),delete a.As);a.iD=null;a.ui=null;var b=a.NI;b&&b.Qfa(a);return!0}return!1},Zz:function(){if(this.h){var a=this.h.get("zoom");if(a<<0===a||"3D"===this.h.view.type){for(var b=this.Mba(this.h.getBounds()),a=Math.pow(2,20-a),c=0,d=this.Xa.length;c<d;c+=1){var e=this.Xa[c];!e.ZC&&b.contains(e.getPosition())&& this.Q0(e,a)}this.wk()}}},wk:function(){for(var a=[],b=[],c=0,d=this.ti.length;c<d;c+=1)this.ti[c].wk(),this.ti[c].Xa.length?b.push(this.ti[c]):a.push(this.ti[c]);this.ti=b;c=0;for(d=a.length;c<d;c+=1)this.Mfa(a[c])},gP:function(){var a,b;a=0;for(b=this.ti.length;a<b;a+=1)this.ti[a].remove();this.ti=[];a=0;for(b=this.Xa.length;a<b;a+=1){var c=this.Xa[a];c.ZC=!1;c.NI=null;c.iD=null;c.ui=null;delete c.eB;c.As&&(f.event.removeListener(c.As),c.As=null);this.Xa[a].setMap(null)}},$n:function(){this.setMarkers(this.Xa)}, refresh:function(){for(var a=0,b=this.Xa.length;a<b;a+=1)this.Xa[a].ui=null;this.$n()},Q0:function(a,b){var c=null,d=Number.MAX_VALUE;a.ui||(a.ui=this.h.Jb(a.getPosition()));for(var e=0,g=this.ti.length;e<g;e+=1){var h=this.ti[e],k=(h.Ig.x-a.ui.x)*(h.Ig.x-a.ui.x)+(h.Ig.y-a.ui.y)*(h.Ig.y-a.ui.y);k<=d&&(d=k,c=h)}c&&c.hda(a)?c.nT(a):(c=new f.g_(this,b),c.nT(a),this.ti.push(c))},k1:function(){this.h&&(this.MA=this.MA.concat([f.event.addListener(this.h,"zoomend",this.$n,this),f.event.addListener(this.h, "moveend",this.Zz,this)]))},g9:function(){for(var a=this.MA.pop();a;)f.event.removeListener(a),a=this.MA.pop()},g3:function(){for(var a=[53,56,66,78,90],b=[],c=0;5>c;c+=1)b.push({url:f.A.qb+"/theme/v1.3/m"+(c+1)+".png",size:new f.Uc(a[c],a[c]),offset:new f.G(-a[c]/2,-a[c]/2,!0)});return b},AF:function(a,b){for(var c=0,d=a.length,e=d;0!==e;)e=parseInt(e/10,10),c+=1;c=Math.min(c,b);return{text:d,index:c}}});window.AMap.MarkerClusterer=f.F_; ')
